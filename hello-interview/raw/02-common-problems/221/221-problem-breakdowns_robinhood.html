<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robinhood System Design Interview Guide</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div><div class="flex flex-col gap-2 md:gap-4"><div class="flex flex-col"><h6 class="MuiTypography-root MuiTypography-h6 mui-zfm63x">Common Problems</h6><h1 class="MuiTypography-root MuiTypography-h2 mui-161snwm">Design a Stock Trading App Like Robinhood</h1></div><div class="flex flex-col md:flex-row gap-2 md:items-center justify-between"><div class="flex flex-col lg:flex-row gap-4 md:items-center"><a target="_blank" rel="noopener noreferrer" class="flex flex-row gap-2 items-center" href="https://www.linkedin.com/in/joseph-antonakakis-323b92a8/" style="text-decoration: none;"><img class="rounded-full" src="https://hellointerview-files.s3.us-west-2.amazonaws.com/public-media/joe-headshot.jpeg" alt="Joseph Antonakakis" width="40" height="40"><div class="flex flex-col"><div class="flex flex-row gap-2 items-center"><p class="MuiTypography-root MuiTypography-body2 mui-ltrqv0">Joseph Antonakakis</p><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit mui-70s7oy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LinkedInIcon"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></div><span class="MuiTypography-root MuiTypography-caption mui-1eozzb8">SWE at Notion, ex-Meta Staff SWE</span></div></a><div class="flex flex-row gap-4 md:gap-8 items-center"><div class="flex flex-row gap-1 items-center" aria-label="Difficulty"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"></path></svg><p class="MuiTypography-root MuiTypography-body2 mui-127w52h">hard</p></div><div class="flex flex-row gap-1 items-center" aria-label="Average time allowed in interview"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg><p class="MuiTypography-root MuiTypography-body2 mui-1pb8xyp">35 min</p></div></div></div><a class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-disableElevation MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-disableElevation mui-1c7cv5a" tabindex="0" href="/practice/system-design/start/robinhood" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"></path></svg>Practice this problem<span class="MuiTouchRipple-root mui-w0pj6f"></span></a></div></div><hr class="MuiDivider-root MuiDivider-fullWidth mui-1rvhejo"></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="understanding-the-problem">Understanding the Problem</h2>
<div class="my-6"><div class="MuiBox-root mui-1fz7ihe"><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>ðŸ“ˆ What is <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://robinhood.com/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Robinhood</a>?</strong>
Robinhood is a commission-free trading platform for stocks, ETFs, options, and cryptocurrencies. It features real-time market data and basic order management. Robinhood isn't an exchange in its own right, but rather a stock broker; it routes trades through market makers ("exchanges") and is compensated by those exchanges via <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/Payment_for_order_flow" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">payment for order flow</a>.</div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="background-financial-markets">Background: Financial Markets</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There's some basic financial terms to understand before jumping into this design:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Symbol</strong>: An abbreviation used to uniquely identify a stock (e.g. <span class="MuiBox-root mui-1vu004u">META</span>, <span class="MuiBox-root mui-1vu004u">AAPL</span>). Also known as a "ticker".</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Order</strong>: An order to buy or sell a stock. Can be a <em>market order</em> or a <em>limit order</em>.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Market Order</strong>: An order to trigger immediate purchase or sale of a stock at the current market price. Has no price target and just specifies a number of shares.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Limit Order</strong>: An order to purchase or sell a stock at a specified price. Specifies a number of shares and a target price, and can sit on an exchange waiting to be filled or cancelled by the original creator of the order.</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Outside of the above financial details, it's worth understanding the responsibilities of Robinhood as a business / system. <strong>Robinhood is a brokerage and interfaces with external entities that actually manage order filling / cancellation.</strong> This means that we're building a brokerage system that facilitates customer orders and provides a customer stock data. <em>We are not building an exchange.</em></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For the purposes of this problem, we can assume Robinhood is interfacing with an "exchange" that has the following capabilities:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Order Processing</strong>: Synchronously places orders and cancels orders via request/response API.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Trade Feed</strong>: Offers subscribing to a trade feed for symbols. "Pushes" data to the client every time a trade occurs, including the symbol, price per share, number of shares, and the <span class="MuiBox-root mui-1vu004u">orderId</span>.</div></li>
</ul>
<div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">For this interview, the interviewer is offering up an external API (the exchange) to aid in building the system. As a candidate, it's in your best interest to briefly clarify the exchange interface (APIs, both synchronous and asynchronous) so you have an idea of the tools at your disposal. Typically, the assumptions you make about the interface have broad consequences in your design, so it's a good idea to align with the interviewer on the details.</div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="functional-requirements"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#1-functional-requirements" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Functional Requirements</a></h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Core Requirements</strong></div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can see live prices of stocks.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can manage orders for stocks (market / limit orders, create / cancel orders).</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Below the line (out of scope)</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can trade outside of market hours.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can trade ETFs, options, crypto.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can see the <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.investopedia.com/terms/o/order-book.asp" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">order book</a> in real time.</div></li>
</ul>
<div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">This question focuses on stock viewing and ordering. It excludes advanced trading behaviors and doesn't primarily involve viewing historical stock or portfolio data. If you're unsure what features to focus on for a feature-rich app like Robinhood or similar, have some brief back and forth with the interviewer to figure out what part of the system they care the most about.</div></div></div></div>
<div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="non-functional-requirements"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#2-non-functional-requirements" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Non-Functional Requirements</a></h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Core Requirements</strong></div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system prefers high consistency for order management; it's <em>essential</em> for users to see up-to-date order information when making trades.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should scale to a high number of trades per day (20M daily active users, 5 trades per day on average, 1000s of symbols).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should have low latency when reflecting symbol price updates and when placing orders (under 200ms).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should minimize the number of active clients connecting to an external exchange API. Exchange data feeds / client connections are typically expensive.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Below the line (out of scope)</strong></div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system connects to multiple exchanges for stock trading.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system manages trading fees / calculations (we can assume fees are not in scope).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system enforces daily limits on trading behavior.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system protects against bot usage.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Here's how it might look on a whiteboard:</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/784a0cb26bf28be6b87b3371314a4355"></div></div></div></div></div></div><div class="my-6"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">For this question, given the small number of functional requirements, the non-functional requirements are even more important to pin down. They characterize the complexity of these deceptively simple live price / order placement capabilities. Enumerating these challenges is important, as it will deeply affect your design.</div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="the-set-up">The Set Up</h2><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="planning-the-approach">Planning the Approach</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before you move on to designing the system, it's important to start by taking a moment to plan your strategy. Generally, we recommend building your design up sequentially, going one by one through your functional requirements. This will help you stay focused and ensure you don't get lost in the weeds as you go. Once you've satisfied the functional requirements, you'll rely on your non-functional requirements to guide you through the deep dives.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="defining-the-core-entities"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#core-entities-2-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Defining the Core Entities</a></h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's go through each high level entity. I like to do this upfront before diving into other aspects of the system so we have a list of concepts to refer back to when talking about the details of the system. At this stage, it isn't necessary to enumerate every column or detail. It's all about laying the foundation.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For Robinhood, the primary entities are pretty straightforward:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>User</strong>: A user of the system.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Symbol</strong>: A stock being traded.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Order</strong>: An order for a buy or sell, created by a user.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In the actual interview, this can be as simple as a short list like this. Just make sure you talk through the entities with your interviewer to ensure you are on the same page.</div><div class="my-4 flex-col w-full max-w-[200px]"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/093e1f2ff2ba56e32bdd4909c37df8a8"></div></div></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="the-api"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#api-design-5-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">The API</a></h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The API is the primary interface that users will interact with. It's important to define the API early on, as it will guide your high-level design. We just need to define an endpoint for each of our functional requirements.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's start with an endpoint to get a symbol, which will include details and price data. We might have an endpoint like this:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>GET /symbol/:name
</span>Response: Symbol</code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To create an order, an endpoint might look like this:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>POST /order
</span>Request: {
  position: "buy",
  symbol: "META",
  priceInCents: 52210,
  numShares: 10
}
Response: Order</code></div></div></pre><div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Note we're using <span class="MuiBox-root mui-1vu004u">priceInCents</span> instead of <span class="MuiBox-root mui-1vu004u">price</span> to avoid floating point precision issues. Especially for financial application it's better to use integers to avoid errors and <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://screenrant.com/justice-league-incarnate-superman-iii-scheme-easter-egg" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">financial scams</a>.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To cancel an order, the endpoint could be as simple as:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>DELETE /order/:id
</span>Response: {
  ok: true
}</code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Finally, to list orders for a user, the request could be:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>GET /orders
</span>Response: Order[] (paginated)</code></div></div></pre><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">With each of these requests, the user information will be passed in the headers (either via session token or JWT). This is a common pattern for APIs and is a good way to ensure that the user is authenticated and authorized to perform the action while preserving security. You should avoid passing user information in the request body, as this can be easily manipulated by the client.</div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="high-level-design"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#high-level-design-10-15-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">High-Level Design</a></h2><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="1-users-can-see-live-prices-of-stocks">1) Users can see live prices of stocks</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The first requirement of Robinhood is allowing users to see the live price of stocks. This might be one stock or many stocks, depending on what the user is viewing in the UI. To keep our design extensible, let's assume a user can see many live stock prices at once. To support this design, let's analyze a few options.</div><div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-ifi55z"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-1ev8i4f" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Bad Solution: Polling Exchange Directly</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This solution involves polling the exchange directly for price data per symbol. The client would poll every few seconds (per symbol), and update the price shown to the user based on the response.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is a simple approach that will not scale and will not minimize exchange client connections / calls. There's a few fundamental problems with this design:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Redundant Exchange Calls</strong>: This approach is a very inefficient way to get price information in terms of exchange call volume. It involves polling, which happens indiscriminately, even if the price has not changed. Additionally, it involves many clients requesting the same information from the exchange, which is wasteful. If 5000 clients are requesting a price at the same time, the price isn't different per client, yet we're expending 5000 calls (repeatedly) to disperse this information.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Slow Updates</strong>: If we're pursuing a polling solution, we'll see slower updates than we'd like to pricing information of symbols. In the non-functional requirements, we indicated we wanted a reasonably short SLA to update clients about symbol prices (under 200ms), and the only way we'd guarantee that with this solution is if we poll data every 200ms, which is unreasonable.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For a design like this, we can rule out polling the exchange directly as a viable option.</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/1cedb71de8cbc28f119aae1b90df0e6c"></div></div></div></div></div></div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Polling Internal Cache</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-1">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This solution still involves polling for price information, but we're polling a symbol service that performs a key-value look-up on an internal cache that is kept up-to-date by a symbol price processor that is listening to prices on the exchange.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach prevents excess connections to the exchange by "proxying" it with a service that listens and records the most essential detail: the symbol price. This price is then made available to clients of Robinhood via polling.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-1">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach is certainly an improvement, but is still subject to some issues. Clients still indiscriminately poll, even if the price has not changed, leading to some wasted HTTP traffic. Additionally, this approach is a slow way to get price updates; the polling interval dictates the worst-case SLA for a price update propagating to the client. Can we do better?</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/d018fdc8c54abd7e37e2481bb94486b6"></div></div></div></div></div></div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Server Sent Event (SSE) Price Updates</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-2">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A great approach here involves Server Sent Events (SSE). SSE is a persistent connection (similar to  websockets), but it is unidirectional and goes over HTTP instead of a separate protocol. For this example, the client isn't sending us data, so SSE is a superior choice to websockets. For more details on reasoning through the websocket vs. SSE trade-off analysis, feel free to reference our <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/fb-live-comments#2-viewers-can-see-all-comments-in-near-real-time-as-they-are-posted" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">FB Live Comments write-up</a>.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach involves re-working our API to instead have a <span class="MuiBox-root mui-1vu004u">/subscribe</span> <span class="MuiBox-root mui-1vu004u">POST</span> request, with a body containing a list of symbols we want to subscribe to. Our backend can then setup a SSE connection between the client and a symbol service, and send the client an initial list of symbol prices. This initial list of prices is serviced by a cache that is kept up-to-date by a processor that is listening to the exchange. Additionally, that processor is sending our symbol service those prices so that the symbol service can send that data to clients that have subscribed to price updates for different symbols.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-2">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Adding SSE introduces challenges, mainly involving maintaining a connection between client and server. The load balancer will need to be configured to support "sticky sessions" so that a user and server can maintain a connection to promote data transfer. Additionally, a persistent connection means we have to consider how disconnects / reconnects work. Finally, we need to consider how we route user connections and symbol data. Several of these details are covered later in our deep dive sections, so stay tuned.</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/5f5ae9a71a982d2c286518381a09723c"></div></div></div></div></div></div></div></div></div></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="2-users-can-manage-orders-for-stocks">2) Users can manage orders for stocks</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The second requirement of Robinhood is allowing users to manage orders for stocks. Users should be able to create orders (limit or market), cancel outstanding orders, and list user orders.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's consider our options for creating and cancelling orders via the exchange.</div><div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-ifi55z"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-1ev8i4f" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Bad Solution: Send Orders Directly to Exchange</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-3">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This solution involves directly interacting with the exchange to submit orders. Any orders issued by the client are directly submitted to the exchange.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-3">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While this is a "mainline" way to submit orders that cuts out any incurred latency from a backend proxying the exchange, it can lead to large number of exchange clients and concurrent requests, which will be very expensive. Additionally, there's no clear path for the client to check status of an order, outside of polling the exchange or directly listening to trade feeds, both of which aren't viable solutions. Finally, the client is exclusively responsible for tracking orders. This isn't great, as we can't consider the client's storage to be reliable; the user might uninstall the app or the phone hardware might fail.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's consider other solutions.</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/b6edc4f13d7b1448cc0fe9830437363b"></div></div></div></div></div></div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Send Orders to Dispatch Service via Queue</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-4">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This solution involves sending orders to an order service, which enqueues them for an order dispatch service. This soluton avoids excess exchange clients by proxying the exchange order execution with the order dispatch service. This service can bear the responsibility of efficient exchange communication. This service sends orders to this dispatch service via a queue. The queue prevents the dispatch service from being overloaded, and the queue volume can serve as a metric that the dispatch service could elastically scale off of.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-4">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach is on the right track as it proxies the exchange and allows a path for elastic scalability in the face of increased order load (e.g. bursts in trading traffic). However, this approach breaks down when we consider our tight order SLA (under 200ms as a goal).</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If we consider moments of high queue load, perhaps during high trading traffic and before the order dispatch service has scaled up, orders might take a while to be dispatched to the exchange, which could violate our goal SLA. In particular sensitive moments of trading, this can be really bad for users. Imagine a user who wants to quickly order stocks or quickly cancel an outstanding order. It would be unacceptable for them to be left waiting for our dispatcher to eventually handle their order, or for our service to start more machines up to scale up given increased queue load.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">What other options do we have?</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/f0d0bd82550331e7720b5ad7d3c7e90d"></div></div></div></div></div></div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Order Gateway</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-5">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach involves sending our orders directly from the order service to an order dispatch gateway. The gateway would enable external internet communication with the exchange via the order service. The gateway would make the requests to the exchange appear as if they were originating from a small set of IPs.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For this approach, our gateway would be an <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">AWS NAT gateway</a> which would allow for our order services to make requests to the exchange but then appear under a single or small number of IPs (<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">elastic IPs</a>, in AWS terms).</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Given that the gateway is managing outbound requests, this approach relies on the order service that is accepting requests from the client to play a role in actually managing orders. This service will run business logic to manage orders and will scale up / down as necessary given order volume. Given this search is being routed to from clients, we might make the auto-scaling criterion for this service quite sensitive (e.g. auto-scale when average 50% CPU usage is hit across the fleet) or we might over-provision this service to absorb trading spikes.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-5">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach requires our order service to do more to manage orders, meaning it will need to be written in a way that is both efficient for client interaction and efficient for exchange interaction (e.g. potentially batching orders together).</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/2f078a2cf5e4ffe7b8e12d02654d2fa2"></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now that we know how we'll dispatch orders to the exchange, we also must consider how we'll store orders on our side for the purposes of exposing them to the user. The user should be able to <span class="MuiBox-root mui-1vu004u">GET /orders</span> to see all their outstanding orders, so how might we keep data on our side to service this request?</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In order to track orders, we can stand up an order database that is updated when orders are created or cancelled. The order database will be a relational database to promote consistency via ACID guarantees, and will be partitioned on <span class="MuiBox-root mui-1vu004u">userId</span> (the ID of the user submitting order changes). This will make querying orders of a user fast, as the query will go to a single node.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The order itself will contain information about the order submitted / cancelled. It will also contain data about the state of the order (<span class="MuiBox-root mui-1vu004u">pending</span> prior to being submitted to the exchange, <span class="MuiBox-root mui-1vu004u">submitted</span> when it's submitted to the exchange, etc.). Finally, the order will contain an <span class="MuiBox-root mui-1vu004u">externalOrderId</span> field, which will be populated by the ID that the exchange responds with when the order service submits the order synchronously.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Additionally, to keep these orders up-to-date, we'll need some sort of trade processor tailing the exchange's trades to see if orders maintained on our side get updated.</div><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">Of note, this trade processor would be a fleet of machines that are connected to the exchange in some way to receive price updates. The communication interface here doesn't matter too much. For most systems like this, a client of the exchange like Robinhood would setup a webhook endpoint and register that with the exchange, and the exchange would call the webhook whenever it had updates. In the case of webhooks, the trade processor would have a load balancer and a fleet of machines serving that webhook endpoint. For the sake of simplicity, we visualize the trade processor as a single square on our flowchart.</div></div></div></div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/007f3c6006c64264d5d49df65ba2dc75"></div></div></div></div></div></div><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">You might be wondering how we concretely reflect updates based on the exchange's trade feed. Stay tuned, as we'll dive into this in one of our deep dive sections.</div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="potential-deep-dives"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#deep-dives-10-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Potential Deep Dives</a></h2><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="1-how-can-the-system-scale-up-live-price-updates">1) How can the system scale up live price updates?</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">It's worth considering how the system will scale live price updates. If many users are subscribing to price updates from several stocks, the system will need to ensure that price updates are successfully propagated to the user via SSE.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The main problem we need to solve is: <strong>how do we route symbol price updates to the symbol service servers connected to users who care about those symbol updates?</strong></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To enable this functionality in a scalable way, we can leverage <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://redis.io/docs/latest/develop/interact/pubsub/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Redis pub/sub</a> to publish / subscribe to price updates. Users can subscribe to price updates via the symbol service and the symbol service can ensure it is subscribed to symbol price updates via Redis for all the symbols the users care about. The new system diagram might look like this now:</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/251b2fe402024e62942d14d398f6323f"></div></div></div></div></div></div><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;">Want to learn more about Redis? Check out our <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/redis" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Redis deep dive</a> for in-depth discussion of the different ways Redis can be used practically in system design interviews.</div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's walk through the full workflow for price updates:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">A user subscribes via a symbol service server. The server tracks <span class="MuiBox-root mui-1vu004u">Symbol -&gt; Set&lt;userId&gt;</span> mapping, so it adds an entry for each symbol the user is subscribed to.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The symbol service server is managing subscriptions to Redis pub/sub for channels corresponding to each symbol. It ensures that it has an active subscription for each symbol the user is subscribed to. If it lacks a subscription, it subscribes to the channel for the symbol.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">When a symbol changes price, that price update is processed by the symbol price processor, which publishes that price update to Redis. Each symbol service server that is subscribed to that symbol's price updates get the price update via subscription. They then fan-out and send that price update to all users who care about that symbol's price updates.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If a user unsubscribes from symbols or disconnects (detected via some heartbeat mechanism), the symbol service server will go through each symbol they were subscribed to and removes them from the <span class="MuiBox-root mui-1vu004u">Set&lt;userId&gt;</span>. If the symbol service server no longer has any users subscribed to a symbol, it can unsubscribe from the Redis channel for that symbol.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The above would scale as it would enable our users to evenly distribute load across the symbol service. Additionally, it would be self-regulating in managing what price updates are being propagated to symbol service servers.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="2-how-does-the-system-track-order-updates">2) How does the system track order updates?</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When digging into the order dispatch flow, it's worth clarifying how we'll ensure our order DB is updated as orders are updated on the exchange.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Firstly, it's not clear from our current design how the trade processor might reflect updates in the orders DB, based off just a trade. There's no efficient way for the trade processor to look-up a trade via the <span class="MuiBox-root mui-1vu004u">externalOrderId</span> to update a row in the <span class="MuiBox-root mui-1vu004u">Order</span> table, given that the table is partitioned by <span class="MuiBox-root mui-1vu004u">userId</span> . This necessitates a separate key-value data store mapping <span class="MuiBox-root mui-1vu004u">externalOrderId</span> to the <span class="MuiBox-root mui-1vu004u">(orderId, userId)</span> that is corresponds to. For this key-value store, we could use something like <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://rocksdb.org/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">RocksDB</a>. This key-value store would be populated by the order service after an order is submitted to the exchange synchronously.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This new key-value store enables the trade processor to quickly determine whether the trade involved an order from our system, and subsequently look up the order (go to shard via <span class="MuiBox-root mui-1vu004u">userId</span> -&gt; look up <span class="MuiBox-root mui-1vu004u">Order</span> via <span class="MuiBox-root mui-1vu004u">orderId</span>) to update the <span class="MuiBox-root mui-1vu004u">Order</span>'s details. The new system diagram might look like this:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3032.7089032774934 1633.173574019309">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="3032.7089032774934" height="1633.173574019309" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 362.895537265269) rotate(0 101.90695988861125 75.10347326861086)"><path d="M32 0 C70.51 -0.97, 109.85 0.61, 171.81 0 M32 0 C84.36 -1.57, 136.5 -1.26, 171.81 0 M171.81 0 C193.44 1.11, 204.42 11.55, 203.81 32 M171.81 0 C193.08 -1.5, 203.7 11.24, 203.81 32 M203.81 32 C202.64 61.48, 203.45 86.29, 203.81 118.21 M203.81 32 C204.11 59.74, 204.41 86.81, 203.81 118.21 M203.81 118.21 C202.62 140.23, 192.74 151.31, 171.81 150.21 M203.81 118.21 C205.92 138.93, 195.01 150.08, 171.81 150.21 M171.81 150.21 C141.14 150.48, 114.88 150.48, 32 150.21 M171.81 150.21 C132.66 150.28, 92.69 150.83, 32 150.21 M32 150.21 C11.4 151.92, 0.76 139.81, 0 118.21 M32 150.21 C12.03 149.13, 0.93 139.69, 0 118.21 M0 118.21 C0.83 98.71, 0.98 80.66, 0 32 M0 118.21 C-0.3 91.95, -1.33 66.07, 0 32 M0 32 C0.98 9.18, 8.87 1.17, 32 0 M0 32 C-2.3 8.38, 8.53 0.79, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(87.46360051361125 425.49901053387987) rotate(0 24.443359375 12.5)"><text x="24.443359375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g stroke-linecap="round"><g transform="translate(236.14916150411955 443.4880517197107) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M0.26 0.85 C35.13 1.1, 173.55 1.79, 208.48 1.65 M-1.06 0.25 C34.25 0.14, 175.73 -0.22, 210.8 -0.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(236.14916150411955 443.4880517197107) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M182.62 10.15 C190.87 6.36, 197.46 6.12, 210.8 -0.11 M182.62 10.15 C188.98 8.55, 195.42 6.14, 210.8 -0.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(236.14916150411955 443.4880517197107) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M182.61 -10.37 C190.9 -9.17, 197.48 -4.42, 210.8 -0.11 M182.61 -10.37 C189.14 -7.39, 195.59 -5.21, 210.8 -0.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(272.20008159483405 303.02089503595016) rotate(0 89.23990631103516 62.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">/subscribe</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">(gets initial prices</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">and subscribes to</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">feed)</text></g><g stroke-linecap="round" transform="translate(470.3146559194429 260.7945000011241) rotate(0 106.39453125 292.3810662019501)"><path d="M32 0 C65.88 0.84, 101.9 -0.46, 180.79 0 M32 0 C84.83 -1.31, 137.67 -0.41, 180.79 0 M180.79 0 C202.63 -0.29, 211.26 9.61, 212.79 32 M180.79 0 C203.76 -0.27, 210.69 11.14, 212.79 32 M212.79 32 C214.52 213.81, 214.06 394.87, 212.79 552.76 M212.79 32 C212.73 206.12, 212.68 380.44, 212.79 552.76 M212.79 552.76 C210.98 575.28, 202.36 583.38, 180.79 584.76 M212.79 552.76 C212.92 575.99, 202.25 584.37, 180.79 584.76 M180.79 584.76 C146.23 585.33, 112.27 586.09, 32 584.76 M180.79 584.76 C124.01 584.5, 66.44 585.03, 32 584.76 M32 584.76 C9.02 584.17, -1.27 574.67, 0 552.76 M32 584.76 C9.84 585.59, 0.02 574.27, 0 552.76 M0 552.76 C0.1 347.03, 0.61 142.51, 0 32 M0 552.76 C1.47 434.83, 1.5 317.84, 0 32 M0 32 C1.08 8.74, 10.88 1.96, 32 0 M0 32 C-2.21 11.66, 11.47 1.98, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(505.2384733657782 323.75196205241264) rotate(0 83.77995300292969 62.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">API Gateway</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">&amp; Load Balancer</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- routing</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- authentication</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- rate limiting</text></g><g stroke-linecap="round"><g transform="translate(703.1221613313937 432.4914618560124) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M0.18 0.66 C39.05 0.44, 195.28 -1.24, 234.22 -1.88 M-1.19 -0.03 C37.48 -0.57, 194.42 -3.35, 233.46 -3.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(703.1221613313937 432.4914618560124) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M205.42 6.94 C217.22 3.45, 227.65 -1.26, 233.46 -3.72 M205.42 6.94 C212.26 4.22, 217.82 1.34, 233.46 -3.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(703.1221613313937 432.4914618560124) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M205.13 -13.58 C216.94 -9.27, 227.48 -6.19, 233.46 -3.72 M205.13 -13.58 C212.02 -11.48, 217.65 -9.55, 233.46 -3.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(965.1041017541684 308.679429030095) rotate(0 167.23280526761846 116.62194406415028)"><path d="M32 0 C117.81 -0.69, 201.21 -0.72, 302.47 0 M32 0 C119.23 -0.1, 208.22 0.22, 302.47 0 M302.47 0 C321.97 0.41, 335.44 12.26, 334.47 32 M302.47 0 C323.51 0.22, 334.87 9.57, 334.47 32 M334.47 32 C336.16 74.52, 334.52 114.99, 334.47 201.24 M334.47 32 C333.05 81.14, 332.99 132.49, 334.47 201.24 M334.47 201.24 C334.58 222.24, 322.51 233, 302.47 233.24 M334.47 201.24 C335.39 223.14, 323.77 235.06, 302.47 233.24 M302.47 233.24 C211.66 234.98, 119.71 234.69, 32 233.24 M302.47 233.24 C219.11 232.84, 136.46 232.9, 32 233.24 M32 233.24 C10.68 233.4, 1.89 222.69, 0 201.24 M32 233.24 C11.84 233.86, -1.19 224.66, 0 201.24 M0 201.24 C2.43 140.21, -0.73 81.32, 0 32 M0 201.24 C-0.81 145.63, -1.88 88.48, 0 32 M0 32 C0.7 12.39, 10.4 -0.32, 32 0 M0 32 C-1.4 10.47, 10.26 -1.22, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1038.2011648342868 375.30137309424526) rotate(0 94.1357421875 50)"><text x="94.1357421875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Service</text><text x="94.1357421875" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="94.1357421875" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Tracks:</text><text x="94.1357421875" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol -&gt; Set&lt;userId&gt;</text></g><g stroke-linecap="round"><g transform="translate(946.6217266469357 463.5119609493213) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M-0.06 0.3 C-119.59 0.73, -597.49 1.65, -717.22 1.83 M-1.55 -0.59 C-121.21 0.1, -598.92 2.78, -718 3.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(946.6217266469357 463.5119609493213) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M-689.86 -7.12 C-697.8 -3.54, -706.94 -2.49, -718 3.28 M-689.86 -7.12 C-697.66 -4.38, -703.22 -1.22, -718 3.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(946.6217266469357 463.5119609493213) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M-689.76 13.4 C-697.59 10.89, -706.77 5.84, -718 3.28 M-689.76 13.4 C-697.73 11.07, -703.32 9.15, -718 3.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(736.1115373543471 485.18377137678) rotate(0 97.85990905761719 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SSE (price updates)</text></g><g stroke-linecap="round" transform="translate(1443.560681971132 73.51642694684779) rotate(0 206.18050859452387 120.60326796357754)"><path d="M258.75 30.25 C290.76 52.14, 324.73 68.58, 360.61 90.75 M258.75 30.25 C291.59 48.94, 324.55 67.77, 360.61 90.75 M360.61 90.75 C411.17 121.69, 411.95 122.11, 360.61 151.25 M360.61 90.75 C414.47 120.39, 414.22 120.87, 360.61 151.25 M360.61 151.25 C338.25 163.99, 319.93 176.5, 258.75 210.96 M360.61 151.25 C331.81 168.26, 302.57 185.7, 258.75 210.96 M258.75 210.96 C207.73 242.92, 207.76 241.48, 155.25 210.96 M258.75 210.96 C208.37 240.13, 207.93 241.35, 155.25 210.96 M155.25 210.96 C133.45 196.58, 111.05 184.3, 51.75 151.25 M155.25 210.96 C123.35 192.91, 90.49 175.18, 51.75 151.25 M51.75 151.25 C0.98 119.51, -1.79 122.17, 51.75 90.75 M51.75 151.25 C-2.3 118.71, -2.13 121.79, 51.75 90.75 M51.75 90.75 C90.95 67.29, 126.52 48.48, 155.25 30.25 M51.75 90.75 C91.17 67.48, 131.54 43.69, 155.25 30.25 M155.25 30.25 C207.52 -0.74, 205.3 -1.8, 258.75 30.25 M155.25 30.25 C205.65 -2.15, 205.94 0.14, 258.75 30.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1591.047420643394 181.81806092863656) rotate(0 58.603515625 12.5)"><text x="58.603515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Cache</text></g><g transform="translate(1452.5082213349597 10) rotate(0 234.70980834960938 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Key: Symbol </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Value: JSON with symbol details + current price</text></g><g stroke-linecap="round"><g transform="translate(1311.751534629937 378.3645826266529) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M0.59 0.95 C33.81 -21.56, 165.25 -112.08, 198.26 -134.82 M-0.57 0.41 C32.58 -21.91, 164.14 -110.74, 197.23 -133.23" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1311.751534629937 378.3645826266529) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M179.64 -108.93 C184.85 -114.33, 187.12 -118.81, 197.23 -133.23 M179.64 -108.93 C184.01 -114.56, 189.57 -121.51, 197.23 -133.23" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1311.751534629937 378.3645826266529) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M168.13 -125.92 C175.78 -127.84, 180.45 -128.76, 197.23 -133.23 M168.13 -125.92 C175.31 -127.31, 183.77 -129.97, 197.23 -133.23" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1266.1467493208256 233.34128963492185) rotate(0 108.26988983154297 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Queries (initial prices </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">on subscription)</text></g><g stroke-linecap="round" transform="translate(2028.4406162861742 357.7581211234592) rotate(0 158.99204359673047 91.78681198910078)"><path d="M32 0 C104.26 -1.33, 178.62 -0.69, 285.98 0 M32 0 C122.92 0.5, 211.8 1.03, 285.98 0 M285.98 0 C307.55 -1.38, 318.1 12.31, 317.98 32 M285.98 0 C307.45 -0.39, 316.5 10.39, 317.98 32 M317.98 32 C319.85 73.41, 319.99 114.12, 317.98 151.57 M317.98 32 C319.1 69.54, 317.87 106.66, 317.98 151.57 M317.98 151.57 C316.72 173.48, 306.6 184.3, 285.98 183.57 M317.98 151.57 C318 173.08, 309.49 183.7, 285.98 183.57 M285.98 183.57 C198.33 183.3, 106.54 181.06, 32 183.57 M285.98 183.57 C194.13 181.81, 104.22 180.74, 32 183.57 M32 183.57 C10.88 185.53, -1.92 173.77, 0 151.57 M32 183.57 C11.47 185.55, -0.31 172.54, 0 151.57 M0 151.57 C-0.95 123.49, -0.64 92.67, 0 32 M0 151.57 C0.24 126.52, 1.45 102.19, 0 32 M0 32 C0.2 9.16, 9.88 -1.76, 32 0 M0 32 C-1.41 8.65, 12.43 -0.79, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2091.8857848829048 437.04493311256) rotate(0 95.546875 12.5)"><text x="95.546875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Price Processor</text></g><g stroke-linecap="round" transform="translate(2732.3513664001184 355.40602391187895) rotate(0 145.17876843868748 94.99884226153995)"><path d="M32 0 C87.37 1.97, 140.38 1.78, 258.36 0 M32 0 C98.75 -1.74, 165.35 -0.45, 258.36 0 M258.36 0 C279.8 -0.34, 289.07 10.43, 290.36 32 M258.36 0 C280.62 0.56, 290.33 12.48, 290.36 32 M290.36 32 C291.71 75.59, 290.5 117.61, 290.36 158 M290.36 32 C288.69 70.89, 288.96 109.57, 290.36 158 M290.36 158 C290.37 179.48, 281.58 190.11, 258.36 190 M290.36 158 C291.53 179.95, 278.51 192.08, 258.36 190 M258.36 190 C180.41 186.55, 98.74 186.67, 32 190 M258.36 190 C182.75 188.97, 106.15 188.49, 32 190 M32 190 C11.36 191.72, -0.27 179.01, 0 158 M32 190 C9.27 189.8, -0.41 178.12, 0 158 M0 158 C-1.33 115.76, -1.4 74.94, 0 32 M0 158 C-0.85 118.7, -1.34 80.02, 0 32 M0 32 C-1.22 8.91, 12.2 -0.69, 32 0 M0 32 C-1.38 10, 11.65 -0.57, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2838.1063067138057 437.9048661734189) rotate(0 39.423828125 12.5)"><text x="39.423828125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Exchange</text></g><g stroke-linecap="round"><g transform="translate(2719.5721130733255 445.74994033678195) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M0.97 -0.07 C-59.39 0.35, -300.9 2.07, -361.03 2.19 M0.02 -1.15 C-60.07 -1.04, -298.8 0, -358.89 0.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2719.5721130733255 445.74994033678195) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M-330.76 -9.97 C-341.92 -7.48, -351.64 -1.35, -358.89 0.45 M-330.76 -9.97 C-337.19 -7.51, -344.39 -5.05, -358.89 0.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2719.5721130733255 445.74994033678195) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M-330.64 10.55 C-341.79 5.01, -351.56 3.1, -358.89 0.45 M-330.64 10.55 C-337.12 8.27, -344.34 5.99, -358.89 0.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2479.6742322940117 400.3113031728335) rotate(0 68.10993194580078 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Price updates</text></g><g stroke-linecap="round"><g transform="translate(1999.8716072439274 416.9427507265991) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M0.14 -0.83 C-42.1 -23.76, -212.08 -114.01, -254.52 -136.88 M-1.24 1.35 C-43.54 -21.96, -213.1 -115.45, -255.43 -138.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1999.8716072439274 416.9427507265991) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M-225.78 -133.93 C-233.4 -134.74, -236.59 -135.69, -255.43 -138.49 M-225.78 -133.93 C-233.74 -135.01, -242.55 -135.76, -255.43 -138.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1999.8716072439274 416.9427507265991) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M-235.65 -115.94 C-241.31 -120.53, -242.43 -125.25, -255.43 -138.49 M-235.65 -115.94 C-240.7 -122.1, -246.71 -127.93, -255.43 -138.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1873.727464352305 294.9396697823995) rotate(0 40.97996520996094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g transform="translate(767.3552686012044 389.03279652463425) rotate(0 51.209938049316406 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">subscribe()</text></g><g stroke-linecap="round"><g transform="translate(707.6795241858126 648.8176410849937) rotate(0 129.87386636088775 44.11267239925246)"><path d="M-0.77 -0.14 C42.59 14.64, 216.81 73.63, 260.23 88.52 M1.02 -1.27 C44.26 13.16, 216.55 71.78, 259.54 86.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(707.6795241858126 648.8176410849937) rotate(0 129.87386636088775 44.11267239925246)"><path d="M229.54 87.15 C238.47 87.96, 248.37 86.95, 259.54 86.55 M229.54 87.15 C241.28 86.8, 252.86 85.97, 259.54 86.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(707.6795241858126 648.8176410849937) rotate(0 129.87386636088775 44.11267239925246)"><path d="M236.17 67.73 C243.04 74.44, 250.91 79.36, 259.54 86.55 M236.17 67.73 C245.47 74.79, 254.54 81.32, 259.54 86.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(232.58488405108073 504.2770966832959) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M0.48 0.29 C37.24 0.46, 183.15 0.74, 219.77 0.85 M-0.72 -0.6 C35.94 -0.74, 182.08 -0.73, 218.81 -0.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(232.58488405108073 504.2770966832959) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M190.63 9.5 C197.77 6.94, 205.5 5.28, 218.81 -0.77 M190.63 9.5 C202.05 5.04, 212.73 1.6, 218.81 -0.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(232.58488405108073 504.2770966832959) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M190.62 -11.02 C197.73 -8.75, 205.47 -5.58, 218.81 -0.77 M190.62 -11.02 C202.12 -7.57, 212.81 -3.09, 218.81 -0.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(215.39735147524334 523.2235993516533) rotate(0 121.58992767333984 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">POST + DELETE /order</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">GET /orders</text></g><g transform="translate(743.360595954684 717.3065861054547) rotate(0 67.12993621826172 37.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">createOrder()</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">deleteOrder()</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">getOrders()</text></g><g stroke-linecap="round" transform="translate(979.5545494320868 651.9924933368511) rotate(0 163.9612217241738 114.22912540394009)"><path d="M32 0 C121.02 0.15, 208.88 -0.15, 295.92 0 M32 0 C112.36 0.85, 193.43 0.9, 295.92 0 M295.92 0 C317.27 0.15, 329.81 10.78, 327.92 32 M295.92 0 C318.43 0.61, 326.74 12.75, 327.92 32 M327.92 32 C327.87 87.37, 324.71 144.88, 327.92 196.46 M327.92 32 C328.92 87.98, 327.85 142.42, 327.92 196.46 M327.92 196.46 C328.62 219.51, 316.99 228.14, 295.92 228.46 M327.92 196.46 C326.52 217.59, 316.84 227.24, 295.92 228.46 M295.92 228.46 C208.48 225.75, 122.4 225.95, 32 228.46 M295.92 228.46 C215.25 229.61, 134.12 229.51, 32 228.46 M32 228.46 C9.44 226.71, 1.53 217.1, 0 196.46 M32 228.46 C9.29 227.79, 0.99 217.22, 0 196.46 M0 196.46 C-0.43 155.76, 0.86 110.68, 0 32 M0 196.46 C1.36 152.83, 2.06 109.79, 0 32 M0 32 C1.43 11.62, 12.04 -1.06, 32 0 M0 32 C0.95 12.06, 9.26 0.68, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1085.2316056188902 758.5368485958952) rotate(0 65.77993774414062 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order Service</text></g><g stroke-linecap="round"><g transform="translate(1314.115500287222 767.7321839702072) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M0.49 0.08 C32.13 0.28, 158.87 0.42, 190.6 0.63 M-0.72 -0.93 C31.23 -0.51, 160.45 1.97, 192.79 1.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1314.115500287222 767.7321839702072) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M164.49 11.93 C174.84 6.6, 184.29 3.4, 192.79 1.98 M164.49 11.93 C173.83 8.63, 184.07 5.34, 192.79 1.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1314.115500287222 767.7321839702072) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M164.72 -8.59 C174.89 -6.55, 184.26 -2.37, 192.79 1.98 M164.72 -8.59 C173.91 -5.14, 184.08 -1.68, 192.79 1.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1854.1541289908491 770.4623689076816) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M-0.99 -0.35 C144.31 -38.84, 726.64 -192.43, 872.24 -230.83 M0.7 -1.59 C146.33 -40.45, 729.4 -194.23, 874.55 -232.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1854.1541289908491 770.4623689076816) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M849.92 -215.64 C857.71 -222.54, 867.26 -227.83, 874.55 -232.77 M849.92 -215.64 C859.14 -221.36, 866.98 -226.91, 874.55 -232.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1854.1541289908491 770.4623689076816) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M844.67 -235.48 C854.26 -235.58, 865.6 -234.11, 874.55 -232.77 M844.67 -235.48 C855.66 -234.54, 865.26 -233.41, 874.55 -232.77" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2226.0241731985443 688.7146847928798) rotate(0 174.79986572265625 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Execute order creations / cancels </text></g><g stroke-linecap="round" transform="translate(1519.6693763227377 647.7510283395441) rotate(0 156.69140625 118.0625)"><path d="M32 0 C91.62 0.75, 150.19 2.27, 281.38 0 M32 0 C107.78 0.19, 184.79 -1.15, 281.38 0 M281.38 0 C300.92 1.17, 311.39 8.68, 313.38 32 M281.38 0 C300.58 0.79, 314.63 8.45, 313.38 32 M313.38 32 C315.93 86.13, 316.79 138.59, 313.38 204.13 M313.38 32 C312.16 80.34, 312.6 129.36, 313.38 204.13 M313.38 204.13 C311.69 223.66, 301.54 234.26, 281.38 236.13 M313.38 204.13 C312.32 225.6, 304.44 238.05, 281.38 236.13 M281.38 236.13 C202.65 234.33, 125.37 236.58, 32 236.13 M281.38 236.13 C215.48 235.33, 148.53 236.02, 32 236.13 M32 236.13 C11.17 236.67, 1.51 227.3, 0 204.13 M32 236.13 C9.09 235.31, -1.69 224.08, 0 204.13 M0 204.13 C0.85 151.33, 1.19 97.04, 0 32 M0 204.13 C-1.32 161.91, -0.63 120.03, 0 32 M0 32 C-1.97 10.14, 10.63 -0.64, 32 0 M0 32 C-2.15 11.4, 10.29 1.55, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1576.9564856977377 753.3135283395441) rotate(0 99.404296875 12.5)"><text x="99.404296875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order Dispatch Gateway</text></g><g transform="translate(1339.726940104476 788.0088408395441) rotate(0 67.12993621826172 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">createOrder()</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">deleteOrder()</text></g><g stroke-linecap="round" transform="translate(913.2889611844239 1086.8096801640804) rotate(0 133.1893516127518 144.91196769801354)"><path d="M98.5 3.89 C111.15 -2.37, 129.15 -1.75, 143.48 -0.61 C157.82 0.52, 171.29 4.3, 184.51 10.72 C197.72 17.13, 212.08 27.21, 222.78 37.89 C233.49 48.57, 241.65 61.34, 248.74 74.81 C255.83 88.28, 262.58 103.23, 265.32 118.71 C268.07 134.2, 267.45 152.09, 265.2 167.72 C262.94 183.35, 258.63 198.8, 251.8 212.51 C244.96 226.21, 234.85 239.23, 224.18 249.96 C213.52 260.69, 200.99 270.28, 187.79 276.87 C174.58 283.45, 159.35 288.13, 144.95 289.47 C130.55 290.8, 115.45 288.72, 101.38 284.88 C87.31 281.04, 72.77 274.79, 60.53 266.4 C48.29 258.02, 36.75 246.63, 27.95 234.57 C19.15 222.51, 12.22 208.74, 7.7 194.04 C3.18 179.35, 1.12 162.29, 0.84 146.42 C0.57 130.55, 1.79 113.8, 6.05 98.8 C10.31 83.8, 17.69 68.69, 26.41 56.41 C35.14 44.13, 44.23 34.32, 58.38 25.14 C72.54 15.95, 100.35 4.89, 111.32 1.31 C122.28 -2.28, 123.79 1.23, 124.17 3.64 M173.28 7.72 C186.75 9.73, 199.07 18.25, 210.36 27.07 C221.66 35.9, 232.56 47.8, 241.06 60.69 C249.56 73.58, 256.94 89.1, 261.35 104.39 C265.75 119.68, 268.06 136.62, 267.5 152.44 C266.93 168.26, 263.36 184.95, 257.98 199.31 C252.59 213.67, 244.68 226.67, 235.21 238.6 C225.73 250.52, 213.89 262.72, 201.13 270.86 C188.37 278.99, 172.85 284.21, 158.63 287.4 C144.42 290.58, 130.22 292.16, 115.84 289.96 C101.46 287.77, 85.25 281.53, 72.33 274.22 C59.4 266.92, 48.38 257.16, 38.28 246.13 C28.17 235.11, 17.96 221.95, 11.7 208.06 C5.43 194.17, 1.99 178.4, 0.66 162.77 C-0.67 147.15, 0.43 129.98, 3.73 114.3 C7.03 98.63, 13.23 81.96, 20.48 68.71 C27.73 55.47, 36.49 44.61, 47.23 34.84 C57.96 25.08, 71.25 16.03, 84.88 10.12 C98.5 4.22, 114.49 -0.07, 128.98 -0.56 C143.48 -1.05, 164.9 5.76, 171.87 7.17 C178.83 8.58, 171.53 5.77, 170.77 7.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1002.6957034649595 1219.2534128277425) rotate(0 43.603515625 12.5)"><text x="43.603515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Orders DB</text></g><g stroke-linecap="round"><g transform="translate(1158.294198353542 892.4944483054151) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M0.59 -0.89 C-10.05 29.7, -53.58 154.05, -64.43 184.66 M-0.57 1.25 C-10.79 32.02, -52 152.54, -62.28 182.91" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.294198353542 892.4944483054151) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M0.96 29.11 C-0.89 19.86, 1.68 12.2, 0.59 -0.89 M0.96 29.11 C1.71 22.13, 1.19 18.06, 0.59 -0.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.294198353542 892.4944483054151) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-18.41 22.33 C-15.39 14.67, -8.01 8.7, 0.59 -0.89 M-18.41 22.33 C-13.84 16.64, -10.47 13.93, 0.59 -0.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.294198353542 892.4944483054151) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-62.91 152.91 C-63.97 158.57, -61.16 165.82, -62.28 182.91 M-62.91 152.91 C-62.52 157.96, -62.84 165.92, -62.28 182.91" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.294198353542 892.4944483054151) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-43.49 159.53 C-49.43 163.63, -51.44 169.24, -62.28 182.91 M-43.49 159.53 C-46.93 163.31, -51.14 169.95, -62.28 182.91" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(951.7038002180343 1398.173574019309) rotate(0 437.099609375 112.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- orderId</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- userId</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- externalOrderId</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- symbol</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- shares</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- price</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- state (pending | submitted | filled | partially_filled | pending_cancel | cancelled | failed)</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">... (execution data)</text></g><g transform="translate(886.4908329467917 967.3975011885377) rotate(0 111.87991333007812 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update / query orders</text></g><g stroke-linecap="round" transform="translate(2056.789006723815 1032.502730649181) rotate(0 147.80564180134252 87.84863200912878)"><path d="M32 0 C78.94 2.74, 123.08 2, 263.61 0 M32 0 C124.46 -0.12, 216.22 -0.98, 263.61 0 M263.61 0 C283.73 -0.18, 295.25 9.61, 295.61 32 M263.61 0 C285.54 -0.85, 293.66 8.6, 295.61 32 M295.61 32 C294.69 60.44, 296.24 86.08, 295.61 143.7 M295.61 32 C294.56 56.23, 295.94 81.86, 295.61 143.7 M295.61 143.7 C294.41 164.45, 285.8 175.2, 263.61 175.7 M295.61 143.7 C294.61 166.4, 285.52 176.32, 263.61 175.7 M263.61 175.7 C176.08 173.11, 88.74 174.61, 32 175.7 M263.61 175.7 C197.95 176.7, 131.66 175.84, 32 175.7 M32 175.7 C11.49 176.91, -1.22 165.62, 0 143.7 M32 175.7 C10.84 177.83, -2.26 164.42, 0 143.7 M0 143.7 C0.99 110.09, 1.7 78.06, 0 32 M0 143.7 C-1.32 109.59, -1.44 74.27, 0 32 M0 32 C0.41 9.81, 10.29 1.11, 32 0 M0 32 C-0.91 8.8, 9.18 -0.5, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2140.2440625876575 1107.8513626583099) rotate(0 64.3505859375 12.5)"><text x="64.3505859375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Trade Processor</text></g><g stroke-linecap="round"><g transform="translate(2132.505481586485 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M0.13 1.18 C-88.16 26.34, -370.71 139.82, -529.05 149.84 C-687.4 159.86, -879.7 76.26, -949.95 61.29 M-1.27 0.75 C-89.26 25.65, -368.74 138.2, -526.95 147.99 C-685.15 157.78, -879.92 73.98, -950.49 59.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2132.505481586485 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M-920.55 57.63 C-929.22 56.4, -940.92 59.68, -950.49 59.49 M-920.55 57.63 C-932.72 58.21, -943.84 58.49, -950.49 59.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2132.505481586485 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M-926.36 77.31 C-932.78 69.11, -942.42 65.41, -950.49 59.49 M-926.36 77.31 C-936.26 70.31, -945.14 62.99, -950.49 59.49" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1927.756013011981 1312.9318260051732) rotate(0 71.27993774414062 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update orders</text></g><g stroke-linecap="round"><g transform="translate(2885.562128099107 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M0.42 1.03 C-86.21 87.11, -433.94 431, -520.93 517.01 M-0.82 0.53 C-87.52 86.75, -435.6 432.14, -521.96 518.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2885.562128099107 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M-509.22 491.28 C-509.98 496.6, -514.62 501.2, -521.96 518.44 M-509.22 491.28 C-512.72 498.76, -517.53 506.14, -521.96 518.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2885.562128099107 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M-494.74 505.83 C-498.52 508.23, -506.12 509.85, -521.96 518.44 M-494.74 505.83 C-502.43 508.99, -511.46 512.13, -521.96 518.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2643.680708552227 817.8022025595928) rotate(0 74.68993377685547 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Trade updates</text></g><g stroke-linecap="round" transform="translate(1460.6980403703092 485.35910918073387) rotate(0 172.75057718334529 58.1354987660219)"><path d="M29.07 0 C111.27 1.05, 192.94 1.71, 316.43 0 M29.07 0 C104.2 1.25, 179.88 2, 316.43 0 M316.43 0 C337.31 1.67, 345.7 8.18, 345.5 29.07 M316.43 0 C334.91 -2.03, 344.1 7.67, 345.5 29.07 M345.5 29.07 C344.72 51.81, 344.81 71.97, 345.5 87.2 M345.5 29.07 C346.4 50.88, 344.96 70.5, 345.5 87.2 M345.5 87.2 C344.03 105.38, 336.11 115.99, 316.43 116.27 M345.5 87.2 C347.46 107.28, 337.46 117.36, 316.43 116.27 M316.43 116.27 C211.44 116.24, 105.07 117.28, 29.07 116.27 M316.43 116.27 C203.61 115.46, 90.11 115.94, 29.07 116.27 M29.07 116.27 C9.36 117.62, 0.92 106.83, 0 87.2 M29.07 116.27 C11.53 114.59, -0.99 108.44, 0 87.2 M0 87.2 C-1.09 72.59, 0.87 57.93, 0 29.07 M0 87.2 C0.82 74.48, 1.35 61.46, 0 29.07 M0 29.07 C1.71 9.48, 7.69 -0.99, 29.07 0 M0 29.07 C0.89 10.47, 7.89 -0.19, 29.07 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1576.5003753661545 530.9946079467558) rotate(0 56.9482421875 12.5)"><text x="56.9482421875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Redis pub/sub</text></g><g stroke-linecap="round"><g transform="translate(2023.540701517246 475.81706514501093) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M0.31 -0.44 C-32.63 9.38, -164.87 48.52, -197.84 58.31 M-0.98 -1.72 C-33.54 8.27, -163.33 49.16, -195.66 59.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2023.540701517246 475.81706514501093) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M-171.84 41.04 C-179.4 44.56, -187.18 50.22, -195.66 59.28 M-171.84 41.04 C-176.1 45.66, -181.67 47.84, -195.66 59.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2023.540701517246 475.81706514501093) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M-165.69 60.62 C-174.88 58.63, -184.4 58.77, -195.66 59.28 M-165.69 60.62 C-171.13 61.2, -177.97 59.33, -195.66 59.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1899.3552598061287 530.1283685284507) rotate(0 32.559959411621094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Publish</text></g><g stroke-linecap="round"><g transform="translate(1318.441850576506 455.9541973149262) rotate(0 61.60443701403801 23.965880076112285)"><path d="M-0.71 -1.12 C19.91 7.06, 101.85 39.66, 122.66 48 M1.12 0.9 C21.62 9.39, 100.97 41.88, 121.42 49.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1318.441850576506 455.9541973149262) rotate(0 61.60443701403801 23.965880076112285)"><path d="M91.43 48.76 C96.01 48.19, 104.45 50.78, 121.42 49.58 M91.43 48.76 C102.54 48.42, 113.82 48.74, 121.42 49.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1318.441850576506 455.9541973149262) rotate(0 61.60443701403801 23.965880076112285)"><path d="M98.97 29.67 C101.76 33.17, 108.57 39.87, 121.42 49.58 M98.97 29.67 C107.21 36.6, 115.6 44.24, 121.42 49.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1352.8340168053073 438.6876658243127) rotate(0 113.3598861694336 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Subscribe / unsubscribe</text></g><g stroke-linecap="round"><g transform="translate(1447.1195036296049 545.4306387201559) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M0.9 1 C-21.58 -7.93, -112.61 -44.4, -135.43 -53.51 M-0.09 0.48 C-22.67 -8.33, -113.49 -43.55, -136.31 -52.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1447.1195036296049 545.4306387201559) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M-106.32 -51.8 C-112.26 -51.54, -123.06 -52.69, -136.31 -52.45 M-106.32 -51.8 C-111.91 -52.54, -119.63 -52.63, -136.31 -52.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1447.1195036296049 545.4306387201559) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M-113.76 -32.67 C-117.82 -37.33, -126.73 -43.33, -136.31 -52.45 M-113.76 -32.67 C-117.65 -37.4, -123.79 -41.54, -136.31 -52.45" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1188.7961217332595 547.7830138592362) rotate(0 110.9898910522461 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Consume price updates</text></g><g stroke-linecap="round" transform="translate(1416.6724135165814 1022.6791844056315) rotate(0 132.2202920324894 124.03962627353394)"><path d="M92.1 5.15 C104.54 -0.61, 120.93 0.1, 135.25 0.47 C149.57 0.83, 164.47 2.69, 178.03 7.34 C191.59 11.98, 205.46 19.64, 216.62 28.35 C227.78 37.06, 237.39 48.31, 244.96 59.58 C252.54 70.84, 259.03 83.09, 262.09 95.93 C265.15 108.78, 265.11 123.16, 263.32 136.65 C261.52 150.14, 257.37 164.43, 251.33 176.85 C245.29 189.27, 236.88 201.43, 227.08 211.17 C217.28 220.91, 205.16 229.23, 192.51 235.29 C179.86 241.36, 165.49 245.72, 151.18 247.55 C136.87 249.37, 120.69 249.01, 106.66 246.25 C92.63 243.49, 79.27 237.74, 66.99 231 C54.72 224.26, 42.39 215.97, 33.02 205.81 C23.65 195.64, 16.28 182.46, 10.77 170.01 C5.26 157.57, 0.98 144.55, -0.05 131.15 C-1.08 117.76, 0.63 102.59, 4.58 89.64 C8.54 76.69, 15.41 64.27, 23.7 53.45 C31.99 42.63, 42.4 32.68, 54.33 24.73 C66.26 16.79, 88.02 8.86, 95.26 5.78 C102.51 2.69, 97.07 4.47, 97.8 6.23 M158.24 3.31 C171.83 3.83, 186.35 9.25, 198.57 15.86 C210.8 22.47, 222.07 32.55, 231.6 42.94 C241.13 53.33, 250.06 65.75, 255.76 78.2 C261.45 90.66, 264.96 104.3, 265.75 117.68 C266.53 131.06, 264.96 145.67, 260.47 158.51 C255.98 171.35, 247.18 183.64, 238.82 194.72 C230.46 205.81, 221.86 217.06, 210.32 225.03 C198.78 233.01, 183.37 238.65, 169.59 242.57 C155.81 246.49, 141.55 249.17, 127.65 248.54 C113.75 247.9, 99.52 243.51, 86.2 238.75 C72.88 233.99, 58.81 228.58, 47.74 219.99 C36.68 211.41, 27.07 198.62, 19.82 187.25 C12.56 175.88, 7.29 164.81, 4.21 151.77 C1.14 138.73, 0.09 122.72, 1.35 109.01 C2.61 95.3, 5.69 81.72, 11.76 69.51 C17.83 57.29, 27.5 45.32, 37.75 35.71 C48 26.1, 60.41 17.49, 73.25 11.84 C86.08 6.19, 100.72 3.57, 114.77 1.79 C128.81 0.02, 150.07 0.76, 157.51 1.2 C164.95 1.63, 159.91 2.26, 159.39 4.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1486.706457629932 1121.5095498053047) rotate(0 62.1923828125 25)"><text x="62.1923828125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">External Order </text><text x="62.1923828125" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Metadata DB</text></g><g stroke-linecap="round"><g transform="translate(1300.7208038948465 890.2710901289047) rotate(0 79.36272438455626 77.16168208210092)"><path d="M0.92 -0.41 C27.37 25.43, 131.62 128.24, 158.01 153.98 M-0.06 -1.67 C26.85 24.43, 133.87 129.19, 160.34 155.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1300.7208038948465 890.2710901289047) rotate(0 79.36272438455626 77.16168208210092)"><path d="M133.04 142.89 C138.77 144.46, 145.4 149.48, 160.34 155.33 M133.04 142.89 C140.75 146.43, 148.77 150.5, 160.34 155.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1300.7208038948465 890.2710901289047) rotate(0 79.36272438455626 77.16168208210092)"><path d="M147.42 128.26 C149.58 133.43, 152.78 141.95, 160.34 155.33 M147.42 128.26 C151.11 135.9, 155.17 144, 160.34 155.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1399.4647198846424 939.7907858892686) rotate(0 35.54997253417969 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update</text></g><g stroke-linecap="round"><g transform="translate(2042.3193139970426 1106.1485178641651) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M0.51 -0.3 C-58.79 3.16, -297.17 17.02, -356.54 20.4 M-0.68 -1.5 C-60.12 1.65, -298.49 14.82, -357.76 18.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970426 1106.1485178641651) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-27.03 11.58 C-20.88 7.74, -12.58 6.26, 0.51 -0.3 M-27.03 11.58 C-18.8 7.09, -9.83 2.95, 0.51 -0.3" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970426 1106.1485178641651) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-28.22 -8.91 C-21.85 -7.83, -13.26 -4.4, 0.51 -0.3 M-28.22 -8.91 C-19.44 -6.71, -10.09 -4.14, 0.51 -0.3" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970426 1106.1485178641651) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-330.23 6.75 C-337.37 8.86, -342.3 13.08, -357.76 18.66 M-330.23 6.75 C-339.83 10.54, -348.89 14.19, -357.76 18.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970426 1106.1485178641651) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-329.02 27.23 C-336.39 24.43, -341.61 23.74, -357.76 18.66 M-329.02 27.23 C-339.17 24.33, -348.63 21.28, -357.76 18.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1850.7510087557948 1082.0998144821606) rotate(0 27.189971923828125 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Query</text></g><g transform="translate(1397.5385364623953 1276.6869032678806) rotate(0 181.15985107421875 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Key-value store, mapping: </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">externalOrderId -&gt; (orderId, userId)</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Order update deep dive</span></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="3-how-does-the-system-manage-order-consistency">3) How does the system manage order consistency?</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Order consistency is extremely important and worth deep-diving into. Order consistency is defined as orders being stored with consistency on our side and also consistently managed on the exchange side. As we'll get into, fault-tolerance is important for maintaining order consistency.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before we dig in, we firstly can revisit our order storage mechansim. Our order database is going to be a horizontally partitioned relational database (e.g. Postgres). All order updates will happen on a single node (the partition that the order exists on). All order reads will also occur on a single node, as we'll be partitioning by <span class="MuiBox-root mui-1vu004u">userId</span>.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When an order is created, the system goes through the following workflow:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Store an order in the order database with <span class="MuiBox-root mui-1vu004u">pending</span> as the status. <em>It's important that this is stored first because then we have a record of the client could. If we didn't store this first, then the client could create an order on the exchange, the system could fail, and then our system has no way of knowing there's an outstanding order.</em></div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Submit the order to the exchange. Get back <span class="MuiBox-root mui-1vu004u">externalOrderId</span> immediately (the order submission is synchronous).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Write <span class="MuiBox-root mui-1vu004u">externalOrderId</span> to our key-value database and update the order in the order database with status as <span class="MuiBox-root mui-1vu004u">submitted</span> and <span class="MuiBox-root mui-1vu004u">externalOrderId</span> as the ID received from the DB.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Respond to the client that the order was successful.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The above workflow seems very reasonable, but it might break down if failures occur at different parts of the process. Let's consider several failures, and ways we can mitigate these failures if they pose a risk to our consistency:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure storing order</strong>: If there's a failure storing the order, we can respond with a failure to the client and stop the workflow.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure submitting order to exchange</strong>: If there's a failure submitting the order to the exchange, we can mark the order as <span class="MuiBox-root mui-1vu004u">failed</span> and respond to the client.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure processing order after exchange submission</strong>: If there's an error updating the database after an exchange submission, we might consider having a "clean-up" job that deals with outstanding, <span class="MuiBox-root mui-1vu004u">pending</span> orders in the database. Most exchange APIs offer a <span class="MuiBox-root mui-1vu004u">clientOrderId</span> metadata field when submitting an order (see <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://apisb.etrade.com/docs/api/order/api-order-v1.html#/definitions/PreviewOrderRequest" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">E*TRADE example</a>) so the "clean-up" job can asynchronously query the exchange to see if the order went through via this <span class="MuiBox-root mui-1vu004u">clientOrderId</span> identifier, and do one of two things: 1) record the <span class="MuiBox-root mui-1vu004u">externalOrderId</span> if the order did go through, or 2) mark the order as <span class="MuiBox-root mui-1vu004u">failed</span> if the order didn't go through.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now that we've considered the order flow, let's consider the cancel flow. When an order is cancelled, the system goes through the following workflow:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Update order status to <span class="MuiBox-root mui-1vu004u">pending_cancel</span>. <em>We do this first to enable resolving failed cancels later.</em></div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Submit the order cancellation to the exchange.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Record the order cancellation in the database.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Respond to the client that the cancellation was successful.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's walk through different failures to ensure we are safe from inconsistency:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure updating status to <span class="MuiBox-root mui-1vu004u">pending_cancel</span></strong>:  If there's a failure updating the order status upfront, we respond with a failure to the client and stop the workflow.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure cancelling order</strong>: If there's a failure cancelling the order via the exchange, we can respond with a failure to the client and rely on a "clean-up" process to scan <span class="MuiBox-root mui-1vu004u">pending_cancel</span> orders (ensure they are cancelled).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Failure storing <span class="MuiBox-root mui-1vu004u">cancelled</span> status in DB</strong>: If there's a failure updating the order status in the DB, we can rely on a "clean-up" process to <span class="MuiBox-root mui-1vu004u">pending_cancel</span> orders (ensure they are cancelled, or no-op and just update status to <span class="MuiBox-root mui-1vu004u">cancelled</span> if they have already been cancelled).</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Based on the above analysis, we have 1) a clear understanding of the order create and cancel workflows, and 2) identified the need for a "clean-up" background process to ensure our order state becomes consistent in the face of failures at different points in our order / cancel workflows. Below is the updated system diagram reflecting our changes:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3032.708903277493 1644.5595645807662">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="3032.708903277493" height="1644.5595645807662" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 362.89553726527083) rotate(0 101.90695988861125 75.10347326861086)"><path d="M32 0 C62.16 0.99, 88.26 0.45, 171.81 0 M32 0 C59.35 -0.12, 89.14 -1.5, 171.81 0 M171.81 0 C191.9 -0.59, 205.18 10.06, 203.81 32 M171.81 0 C193.35 0.59, 204.45 12.13, 203.81 32 M203.81 32 C205.33 52.68, 205.55 78.2, 203.81 118.21 M203.81 32 C203.41 51.52, 204.77 69.52, 203.81 118.21 M203.81 118.21 C203.13 138.36, 191.62 151.42, 171.81 150.21 M203.81 118.21 C203.94 138.87, 190.88 151.09, 171.81 150.21 M171.81 150.21 C137.54 148.96, 104.23 150.89, 32 150.21 M171.81 150.21 C140.55 151.7, 107.97 151.68, 32 150.21 M32 150.21 C11.08 151.5, 1.49 139.59, 0 118.21 M32 150.21 C9.27 149.72, -1.06 138.97, 0 118.21 M0 118.21 C1.08 94.54, -0.73 69.54, 0 32 M0 118.21 C-0.26 86.53, -0.26 52.75, 0 32 M0 32 C-0.85 9.17, 11.99 1, 32 0 M0 32 C-1.77 12.97, 9.26 1.05, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(87.46360051361125 425.4990105338817) rotate(0 24.443359375 12.5)"><text x="24.443359375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g stroke-linecap="round"><g transform="translate(236.1491615041191 443.48805171971253) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M0.4 -1.19 C34.99 -0.74, 173.62 1.26, 208.27 1.79 M-0.85 0.8 C34.05 0.99, 175.21 0.21, 210.48 0.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(236.1491615041191 443.48805171971253) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M182.33 10.48 C190.56 5.06, 204.05 1.41, 210.48 0.1 M182.33 10.48 C192.44 6.35, 204.57 2.35, 210.48 0.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(236.1491615041191 443.48805171971253) rotate(0 104.61353691157768 0.4828270098806797)"><path d="M182.25 -10.04 C190.36 -8.08, 203.88 -4.34, 210.48 0.1 M182.25 -10.04 C192.57 -6.28, 204.73 -2.39, 210.48 0.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(272.2000815948336 303.020895035952) rotate(0 89.23990631103516 62.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">/subscribe</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">(gets initial prices</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">and subscribes to</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">feed)</text></g><g stroke-linecap="round" transform="translate(470.31465591944243 260.7945000011241) rotate(0 106.39453125 292.3810662019501)"><path d="M32 0 C66.47 2.97, 96.47 -0.12, 180.79 0 M32 0 C72.31 0.71, 112.73 1.09, 180.79 0 M180.79 0 C201.35 0.59, 213.57 11.93, 212.79 32 M180.79 0 C199.98 1.71, 214.08 8.75, 212.79 32 M212.79 32 C212.72 211.51, 212.17 389.81, 212.79 552.76 M212.79 32 C211.22 157.46, 210.81 283.3, 212.79 552.76 M212.79 552.76 C211.71 573.55, 200.93 584.85, 180.79 584.76 M212.79 552.76 C212.31 575.42, 203.87 583.06, 180.79 584.76 M180.79 584.76 C139.92 583.89, 97.38 585.65, 32 584.76 M180.79 584.76 C125.89 584.59, 71.75 584.55, 32 584.76 M32 584.76 C10.16 585.59, 0.01 575.53, 0 552.76 M32 584.76 C10.66 584.33, -1.55 575.89, 0 552.76 M0 552.76 C-0.11 408.3, -1.05 264.24, 0 32 M0 552.76 C-1.69 435.87, -1.63 318.35, 0 32 M0 32 C-1.64 11.71, 12.31 1.08, 32 0 M0 32 C2.23 9.07, 12.86 1.84, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(505.23847336577774 323.75196205241446) rotate(0 83.77995300292969 62.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">API Gateway</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">&amp; Load Balancer</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- routing</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- authentication</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- rate limiting</text></g><g stroke-linecap="round"><g transform="translate(703.1221613313933 432.4914618560142) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M-0.75 -0.36 C38.18 -0.71, 195.55 -2.48, 234.67 -2.77 M1.06 -1.59 C39.8 -1.71, 195.46 -1.59, 234.15 -1.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(703.1221613313933 432.4914618560142) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M205.94 8.77 C216.47 6.31, 227.52 1.12, 234.15 -1.43 M205.94 8.77 C214.71 5.57, 224.67 2.59, 234.15 -1.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(703.1221613313933 432.4914618560142) rotate(0 116.92782630300144 -1.204961730855075)"><path d="M205.98 -11.75 C216.38 -6.16, 227.42 -3.3, 234.15 -1.43 M205.98 -11.75 C214.8 -8.27, 224.74 -4.58, 234.15 -1.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(965.1041017541679 308.6794290300968) rotate(0 167.23280526761846 116.62194406415028)"><path d="M32 0 C95.8 -1.3, 160.94 -1.01, 302.47 0 M32 0 C130.63 -0.13, 227.92 -0.04, 302.47 0 M302.47 0 C324.92 -1.67, 335.34 9.95, 334.47 32 M302.47 0 C321.99 1.95, 335.8 11.05, 334.47 32 M334.47 32 C334.68 77.06, 332.89 119.93, 334.47 201.24 M334.47 32 C332.95 89.32, 333.34 147.13, 334.47 201.24 M334.47 201.24 C335.98 221.1, 323.51 234.21, 302.47 233.24 M334.47 201.24 C335.21 224.46, 322.24 235.09, 302.47 233.24 M302.47 233.24 C215.8 233.87, 128.74 234.09, 32 233.24 M302.47 233.24 C228.05 234.68, 153.62 233.97, 32 233.24 M32 233.24 C9.32 234.81, -0.47 223.4, 0 201.24 M32 233.24 C9.61 235.37, -1.07 222, 0 201.24 M0 201.24 C2.26 156.12, 3.26 112.86, 0 32 M0 201.24 C2.21 143.27, 2.36 83.52, 0 32 M0 32 C1.91 12.26, 8.73 -0.09, 32 0 M0 32 C1.47 11.58, 12.17 0.46, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1038.2011648342864 375.3013730942471) rotate(0 94.1357421875 50)"><text x="94.1357421875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Service</text><text x="94.1357421875" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="94.1357421875" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Tracks:</text><text x="94.1357421875" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol -&gt; Set&lt;userId&gt;</text></g><g stroke-linecap="round"><g transform="translate(946.6217266469353 463.5119609493195) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M0.33 0.76 C-119.35 1.1, -598.42 2.02, -717.98 2.36 M-0.95 0.12 C-120.84 0.06, -599.74 0.3, -719.17 0.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(946.6217266469353 463.5119609493195) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M-690.99 -9.86 C-698.4 -7.38, -707.78 -2.66, -719.17 0.42 M-690.99 -9.86 C-700.76 -6.75, -711.12 -2.54, -719.17 0.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(946.6217266469353 463.5119609493195) rotate(0 -358.76094557408715 1.0026034003785753)"><path d="M-690.98 10.66 C-698.44 6.81, -707.83 5.19, -719.17 0.42 M-690.98 10.66 C-700.56 6.32, -710.92 3.08, -719.17 0.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(736.1115373543466 485.1837713767818) rotate(0 97.85990905761719 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SSE (price updates)</text></g><g stroke-linecap="round" transform="translate(1443.5606819711315 73.51642694684779) rotate(0 206.18050859452387 120.60326796357754)"><path d="M258.75 30.25 C286.82 43.81, 313.68 62.61, 360.61 90.75 M258.75 30.25 C280.3 44.57, 303.73 56.99, 360.61 90.75 M360.61 90.75 C411.67 119.82, 410.83 122.21, 360.61 151.25 M360.61 90.75 C412.48 120.33, 410.09 121.88, 360.61 151.25 M360.61 151.25 C335.5 164.9, 311.52 181.51, 258.75 210.96 M360.61 151.25 C337.84 166.05, 313.83 179.52, 258.75 210.96 M258.75 210.96 C207.41 242.5, 208.49 241.25, 155.25 210.96 M258.75 210.96 C205.6 240.72, 205.94 240.64, 155.25 210.96 M155.25 210.96 C128.03 194.57, 97.82 176.84, 51.75 151.25 M155.25 210.96 C115.79 189.72, 76.64 165.97, 51.75 151.25 M51.75 151.25 C-0.85 119.5, 1.33 122, 51.75 90.75 M51.75 151.25 C-1.77 123.3, -1.4 122.05, 51.75 90.75 M51.75 90.75 C75.08 78.65, 95.17 65.43, 155.25 30.25 M51.75 90.75 C92.29 68.22, 131.61 45.04, 155.25 30.25 M155.25 30.25 C206.24 -0.74, 207.03 1.8, 258.75 30.25 M155.25 30.25 C208.15 -0.18, 207.38 0.1, 258.75 30.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1591.0474206433935 181.81806092863656) rotate(0 58.603515625 12.5)"><text x="58.603515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Cache</text></g><g transform="translate(1452.5082213349592 10) rotate(0 234.70980834960938 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Key: Symbol </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Value: JSON with symbol details + current price</text></g><g stroke-linecap="round"><g transform="translate(1311.7515346299365 378.36458262665474) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M0.53 -0.43 C33.32 -22.58, 164.37 -111.53, 197.46 -133.92 M-0.66 -1.7 C32.45 -24.08, 166.45 -113.57, 199.68 -135.51" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1311.7515346299365 378.36458262665474) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M181.88 -111.35 C187.7 -121.6, 196.45 -127.46, 199.68 -135.51 M181.88 -111.35 C186.84 -118.29, 193.29 -126.83, 199.68 -135.51" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1311.7515346299365 378.36458262665474) rotate(0 99.20246400744509 -67.46841604922889)"><path d="M170.52 -128.44 C180.24 -132.65, 193.04 -132.44, 199.68 -135.51 M170.52 -128.44 C179.01 -129.9, 189.06 -133.03, 199.68 -135.51" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1266.1467493208252 233.34128963492185) rotate(0 108.26988983154297 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Queries (initial prices </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">on subscription)</text></g><g stroke-linecap="round" transform="translate(2028.4406162861737 357.758121123461) rotate(0 158.99204359673047 91.78681198910078)"><path d="M32 0 C88.54 -1.75, 143.59 -2.43, 285.98 0 M32 0 C122.78 0.91, 214.72 0.38, 285.98 0 M285.98 0 C306.12 0.09, 317.57 11.82, 317.98 32 M285.98 0 C309.06 -1.7, 317.66 11.77, 317.98 32 M317.98 32 C320.57 72.15, 320.26 112.96, 317.98 151.57 M317.98 32 C316.8 67.91, 317 104.72, 317.98 151.57 M317.98 151.57 C318 174.34, 307.32 183.2, 285.98 183.57 M317.98 151.57 C316.43 174.7, 306.78 184.52, 285.98 183.57 M285.98 183.57 C221.08 181.93, 155.79 183.69, 32 183.57 M285.98 183.57 C196.61 186, 107.55 186.05, 32 183.57 M32 183.57 C12.31 184.66, 1.94 171.52, 0 151.57 M32 183.57 C12.86 185.41, -2.23 172.8, 0 151.57 M0 151.57 C-0.07 107.29, -1.21 64.56, 0 32 M0 151.57 C-0.43 104.96, 0.18 58.08, 0 32 M0 32 C-1.95 12.12, 12.27 1.95, 32 0 M0 32 C-1.38 8.81, 10.24 0.47, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2091.8857848829043 437.0449331125618) rotate(0 95.546875 12.5)"><text x="95.546875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Symbol Price Processor</text></g><g stroke-linecap="round" transform="translate(2732.351366400118 355.40602391188077) rotate(0 145.17876843868748 94.99884226153995)"><path d="M32 0 C93.15 1.57, 151.74 -0.21, 258.36 0 M32 0 C108.09 0.56, 185.03 1.02, 258.36 0 M258.36 0 C281.21 -1.48, 290.07 11.63, 290.36 32 M258.36 0 C280.43 1.89, 288.8 12.51, 290.36 32 M290.36 32 C291.22 71.17, 290.75 111.85, 290.36 158 M290.36 32 C290.04 67.39, 290.03 101.15, 290.36 158 M290.36 158 C289.01 180.89, 279.22 190.82, 258.36 190 M290.36 158 C289.3 181.46, 278.62 189.42, 258.36 190 M258.36 190 C200.92 189.97, 143.49 190.24, 32 190 M258.36 190 C180.8 191.48, 102.67 190.42, 32 190 M32 190 C12.57 191.59, -1.94 179.24, 0 158 M32 190 C12.14 190.91, 1.5 179.79, 0 158 M0 158 C2.27 126.01, 0.31 92.34, 0 32 M0 158 C-1.95 120.4, -0.18 82.32, 0 32 M0 32 C-1.2 9.05, 10.29 0.41, 32 0 M0 32 C2.2 12.49, 10.49 -1.33, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2838.106306713805 437.9048661734207) rotate(0 39.423828125 12.5)"><text x="39.423828125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Exchange</text></g><g stroke-linecap="round"><g transform="translate(2719.572113073325 445.74994033678377) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M-1.18 0.46 C-61.29 0.71, -300.68 0.98, -360.6 1.16 M0.4 -0.34 C-59.32 0.11, -298.47 1.99, -358.23 2.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2719.572113073325 445.74994033678377) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M-330.12 -7.97 C-337.97 -6.13, -347.86 -3.03, -358.23 2.52 M-330.12 -7.97 C-337.94 -5.35, -347.4 -0.94, -358.23 2.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2719.572113073325 445.74994033678377) rotate(0 -179.97303150410653 0.7409526144458596)"><path d="M-329.95 12.55 C-337.79 8.13, -347.73 4.95, -358.23 2.52 M-329.95 12.55 C-337.78 8.92, -347.29 7.09, -358.23 2.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2479.6742322940113 400.3113031728353) rotate(0 68.10993194580078 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Price updates</text></g><g stroke-linecap="round"><g transform="translate(1999.871607243927 416.94275072660093) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M-0.72 0.05 C-43.08 -22.75, -212.68 -114.04, -254.84 -137.18 M1.11 -0.96 C-41.38 -24.09, -213.4 -116.11, -255.92 -138.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1999.871607243927 416.94275072660093) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M-226.22 -134.67 C-233.42 -136.31, -239.66 -135.43, -255.92 -138.94 M-226.22 -134.67 C-232.6 -134.67, -240.31 -135.65, -255.92 -138.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1999.871607243927 416.94275072660093) rotate(0 -127.29449728811574 -68.9348568564194)"><path d="M-235.92 -116.58 C-240.68 -122.61, -244.54 -126.17, -255.92 -138.94 M-235.92 -116.58 C-240.08 -120.71, -245.6 -125.78, -255.92 -138.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1873.7274643523047 294.9396697824013) rotate(0 40.97996520996094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g transform="translate(767.355268601204 389.03279652463607) rotate(0 51.209938049316406 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">subscribe()</text></g><g stroke-linecap="round"><g transform="translate(707.6795241858122 648.8176410849956) rotate(0 129.87386636088775 44.11267239925246)"><path d="M-0.17 0.58 C43.03 15.59, 216.95 74.44, 260.14 89.21 M-1.72 -0.17 C41.28 14.61, 215.54 73.02, 259.39 87.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(707.6795241858122 648.8176410849956) rotate(0 129.87386636088775 44.11267239925246)"><path d="M229.4 88.4 C241.64 88.79, 253.59 86.49, 259.39 87.6 M229.4 88.4 C241.55 87.93, 251.6 87.39, 259.39 87.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(707.6795241858122 648.8176410849956) rotate(0 129.87386636088775 44.11267239925246)"><path d="M235.91 68.94 C245.56 76.63, 255.06 81.65, 259.39 87.6 M235.91 68.94 C245.62 75.91, 253.2 82.77, 259.39 87.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(232.58488405108028 504.2770966832977) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M0.39 0.98 C36.91 1.03, 182.37 0.92, 218.97 0.87 M-0.87 0.46 C36.05 0.13, 184.55 -0.46, 221.26 -0.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(232.58488405108028 504.2770966832977) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M193.13 9.67 C202.76 5.25, 210.76 4.04, 221.26 -0.75 M193.13 9.67 C202.71 5.65, 213.12 1.81, 221.26 -0.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(232.58488405108028 504.2770966832977) rotate(0 109.89263004273954 -0.04744355488583096)"><path d="M193.01 -10.85 C202.77 -9.41, 210.81 -4.76, 221.26 -0.75 M193.01 -10.85 C202.79 -7.38, 213.24 -3.73, 221.26 -0.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(215.39735147524289 523.2235993516551) rotate(0 121.58992767333984 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">POST + DELETE /order</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">GET /orders</text></g><g transform="translate(743.3605959546835 717.3065861054565) rotate(0 67.12993621826172 37.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">createOrder()</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">deleteOrder()</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">getOrders()</text></g><g stroke-linecap="round" transform="translate(979.5545494320863 651.9924933368529) rotate(0 163.9612217241738 114.22912540394009)"><path d="M32 0 C116.64 -2.52, 200.87 -2.29, 295.92 0 M32 0 C104.63 -0.29, 177.24 -1.01, 295.92 0 M295.92 0 C315.9 1.56, 327.46 11.49, 327.92 32 M295.92 0 C316.2 2.12, 326.85 10.09, 327.92 32 M327.92 32 C327.69 72.81, 328.69 115.48, 327.92 196.46 M327.92 32 C327.4 89.4, 327.55 145.02, 327.92 196.46 M327.92 196.46 C329.83 219.39, 315.32 228.36, 295.92 228.46 M327.92 196.46 C329.39 218.7, 318.76 228.92, 295.92 228.46 M295.92 228.46 C228.24 229.29, 157.57 228.75, 32 228.46 M295.92 228.46 C214.86 228.64, 135.98 228.84, 32 228.46 M32 228.46 C9.47 226.84, -0.38 218.2, 0 196.46 M32 228.46 C12.86 230.28, -0.17 216.46, 0 196.46 M0 196.46 C-0.68 144.47, 0.89 90.25, 0 32 M0 196.46 C-1.88 160.72, -1.85 125.93, 0 32 M0 32 C0.44 10.5, 11.34 0.17, 32 0 M0 32 C0.28 8.92, 8.71 0.01, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1085.2316056188897 758.536848595897) rotate(0 65.77993774414062 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order Service</text></g><g stroke-linecap="round"><g transform="translate(1314.1155002872215 767.732183970209) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M-0.55 -0.3 C31.45 -0.01, 159.25 1.12, 191.28 1.48 M1.35 -1.5 C33.23 -1.55, 158.59 -0.63, 190.17 -0.38" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1314.1155002872215 767.732183970209) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M161.9 9.67 C168.19 6.89, 176.27 5.01, 190.17 -0.38 M161.9 9.67 C171.74 6.77, 182.69 2.66, 190.17 -0.38" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1314.1155002872215 767.732183970209) rotate(0 95.79123168866204 0.49291694012663356)"><path d="M162.05 -10.85 C168.26 -8.73, 176.31 -5.7, 190.17 -0.38 M162.05 -10.85 C171.83 -6.12, 182.73 -2.6, 190.17 -0.38" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1854.1541289908487 770.4623689076834) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M-0.31 0.49 C145.29 -37.84, 727.45 -191.66, 873 -230.31 M1.73 -0.29 C147.22 -38.93, 726.98 -193.66, 872.06 -231.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1854.1541289908487 770.4623689076834) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M847.45 -214.83 C854.56 -219.1, 861.42 -223.47, 872.06 -231.98 M847.45 -214.83 C854.25 -219.43, 860.95 -223.74, 872.06 -231.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1854.1541289908487 770.4623689076834) rotate(0 436.4976978411646 -115.58644986493118)"><path d="M842.18 -234.66 C850.58 -233.89, 858.78 -233.23, 872.06 -231.98 M842.18 -234.66 C850.33 -233.73, 858.51 -232.46, 872.06 -231.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2226.024173198544 688.7146847928816) rotate(0 174.79986572265625 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Execute order creations / cancels </text></g><g stroke-linecap="round" transform="translate(1519.6693763227372 647.7510283395459) rotate(0 156.69140625 118.0625)"><path d="M32 0 C106.68 -1.1, 183.26 -0.38, 281.38 0 M32 0 C116.65 -2.09, 201.71 -2.5, 281.38 0 M281.38 0 C304.04 1, 311.84 12.67, 313.38 32 M281.38 0 C301.31 1.05, 311.5 11.87, 313.38 32 M313.38 32 C312.93 99.73, 315.91 161.7, 313.38 204.13 M313.38 32 C315.14 83.03, 314.1 133.29, 313.38 204.13 M313.38 204.13 C313.41 227.26, 303.72 235.97, 281.38 236.13 M313.38 204.13 C313.76 225.55, 304.5 235.7, 281.38 236.13 M281.38 236.13 C232.43 236.77, 178.96 237.45, 32 236.13 M281.38 236.13 C201.37 237.27, 121.68 237.75, 32 236.13 M32 236.13 C10.91 235.46, 1.38 226.36, 0 204.13 M32 236.13 C11.28 234.09, 1.37 227.42, 0 204.13 M0 204.13 C-0.24 168.49, 1.46 132.65, 0 32 M0 204.13 C-1.06 151.04, -0.04 97.65, 0 32 M0 32 C-1.27 10.78, 11.85 -1.87, 32 0 M0 32 C-0.8 12.07, 11.83 0.66, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1576.9564856977372 753.3135283395459) rotate(0 99.404296875 12.5)"><text x="99.404296875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order Dispatch Gateway</text></g><g transform="translate(1339.7269401044755 788.0088408395459) rotate(0 67.12993621826172 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">createOrder()</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">deleteOrder()</text></g><g stroke-linecap="round" transform="translate(913.2889611844234 1086.8096801640786) rotate(0 133.1893516127518 144.91196769801354)"><path d="M101.72 4.57 C114.69 -1.15, 132.08 -1.4, 146.71 -0.07 C161.35 1.25, 176.44 5.99, 189.55 12.5 C202.65 19.01, 214.96 27.95, 225.34 38.99 C235.72 50.02, 245.12 64.51, 251.8 78.72 C258.48 92.92, 263.47 108.69, 265.42 124.22 C267.38 139.75, 266.06 156.79, 263.52 171.9 C260.97 187, 257.09 201.22, 250.14 214.85 C243.2 228.48, 232.66 242.94, 221.84 253.65 C211.02 264.37, 198.47 273.23, 185.22 279.14 C171.97 285.05, 156.87 288.16, 142.36 289.11 C127.85 290.06, 111.96 288.78, 98.16 284.85 C84.35 280.91, 71.45 274.26, 59.55 265.5 C47.65 256.75, 35.59 244.8, 26.77 232.33 C17.95 219.85, 11.1 205.74, 6.61 190.64 C2.12 175.54, -0.51 157.4, -0.17 141.73 C0.16 126.05, 3.54 111.26, 8.62 96.57 C13.7 81.88, 21.55 65.96, 30.32 53.57 C39.09 41.18, 47.22 30.74, 61.25 22.21 C75.27 13.69, 103.47 5.63, 114.44 2.43 C125.42 -0.77, 126.91 0.75, 127.1 3.02 M134.89 0.68 C148.64 -1.67, 163.88 1.5, 177.47 6.76 C191.05 12.03, 205.37 22.6, 216.41 32.28 C227.45 41.97, 236.24 52.12, 243.7 64.85 C251.16 77.58, 257.41 93.21, 261.15 108.65 C264.9 124.09, 267.15 141.6, 266.19 157.48 C265.23 173.36, 261.28 189.75, 255.4 203.91 C249.51 218.07, 241.02 230.98, 230.91 242.45 C220.8 253.92, 207.42 265.2, 194.72 272.71 C182.01 280.22, 168.88 284.98, 154.71 287.5 C140.53 290.02, 123.75 290.63, 109.65 287.81 C95.55 285, 82.67 278.01, 70.1 270.61 C57.53 263.21, 43.96 254.72, 34.22 243.44 C24.49 232.15, 17.46 217.65, 11.71 202.89 C5.97 188.13, 1.02 170.72, -0.25 154.86 C-1.52 139, 0.49 122.64, 4.09 107.73 C7.69 92.83, 13.46 78.47, 21.34 65.42 C29.22 52.38, 39.61 39.18, 51.35 29.47 C63.1 19.76, 78.21 12.28, 91.82 7.14 C105.43 2.01, 126.08 -0.71, 133 -1.35 C139.92 -1.98, 133.22 0.84, 133.33 3.33" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1002.695703464959 1219.2534128277407) rotate(0 43.603515625 12.5)"><text x="43.603515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Orders DB</text></g><g stroke-linecap="round"><g transform="translate(1158.2941983535416 892.4944483054169) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-0.51 -0.9 C-10.84 29.91, -51.93 153.55, -62.56 184.55 M1.42 1.25 C-8.95 31.73, -52.54 152.38, -63.09 182.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.2941983535416 892.4944483054169) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M0.3 29.09 C-1.33 22.81, 0.96 12.35, -0.51 -0.9 M0.3 29.09 C-0.66 17.62, 0.66 5.65, -0.51 -0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.2941983535416 892.4944483054169) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-19.17 22.59 C-15.88 18.05, -8.65 9.23, -0.51 -0.9 M-19.17 22.59 C-12.38 13.64, -3.28 4.26, -0.51 -0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.2941983535416 892.4944483054169) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-63.33 152.75 C-64.84 161.68, -62.28 166.42, -63.09 182.75 M-63.33 152.75 C-64.24 165.27, -62.5 177.29, -63.09 182.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1158.2941983535416 892.4944483054169) rotate(0 -31.677558095592303 91.97736663118303)"><path d="M-43.99 159.61 C-50.38 166.72, -52.73 169.72, -63.09 182.75 M-43.99 159.61 C-52.59 169.48, -58.59 178.75, -63.09 182.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(886.4908329467903 967.3975011885377) rotate(0 111.87991333007812 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update / query orders</text></g><g stroke-linecap="round" transform="translate(2056.7890067238145 1032.502730649183) rotate(0 147.80564180134252 87.84863200912878)"><path d="M32 0 C118.54 0.47, 202.46 0.12, 263.61 0 M32 0 C114.42 -1.65, 196 -0.39, 263.61 0 M263.61 0 C283 -0.09, 296.89 11.46, 295.61 32 M263.61 0 C286.45 0.46, 294.73 9.82, 295.61 32 M295.61 32 C296.46 66.01, 296.7 100.91, 295.61 143.7 M295.61 32 C295.32 64.4, 293.92 94.04, 295.61 143.7 M295.61 143.7 C295.24 165.44, 286.86 177.28, 263.61 175.7 M295.61 143.7 C295.44 163.7, 285.51 175.72, 263.61 175.7 M263.61 175.7 C192.06 177.51, 117.47 178.06, 32 175.7 M263.61 175.7 C173.61 173.06, 85.27 173.78, 32 175.7 M32 175.7 C11.34 175.87, 0.24 163.51, 0 143.7 M32 175.7 C8.71 175.7, 0.39 164.32, 0 143.7 M0 143.7 C-1.93 116.61, 1.15 91.93, 0 32 M0 143.7 C0.39 106.37, 0.01 70.5, 0 32 M0 32 C-0.74 9.81, 12.33 -0.63, 32 0 M0 32 C-1.31 8.6, 9.88 0.66, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2140.244062587657 1107.8513626583117) rotate(0 64.3505859375 12.5)"><text x="64.3505859375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Trade Processor</text></g><g stroke-linecap="round"><g transform="translate(2132.5054815864855 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M-0.98 0.63 C-88.68 25.53, -368.88 140.18, -526.91 149.98 C-684.95 159.78, -878.81 74.22, -949.2 59.43 M0.7 -0.09 C-87 24.42, -369 138.13, -527.34 148.2 C-685.68 158.26, -878.57 75.15, -949.35 60.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2132.5054815864855 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M-919.41 58.49 C-925.51 60.33, -932.62 61.06, -949.35 60.31 M-919.41 58.49 C-927.26 59.1, -932.56 59.96, -949.35 60.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2132.5054815864855 1225.5380236210185) rotate(0 -475.18274614383336 74.66389496341208)"><path d="M-925.25 78.16 C-930.04 75.35, -935.76 71.38, -949.35 60.31 M-925.25 78.16 C-931.94 74.19, -935.89 70.52, -949.35 60.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1927.7560130119814 1312.9318260051732) rotate(0 71.27993774414062 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update orders</text></g><g stroke-linecap="round"><g transform="translate(2885.5621280991068 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M1.17 -0.83 C-85.6 85.42, -432.44 431.83, -519.62 518.16 M0.32 1.34 C-86.59 87.21, -433.31 430.36, -519.97 516.54" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2885.5621280991068 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M-507.17 489.4 C-513.31 501.81, -515.21 508.34, -519.97 516.54 M-507.17 489.4 C-510.13 497.66, -514.94 505.11, -519.97 516.54" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2885.5621280991068 558.7145503026077) rotate(0 -260.3818370722224 258.5996814608725)"><path d="M-492.72 503.97 C-504.46 510.95, -511.89 511.91, -519.97 516.54 M-492.72 503.97 C-500.04 507.99, -509.11 511.13, -519.97 516.54" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2561.2460577124743 900.3446111128615) rotate(0 74.68993377685547 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Trade updates</text></g><g stroke-linecap="round" transform="translate(1460.6980403703087 485.35910918073205) rotate(0 172.75057718334529 58.1354987660219)"><path d="M29.07 0 C142.61 3.07, 256.9 3.09, 316.43 0 M29.07 0 C121.02 1.48, 213.32 0.74, 316.43 0 M316.43 0 C336.14 0.08, 347.05 9.32, 345.5 29.07 M316.43 0 C333.57 1.67, 347.34 11.94, 345.5 29.07 M345.5 29.07 C345.44 44.93, 346.62 56.81, 345.5 87.2 M345.5 29.07 C345.77 42.81, 346.34 57.68, 345.5 87.2 M345.5 87.2 C346.04 104.81, 337 117.98, 316.43 116.27 M345.5 87.2 C343.42 104.42, 333.8 114.13, 316.43 116.27 M316.43 116.27 C224.07 117.18, 130.31 115.72, 29.07 116.27 M316.43 116.27 C229.66 115.64, 144.3 114.89, 29.07 116.27 M29.07 116.27 C8.99 117.49, 1.02 107.16, 0 87.2 M29.07 116.27 C8.69 114.29, -0.23 105.2, 0 87.2 M0 87.2 C-1 74.19, -0.78 56.72, 0 29.07 M0 87.2 C0.12 74.4, -0.75 62.83, 0 29.07 M0 29.07 C1.15 7.74, 11.57 0.15, 29.07 0 M0 29.07 C-0.53 8.86, 9.97 1.38, 29.07 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1576.500375366154 530.994607946754) rotate(0 56.9482421875 12.5)"><text x="56.9482421875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Redis pub/sub</text></g><g stroke-linecap="round"><g transform="translate(2023.5407015172455 475.81706514501275) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M0.78 0.24 C-32.22 9.98, -164.35 48.91, -197.28 58.95 M-0.26 -0.68 C-33.54 9.19, -165.59 50.35, -198.47 60.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2023.5407015172455 475.81706514501275) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M-174.53 42.17 C-182.77 48.14, -192.63 55.52, -198.47 60.25 M-174.53 42.17 C-183.62 49.25, -192.35 56.07, -198.47 60.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2023.5407015172455 475.81706514501275) rotate(0 -98.41254677175402 29.6945176438104)"><path d="M-168.51 61.79 C-179.02 60.66, -191.07 60.89, -198.47 60.25 M-168.51 61.79 C-180.04 61.21, -191.12 60.38, -198.47 60.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1899.3552598061283 530.1283685284507) rotate(0 32.559959411621094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Publish</text></g><g stroke-linecap="round"><g transform="translate(1318.4418505765057 455.954197314928) rotate(0 61.60443701403801 23.965880076112285)"><path d="M0.02 1.08 C20.73 9.13, 103.25 40.02, 123.81 47.84 M-1.43 0.6 C19.21 8.89, 102.48 41.2, 123.18 49.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1318.4418505765057 455.954197314928) rotate(0 61.60443701403801 23.965880076112285)"><path d="M93.19 48.64 C102.84 49.82, 108.73 49.32, 123.18 49.32 M93.19 48.64 C101.34 49.63, 112.24 50.09, 123.18 49.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1318.4418505765057 455.954197314928) rotate(0 61.60443701403801 23.965880076112285)"><path d="M100.65 29.52 C108.28 35.71, 112.22 40.22, 123.18 49.32 M100.65 29.52 C106.68 36.31, 115.31 42.59, 123.18 49.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1352.8340168053069 438.6876658243127) rotate(0 113.3598861694336 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Subscribe / unsubscribe</text></g><g stroke-linecap="round"><g transform="translate(1447.1195036296044 545.4306387201541) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M0.2 0.05 C-22.34 -8.74, -111.8 -44.2, -134.62 -52.83 M-1.16 -0.97 C-23.82 -9.57, -112.87 -42.64, -135.08 -51.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1447.1195036296044 545.4306387201541) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M-105.08 -50.95 C-115.5 -49.51, -126.46 -53.17, -135.08 -51.41 M-105.08 -50.95 C-116.87 -51.64, -127.64 -50.8, -135.08 -51.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1447.1195036296044 545.4306387201541) rotate(0 -67.77379720298222 -26.305063926550474)"><path d="M-112.4 -31.78 C-120.24 -37.07, -128.64 -47.44, -135.08 -51.41 M-112.4 -31.78 C-121.61 -39.68, -129.65 -45.99, -135.08 -51.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1188.796121733259 547.7830138592362) rotate(0 110.9898910522461 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Consume price updates</text></g><g stroke-linecap="round" transform="translate(1416.6724135165819 1022.6791844056315) rotate(0 132.2202920324894 124.03962627353394)"><path d="M182.88 9.59 C196.08 13.02, 209.72 23.63, 220.65 32.6 C231.57 41.58, 241.58 51.85, 248.43 63.45 C255.28 75.05, 259.34 88.97, 261.75 102.21 C264.17 115.45, 265.05 129.57, 262.93 142.92 C260.81 156.26, 255.58 170.36, 249.02 182.28 C242.45 194.2, 234.02 205.21, 223.54 214.42 C213.05 223.63, 199.05 232.18, 186.09 237.54 C173.13 242.9, 160.03 245.56, 145.78 246.6 C131.53 247.65, 114.78 246.74, 100.56 243.81 C86.35 240.88, 72.42 236, 60.48 229.01 C48.54 222.02, 37.68 212.38, 28.91 201.88 C20.14 191.39, 12.79 178.86, 7.84 166.03 C2.9 153.19, -0.54 138.29, -0.75 124.87 C-0.96 111.46, 2.06 98.25, 6.6 85.53 C11.13 72.81, 17.83 59.19, 26.48 48.55 C35.12 37.92, 46.7 29.17, 58.47 21.72 C70.24 14.27, 83.18 7.36, 97.09 3.87 C111.01 0.39, 126.27 -0.63, 141.96 0.8 C157.65 2.24, 182.27 9.53, 191.25 12.48 C200.23 15.43, 196.97 16.66, 195.85 18.5 M150.09 0.51 C163.79 0.05, 177.13 5.3, 189.68 11.37 C202.23 17.44, 215.17 27.36, 225.39 36.95 C235.61 46.53, 244.9 56.89, 251 68.9 C257.11 80.91, 260.13 95.8, 262.04 109.03 C263.94 122.26, 264.93 135.15, 262.44 148.29 C259.94 161.43, 254.63 176.2, 247.07 187.87 C239.52 199.54, 228.26 209.53, 217.12 218.32 C205.97 227.1, 193.31 235.63, 180.21 240.59 C167.11 245.54, 152.77 247.42, 138.51 248.04 C124.24 248.66, 108.63 248.15, 94.63 244.31 C80.63 240.48, 66.24 233.19, 54.53 225.05 C42.81 216.9, 32.71 206.17, 24.34 195.44 C15.98 184.71, 8.25 173.38, 4.34 160.67 C0.44 147.96, 0.18 132.65, 0.91 119.18 C1.64 105.71, 3.54 92.52, 8.73 79.86 C13.91 67.19, 22.8 53.43, 32.04 43.2 C41.29 32.97, 51.84 25.36, 64.21 18.48 C76.58 11.6, 92.01 4.99, 106.27 1.92 C120.52 -1.15, 142.88 -0.44, 149.75 0.05 C156.62 0.53, 148.13 2.6, 147.49 4.86" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1486.7064576299324 1121.5095498053047) rotate(0 62.1923828125 25)"><text x="62.1923828125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">External Order </text><text x="62.1923828125" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Metadata DB</text></g><g stroke-linecap="round"><g transform="translate(1300.720803894846 890.2710901289029) rotate(0 79.36272438455626 77.16168208210092)"><path d="M-0.72 -0.97 C25.54 24.6, 131.73 128.53, 158.5 154.57 M1.1 1.14 C27.1 26.83, 131 127.2, 157.43 152.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1300.720803894846 890.2710901289029) rotate(0 79.36272438455626 77.16168208210092)"><path d="M130.02 140.4 C138.94 144.82, 151.38 151.73, 157.43 152.58 M130.02 140.4 C140.65 145.19, 150.93 149.46, 157.43 152.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1300.720803894846 890.2710901289029) rotate(0 79.36272438455626 77.16168208210092)"><path d="M144.26 125.63 C147.91 135.57, 154.95 148.1, 157.43 152.58 M144.26 125.63 C149.48 135.93, 154.35 145.81, 157.43 152.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1399.4647198846428 939.7907858892686) rotate(0 35.54997253417969 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update</text></g><g stroke-linecap="round"><g transform="translate(2042.3193139970422 1106.148517864167) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M1.15 0.95 C-58.17 4.08, -296.63 15.87, -356.11 19 M0.29 0.4 C-59.17 3.65, -297.67 16.73, -357.11 20.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970422 1106.148517864167) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-26.49 12.62 C-17.16 8.92, -12.13 6.28, 1.15 0.95 M-26.49 12.62 C-17.49 9.65, -9.6 4.8, 1.15 0.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970422 1106.148517864167) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-27.52 -7.88 C-17.86 -5.82, -12.54 -2.7, 1.15 0.95 M-27.52 -7.88 C-18.19 -4.67, -9.99 -3.35, 1.15 0.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970422 1106.148517864167) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-329.54 8.35 C-335.68 11.79, -346.18 15.75, -357.11 20.17 M-329.54 8.35 C-337.13 12.27, -345.85 14.49, -357.11 20.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2042.3193139970422 1106.148517864167) rotate(0 -178.01148723727283 9.845845657855534)"><path d="M-328.39 28.84 C-334.9 26.52, -345.72 24.73, -357.11 20.17 M-328.39 28.84 C-336.35 26.59, -345.42 22.64, -357.11 20.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1850.7510087557944 1082.0998144821606) rotate(0 27.189971923828125 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Query</text></g><g transform="translate(1397.538536462394 1276.6869032678806) rotate(0 181.15985107421875 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Key-value store, mapping: </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">externalOrderId -&gt; (orderId, userId)</text></g><g stroke-linecap="round" transform="translate(2579.0095374119514 1236.6285249558605) rotate(0 127.81075051563721 57.32710359052089)"><path d="M28.66 0 C92.35 1.14, 158.27 0.29, 226.96 0 M28.66 0 C69.72 -2.63, 111.71 -2.62, 226.96 0 M226.96 0 C246.5 -0.16, 256.29 9.72, 255.62 28.66 M226.96 0 C246.35 -1.75, 253.66 9.56, 255.62 28.66 M255.62 28.66 C255.56 48.01, 253.58 64.29, 255.62 85.99 M255.62 28.66 C255.48 48.5, 255.81 69.46, 255.62 85.99 M255.62 85.99 C254.67 105.6, 245.32 113.8, 226.96 114.65 M255.62 85.99 C257.53 104.37, 244.76 112.58, 226.96 114.65 M226.96 114.65 C173.09 112.6, 121.7 115.65, 28.66 114.65 M226.96 114.65 C186.55 114.44, 146.72 115.41, 28.66 114.65 M28.66 114.65 C11.02 114.73, 0.53 107.05, 0 85.99 M28.66 114.65 C8.57 114.98, -0.17 104.39, 0 85.99 M0 85.99 C0.13 72.34, 0.96 60.54, 0 28.66 M0 85.99 C0.82 70.15, 0.82 54.58, 0 28.66 M0 28.66 C-1.37 11.43, 7.83 0.35, 28.66 0 M0 28.66 C-1.37 9.44, 10.94 -0.4, 28.66 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2627.9531004275887 1281.4556285463814) rotate(0 78.8671875 12.5)"><text x="78.8671875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order Clean-up Job</text></g><g stroke-linecap="round"><g transform="translate(2783.9237335571775 1224.7347673265303) rotate(0 58.303983071671155 -332.66489876667947)"><path d="M0.32 -1.06 C19.74 -111.87, 98.12 -553.41, 117.32 -664.3 M-0.97 1 C18.28 -110.17, 96.94 -554.77, 116.75 -665.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2783.9237335571775 1224.7347673265303) rotate(0 58.303983071671155 -332.66489876667947)"><path d="M-4.88 -30.61 C-4.59 -18.52, 0.8 -10.61, 0.32 -1.06 M-4.88 -30.61 C-3.85 -24.55, -2.66 -18.3, 0.32 -1.06" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2783.9237335571775 1224.7347673265303) rotate(0 58.303983071671155 -332.66489876667947)"><path d="M15.33 -27.04 C8.14 -16.22, 6.07 -9.63, 0.32 -1.06 M15.33 -27.04 C12.23 -21.91, 9.26 -16.39, 0.32 -1.06" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2783.9237335571775 1224.7347673265303) rotate(0 58.303983071671155 -332.66489876667947)"><path d="M121.93 -636.34 C118.11 -646.05, 119.68 -659.95, 116.75 -665.89 M121.93 -636.34 C121.34 -642.55, 120.39 -648.48, 116.75 -665.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2783.9237335571775 1224.7347673265303) rotate(0 58.303983071671155 -332.66489876667947)"><path d="M101.72 -639.92 C105.38 -648.36, 114.41 -660.94, 116.75 -665.89 M101.72 -639.92 C105.26 -645.21, 108.47 -650.4, 116.75 -665.89" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2871.9690861765243 854.384975686171) rotate(0 35.58995819091797 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Queries</text></g><g stroke-linecap="round"><g transform="translate(2564.2602003744464 1337.6982543877457) rotate(0 -707.9421687926829 52.95631683054853)"><path d="M-1.09 -1.13 C-112.5 16.17, -432.02 102.85, -667.78 104.8 C-903.54 106.75, -1291.01 26.24, -1415.62 10.57 M0.55 0.89 C-110.57 18.82, -429.49 103.92, -665.62 105.75 C-901.75 107.57, -1291.35 27.47, -1416.25 11.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2564.2602003744464 1337.6982543877457) rotate(0 -707.9421687926829 52.95631683054853)"><path d="M-1386.8 6.14 C-1399.21 6.17, -1409.78 10.41, -1416.25 11.84 M-1386.8 6.14 C-1395.25 7.07, -1404.82 9.49, -1416.25 11.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2564.2602003744464 1337.6982543877457) rotate(0 -707.9421687926829 52.95631683054853)"><path d="M-1390.03 26.41 C-1401.46 19.19, -1410.86 16.13, -1416.25 11.84 M-1390.03 26.41 C-1397.61 21.42, -1406.24 17.93, -1416.25 11.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2243.31732038118 1411.9570597035126) rotate(0 40.97996520996094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g transform="translate(948.261318382632 1409.5595645807662) rotate(0 437.099609375 112.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Order</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- orderId</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- userId</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- externalOrderId</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- symbol</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- shares</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- price</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- state (pending | submitted | filled | partially_filled | pending_cancel | cancelled | failed)</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">... (execution data)</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Order consistency deep dive</span></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="some-additional-deep-dives-you-might-consider">Some additional deep dives you might consider</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Robinhood, like most fintech systems, is a complex and interesting application, and it's hard to cover every possible consideration in this guide. Here are a few additional deep dives you might consider:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Excess price updates</strong>: If a set of stocks has a lot of trades or price updates, how might the system handle the load and avoid overwhelming the client? This might be interesting to cover.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Limiting exchange correspondence</strong>: While we certainly covered ways we'd "proxy" the exchange and avoid excess concurrent connections / clients, it might be worthwhile to dive into other ways the system might limit exchange correspondence, while still scaling and serving the userbase (e.g. perhaps considering batching orders into single requests).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Live order updates</strong>: It might be worthwile to dive into how the system would propagate order updates to the user in real time (e.g. if the user is looking at orders in the app, they see their orders get filled in real time if they're waiting on the exchange).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Historical price / portfolio value data</strong>: In this design, we didn't focus on historical price / portfolio data at all, but some interviewers might consider this a requirement. It's worthwhile to ponder how a system would enable showing historical price data (over different time windows) and historical user portfolio value.</div></li>
</ol><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="what-is-expected-at-each-level"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/blog/the-system-design-interview-what-is-expected-at-each-level" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">What is Expected at Each Level?</a></h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Ok, that was a lot. You may be thinking, "how much of that is actually required from me in an interview?" Letâ€™s break it down.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="mid-level">Mid-level</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Breadth vs. Depth:</strong> A mid-level candidate will be mostly focused on breadth (80% vs 20%). You should be able to craft a high-level design that meets the functional requirements you've defined, but many of the components will be abstractions with which you only have surface-level familiarity.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Probing the Basics:</strong> Your interviewer will spend some time probing the basics to confirm that you know what each component in your system does. For example, if you add an API Gateway, expect that they may ask you what it does and how it works (at a high level). In short, the interviewer is not taking anything for granted with respect to your knowledge.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Mixture of Driving and Taking the Backseat:</strong> You should drive the early stages of the interview in particular, but the interviewer doesnâ€™t expect that you are able to proactively recognize problems in your design with high precision. Because of this, itâ€™s reasonable that they will take over and drive the later stages of the interview while probing your design.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Robinhood:</strong> For this question, an E4 candidate will have clearly defined the API endpoints and data model, landed on a high-level design that is functional for price updates and ordering. I don't expect candidates to know in-depth information about specific technologies, but the candidate should converge on ideas involving efficient price update propagation and consistent order management. I also expect the candidate to know effectivew ways of proxying the exchange to avoid excess connections / clients.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="senior">Senior</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Depth of Expertise</strong>: As a senior candidate, expectations shift towards more in-depth knowledge â€” about 60% breadth and 40% depth. This means you should be able to go into technical details in areas where you have hands-on experience. It's crucial that you demonstrate a deep understanding of key concepts and technologies relevant to the task at hand.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Advanced System Design</strong>: You should be familiar with advanced system design principles (different technologies, their use-cases, how they fit together). Your ability to navigate these advanced topics with confidence and clarity is key.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Articulating Architectural Decisions</strong>: You should be able to clearly articulate the pros and cons of different architectural choices, especially how they impact scalability, performance, and maintainability. You justify your decisions and explain the trade-offs involved in your design choices.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Problem-Solving and Proactivity</strong>: You should demonstrate strong problem-solving skills and a proactive approach. This includes anticipating potential challenges in your designs and suggesting improvements. You need to be adept at identifying and addressing bottlenecks, optimizing performance, and ensuring system reliability.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Robinhood:</strong> For this question, E5 candidates are expected to quickly go through the initial high-level design so that they can spend time discussing, in detail, how to handle real-time price propagation and consistent orders. I expect the candidate to design a reasonable, scalable solution for live prices, and I expect the candidate to design a good order workflow with some mindfulness of consistency / fault tolerance.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="staff">Staff+</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Emphasis on Depth</strong>: As a staff+ candidate, the expectation is a deep dive into the nuances of system design â€” I'm looking for about 40% breadth and 60% depth in your understanding. This level is all about demonstrating that, while you may not have solved this particular problem before, you have solved enough problems in the real world to be able to confidently design a solution backed by your experience.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">You should know which technologies to use, not just in theory but in practice, and be able to draw from your past experiences to explain how theyâ€™d be applied to solve specific problems effectively. The interviewer knows you know the small stuff (REST API, data normalization, etc.) so you can breeze through that at a high level so you have time to get into what is interesting.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>High Degree of Proactivity</strong>: At this level, an exceptional degree of proactivity is expected. You should be able to identify and solve issues independently, demonstrating a strong ability to recognize and address the core challenges in system design. This involves not just responding to problems as they arise but anticipating them and implementing preemptive solutions. Your interviewer should intervene only to focus, not to steer.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Practical Application of Technology</strong>: You should be well-versed in the practical application of various technologies. Your experience should guide the conversation, showing a clear understanding of how different tools and systems can be configured in real-world scenarios to meet specific requirements.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Complex Problem-Solving and Decision-Making</strong>: Your problem-solving skills should be top-notch. This means not only being able to tackle complex technical challenges but also making informed decisions that consider various factors such as scalability, performance, reliability, and maintenance.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Advanced System Design and Scalability</strong>: Your approach to system design should be advanced, focusing on scalability and reliability, especially under high load conditions. This includes a thorough understanding of distributed systems, load balancing, caching strategies, and other advanced concepts necessary for building robust, scalable systems.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Robinhood:</strong> For a staff-level candidate, expectations are high regarding the depth and quality of solutions, especially for the complex scenarios discussed earlier. Exceptional candidates delve deeply into each of the topics mentioned above and may even steer the conversation in a different direction, focusing extensively on a topic they find particularly interesting or relevant. They are also expected to possess a solid understanding of the trade-offs between various solutions and to be able to articulate them clearly, treating the interviewer as a peer.</div></div>
</body>
</html>