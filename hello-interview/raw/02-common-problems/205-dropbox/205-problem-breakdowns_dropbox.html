<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropbox System Design Interview Guide</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div><div class="flex flex-col gap-2 md:gap-4"><div class="flex flex-col"><h6 class="MuiTypography-root MuiTypography-h6 mui-zfm63x">Common Problems</h6><h1 class="MuiTypography-root MuiTypography-h2 mui-161snwm">Design a File Storage Service Like Dropbox</h1></div><div class="flex flex-col md:flex-row gap-2 md:items-center justify-between"><div class="flex flex-col lg:flex-row gap-4 md:items-center"><a target="_blank" rel="noopener noreferrer" class="flex flex-row gap-2 items-center" href="https://www.linkedin.com/in/evan-king-40072280/" style="text-decoration: none;"><img class="rounded-full" src="https://hellointerview-files.s3.us-west-2.amazonaws.com/public-media/evan-headshot.png" alt="Evan King" width="40" height="40"><div class="flex flex-col"><div class="flex flex-row gap-2 items-center"><p class="MuiTypography-root MuiTypography-body2 mui-ltrqv0">Evan King</p><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit mui-70s7oy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LinkedInIcon"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></div><span class="MuiTypography-root MuiTypography-caption mui-1eozzb8">Ex-Meta Staff Engineer</span></div></a><div class="flex flex-row gap-4 md:gap-8 items-center"><div class="flex flex-row gap-1 items-center" aria-label="Difficulty"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"></path></svg><p class="MuiTypography-root MuiTypography-body2 mui-aj99kn">easy</p></div><div class="flex flex-row gap-1 items-center" aria-label="Average time allowed in interview"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg><p class="MuiTypography-root MuiTypography-body2 mui-1pb8xyp">35 min</p></div></div></div><a class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-disableElevation MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-disableElevation mui-1c7cv5a" tabindex="0" href="/practice/system-design/start/dropbox" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-5 h-5 mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"></path></svg>Practice this problem<span class="MuiTouchRipple-root mui-w0pj6f"></span></a></div></div><hr class="MuiDivider-root MuiDivider-fullWidth mui-1rvhejo"></div>
<div class="mb-4"><iframe class="w-full aspect-video" src="https://www.youtube.com/embed/_UZ1ngy-kOI" title="System Design Interview: Design Dropbox or Google Drive w/ a Ex-Meta Staff Engineer" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="understanding-the-problem">Understanding the Problem</h2>
<div class="my-6"><div class="MuiBox-root mui-1fz7ihe"><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>☁️ What is <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.Dropbox.com/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Dropbox</a></strong>
Dropbox is a cloud-based file storage service that allows users to store and share files. It provides a secure and reliable way to store and access files from anywhere, on any device.</div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="functional-requirements"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#1-functional-requirements" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Functional Requirements</a></h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Core Requirements</strong></div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users should be able to upload a file from any device</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users should be able to download a file from any device</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users should be able to share a file with other users and view the files shared with them</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can automatically sync files across devices</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Below the line (out of scope):</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users should be able to edit files</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users should be able to view files without downloading them</div></li>
</ul>
<div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">It's worth noting that there are related system design problems around designing Blob Storage itself. This is out of scope for this problem, but you may consider doing some research on your own to understand how Blob Storage works and how it's designed.</div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="non-functional-requirements"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#2-non-functional-requirements" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Non-Functional Requirements</a></h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Core Requirements</strong></div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should be highly available (prioritizing availability over consistency).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should support files as large as 50GB.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should be secure and reliable. We should be able to recover files if they are lost or corrupted.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should make upload, download, and sync times as fast as possible (low latency).</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Below the line (out of scope):</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should have a storage limit per user</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should support file versioning</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The system should scan files for viruses and malware</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Here's how it might look on your whiteboard:</div>
<div class="my-4 flex-col w-full max-w-[300px]"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/58e366d1a9cace15d3894f6f4218e61b"></div></div></div></div></div></div>
<div class="mt-6"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Many candidates struggle with the CAP theorem trade-off for this question. Remember, you prioritize consistency over availability only if every read must receive the most recent write; otherwise, the system will break. For example, with a stock trading app, if a user buys a share of APPL in Germany and then another user immediately tries to buy a share of APPL in the US, you need to be sure that the first transaction has been replicated to the US before you can proceed. However, for a file storage system like Dropbox, it's okay if a user in Germany uploads a file and a user in the US can't see it for a few seconds.</div></div></div></div></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="the-set-up">The Set Up</h2>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="planning-the-approach">Planning the Approach</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before you move on to designing the system, it's important to start by taking a moment to plan your strategy. Fortunately, for these <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/introduction#product-design" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">product design</a> style questions, the plan should be straightforward: build your design up sequentially, going one by one through your functional requirements. This will help you stay focused and ensure you don't get lost in the weeds as you go. Once you've satisfied the functional requirements, you'll rely on your non-functional requirements to guide you through the deep dives.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="defining-the-core-entities"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#core-entities-2-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Defining the Core Entities</a></h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">I like to start with a broad overview of the primary entities. At this stage, it is not necessary to know every specific column or detail. We will focus on these intricacies later when we have a clearer grasp of the system (during the high-level design). Initially, establishing these key entities will guide our thought process and lay a solid foundation as we progress towards defining the API.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For Dropbox, the primary entities are incredily straightforward:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>File</strong>: This is the raw data that users will be uploading, downloading, and sharing.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>FileMetadata</strong>: This is the metadata associated with the file. It will include information like the file's name, size, mime type, and the user who uploaded it.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>User</strong>: The user of our system.</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In the actual interview, this can be as simple as a short list like this. Just make sure you talk through the entities with your interviewer to ensure you are on the same page.</div>
<div class="my-4 flex-col w-full max-w-[200px]"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/8bc16ff6fbbbff592c44c2fb21f2fc33"></div></div></div></div></div></div>
<div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">As you move onto the design, your objective is simple: create a system that meets all functional and non-functional requirements. To do this, I recommend you start by satisfying the functional requirements and then layer in the non-functional requirements afterward. This will help you stay focused and ensure you don't get lost in the weeds as you go.</div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="api-or-system-interface"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#api-or-system-interface-5-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">API or System Interface</a></h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The API is the primary interface that users will interact with. It's important to define the API early on, as it will guide your high-level design. We just need to define an endpoint for each of our functional requirements.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Starting with uploading a file, we might have an endpoint like this:</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>POST /files
</span>Request:
{
  File, 
  FileMetadata
}</code></div></div></pre>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To download a file, our endpoint can be:</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>GET /files/{fileId} -&gt; File &amp; FileMetadata</span></code></div></div></pre>
<div class="my-6"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Be aware that your APIs may change or evolve as you progress. In this case, our upload and download APIs actually evolve significantly as we weigh the trade-offs of various approaches in our high-level design (more on this later). You can proactively communicate this to your interviewer by saying, "I am going to outline some simple APIs, but may come back and improve them as we delve deeper into the design."</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To share a file, we might have an endpoint like this:</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>POST /files/{fileId}/share
</span>Request:
{
  User[] // The users to share the file with
}</code></div></div></pre>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Lastly, we need a way for clients to query for changes to files on the remote server. This way we know which files need to be synced to the local device.</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>GET /files/{fileId}/changes -&gt; FileMetadata[]</span></code></div></div></pre>
<div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">With each of these requests, the user information will be passed in the headers (either via session token or JWT). This is a common pattern for APIs and is a good way to ensure that the user is authenticated and authorized to perform the action while preserving security. You should avoid passing user information in the request body, as this can be easily manipulated by the client.</div></div></div></div></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="high-level-design"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#high-level-design-10-15-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">High-Level Design</a></h2>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="1-users-should-be-able-to-upload-a-file-from-any-device">1) Users should be able to upload a file from any device</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The main requirement for a system like Dropbox is to allow users to upload files. When it comes to storing a file, we need to consider two things:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Where do we store the file contents (the raw bytes)?</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Where do we store the file metadata?</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For the metadata, we can use a <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/key-technologies#nosql-databases" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">NoSQL database</a> like DynamoDB. <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">DynamoDB</a> is a fully managed NoSQL database hosted by AWS. Our metadata is loosly structured, with few relations and the main query pattern being to fetch files by user. This makes DynamoDB a solid choice, but don't get too caught up in making the right choice here in your interview. The reality is a SQL database like PostgreSQL would work just as well for this use case. Learn more about how to choose the right database (and why it may not matter), <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/key-technologies#core-database" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">here</a>.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Our schema will be a simple document and can start with something like this:</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>  </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"123"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(228, 86, 73);">"name"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"file.txt"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(228, 86, 73);">"size"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(228, 86, 73);">"mimeType"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"text/plain"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(228, 86, 73);">"uploadedBy"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"user1"</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span></code></div></div></pre>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">As for how we store the file itself, we have a few options. Let's take a look at the trade-offs of each.</div>
<div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-ifi55z"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-1ev8i4f" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Bad Solution: Upload File to a Single Server</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The simplest approach we can take is to upload files directly to our backend server (we can call it the File Service) and store them there. Our <span class="MuiBox-root mui-1vu004u">POST /files</span> endpoint will accept the file and metadata, and then store the file on the server's local file system while saving the metadata in our database. This is a reasonable approach for a small application, but it won't scale well and is not reliable.</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/1f44729941dadeae2bc61898d1dcd63c"></div></div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This simple approach has a number of issues. As the number of files grows, we will need to add more and more storage to our server and/or horizontally scale by adding more servers. Second, it's not reliable. If our server goes down, we lose access to all of our files. We need a more reliable solution that can handle server failures and scale with ease. Fortunately, this is a solved problem. We can use <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/key-technologies#blob-storage" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Blob Storage</a> to solve both of these issues.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Store File in Blob Storage</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-1">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A better approach is to store the file in a Blob Storage service like Amazon S3 or Google Cloud Storage. When a user uploads a file to our backend, we can send the file directly to Blob Storage and store the metadata in our database. We can store a (virtually) unlimited number of files in Blob Storage as it will handle the scaling for us. It's also more reliable. If our server goes down, we don't lose access to our files. We can also take advantage of Blob Storage features like lifecycle policies to automatically delete old files and versioning to keep track of file changes if needed (though this is out of scope for this problem).</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/1232ac3c29f3c0301c70d7ea18e096bd"></div></div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-1">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">One challenge with this approach is that it's more complex. We need to integrate with the Blob Storage service and handle the case where the file is uploaded but the metadata is not saved. We also need to handle the case where the metadata is saved but the file is not uploaded. We can solve these issues by using a transactional approach where we only save the metadata if the file is successfully uploaded and vice versa.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Second, this approach (as depicted above) requires that we technically upload a file twice -- once to our backend and once to Blob Storage. This is redundant. We can solve this issue by allowing the user to upload the file directly to the Blob Storage service.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Upload File Directly to Blob Storage</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-2">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The best approach is to allow the user to upload the file directly to Blob Storage from the client. This is faster and cheaper than uploading the file to our backend first. We can use presigned URLs to generate a URL that the user can use to upload the file directly to the Blob Storage service. Once the file is uploaded, the Blob Storage service will send a notification to our backend so we can save the metadata.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Presigned URLs are URLs that give the user permission to upload a file to a specific location in the Blob Storage service. We can generate a presigned URL and send it to the user when they want to upload a file. So whereas our initial API for upload was a POST to <span class="MuiBox-root mui-1vu004u">/files</span>, it will now be a three step process:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Request a pre-signed URL from our backend (which itself gets the URL from the Blob Storage service like S3) and save the file metadata in our database with a status of "uploading."</div></li>
</ol><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>POST /files/presigned-url -&gt; PresignedUrl
</span>Request:
{
  FileMetadata
}</code></div></div></pre><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Use the presigned URL to upload the file to Blob Storage directly from the client. This is via a PUT request directly to the presigned URL where the file is the body of the request.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Once the file is uploaded, the Blob Storage service will send a notification to our backend using <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/EventNotifications.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">S3 Notifications</a>. Our backend will then update the file metadata in our database with a status of "uploaded".</div>
</div></li>
</ol><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/e0512e86bd7632a5434d0e04a945bf9b"></div></div></div></div></div></div></div></div></div></div></div></div></div>
<div class="my-6"><div class="MuiBox-root mui-132lzuk"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>What are <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Presigned URLs</a>?</strong></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Presigned URLs are a feature provided by cloud storage services, such as Amazon S3, that allow temporary access to private resources. These URLs are generated with a specific expiration time, after which they become invalid, offering a secure way to share files without altering permissions. When a presigned URL is created, it includes authentication information as part of the query string, enabling controlled access to otherwise private objects.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This makes them ideal for use cases like temporary file sharing, uploading objects to a bucket without giving users full API access, or providing limited-time access to resources. Presigned URLs can be generated programmatically using the cloud provider's SDK, allowing developers to integrate this functionality into applications seamlessly. This method enhances security by ensuring that sensitive data remains protected while still being accessible to authorized users for a limited period.</div></div><div class="MuiBox-root mui-iqoxai"></div><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation mui-cmu0xt" tabindex="0" type="button">Show More<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-4 w-4"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="2-users-should-be-able-to-download-a-file-from-any-device">2) Users should be able to download a file from any device</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The next step is making sure users can download their saved files. Just like with uploads, there are a few different ways to approach this.</div>
<div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-ifi55z"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-1ev8i4f" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Bad Solution: Download through File Server</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-3">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The most common solution candidates come up with is to download the file once from Blob Storage to our backend server and then once more from our backend to the client.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-2">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Of course, the solution is suboptimal as we end up downloading the file twice, which is both slow and expensive. We can solve this issue by allowing the user to download the file directly from the Blob Storage service, just like we did with the upload.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Download from Blob Storage</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-4">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A better approach is to allow the user to download the file directly from Blob Storage. We can use presigned URLs to generate a URL that the user can use to download the file directly from Blob Storage. Like with uploading, the presigned url will give the user permission to download the file from a specific location in the Blob Storage service for a limited time.</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Request a presigned download URL from our backend</div></li>
</ol><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>GET /files/{fileId}/presigned-url -&gt; PresignedUrl</span></code></div></div></pre><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Use the presigned URL to download the file from the Blob Storage service directly to the client.</div></li>
</ol><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/260a143dc98fa7bd45834f9a5e5aca7c"></div></div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-3">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While nearly optimal, the main limitation is that this can still be slow for a large, geographically distributed user base. Your Blob Storage is located in a single region, so users far away from that region will have slower download times. We can solve this issue by using a <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/key-technologies#cdn" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">content delivery network (CDN)</a> to cache the file closer to the user.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Download from CDN</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-5">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The best approach is to use a content delivery network (CDN) to cache the file closer to the user. A CDN is a network of servers distributed across the globe that cache files and serve them to users from the server closest to them. This reduces latency and speeds up download times.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a user requests a file, we can use the CDN to serve the file from the server closest to the user. This is much faster than serving the file from our backend or the Blob Storage service.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For security, just like with our S3 presigned URLs, we can generate a URL that the user can use to download the file from the CDN. This URL will give the user permission to download the file from a specific location in the CDN for a limited time. More on this in our <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/dropbox#3-how-can-you-ensure-file-security" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">deep dives on security</a>.</div><div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/b4baa474f180d20f02f18da27180fe72"></div></div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-4">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">CDNs are relatively expensive. To address this, it is common to be strategic about what files are cached and for how long. We can use a cache control header to specify how long the file should be cached in the CDN. We can also use a cache invalidation mechanism to remove files from the CDN when they are updated or deleted. This way, only files that are frequently accessed are cached and we don't waste money caching files that are rarely accessed.</div></div></div></div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="3-users-should-be-able-to-share-a-file-with-other-users">3) Users should be able to share a file with other users</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To round out the functional requirements, we need to support sharing files with other users. We will implement this similarly to Google Drive, where you just need to enter the email address of the user you want to share the file with. We can assume users are already authenticated.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The main consideration here in an interview is how you can make this process fast and efficient. Let's break it down.</div>
<div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-ifi55z"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-1ev8i4f" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Bad Solution: Add a Sharelist to Metadata</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-6">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A good start is to simply add a list of users who have access to the file directly to the file metadata. When a user shares a file, we can add the user to the list. When a user downloads a file, we can check if they are in the list. This is a simple and effective approach.</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"123"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"name"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"file.txt"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"size"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"mimeType"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"text/plain"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"uploadedBy"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"user1"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"sharelist"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">[</span><span class="token" style="color: rgb(80, 161, 79);">"user2"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"user3"</span><span class="token" style="color: rgb(56, 58, 66);">]</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-5">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a user opens our site they expect to see a list of all of their files and files that have been shared with them. Getting the list of their files is easy, especially since we will have <span class="MuiBox-root mui-1vu004u">uploadedBy</span> as the primary key. But getting the list of files shared with them is slow with this approach. We would need to scan the <span class="MuiBox-root mui-1vu004u">sharelist</span> of every file to see if the user is in it.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Caching to speed up fetching the Sharelist</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-7">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A better approach is, in addition to the <span class="MuiBox-root mui-1vu004u">sharelist</span> in the file metadata, to cache a list that maps the inverse relationship. This would be a mapping from any given user to the list of files shared with them. This way, when a user opens our site, we can quickly get the list of files shared with them by looking up their userId in our <span class="MuiBox-root mui-1vu004u">sharedFiles</span> cache.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Our cache entry would be a simple key-value pair like this:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>user1:["fileId1", "fileId2"]</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-6">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We need to keep the <span class="MuiBox-root mui-1vu004u">sharedFiles</span> list in sync with the <span class="MuiBox-root mui-1vu004u">sharelist</span> in the file metadata. The best way to overcome this would be to just keep this user to file list mapping in the same database and update both the <span class="MuiBox-root mui-1vu004u">sharelist</span> and <span class="MuiBox-root mui-1vu004u">sharedFiles</span> list in a transaction.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Create a separate table for shares</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-8">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Another approach is to fully normalize the data. This would involve creating a new table that maps userId to fileId, where fileId is a file shared with the given user. This way, when a user opens our site, we can quickly get the list of files shared with them by querying the <span class="MuiBox-root mui-1vu004u">SharedFiles</span> table for all of the files with a <span class="MuiBox-root mui-1vu004u">userId</span> of the user.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">So you would create a new table, <span class="MuiBox-root mui-1vu004u">SharedFiles</span>, that looks like this:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>| userId (PK) | fileId (SK) |
</span>|-------------|-------------|
| user1       | fileId1     |
| user1       | fileId2     |
| user2       | fileId3     |</code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In this design, we no longer need the <span class="MuiBox-root mui-1vu004u">sharelist</span> in the file metadata. We can simply query the <span class="MuiBox-root mui-1vu004u">SharedFiles</span> table for all of the files that have a <span class="MuiBox-root mui-1vu004u">userId</span> matching the requesting user, removing the need to keep the <span class="MuiBox-root mui-1vu004u">sharelist</span> in sync with the <span class="MuiBox-root mui-1vu004u">sharedFiles</span> list.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-7">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This query is slightly less efficient than the previous approach since now we query using an index instead of a simple key-value lookup. However, the tradeoff may be worth it since we no longer need to keep the <span class="MuiBox-root mui-1vu004u">sharelist</span> in sync with the <span class="MuiBox-root mui-1vu004u">sharedFiles</span> list.</div></div></div></div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="4-users-can-automatically-sync-files-across-devices">4) Users can automatically sync files across devices</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Last up, we need to make sure that files are automatically synced across different devices. At a high level, this works by keeping a copy of a particular file on each client device (locally) and also in remote storage (i.e., the "cloud"). As such, there are two directions we need to sync in:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Local -&gt; Remote</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Remote -&gt; Local</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Local -&gt; Remote</strong></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a user updates a file on their local machine, we need to sync these changes with the remote server. We consider the remote server to be the source of truth, so it's important that we get it consistent as soon as possible so that other local devices can know when there are changes they should pull in.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To do this, we need a client-side sync agent that:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Monitors the local Dropbox folder for changes using OS-specific file system events (like FileSystemWatcher on Windows or FSEvents on macOS)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">When it detects a change, it queues the modified file for upload locally</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">It then uses our upload API to send the changes to the server along with updated metadata</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Conflicts are resolved using a "last write wins" strategy - meaning if two users edit the same file, the most recent edit will be the one that's saved</div></li>
</ol>
<div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Versioning is out of scope for this write-up, but note that you would typically not overwrite the only file. Instead, you'd add a new file (or at least the new chunks) and update a version number and pointer on the metadata.</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Remote -&gt; Local</strong></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For the other direction, each client needs to know when changes happen on the remote server so they can pull those changes down.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are two main approaches we could take:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Polling</strong>: The client periodically asks the server "has anything changed since my last sync?" The server would query the DB to see if any files that this user is watching has a updatedAt timestamp that is newer than the last time they synced. This is simple but can be slow to detect changes and wastes bandwidth if nothing has changed.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>WebSocket or SSE</strong>: The server maintains an open connection with each client and pushes notifications when changes occur. This is more complex but provides real-time updates.</div>
</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For Dropbox, we can use a hybrid approach. We can classify files into two categories:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Fresh files</strong>: Files that have been recently edited (within the last few hours). For these, we maintain a WebSocket connection to ensure near real-time sync.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Stale files</strong>: Files that haven't been modified in a while. For these, we can fall back to periodic polling since immediate updates are less critical.</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This hybrid approach gives us the best of both worlds - real-time updates for active files while conserving resources for inactive ones.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2059.845944212894 999.8678661873969">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="2059.845944212894" height="999.8678661873969" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(415.25433243483326 153.17824227926306) rotate(0 121.46922492234663 235.376796553026)"><path d="M32 0 C86.5 -0.85, 136.98 0, 210.94 0 M32 0 C90.54 -1.39, 150.27 -0.82, 210.94 0 M210.94 0 C231.01 0.32, 241.2 10.66, 242.94 32 M210.94 0 C231 -0.31, 243.81 8.84, 242.94 32 M242.94 32 C244.81 153.19, 243.96 275.93, 242.94 438.75 M242.94 32 C245.04 148.84, 244.39 266.23, 242.94 438.75 M242.94 438.75 C243.69 458.54, 234.05 469.08, 210.94 470.75 M242.94 438.75 C242.94 457.96, 230.3 472.43, 210.94 470.75 M210.94 470.75 C164.52 467.3, 117.67 468.72, 32 470.75 M210.94 470.75 C144.33 471.2, 78.33 469.67, 32 470.75 M32 470.75 C10.36 470.92, -0.73 461.15, 0 438.75 M32 470.75 C9.85 472.02, -0.08 458.8, 0 438.75 M0 438.75 C-0.84 342.01, 0.59 244.23, 0 32 M0 438.75 C-1.43 295.92, -0.85 153.17, 0 32 M0 32 C0.14 8.79, 11.79 1.23, 32 0 M0 32 C-1 9.23, 10.96 0.96, 32 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(446.74797141967986 326.05503883228903) rotate(0 89.9755859375 62.5)"><text x="89.9755859375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">API Gateway &amp; Load </text><text x="89.9755859375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Balancer</text><text x="89.9755859375" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- routing</text><text x="89.9755859375" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- authentication</text><text x="89.9755859375" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- rate limiting</text></g><g stroke-linecap="round" transform="translate(867.5904073530326 293.39859355503995) rotate(0 157.06558344700125 94.52632972788251)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M2.35 20.59 C7.98 13.77, 11.58 9.2, 18.1 2.48 M2.35 20.59 C6.72 16.52, 10.33 11.05, 18.1 2.48 M1.43 27.75 C7.9 20.05, 14.8 13.03, 24.4 1.33 M1.43 27.75 C7.42 20.24, 16.11 12.12, 24.4 1.33 M1.17 34.14 C6.94 25.54, 16.55 17.59, 30.7 0.18 M1.17 34.14 C12.78 21.5, 21.77 8.71, 30.7 0.18 M0.91 40.54 C9.17 30.85, 18.24 21.49, 36.34 -0.21 M0.91 40.54 C9.47 30.2, 17.47 21.97, 36.34 -0.21 M1.31 46.19 C10.49 37.34, 20.49 26.64, 41.33 0.15 M1.31 46.19 C10.13 35.98, 20.57 24.67, 41.33 0.15 M1.04 52.58 C12.57 39.64, 21.87 28.81, 46.97 -0.25 M1.04 52.58 C11.3 40.6, 24.52 26.73, 46.97 -0.25 M1.44 58.23 C13.99 44.7, 22.31 36.77, 51.96 0.11 M1.44 58.23 C17.89 38.71, 34.37 20.62, 51.96 0.11 M1.18 64.62 C16.55 47.78, 30.56 29.99, 57.6 -0.28 M1.18 64.62 C18.99 43.83, 37.91 21.73, 57.6 -0.28 M0.92 71.02 C23.28 44.7, 47.01 16.11, 62.59 0.08 M0.92 71.02 C20.83 46.67, 41.15 23.84, 62.59 0.08 M1.31 76.67 C20.53 55.32, 37.62 32.07, 67.57 0.44 M1.31 76.67 C19.3 55.16, 39.17 33.04, 67.57 0.44 M1.05 83.06 C15.39 65.78, 31.3 46.91, 73.22 0.04 M1.05 83.06 C26.08 54.15, 50.5 23.62, 73.22 0.04 M1.44 88.71 C20.79 67.75, 39.23 49.39, 78.2 0.41 M1.44 88.71 C20.81 67.49, 38.59 46.74, 78.2 0.41 M1.18 95.1 C35.27 56.7, 68.87 18.1, 83.85 0.01 M1.18 95.1 C28.45 64.06, 54.79 33.7, 83.85 0.01 M0.92 101.5 C19.71 78.02, 42.13 53.55, 88.83 0.37 M0.92 101.5 C31.14 66.2, 62.04 29.8, 88.83 0.37 M1.32 107.14 C27.85 78.34, 54.56 44.48, 94.48 -0.02 M1.32 107.14 C36.77 66.69, 71.88 25.61, 94.48 -0.02 M1.05 113.54 C25.33 85.6, 49.9 56.95, 99.46 0.34 M1.05 113.54 C28.23 80.23, 56.54 46.09, 99.46 0.34 M1.45 119.19 C32.21 80.92, 64.55 46.12, 105.11 -0.06 M1.45 119.19 C34.8 80.5, 67.59 42.36, 105.11 -0.06 M1.19 125.58 C23.55 97.98, 46.89 74.06, 110.09 0.3 M1.19 125.58 C40.75 81.45, 80.05 35.89, 110.09 0.3 M0.93 131.98 C33.95 91.56, 68.59 52.4, 115.74 -0.09 M0.93 131.98 C37.8 90.25, 75.18 48.1, 115.74 -0.09 M1.32 137.62 C38.76 97.53, 71.52 58.62, 120.72 0.27 M1.32 137.62 C48.81 84.05, 95.04 29.48, 120.72 0.27 M1.06 144.02 C49.35 88.24, 98.27 31.89, 126.37 -0.13 M1.06 144.02 C30.3 111.43, 60.6 79.44, 126.37 -0.13 M1.45 149.67 C28.97 115.64, 57.88 83.04, 131.35 0.23 M1.45 149.67 C31.22 115.98, 59.77 84.44, 131.35 0.23 M1.19 156.06 C46.32 108.09, 86.42 58.29, 137 -0.16 M1.19 156.06 C36.21 115.07, 71.63 75.19, 137 -0.16 M0.93 162.46 C52.96 104.91, 102.14 47.59, 141.98 0.2 M0.93 162.46 C33.17 127.1, 63.74 91.34, 141.98 0.2 M1.98 167.35 C51.25 111.39, 98.03 56.03, 147.63 -0.2 M1.98 167.35 C47.47 113.48, 94.39 59.47, 147.63 -0.2 M3.69 171.48 C38.79 132.37, 76.19 89.38, 152.61 0.16 M3.69 171.48 C62.21 103.06, 120.98 36.43, 152.61 0.16 M4.74 176.37 C48.11 128.97, 89.54 83.33, 158.26 -0.23 M4.74 176.37 C46.91 128.14, 87.34 80.83, 158.26 -0.23 M7.1 179.75 C46.95 134.57, 86.82 87.24, 163.24 0.13 M7.1 179.75 C44.4 136.29, 82.25 92.69, 163.24 0.13 M10.12 182.37 C52.95 133.78, 94.51 82.66, 168.89 -0.27 M10.12 182.37 C48.24 137.71, 86.85 93.74, 168.89 -0.27 M13.14 185 C64.58 124.93, 115.63 65.1, 173.87 0.09 M13.14 185 C61.8 129.03, 112.74 70.4, 173.87 0.09 M17.47 186.11 C64.08 131.18, 110.52 81.54, 178.86 0.45 M17.47 186.11 C74.69 118.35, 134.09 51.74, 178.86 0.45 M21.15 187.98 C57.01 143.62, 93.88 102.57, 184.5 0.06 M21.15 187.98 C65.45 137.07, 108.43 86.48, 184.5 0.06 M26.13 188.34 C81.23 120.76, 140.12 55.86, 189.49 0.42 M26.13 188.34 C61.56 146.53, 98.57 105.3, 189.49 0.42 M31.12 188.7 C80.73 129.65, 130.64 74.91, 195.13 0.03 M31.12 188.7 C62.96 151.17, 97 112.7, 195.13 0.03 M36.11 189.06 C91.22 128.67, 143.91 68.62, 200.12 0.39 M36.11 189.06 C96.98 120.55, 157.32 50.03, 200.12 0.39 M41.09 189.42 C95.82 125.24, 150.99 61.44, 205.76 -0.01 M41.09 189.42 C92.07 128.19, 144.34 69.1, 205.76 -0.01 M46.74 189.03 C102.13 122.62, 160.7 56.55, 210.75 0.35 M46.74 189.03 C86.99 142.29, 128.37 96.11, 210.75 0.35 M51.72 189.39 C96.13 138.53, 141.51 85.88, 216.39 -0.04 M51.72 189.39 C94.25 142.16, 135.57 95.05, 216.39 -0.04 M57.37 188.99 C119.16 119.37, 178.57 48.42, 221.38 0.32 M57.37 188.99 C101.22 138.24, 144.04 89, 221.38 0.32 M62.35 189.35 C110.36 132.82, 156.64 78.07, 227.02 -0.08 M62.35 189.35 C121.87 120.61, 182.29 51.48, 227.02 -0.08 M68 188.96 C110.06 140.89, 152.13 92.95, 232.01 0.28 M68 188.96 C115.97 133.9, 166.17 76.34, 232.01 0.28 M72.98 189.32 C127.66 127.22, 183.97 63.58, 237.65 -0.11 M72.98 189.32 C111.08 146.71, 148.26 102.6, 237.65 -0.11 M78.63 188.93 C119.04 144.63, 156.32 97.77, 242.64 0.25 M78.63 188.93 C112.36 147.7, 146.89 107.4, 242.64 0.25 M83.61 189.29 C146.44 114.53, 213.38 37.62, 248.28 -0.15 M83.61 189.29 C141.36 121.2, 200.37 54.05, 248.28 -0.15 M89.26 188.89 C138.71 134.17, 189.18 78.65, 253.27 0.21 M89.26 188.89 C144.58 126.22, 198.42 64.16, 253.27 0.21 M94.24 189.25 C131.27 148.65, 167.34 106.03, 258.91 -0.18 M94.24 189.25 C139.13 136.81, 184.67 85.62, 258.91 -0.18 M99.89 188.86 C160.02 116.58, 222.04 47.21, 263.9 0.18 M99.89 188.86 C157.66 122.19, 215.74 54.99, 263.9 0.18 M104.87 189.22 C168.85 113.31, 234.74 39.08, 269.54 -0.22 M104.87 189.22 C142.98 145.48, 181.39 101.26, 269.54 -0.22 M110.52 188.82 C164.51 126.65, 217.84 63.84, 274.53 0.14 M110.52 188.82 C152.63 140.24, 194.32 90.62, 274.53 0.14 M115.5 189.18 C163.17 136.29, 210.45 83.48, 280.17 -0.25 M115.5 189.18 C165.45 129.35, 216.86 72.29, 280.17 -0.25 M121.15 188.79 C158.02 147.12, 194.4 104.52, 285.16 0.11 M121.15 188.79 C186.68 115.87, 249.82 40.95, 285.16 0.11 M126.13 189.15 C169.84 139.57, 211.56 90.15, 290.15 0.47 M126.13 189.15 C175.82 133.98, 224.75 76.64, 290.15 0.47 M131.78 188.75 C166.78 147.91, 203.74 109.7, 293.82 2.34 M131.78 188.75 C192.83 117.96, 253.47 47.66, 293.82 2.34 M136.76 189.11 C183.73 135.86, 234.12 78.62, 298.15 3.45 M136.76 189.11 C172.38 149.03, 207.41 107.43, 298.15 3.45 M141.75 189.47 C185.32 137.28, 231.78 87.5, 301.83 5.32 M141.75 189.47 C175.85 149.51, 209.57 110.71, 301.83 5.32 M147.39 189.08 C206.26 118.49, 267.27 51.58, 304.85 7.95 M147.39 189.08 C183.74 147.8, 219.22 106.9, 304.85 7.95 M152.38 189.44 C191.02 142.51, 234.8 96.49, 307.87 10.57 M152.38 189.44 C209.8 124.28, 268.03 58.43, 307.87 10.57 M158.02 189.04 C200.57 142.55, 243.91 93.6, 310.23 13.95 M158.02 189.04 C199.84 140.65, 242.54 92.13, 310.23 13.95 M163.01 189.4 C199.67 147.62, 238.47 105.96, 311.94 18.08 M163.01 189.4 C206.09 140.84, 248.5 92.58, 311.94 18.08 M168.65 189.01 C222.48 127.04, 277.98 63.09, 313.64 22.22 M168.65 189.01 C207.84 142.55, 247.04 96.25, 313.64 22.22 M173.64 189.37 C229.1 125.32, 284.01 61.78, 314.04 27.86 M173.64 189.37 C213.15 145.31, 251.55 101.27, 314.04 27.86 M179.28 188.97 C210.3 150.98, 245.76 111.28, 314.43 33.5 M179.28 188.97 C222.5 138.44, 266.66 87.57, 314.43 33.5 M184.27 189.33 C222.55 146.72, 257.67 108.68, 314.17 39.9 M184.27 189.33 C216.01 155.19, 246.46 120.05, 314.17 39.9 M189.91 188.94 C226.31 147.74, 261.95 107.06, 314.57 45.55 M189.91 188.94 C225.55 150.61, 258.48 112.64, 314.57 45.55 M194.9 189.3 C236.89 139.93, 279.67 90.51, 314.3 51.94 M194.9 189.3 C234.51 145.08, 272.35 100.97, 314.3 51.94 M200.54 188.91 C227.74 154.09, 260.32 119.55, 314.04 58.34 M200.54 188.91 C244.16 138.38, 286.48 90.77, 314.04 58.34 M205.53 189.27 C238.64 151.27, 273.01 111.62, 314.44 63.98 M205.53 189.27 C235.68 153.2, 266.98 118.34, 314.44 63.98 M211.17 188.87 C251.29 143.04, 289.21 98.81, 314.18 70.38 M211.17 188.87 C232.63 163.9, 256.97 137.05, 314.18 70.38 M216.16 189.23 C246.46 152.43, 277.04 116.08, 314.57 76.02 M216.16 189.23 C245.15 153.96, 275.91 118.79, 314.57 76.02 M221.8 188.84 C241.42 167.6, 260.02 145.96, 314.31 82.42 M221.8 188.84 C241.91 165.39, 261.48 142.13, 314.31 82.42 M226.79 189.2 C254.58 154.1, 286.69 118.74, 314.05 88.82 M226.79 189.2 C261.31 149.4, 295.97 110.42, 314.05 88.82 M232.43 188.8 C261.02 156.66, 288.4 124.43, 314.44 94.46 M232.43 188.8 C257.25 160.64, 283.23 131.27, 314.44 94.46 M237.42 189.16 C259.43 164.95, 282.25 138.13, 314.18 100.86 M237.42 189.16 C251.98 171.91, 269.22 153.39, 314.18 100.86 M243.06 188.77 C270.2 158.12, 295.44 127.57, 314.58 106.5 M243.06 188.77 C260.15 169.2, 275.41 151.22, 314.58 106.5 M248.05 189.13 C273.93 158.67, 300.6 129.02, 314.31 112.9 M248.05 189.13 C271.01 161.58, 295.58 134.05, 314.31 112.9 M253.04 189.49 C274.02 168.94, 290 148.08, 314.05 119.3 M253.04 189.49 C269.15 169.35, 285.9 149.46, 314.05 119.3 M258.68 189.09 C273.15 171.2, 287.35 153.45, 314.45 124.94 M258.68 189.09 C280.1 166.58, 299.18 141.79, 314.45 124.94 M263.67 189.45 C280.12 172.83, 295.44 152.47, 314.19 131.34 M263.67 189.45 C281.1 170.31, 299.65 148.3, 314.19 131.34 M269.31 189.06 C281.3 173.21, 296.14 157.15, 314.58 136.98 M269.31 189.06 C282.41 172.71, 295.98 158.27, 314.58 136.98 M274.3 189.42 C283.74 180.42, 290.72 169.3, 314.32 143.38 M274.3 189.42 C285.37 176.56, 296.67 164.62, 314.32 143.38 M279.94 189.02 C290.77 175.24, 304.22 163.39, 314.06 149.78 M279.94 189.02 C291.2 178.14, 300.59 165.09, 314.06 149.78 M285.59 188.63 C296.89 177.21, 308.16 165.91, 314.45 155.42 M285.59 188.63 C294.06 180.26, 302.77 168.95, 314.45 155.42 M291.23 188.24 C298.07 179.69, 303.41 172.03, 314.19 161.82 M291.23 188.24 C298.23 179.81, 306.21 172.22, 314.19 161.82 M298.18 186.33 C301.32 184.65, 305.18 179.22, 312.62 169.73 M298.18 186.33 C303.84 180.44, 309.1 174.45, 312.62 169.73" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M32 0 C88.09 2.34, 143.93 -0.57, 282.13 0 M32 0 C93.25 0.05, 154.82 -0.08, 282.13 0 M282.13 0 C302.36 -0.27, 314.89 9.08, 314.13 32 M282.13 0 C303.43 1.3, 313.87 11.91, 314.13 32 M314.13 32 C313.61 68.2, 312.83 102.2, 314.13 157.05 M314.13 32 C313.69 57.99, 314.21 84.7, 314.13 157.05 M314.13 157.05 C314.13 176.54, 301.75 190.51, 282.13 189.05 M314.13 157.05 C313.21 179.85, 301.3 189.16, 282.13 189.05 M282.13 189.05 C230.4 187.44, 175.97 188.49, 32 189.05 M282.13 189.05 C185.68 187.73, 89.18 188.1, 32 189.05 M32 189.05 C9.96 190.15, -0.07 177.26, 0 157.05 M32 189.05 C9.26 188.86, 2.19 176.26, 0 157.05 M0 157.05 C0.57 114.78, -1.32 69.03, 0 32 M0 157.05 C-0.03 121.01, 0.46 87.47, 0 32 M0 32 C-0.87 9.42, 10.92 0.84, 32 0 M0 32 C-0.41 10.38, 9.09 2.09, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(973.6058147150577 377.6021512771649) rotate(0 54.789947509765625 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">File Service</text></g><g stroke-linecap="round" transform="translate(1385.148345690294 444.9292157875452) rotate(0 117.01249907786587 103.27901920109548)"><path d="M23.2 41.37 C23.2 41.37, 23.2 41.37, 23.2 41.37 M23.2 41.37 C23.2 41.37, 23.2 41.37, 23.2 41.37 M15.06 56.82 C21.01 48.9, 30.58 39.52, 43.28 24.37 M15.06 56.82 C24.82 45.38, 34.57 34.19, 43.28 24.37 M6.27 73.03 C27.04 48.75, 46.25 29.86, 56.79 14.92 M6.27 73.03 C26.17 49.71, 46.35 28.05, 56.79 14.92 M4.04 81.69 C16.63 66.97, 31.23 47.02, 64.4 12.26 M4.04 81.69 C18.81 66.5, 31.02 51.82, 64.4 12.26 M3.13 88.84 C19.79 68.23, 37.73 46.64, 72.01 9.6 M3.13 88.84 C27.94 60.84, 52.93 33.47, 72.01 9.6 M2.21 96 C29.26 62.91, 59.01 33.02, 79.62 6.94 M2.21 96 C25.72 69.67, 49.01 42.3, 79.62 6.94 M1.29 103.15 C22.36 75.5, 47.66 53.62, 87.24 4.28 M1.29 103.15 C30.23 72.25, 57.67 38.89, 87.24 4.28 M0.37 110.3 C37.24 66.99, 74 23.71, 94.85 1.62 M0.37 110.3 C28.62 78.42, 56.57 45.91, 94.85 1.62 M0.77 115.95 C30.66 78.01, 63.94 42.4, 99.83 1.98 M0.77 115.95 C24.87 85.85, 50.76 56.74, 99.83 1.98 M2.48 120.08 C32.83 82.33, 63.62 45.25, 105.48 1.59 M2.48 120.08 C34.77 81.65, 68.62 42.75, 105.48 1.59 M3.53 124.97 C25.44 98.53, 47.32 75.76, 110.46 1.95 M3.53 124.97 C30.53 95.35, 55.09 66.92, 110.46 1.95 M5.23 129.1 C36.42 93.93, 66.58 57.42, 116.11 1.55 M5.23 129.1 C31.99 100.29, 58.06 70.53, 116.11 1.55 M6.94 133.23 C49.06 86.48, 91.36 36.69, 121.09 1.91 M6.94 133.23 C33.08 102.09, 60.61 70.59, 121.09 1.91 M7.99 138.12 C37.02 105.65, 65.35 71.52, 126.74 1.52 M7.99 138.12 C47.09 94.32, 83.69 52.59, 126.74 1.52 M9.7 142.26 C45.23 101.29, 79.37 62.14, 131.72 1.88 M9.7 142.26 C37 109.88, 66.07 77.93, 131.72 1.88 M11.4 146.39 C39.53 115.2, 67.76 82.64, 137.37 1.49 M11.4 146.39 C55.84 95.7, 100.62 44.69, 137.37 1.49 M12.46 151.28 C53.23 104.66, 90.85 59.76, 141.7 2.6 M12.46 151.28 C40.5 119.04, 66.83 87.67, 141.7 2.6 M15.47 153.9 C62.52 101.95, 107.58 48.31, 145.37 4.47 M15.47 153.9 C64.1 97.83, 112.49 42.22, 145.37 4.47 M17.84 157.28 C66.47 99.36, 119.26 40.94, 149.7 5.58 M17.84 157.28 C70.14 96.95, 121.19 37.64, 149.7 5.58 M20.86 159.91 C50.43 123.35, 83.22 87.75, 153.38 7.45 M20.86 159.91 C62.84 112.3, 105.58 62.44, 153.38 7.45 M23.22 163.28 C74.8 102.39, 128.52 40.05, 157.71 8.57 M23.22 163.28 C53.93 125.91, 86.12 89.16, 157.71 8.57 M25.58 166.66 C56.93 129.95, 89.23 96.13, 162.04 9.68 M25.58 166.66 C75.99 108.8, 124.99 52.07, 162.04 9.68 M28.6 169.29 C57.75 137.23, 85.37 103.77, 165.72 11.55 M28.6 169.29 C81.52 108.39, 136.48 44.87, 165.72 11.55 M30.96 172.67 C77.6 117.14, 125.08 61.74, 170.05 12.67 M30.96 172.67 C85.31 110.56, 140.36 46.78, 170.05 12.67 M33.98 175.29 C87.56 114.22, 142.99 49.99, 173.72 14.54 M33.98 175.29 C85.47 115.98, 137.05 55.6, 173.72 14.54 M36.34 178.67 C82.06 125.63, 127.15 74.36, 178.05 15.65 M36.34 178.67 C83.2 124.28, 131.34 71.19, 178.05 15.65 M38.71 182.05 C81.07 132.76, 121.34 84.75, 181.07 18.28 M38.71 182.05 C75.84 140.62, 113.28 97.84, 181.07 18.28 M42.38 183.92 C96.44 124.37, 147.04 62.96, 184.09 20.9 M42.38 183.92 C72.62 150.59, 101.99 117.09, 184.09 20.9 M46.06 185.79 C78.2 149.92, 108.6 115.11, 187.11 23.53 M46.06 185.79 C78.77 148.32, 111.66 110.29, 187.11 23.53 M49.73 187.66 C87.29 144.07, 123.25 102, 190.78 25.4 M49.73 187.66 C90.5 140.64, 130.56 93.7, 190.78 25.4 M53.41 189.53 C82.1 152.17, 115.03 118.9, 193.8 28.02 M53.41 189.53 C83.76 156.18, 111.96 122.57, 193.8 28.02 M57.08 191.4 C111.31 126.18, 166.17 63.76, 196.82 30.64 M57.08 191.4 C108.86 132.85, 157.96 75.05, 196.82 30.64 M60.76 193.27 C98.14 151.14, 134.5 106.06, 199.84 33.27 M60.76 193.27 C90.56 157.45, 119.42 123.95, 199.84 33.27 M64.43 195.14 C113.35 139.41, 159.47 87.59, 202.86 35.89 M64.43 195.14 C96.64 157.99, 127.6 121.28, 202.86 35.89 M68.11 197.01 C117.4 139.75, 165.99 86.9, 206.53 37.76 M68.11 197.01 C98.16 162.7, 129.68 126.78, 206.53 37.76 M71.78 198.87 C112.84 149.62, 157.18 100.41, 208.9 41.14 M71.78 198.87 C103.18 160.97, 135.48 123.55, 208.9 41.14 M75.46 200.74 C121.24 147.12, 163.94 95.67, 211.26 44.52 M75.46 200.74 C116.24 153.35, 156.02 107.7, 211.26 44.52 M80.44 201.1 C116.45 159.64, 151.79 120.32, 213.62 47.9 M80.44 201.1 C124.13 150.74, 167.98 101.08, 213.62 47.9 M85.43 201.46 C124.59 158.34, 163.67 113.36, 215.99 51.28 M85.43 201.46 C118.17 161.88, 153.43 120.93, 215.99 51.28 M89.76 202.58 C120.94 169.93, 149.32 134.37, 218.35 54.66 M89.76 202.58 C139.01 145.73, 187.63 87.86, 218.35 54.66 M94.75 202.94 C124.65 168.21, 153.69 137.03, 220.06 58.79 M94.75 202.94 C125.15 169.91, 153.75 136.98, 220.06 58.79 M99.74 203.3 C142.73 149.45, 191.2 99.34, 222.42 62.17 M99.74 203.3 C136.68 158.78, 176.11 115.29, 222.42 62.17 M104.07 204.41 C143.61 160.32, 183.12 115.92, 224.78 65.55 M104.07 204.41 C136.44 167.09, 170.17 128.04, 224.78 65.55 M109.05 204.77 C146.57 163.44, 180.62 121.53, 227.14 68.93 M109.05 204.77 C147.6 157.08, 187.83 112.11, 227.14 68.93 M114.04 205.13 C140.11 174.37, 165.11 145.36, 229.51 72.31 M114.04 205.13 C151.67 161.38, 191.22 118.1, 229.51 72.31 M118.37 206.25 C161.81 156.67, 204.98 105.25, 229.9 77.95 M118.37 206.25 C153.28 167.12, 188.6 127.29, 229.9 77.95 M124.67 205.1 C151.56 174.9, 176.99 145.25, 230.95 82.84 M124.67 205.1 C160.43 162.13, 196.08 120.33, 230.95 82.84 M130.31 204.71 C157.65 172.08, 185.46 140.23, 231.35 88.48 M130.31 204.71 C149.73 180.25, 169.81 156.98, 231.35 88.48 M136.61 203.56 C172.6 162.93, 209.31 121.48, 232.4 93.37 M136.61 203.56 C166.26 170.07, 195.17 136.19, 232.4 93.37 M142.91 202.41 C173.75 169.51, 203.38 134.65, 232.79 99.01 M142.91 202.41 C162.57 181.64, 181.42 160.67, 232.79 99.01 M148.55 202.01 C182.75 162.64, 213 126.26, 233.19 104.65 M148.55 202.01 C182.18 165.18, 214.5 128.04, 233.19 104.65 M154.85 200.86 C183.14 169.6, 214.27 133.71, 234.24 109.54 M154.85 200.86 C175.98 177.98, 196.08 153.9, 234.24 109.54 M161.15 199.71 C188.86 167.37, 218.51 136.11, 233.32 116.7 M161.15 199.71 C176.54 181.3, 192.36 164.19, 233.32 116.7 M170.73 194.79 C192.57 169.01, 214.16 141.75, 230.43 126.11 M170.73 194.79 C186.65 174.97, 204.59 157.32, 230.43 126.11 M180.97 189.11 C191.95 176.72, 204.99 161.99, 227.55 135.53 M180.97 189.11 C192.66 175.87, 202.82 164.52, 227.55 135.53 M191.2 183.44 C204.83 169.58, 216.55 153.63, 224.66 144.95 M191.2 183.44 C202.23 169.44, 213.38 156.31, 224.66 144.95" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M94.03 1.17 C106.79 -2.73, 123.03 -1.37, 136.86 0.95 C150.7 3.26, 165.1 8.59, 177.05 15.08 C189 21.56, 199.81 30.12, 208.58 39.85 C217.35 49.59, 225.38 61.61, 229.65 73.48 C233.93 85.36, 235.44 98.53, 234.21 111.1 C232.98 123.68, 228.47 137.53, 222.26 148.92 C216.05 160.3, 207.28 170.97, 196.95 179.41 C186.63 187.84, 173.52 195.13, 160.33 199.55 C147.14 203.96, 131.95 205.74, 117.82 205.9 C103.7 206.05, 88.78 204.55, 75.58 200.48 C62.39 196.41, 49.22 189.79, 38.65 181.48 C28.09 173.17, 18.67 161.97, 12.19 150.63 C5.7 139.29, 0.98 125.85, -0.26 113.42 C-1.5 100.98, 0.83 88.06, 4.75 76.04 C8.67 64.01, 15.06 51.39, 23.27 41.28 C31.49 31.17, 41.64 22.05, 54.04 15.37 C66.44 8.69, 89.56 3.43, 97.68 1.23 C105.8 -0.98, 102.48 0.45, 102.78 2.16 M165.09 9.33 C177.85 13.05, 190.19 22.77, 200.01 31.77 C209.82 40.76, 218.33 52.16, 223.98 63.31 C229.62 74.46, 233.44 86.4, 233.89 98.67 C234.34 110.94, 231.04 125.27, 226.68 136.93 C222.32 148.59, 216.57 159.05, 207.73 168.65 C198.89 178.25, 186.24 188.22, 173.62 194.53 C160.99 200.83, 145.96 205.07, 131.98 206.46 C118 207.86, 103.62 206.07, 89.71 202.93 C75.8 199.78, 60.15 194.71, 48.53 187.62 C36.9 180.54, 27.56 170.94, 19.96 160.43 C12.37 149.91, 5.93 136.45, 2.96 124.54 C-0.01 112.62, 0.17 101.16, 2.12 88.94 C4.08 76.72, 7.83 62.07, 14.7 51.21 C21.56 40.36, 32.34 31.54, 43.33 23.81 C54.32 16.09, 67.44 8.57, 80.64 4.85 C93.84 1.14, 108.45 0.63, 122.52 1.53 C136.6 2.43, 158.17 8.56, 165.12 10.25 C172.06 11.93, 164.84 10.24, 164.18 11.63" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1430.2701225616163 535.6789401572504) rotate(0 71.650390625 12.5)"><text x="71.650390625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">File Metadata DB</text></g><g stroke-linecap="round"><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M-0.76 0.19 C23.5 13.53, 120.7 66.77, 145.07 80.05 M1.05 -0.75 C25.71 12.78, 123.35 67.94, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M117.65 76.6 C125.67 76.34, 133.04 78.28, 147.23 81.59 M117.65 76.6 C126.13 78.83, 134.5 80.23, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M127.78 58.75 C133.17 63.07, 137.9 69.65, 147.23 81.59 M127.78 58.75 C133.42 66.01, 138.89 72.52, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M-1.04 0 C28.75 0.23, 147.99 1.49, 178.02 1.63 M0.61 -1.05 C30.86 -0.64, 150.72 2.63, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M151.98 12.72 C158.69 9.58, 165.16 9.15, 180.39 3.08 M151.98 12.72 C158.13 10.97, 164.28 8.07, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M152.43 -7.8 C159.06 -6.08, 165.43 -1.64, 180.39 3.08 M152.43 -7.8 C158.48 -5.01, 164.53 -3.39, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M-0.66 -0.16 C27.29 12.35, 138.87 62.28, 166.69 75.1 M1.19 -1.3 C29.12 11.34, 138.6 63.46, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M136.1 73.43 C142.19 74.92, 147.24 74.72, 165.98 76.13 M136.1 73.43 C146.51 74, 158.32 75.08, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M144.83 54.86 C149.06 60.26, 152.25 64.01, 165.98 76.13 M144.83 54.86 C152.11 62.1, 160.81 69.8, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(1650.7678232569504 462.894218089049) rotate(0 127.74990081787115 100)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FileMetata</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- fileId</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- name</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- size</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- mimeType</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- uploadedBy</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- status</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- s3Url (link to file in s3)</text></g><g stroke-linecap="round" transform="translate(1382.0862635331484 147.80441222978064) rotate(0 117.01249907786587 103.27901920109548)"><path d="M32.61 30.99 C32.61 30.99, 32.61 30.99, 32.61 30.99 M32.61 30.99 C32.61 30.99, 32.61 30.99, 32.61 30.99 M11.35 61.54 C22.29 50.36, 34.38 34.95, 44.15 23.81 M11.35 61.54 C23.15 45.74, 36.01 31.28, 44.15 23.81 M13.06 65.68 C24.34 54.15, 32.22 43.76, 55.05 17.38 M13.06 65.68 C23.6 53.74, 36.18 41.24, 55.05 17.38 M10.83 74.34 C24.65 54.63, 39.68 38.02, 66.59 10.19 M10.83 74.34 C21.91 61.45, 34.04 48.07, 66.59 10.19 M7.94 83.76 C29.78 56.81, 53.48 28.03, 70.92 11.3 M7.94 83.76 C28.52 58.9, 50.39 34.53, 70.92 11.3 M5.71 92.42 C19.99 76.68, 35.11 55.39, 77.22 10.15 M5.71 92.42 C31.98 59.36, 60.79 28.71, 77.22 10.15 M2.83 101.83 C20.06 81.88, 35.68 62.67, 83.52 9 M2.83 101.83 C19.85 81.82, 37.82 61.73, 83.52 9 M3.88 106.72 C33.71 72.82, 60.62 38.34, 89.82 7.86 M3.88 106.72 C33.27 75.56, 60.12 42.44, 89.82 7.86 M4.93 111.61 C39.33 74.47, 70.74 34.79, 96.78 5.95 M4.93 111.61 C26.06 88.93, 45.62 65.15, 96.78 5.95 M5.98 116.5 C33.52 86.12, 61.27 52.95, 103.08 4.8 M5.98 116.5 C33.04 84.79, 63.46 51.05, 103.08 4.8 M6.37 122.14 C42.81 81.96, 79.05 40.32, 110.69 2.14 M6.37 122.14 C46.23 76.71, 86.07 32.56, 110.69 2.14 M7.42 127.03 C34.09 92.65, 62.94 61.83, 115.67 2.5 M7.42 127.03 C31.94 99.63, 55 72.36, 115.67 2.5 M8.48 131.92 C38.72 96.63, 69.28 62.48, 120.66 2.86 M8.48 131.92 C39.12 96.17, 72.04 59.26, 120.66 2.86 M8.87 137.56 C48.72 91.2, 88.83 45.07, 125.65 3.22 M8.87 137.56 C50.6 91.59, 91.25 43.91, 125.65 3.22 M11.23 140.94 C56.95 92.52, 101.04 41.9, 129.98 4.34 M11.23 140.94 C56.19 86.38, 102.5 33.11, 129.98 4.34 M12.94 145.07 C51.01 103.37, 90.39 58.02, 134.97 4.7 M12.94 145.07 C56.5 97.74, 99.31 48.6, 134.97 4.7 M15.3 148.45 C48.21 111.89, 81.55 75.22, 139.95 5.06 M15.3 148.45 C58.19 97.06, 102 46.03, 139.95 5.06 M17.66 151.83 C48.5 118.02, 74.86 85.12, 144.94 5.42 M17.66 151.83 C68.1 93.6, 118.59 35.46, 144.94 5.42 M19.37 155.97 C51.89 119.25, 82.14 81.53, 149.93 5.78 M19.37 155.97 C55.2 113.85, 90.98 73.35, 149.93 5.78 M21.73 159.34 C64.48 110.51, 102.89 64.7, 154.26 6.89 M21.73 159.34 C64.33 113.89, 103.92 66.97, 154.26 6.89 M24.1 162.72 C58.03 120.51, 94.1 79.1, 157.93 8.76 M24.1 162.72 C55.84 124.01, 90.02 84.63, 157.93 8.76 M26.46 166.1 C52.49 133.82, 81.6 102.44, 161.61 10.63 M26.46 166.1 C57.04 130.27, 86.19 96.74, 161.61 10.63 M28.17 170.24 C76.07 116.04, 122.81 60.29, 165.28 12.5 M28.17 170.24 C62.27 131.33, 94.49 94.88, 165.28 12.5 M31.19 172.86 C77.91 116.59, 125.57 62.69, 168.96 14.37 M31.19 172.86 C73.61 125.05, 114.64 78.11, 168.96 14.37 M34.86 174.73 C76.57 128.27, 118.45 79.21, 172.63 16.24 M34.86 174.73 C84.59 116.81, 134.64 58.45, 172.63 16.24 M37.88 177.35 C92.36 115.14, 145.18 53.71, 176.96 17.36 M37.88 177.35 C67.74 142.18, 97.87 108.34, 176.96 17.36 M41.55 179.22 C76.14 135.2, 113.79 95.17, 180.64 19.23 M41.55 179.22 C75.79 141.19, 110.2 102.62, 180.64 19.23 M44.57 181.85 C90.23 129.02, 138.49 74.82, 184.31 21.09 M44.57 181.85 C84.16 136.56, 124.67 90.03, 184.31 21.09 M48.25 183.72 C97.97 126.8, 148.46 68.69, 187.99 22.96 M48.25 183.72 C84.53 144.17, 119.74 103.9, 187.99 22.96 M51.27 186.34 C88.24 144.75, 123.94 99.1, 191.66 24.83 M51.27 186.34 C98.37 132.58, 146.47 78.57, 191.66 24.83 M54.29 188.97 C84.8 154.71, 113.46 118.17, 194.68 27.46 M54.29 188.97 C86.74 149.47, 121.84 109.81, 194.68 27.46 M57.96 190.84 C85.07 159.31, 113.02 128.13, 197.04 30.84 M57.96 190.84 C89.71 157.54, 120.35 121.32, 197.04 30.84 M60.98 193.46 C97.25 148.93, 136.91 104.32, 200.06 33.46 M60.98 193.46 C94.18 155.58, 128.55 116.2, 200.06 33.46 M64 196.08 C89.28 163.45, 118.88 129.16, 203.08 36.09 M64 196.08 C106.25 147.06, 148.1 99.04, 203.08 36.09 M68.33 197.2 C104.8 154.76, 138.85 113.59, 206.1 38.71 M68.33 197.2 C119.17 141.44, 168.29 83.61, 206.1 38.71 M72.66 198.31 C114.06 152.22, 154.79 104.15, 208.46 42.09 M72.66 198.31 C101.51 166.28, 129.85 133.46, 208.46 42.09 M76.99 199.43 C117.94 151.46, 160.76 102.32, 211.48 44.71 M76.99 199.43 C110.69 159.24, 145.98 118.55, 211.48 44.71 M81.32 200.54 C127.22 145.35, 174.47 93.25, 214.5 47.34 M81.32 200.54 C111.82 165.31, 141.58 129.8, 214.5 47.34 M85.65 201.66 C120.96 161.99, 158 122.37, 216.86 50.72 M85.65 201.66 C124.13 156.4, 162.56 112, 216.86 50.72 M89.98 202.77 C119.07 172.22, 145.54 141.44, 219.88 53.34 M89.98 202.77 C132.87 153, 178.55 102.24, 219.88 53.34 M94.31 203.89 C139.85 150.79, 184.49 94.5, 221.59 57.47 M94.31 203.89 C143 148.02, 190.25 91.83, 221.59 57.47 M98.65 205 C136.3 157.77, 177.84 112.48, 223.3 61.61 M98.65 205 C148.79 149.28, 197.88 92.62, 223.3 61.61 M103.63 205.36 C144.65 159.58, 189.2 109.99, 225 65.74 M103.63 205.36 C144.07 161.48, 181.47 115.65, 225 65.74 M109.28 204.97 C148.61 162.77, 186.65 117.37, 226.71 69.87 M109.28 204.97 C143.27 164.32, 176.91 125.05, 226.71 69.87 M114.26 205.33 C152.95 158.36, 191.07 115.25, 228.42 74.01 M114.26 205.33 C144.66 169.25, 175.38 134.6, 228.42 74.01 M119.91 204.93 C153.6 167.35, 187.98 128.4, 229.47 78.9 M119.91 204.93 C146.87 173.33, 173.34 141.24, 229.47 78.9 M125.55 204.54 C148.04 180.43, 167.97 155.81, 231.17 83.03 M125.55 204.54 C155.62 172.22, 184.05 137.58, 231.17 83.03 M131.19 204.14 C160.69 169.91, 191.38 135.5, 232.88 87.16 M131.19 204.14 C161.58 169.3, 192.96 133.85, 232.88 87.16 M136.18 204.5 C171.75 162.74, 210.17 121.24, 235.24 90.54 M136.18 204.5 C171.18 164.1, 207.38 124.37, 235.24 90.54 M141.82 204.11 C175.4 164.05, 210.9 122.85, 234.98 96.94 M141.82 204.11 C161.29 179.91, 183.31 156.45, 234.98 96.94 M146.81 204.47 C183.12 163.29, 215.83 126.3, 234.72 103.34 M146.81 204.47 C181.55 164.59, 217.49 124.73, 234.72 103.34 M155.73 200.3 C185.15 164.62, 213.88 132.38, 234.46 109.74 M155.73 200.3 C185.59 165.35, 215.94 130.02, 234.46 109.74 M164 196.89 C180.76 179.02, 194.51 161.15, 234.2 116.13 M164 196.89 C182.69 175.9, 200.19 154.39, 234.2 116.13 M172.27 193.47 C193.04 168.2, 216.26 142.63, 233.94 122.53 M172.27 193.47 C191.6 171.18, 211.97 148.23, 233.94 122.53 M181.19 189.31 C194.72 171.81, 212.44 154.26, 233.68 128.93 M181.19 189.31 C196.64 173.1, 209.97 155.37, 233.68 128.93 M186.18 189.67 C193.34 178.7, 204.81 170.42, 226.2 143.63 M186.18 189.67 C199.16 174.96, 212.2 157.62, 226.2 143.63" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M110.08 1.1 C123.23 -1.01, 139.48 2.05, 152.84 5.8 C166.21 9.55, 179.44 16.01, 190.25 23.6 C201.07 31.2, 210.78 40.6, 217.74 51.37 C224.69 62.15, 229.88 75.69, 231.99 88.25 C234.11 100.8, 233.53 114.62, 230.43 126.69 C227.34 138.77, 221.3 150.65, 213.44 160.69 C205.58 170.74, 194.56 179.89, 183.29 186.97 C172.01 194.04, 159.22 200.18, 145.8 203.14 C132.38 206.11, 116.87 206.44, 102.78 204.78 C88.69 203.12, 73.77 198.98, 61.26 193.17 C48.75 187.37, 36.71 179.43, 27.71 169.97 C18.7 160.51, 11.85 148.16, 7.2 136.42 C2.56 124.68, -0.67 111.77, -0.16 99.53 C0.36 87.29, 4.83 74.4, 10.3 62.97 C15.77 51.53, 22.95 39.92, 32.68 30.91 C42.4 21.9, 53.57 14.1, 68.64 8.91 C83.71 3.71, 112.03 0.71, 123.08 -0.24 C134.12 -1.19, 135.19 1.52, 134.91 3.19 M112.81 0.63 C125.85 -1.11, 141.31 2.46, 154.63 6.27 C167.96 10.07, 182.2 15.66, 192.77 23.47 C203.35 31.28, 211.35 42.21, 218.08 53.14 C224.8 64.08, 230.96 76.95, 233.1 89.09 C235.24 101.23, 234.07 113.66, 230.9 125.97 C227.73 138.28, 222.23 152.65, 214.08 162.95 C205.94 173.26, 193.82 180.88, 182.05 187.81 C170.28 194.75, 157.14 201.63, 143.47 204.55 C129.81 207.47, 114.2 206.97, 100.05 205.31 C85.9 203.66, 70.85 200.54, 58.58 194.64 C46.31 188.74, 35.26 179.68, 26.45 169.93 C17.64 160.19, 10 148.18, 5.73 136.19 C1.46 124.2, 0.13 110.38, 0.83 98.01 C1.54 85.63, 4.55 73.07, 9.96 61.95 C15.37 50.82, 23.12 40.22, 33.27 31.28 C43.43 22.33, 57.5 13.3, 70.88 8.27 C84.27 3.23, 106.93 2.12, 113.6 1.07 C120.27 0.01, 111.04 0.52, 110.9 1.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1488.2969075919707 238.55413659948584) rotate(0 10.5615234375 12.5)"><text x="10.5615234375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">S3</text></g><g transform="translate(1640.5905110761503 193.05905577124852) rotate(0 120.10989379882818 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Stores the actual file</text></g><g mask="url(#mask-7_NapHJKX7kE17IpxNbql)" stroke-linecap="round"><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M1.11 -0.14 C29.66 -16.14, 142.75 -80.19, 171 -96.29 M0.24 -1.26 C28.73 -17.08, 142.23 -79.29, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M20.6 -22.95 C14.93 -14.85, 8.75 -9.13, 1.11 -0.14 M20.6 -22.95 C16.66 -18.98, 13 -14.16, 1.11 -0.14" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M30.7 -5.08 C22.27 -1.83, 13.31 -1.06, 1.11 -0.14 M30.7 -5.08 C24.71 -5.01, 18.89 -4.02, 1.11 -0.14" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M150.84 -72.47 C156.12 -77.29, 160.79 -84.14, 170.56 -95.07 M150.84 -72.47 C155.58 -77.94, 160.32 -82.84, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M140.92 -90.43 C148.9 -90.38, 156.32 -92.26, 170.56 -95.07 M140.92 -90.43 C147.67 -91.98, 154.53 -93.04, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-7_NapHJKX7kE17IpxNbql"><rect x="0" y="0" fill="#fff" width="1471.4132612637966" height="577.4049181695482"></rect><rect x="1214.7489856642928" y="321.3800514313966" fill="#000" width="143.291015625" height="25" opacity="1"></rect></mask><g transform="translate(1214.7489856642928 321.3800514313966) rotate(0 72.24588065383023 12.126699001714584)"><text x="71.6455078125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">getPresignedUrl()</text></g><g mask="url(#mask-h_9knwtDXtHmYEqrFUHUK)" stroke-linecap="round"><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M0.61 -1.03 C3.52 12.86, 26.03 56.38, 18.41 82.72 C10.78 109.05, -34.66 144.64, -45.15 157 M-0.53 1.04 C2.68 15.11, 28.24 57.66, 20.71 83.8 C13.19 109.93, -34.33 145.55, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M-31.87 131.2 C-38.97 140.11, -43.96 152.28, -45.68 157.83 M-31.87 131.2 C-34.7 136.09, -38.64 143.67, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M-17.98 146.31 C-30.29 149.54, -40.56 155.97, -45.68 157.83 M-17.98 146.31 C-24.04 147.72, -31.07 151.94, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-h_9knwtDXtHmYEqrFUHUK"><rect x="0" y="0" fill="#fff" width="1790.7995206117073" height="552.1973883684341"></rect><rect x="1571.0359171281411" y="352.8498024900214" fill="#000" width="148.330078125" height="50" opacity="1"></rect></mask><g transform="translate(1571.0359171281411 352.8498024900214) rotate(0 43.18346391083304 19.81656738189953)"><text x="74.1650390625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">s3 Notification on </text><text x="74.1650390625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">completed upload</text></g><g mask="url(#mask-faRIOu6wwKV7jd3n5zz1z)" stroke-linecap="round"><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M0.45 -0.93 C36.06 -18.97, 47.57 -93.11, 212.89 -109.13 C378.21 -125.14, 829.93 -118.42, 992.37 -97.03 C1154.82 -75.65, 1154.94 -0.16, 1187.57 19.19 M-0.77 1.2 C34.84 -16.65, 47.11 -91.86, 212.51 -108.11 C377.9 -124.36, 829.14 -117.17, 991.61 -96.3 C1154.07 -75.43, 1154.2 -2.27, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M15.92 -26.63 C10.55 -18.75, 6.79 -14.49, 0.45 -0.93 M15.92 -26.63 C12.09 -20.55, 8.33 -15.8, 0.45 -0.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M28.82 -10.68 C20.54 -6.5, 13.74 -5.99, 0.45 -0.93 M28.82 -10.68 C22.45 -7.81, 16.01 -6.38, 0.45 -0.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M1160.8 2.98 C1165.37 7.98, 1171.47 9.52, 1187.27 17.09 M1160.8 2.98 C1165.77 6.36, 1170.73 8.69, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M1176.06 -10.73 C1176.95 -2.46, 1179.46 2.31, 1187.27 17.09 M1176.06 -10.73 C1177.75 -4.4, 1179.53 0.78, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-faRIOu6wwKV7jd3n5zz1z"><rect x="0" y="0" fill="#fff" width="1514.1757964154122" height="377.41579363560504"></rect><rect x="745.554277914893" y="10" fill="#000" width="184.970703125" height="50" opacity="1"></rect></mask><g transform="translate(745.554277914893 10) rotate(0 73.41902817957407 91.58164614945599)"><text x="92.4853515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Upload file directly to </text><text x="92.4853515625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">S3 via pre-signed URL</text></g><g stroke-linecap="round"><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M0 -1.11 C22.71 -14.89, 114.33 -69.91, 137.3 -83.69 M-1.46 0.92 C21.52 -13.1, 116.42 -70.91, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M18.86 -24.44 C9.48 -17.08, 5.45 -7.09, 0 -1.11 M18.86 -24.44 C10.9 -16.07, 4.75 -6.74, 0 -1.11" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M29.45 -6.85 C16.1 -6.34, 7.95 -3.19, 0 -1.11 M29.45 -6.85 C17.8 -4.87, 7.8 -1.95, 0 -1.11" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M120.86 -61.82 C126.45 -72.69, 136.99 -80.93, 139.47 -85.35 M120.86 -61.82 C126.97 -70.52, 134.45 -78.24, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M110.09 -79.29 C119.72 -83.37, 134.45 -84.81, 139.47 -85.35 M110.09 -79.29 C119.95 -81.63, 131.35 -83, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(43.614638659676075 783.3098277852059) rotate(0 117.01249907786587 103.27901920109548)"><path d="M22.58 42.15 C22.58 42.15, 22.58 42.15, 22.58 42.15 M22.58 42.15 C22.58 42.15, 22.58 42.15, 22.58 42.15 M12.48 59.87 C22.13 45.78, 35.31 36.4, 41.34 26.67 M12.48 59.87 C21.61 48.12, 30.47 36.95, 41.34 26.67 M3.69 76.08 C19.2 58.93, 33.06 44.41, 54.86 17.21 M3.69 76.08 C20.23 56.21, 36.36 37.37, 54.86 17.21 M3.43 82.48 C17.87 63.7, 32.78 47.1, 62.47 14.56 M3.43 82.48 C25.73 56.25, 49.28 30.5, 62.47 14.56 M3.16 88.88 C18.15 68.86, 31.51 52.99, 70.74 11.14 M3.16 88.88 C31.76 58.18, 57.72 26.69, 70.74 11.14 M2.9 95.27 C26.9 67.58, 50.6 41.6, 78.35 8.48 M2.9 95.27 C26.37 68.78, 49.47 40.7, 78.35 8.48 M1.99 102.43 C17.82 85.23, 36.66 63.74, 86.62 5.07 M1.99 102.43 C21.61 80.25, 42.07 56.34, 86.62 5.07 M1.72 108.82 C26.12 82.72, 50.68 54.52, 94.88 1.66 M1.72 108.82 C34.02 70.89, 68.24 32.94, 94.88 1.66 M1.46 115.22 C24.22 85.2, 50.77 61.1, 99.87 2.02 M1.46 115.22 C28.46 83.64, 56.74 52.03, 99.87 2.02 M3.17 119.36 C31.09 84.31, 60.98 50.5, 105.51 1.62 M3.17 119.36 C39.44 77.53, 73.66 37.09, 105.51 1.62 M4.22 124.24 C46.4 76.84, 89.66 25.72, 110.5 1.98 M4.22 124.24 C40.61 81.58, 77.5 39.37, 110.5 1.98 M5.93 128.38 C42.68 85.39, 79.38 47.04, 115.49 2.34 M5.93 128.38 C31.75 97.91, 57.82 67.77, 115.49 2.34 M7.63 132.51 C29.48 105.28, 55.93 76.72, 121.13 1.95 M7.63 132.51 C41.53 92.21, 78.73 51.14, 121.13 1.95 M9.34 136.65 C54.89 82.31, 98.29 29.67, 126.12 2.31 M9.34 136.65 C36.9 105.63, 65.1 74.91, 126.12 2.31 M10.39 141.53 C35.73 110.92, 65.46 80.27, 131.76 1.91 M10.39 141.53 C42.03 106.94, 72.55 72.44, 131.76 1.91 M12.1 145.67 C58.27 91.53, 102.25 39.1, 137.41 1.52 M12.1 145.67 C44.02 112.65, 73.25 77.03, 137.41 1.52 M13.8 149.8 C52.42 106.25, 89.67 63.34, 141.08 3.39 M13.8 149.8 C51.13 106.82, 88.92 62.87, 141.08 3.39 M16.17 153.18 C53.37 110.89, 88.92 68.16, 145.41 4.5 M16.17 153.18 C66.72 97.57, 114.78 39.29, 145.41 4.5 M18.53 156.56 C53.41 117.64, 91.73 74.04, 149.74 5.62 M18.53 156.56 C63.54 103.03, 108.68 50.95, 149.74 5.62 M21.55 159.18 C54.87 120.35, 86.95 85, 154.07 6.73 M21.55 159.18 C65.52 107.71, 109.42 58.07, 154.07 6.73 M23.91 162.56 C67.93 115.74, 107.18 66.52, 158.4 7.85 M23.91 162.56 C76.13 102.89, 128.63 42.21, 158.4 7.85 M26.27 165.94 C65.61 125.64, 99.88 82.83, 162.08 9.72 M26.27 165.94 C74.39 110.27, 121.51 54.98, 162.08 9.72 M29.29 168.57 C78.49 114.88, 125.9 59.54, 166.41 10.83 M29.29 168.57 C82.17 108.23, 135.31 47.93, 166.41 10.83 M31.66 171.94 C69.21 127.29, 107.09 83.27, 170.74 11.95 M31.66 171.94 C67.08 130.16, 103.32 87.74, 170.74 11.95 M34.02 175.32 C70.86 132.71, 106.57 90.33, 175.07 13.06 M34.02 175.32 C85.42 116.51, 134.16 59.56, 175.07 13.06 M37.04 177.95 C76.96 131.07, 118.58 85.56, 178.75 14.93 M37.04 177.95 C76.35 130.67, 117.63 84.75, 178.75 14.93 M39.4 181.33 C79.41 133.16, 122.14 86.3, 181.77 17.55 M39.4 181.33 C81.95 131.65, 125.75 81.9, 181.77 17.55 M43.08 183.2 C73.31 150.27, 104.46 116.42, 184.78 20.18 M43.08 183.2 C95.66 121.78, 149.55 60.04, 184.78 20.18 M46.75 185.07 C72.9 152.18, 101.98 121.14, 187.8 22.8 M46.75 185.07 C92.9 134.24, 136.95 82.78, 187.8 22.8 M49.77 187.69 C92.28 138.77, 132.76 94.07, 191.48 24.67 M49.77 187.69 C93.28 138.54, 135.96 89.88, 191.48 24.67 M53.44 189.56 C102.89 134, 155.37 77.24, 194.5 27.3 M53.44 189.56 C85.57 152.62, 116.34 117.42, 194.5 27.3 M57.12 191.43 C87.09 155.61, 119.92 121.01, 197.52 29.92 M57.12 191.43 C109.77 131.11, 160.35 73.36, 197.52 29.92 M60.79 193.3 C88.46 159.57, 117.45 124.22, 200.53 32.55 M60.79 193.3 C111.55 135.72, 161.04 77.18, 200.53 32.55 M64.47 195.17 C97.09 156.76, 134.01 115.85, 203.55 35.17 M64.47 195.17 C104.35 150.63, 143.87 105.41, 203.55 35.17 M68.14 197.04 C101.15 161.87, 132.91 126.34, 206.57 37.79 M68.14 197.04 C97.69 161.7, 128.13 127.43, 206.57 37.79 M71.82 198.91 C112.13 152.22, 151.89 107.43, 209.59 40.42 M71.82 198.91 C113.83 148.87, 156.18 99.68, 209.59 40.42 M75.49 200.78 C127.68 141.2, 180.62 78.71, 211.95 43.8 M75.49 200.78 C125.36 143.31, 176.19 86.5, 211.95 43.8 M78.51 203.4 C131.52 144.06, 181.67 84.62, 214.32 47.18 M78.51 203.4 C121.25 156.86, 163.34 108.61, 214.32 47.18 M83.5 203.76 C111.87 167.44, 143.84 135.16, 216.02 51.31 M83.5 203.76 C129.74 149.33, 176.3 94.9, 216.02 51.31 M88.49 204.12 C117.86 169.76, 148.16 132.34, 218.39 54.69 M88.49 204.12 C123.73 162.27, 158.19 122.56, 218.39 54.69 M93.47 204.48 C121.96 169.43, 154.5 133.73, 220.75 58.07 M93.47 204.48 C141.97 148.19, 192.11 93.17, 220.75 58.07 M97.8 205.6 C136.66 164.37, 175.81 118.23, 223.11 61.45 M97.8 205.6 C123.64 175.02, 151.86 143.86, 223.11 61.45 M102.79 205.96 C138.37 165.51, 171.18 123.91, 224.82 65.58 M102.79 205.96 C135.03 169.01, 165.28 132.05, 224.82 65.58 M107.78 206.32 C144.66 163.57, 179.17 122.13, 227.18 68.96 M107.78 206.32 C140.22 168.39, 174.18 130.63, 227.18 68.96 M112.77 206.68 C153.56 162.15, 192.23 115.58, 229.54 72.34 M112.77 206.68 C141.83 175.33, 169.99 142.57, 229.54 72.34 M118.41 206.28 C149.15 170.85, 184.02 132.03, 231.91 75.72 M118.41 206.28 C144.16 177.68, 168.9 149.31, 231.91 75.72 M124.71 205.13 C163.81 160.15, 204.03 116.38, 232.3 81.36 M124.71 205.13 C162.55 160.32, 201.01 117.02, 232.3 81.36 M131.01 203.98 C165.41 161.03, 202.83 120.3, 232.7 87 M131.01 203.98 C164.58 164.58, 197.36 126.59, 232.7 87 M137.31 202.83 C162.92 174.45, 184.72 150.86, 233.09 92.65 M137.31 202.83 C168.05 167.9, 198.06 131.2, 233.09 92.65 M142.95 202.44 C177.24 160.21, 214.12 120.59, 234.14 97.53 M142.95 202.44 C171.81 170.11, 198.69 137.08, 234.14 97.53 M149.25 201.29 C167.79 175.6, 189.48 151.08, 234.54 103.18 M149.25 201.29 C170 179.83, 188.61 156.95, 234.54 103.18 M155.55 200.14 C179.57 172.95, 203.57 143.93, 234.93 108.82 M155.55 200.14 C170.98 179.9, 188.31 161.1, 234.93 108.82 M161.85 198.99 C186.78 168.27, 213.91 139.7, 235.98 113.71 M161.85 198.99 C178.68 179.51, 194.2 162.26, 235.98 113.71 M172.08 193.31 C194.59 170.54, 216.43 143.63, 233.75 122.37 M172.08 193.31 C189.92 173.64, 205.25 156.12, 233.75 122.37 M182.97 186.88 C199.84 166.77, 218.07 146.54, 230.87 131.79 M182.97 186.88 C194.6 174.78, 204.33 161.51, 230.87 131.79 M193.21 181.2 C202.57 170.79, 208.52 161.17, 227.98 141.2 M193.21 181.2 C202.82 170.06, 211.95 159.31, 227.98 141.2" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M93.76 1.18 C106.39 -2.61, 122.59 -0.81, 136.59 1.3 C150.59 3.41, 165.69 7.47, 177.77 13.86 C189.84 20.25, 200.36 29.64, 209.05 39.63 C217.74 49.63, 225.9 61.92, 229.9 73.82 C233.89 85.72, 234.21 98.77, 233 111.05 C231.79 123.33, 228.52 136.32, 222.64 147.5 C216.76 158.69, 207.9 169.58, 197.72 178.15 C187.53 186.73, 174.77 194.32, 161.53 198.95 C148.29 203.58, 132.47 205.58, 118.28 205.94 C104.08 206.29, 89.64 205.24, 76.37 201.11 C63.09 196.97, 49.1 189.52, 38.62 181.12 C28.13 172.72, 19.69 161.76, 13.45 150.71 C7.21 139.65, 2.84 127.32, 1.19 114.81 C-0.46 102.3, 0.02 87.69, 3.54 75.62 C7.07 63.56, 14.01 52.29, 22.35 42.42 C30.7 32.55, 40.47 23.24, 53.61 16.4 C66.75 9.56, 91.58 3.83, 101.22 1.4 C110.85 -1.04, 111.11 0.14, 111.41 1.78 M140.32 3.62 C153.8 4.72, 168.91 11.21, 180.85 17.88 C192.79 24.55, 203.58 33.7, 211.94 43.63 C220.29 53.56, 227.49 65.36, 231 77.45 C234.51 89.54, 234.99 103.58, 233 116.16 C231.01 128.74, 225.5 142.14, 219.06 152.94 C212.61 163.74, 204.5 172.87, 194.33 180.95 C184.16 189.04, 171.62 197.23, 158.03 201.46 C144.44 205.68, 127.08 206.92, 112.78 206.31 C98.47 205.69, 84.83 202.72, 72.19 197.76 C59.55 192.8, 47.09 185.15, 36.93 176.55 C26.76 167.95, 17.37 157.34, 11.2 146.15 C5.03 134.96, 1.03 121.71, -0.07 109.42 C-1.18 97.13, 0.1 84.36, 4.57 72.41 C9.03 60.47, 17.73 47.43, 26.72 37.74 C35.71 28.05, 46.51 20.31, 58.52 14.27 C70.54 8.23, 85.06 3.46, 98.8 1.51 C112.54 -0.43, 134.03 1.95, 140.96 2.61 C147.88 3.26, 140.66 3.68, 140.35 5.46" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(139.27352490599833 874.0595521549111) rotate(0 21.11328125 12.5)"><text x="21.11328125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">CDN</text></g><g mask="url(#mask-pvNbZq1Zw8khHhoTHLKrG)" stroke-linecap="round"><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M-1.13 0.05 C-1.51 -17.42, -2.63 -86.88, -2.75 -104.06 M0.47 -0.96 C0.5 -18.31, -0.06 -85.27, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M10.17 -74.6 C7.28 -83.75, 4.15 -89.61, -0.6 -102.6 M10.17 -74.6 C6.26 -84.18, 2.74 -96.11, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M-10.35 -74.23 C-7.91 -83.29, -5.71 -89.24, -0.6 -102.6 M-10.35 -74.23 C-6.64 -83.9, -2.53 -95.97, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-pvNbZq1Zw8khHhoTHLKrG"><rect x="0" y="0" fill="#fff" width="242.01391207321785" height="962.3752862861229"></rect><rect x="79.76118104160378" y="694.0020497038828" fill="#000" width="119.43359375" height="25" opacity="1"></rect></mask><g transform="translate(79.76118104160378 694.0020497038828) rotate(0 59.42343826789258 12.452803225442779)"><text x="59.716796875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Download File</text></g><g mask="url(#mask-3m6x94U0XhO28k20EQPhz)" stroke-linecap="round"><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-0.21 0.86 C-132.02 74.36, -602.33 352.21, -791.93 440.87 C-981.53 529.54, -1080.27 517.82, -1137.82 532.84 M-1.78 0.26 C-133.12 73.96, -600.22 353.81, -789.7 442.27 C-979.18 530.73, -1080.82 516.13, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-1112.15 517 C-1116.35 518.37, -1123.84 522.63, -1138.67 531.03 M-1112.15 517 C-1122.47 522.3, -1132.89 528.16, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-1109.34 537.32 C-1114.1 534.4, -1122.19 534.35, -1138.67 531.03 M-1109.34 537.32 C-1120.81 534.78, -1132.31 532.81, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-3m6x94U0XhO28k20EQPhz"><rect x="0" y="0" fill="#fff" width="2670.398266445838" height="986.0820364170404"></rect><rect x="516.5078123709833" y="782.9115685669467" fill="#000" width="250.44921875" height="25" opacity="1"></rect></mask><g transform="translate(516.5078123709834 782.9115685669468) rotate(0 346.7863413016561 -162.0958444742074)"><text x="125.224609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Cache frequently accessed files</text></g><g transform="translate(1917.046063231449 455.49424423101846) rotate(0 66.39994049072266 37.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SharedFiles</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- userId (PK)</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- fileId </text></g><g stroke-linecap="round" transform="translate(10 160.65529265587432) rotate(0 121.49741104278652 109.34987420638313)"><path d="M32 0 C82.02 -0.94, 134.92 -1.36, 210.99 0 M32 0 C95.22 -1.55, 157.9 -1.07, 210.99 0 M210.99 0 C234.23 -1.85, 243.88 11.38, 242.99 32 M210.99 0 C232.22 1.17, 243.91 9.66, 242.99 32 M242.99 32 C242.18 63.91, 240.82 96.65, 242.99 186.7 M242.99 32 C242.45 88.33, 242.14 143.7, 242.99 186.7 M242.99 186.7 C241.62 209.85, 232.06 220.08, 210.99 218.7 M242.99 186.7 C242.74 208.85, 233.37 218.65, 210.99 218.7 M210.99 218.7 C161.82 217.92, 108.56 219, 32 218.7 M210.99 218.7 C145.7 217.86, 80.8 217.56, 32 218.7 M32 218.7 C10.92 217.55, -0.45 206.9, 0 186.7 M32 218.7 C9.55 218.46, 2.02 206.06, 0 186.7 M0 186.7 C0.14 133.26, 0.34 80.17, 0 32 M0 186.7 C0.69 127.13, 0.72 70.1, 0 32 M0 32 C1.96 9.22, 9.03 -1.23, 32 0 M0 32 C-1.41 9.45, 12.58 -1.48, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(86.99741382353704 203.47100713651346) rotate(0 42.369964599609375 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Uploader</text></g><g stroke-linecap="round" transform="translate(26.058176997470582 262.9218618917894) rotate(0 106.24924507612394 44.770800757774055)"><path d="M22.39 0 C71.19 -0.1, 118.96 0.54, 190.11 0 M22.39 0 C64.24 -0.78, 104.63 0.5, 190.11 0 M190.11 0 C204.94 1.02, 213.3 6.59, 212.5 22.39 M190.11 0 C202.86 -0.44, 212.69 6.87, 212.5 22.39 M212.5 22.39 C213.31 35.27, 210.83 50.15, 212.5 67.16 M212.5 22.39 C211.73 38.6, 212.28 53.69, 212.5 67.16 M212.5 67.16 C212.27 82.79, 205.95 89.5, 190.11 89.54 M212.5 67.16 C212.15 83.33, 202.92 91.62, 190.11 89.54 M190.11 89.54 C133.86 89.38, 74.71 91.35, 22.39 89.54 M190.11 89.54 C149.62 87.5, 108.65 87.51, 22.39 89.54 M22.39 89.54 C6.49 89.33, 1.75 80.37, 0 67.16 M22.39 89.54 C8.43 89.72, 0.67 82.38, 0 67.16 M0 67.16 C1.47 55.1, 1.17 44.32, 0 22.39 M0 67.16 C0.58 57.35, -1.21 48.38, 0 22.39 M0 22.39 C-1.23 6.41, 9.13 -1.29, 22.39 0 M0 22.39 C1.5 7.63, 6.09 1.95, 22.39 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(35.15368585603028 273.6887222667892) rotate(0 98.23194122314453 20)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Watch for changes and</text><text x="0" y="20" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">upload to remote</text></g><g stroke-linecap="round" transform="translate(10.440933726090407 428.694676614683) rotate(0 121.49741104278652 109.34987420638313)"><path d="M32 0 C78.21 -1.15, 126.51 1.97, 210.99 0 M32 0 C69.14 -0.13, 106.76 -1.08, 210.99 0 M210.99 0 C230.43 -0.39, 243.16 10.15, 242.99 32 M210.99 0 C232.49 -2.16, 244.28 12.08, 242.99 32 M242.99 32 C242.87 71.33, 241.78 110, 242.99 186.7 M242.99 32 C242.67 92.84, 243.24 152.95, 242.99 186.7 M242.99 186.7 C242.69 209.12, 230.49 220.51, 210.99 218.7 M242.99 186.7 C243.99 207.5, 234.56 220.2, 210.99 218.7 M210.99 218.7 C172.15 220.01, 133.88 219.11, 32 218.7 M210.99 218.7 C167.09 217.59, 125.03 216.83, 32 218.7 M32 218.7 C11.51 218.85, 0.58 208.29, 0 186.7 M32 218.7 C10.07 219.23, -0.79 209.84, 0 186.7 M0 186.7 C-2.93 140.43, 0.18 92.58, 0 32 M0 186.7 C0.65 150.97, 2.1 115.66, 0 32 M0 32 C1.31 10.81, 9.48 1.69, 32 0 M0 32 C-0.94 8.49, 8.84 -1.83, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(87.5619750372598 471.5103910953221) rotate(0 54.39995574951172 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Downloader</text></g><g stroke-linecap="round" transform="translate(26.49911072356099 530.9612458505981) rotate(0 106.24924507612394 44.770800757774055)"><path d="M22.39 0 C60.64 -0.71, 103.29 -1.69, 190.11 0 M22.39 0 C80.29 0.54, 140.17 0.47, 190.11 0 M190.11 0 C205.18 -1.88, 213.62 8.69, 212.5 22.39 M190.11 0 C204.04 -1.43, 212.79 8.43, 212.5 22.39 M212.5 22.39 C214.26 34.75, 213.83 47.43, 212.5 67.16 M212.5 22.39 C212.55 37.95, 211.78 53.34, 212.5 67.16 M212.5 67.16 C213.36 81.62, 206.98 90.85, 190.11 89.54 M212.5 67.16 C210.44 81.74, 205.24 88.21, 190.11 89.54 M190.11 89.54 C129.03 89.3, 69.12 88.79, 22.39 89.54 M190.11 89.54 C141.96 88.18, 93.26 88.23, 22.39 89.54 M22.39 89.54 C6.94 90.01, -0.69 83.65, 0 67.16 M22.39 89.54 C7.7 91.01, 1.95 79.84, 0 67.16 M0 67.16 C-1.71 48.12, -1.5 31.14, 0 22.39 M0 67.16 C0.28 56.16, -0.97 45.87, 0 22.39 M0 22.39 C-0.82 5.57, 5.87 -1.59, 22.39 0 M0 22.39 C0.57 9.53, 8.09 -0.45, 22.39 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(51.37159071292126 552.4071586602295) rotate(0 82.88794708251953 20)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- poll for changes in </text><text x="0" y="20" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">remote and sync</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Sync</span></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="tying-it-all-together">Tying it all together</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's take a step back and look at our system as a whole. At this point, we have a simple design that satisfies all of our functional requirements.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2059.845944212894 999.8678661873969">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="2059.845944212894" height="999.8678661873969" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(415.25433243483326 153.17824227926306) rotate(0 121.46922492234663 235.376796553026)"><path d="M32 0 C86.5 -0.85, 136.98 0, 210.94 0 M32 0 C90.54 -1.39, 150.27 -0.82, 210.94 0 M210.94 0 C231.01 0.32, 241.2 10.66, 242.94 32 M210.94 0 C231 -0.31, 243.81 8.84, 242.94 32 M242.94 32 C244.81 153.19, 243.96 275.93, 242.94 438.75 M242.94 32 C245.04 148.84, 244.39 266.23, 242.94 438.75 M242.94 438.75 C243.69 458.54, 234.05 469.08, 210.94 470.75 M242.94 438.75 C242.94 457.96, 230.3 472.43, 210.94 470.75 M210.94 470.75 C164.52 467.3, 117.67 468.72, 32 470.75 M210.94 470.75 C144.33 471.2, 78.33 469.67, 32 470.75 M32 470.75 C10.36 470.92, -0.73 461.15, 0 438.75 M32 470.75 C9.85 472.02, -0.08 458.8, 0 438.75 M0 438.75 C-0.84 342.01, 0.59 244.23, 0 32 M0 438.75 C-1.43 295.92, -0.85 153.17, 0 32 M0 32 C0.14 8.79, 11.79 1.23, 32 0 M0 32 C-1 9.23, 10.96 0.96, 32 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(446.74797141967986 326.05503883228903) rotate(0 89.9755859375 62.5)"><text x="89.9755859375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">API Gateway &amp; Load </text><text x="89.9755859375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Balancer</text><text x="89.9755859375" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- routing</text><text x="89.9755859375" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- authentication</text><text x="89.9755859375" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- rate limiting</text></g><g stroke-linecap="round" transform="translate(867.5904073530326 293.39859355503995) rotate(0 157.06558344700125 94.52632972788251)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M2.35 20.59 C7.98 13.77, 11.58 9.2, 18.1 2.48 M2.35 20.59 C6.72 16.52, 10.33 11.05, 18.1 2.48 M1.43 27.75 C7.9 20.05, 14.8 13.03, 24.4 1.33 M1.43 27.75 C7.42 20.24, 16.11 12.12, 24.4 1.33 M1.17 34.14 C6.94 25.54, 16.55 17.59, 30.7 0.18 M1.17 34.14 C12.78 21.5, 21.77 8.71, 30.7 0.18 M0.91 40.54 C9.17 30.85, 18.24 21.49, 36.34 -0.21 M0.91 40.54 C9.47 30.2, 17.47 21.97, 36.34 -0.21 M1.31 46.19 C10.49 37.34, 20.49 26.64, 41.33 0.15 M1.31 46.19 C10.13 35.98, 20.57 24.67, 41.33 0.15 M1.04 52.58 C12.57 39.64, 21.87 28.81, 46.97 -0.25 M1.04 52.58 C11.3 40.6, 24.52 26.73, 46.97 -0.25 M1.44 58.23 C13.99 44.7, 22.31 36.77, 51.96 0.11 M1.44 58.23 C17.89 38.71, 34.37 20.62, 51.96 0.11 M1.18 64.62 C16.55 47.78, 30.56 29.99, 57.6 -0.28 M1.18 64.62 C18.99 43.83, 37.91 21.73, 57.6 -0.28 M0.92 71.02 C23.28 44.7, 47.01 16.11, 62.59 0.08 M0.92 71.02 C20.83 46.67, 41.15 23.84, 62.59 0.08 M1.31 76.67 C20.53 55.32, 37.62 32.07, 67.57 0.44 M1.31 76.67 C19.3 55.16, 39.17 33.04, 67.57 0.44 M1.05 83.06 C15.39 65.78, 31.3 46.91, 73.22 0.04 M1.05 83.06 C26.08 54.15, 50.5 23.62, 73.22 0.04 M1.44 88.71 C20.79 67.75, 39.23 49.39, 78.2 0.41 M1.44 88.71 C20.81 67.49, 38.59 46.74, 78.2 0.41 M1.18 95.1 C35.27 56.7, 68.87 18.1, 83.85 0.01 M1.18 95.1 C28.45 64.06, 54.79 33.7, 83.85 0.01 M0.92 101.5 C19.71 78.02, 42.13 53.55, 88.83 0.37 M0.92 101.5 C31.14 66.2, 62.04 29.8, 88.83 0.37 M1.32 107.14 C27.85 78.34, 54.56 44.48, 94.48 -0.02 M1.32 107.14 C36.77 66.69, 71.88 25.61, 94.48 -0.02 M1.05 113.54 C25.33 85.6, 49.9 56.95, 99.46 0.34 M1.05 113.54 C28.23 80.23, 56.54 46.09, 99.46 0.34 M1.45 119.19 C32.21 80.92, 64.55 46.12, 105.11 -0.06 M1.45 119.19 C34.8 80.5, 67.59 42.36, 105.11 -0.06 M1.19 125.58 C23.55 97.98, 46.89 74.06, 110.09 0.3 M1.19 125.58 C40.75 81.45, 80.05 35.89, 110.09 0.3 M0.93 131.98 C33.95 91.56, 68.59 52.4, 115.74 -0.09 M0.93 131.98 C37.8 90.25, 75.18 48.1, 115.74 -0.09 M1.32 137.62 C38.76 97.53, 71.52 58.62, 120.72 0.27 M1.32 137.62 C48.81 84.05, 95.04 29.48, 120.72 0.27 M1.06 144.02 C49.35 88.24, 98.27 31.89, 126.37 -0.13 M1.06 144.02 C30.3 111.43, 60.6 79.44, 126.37 -0.13 M1.45 149.67 C28.97 115.64, 57.88 83.04, 131.35 0.23 M1.45 149.67 C31.22 115.98, 59.77 84.44, 131.35 0.23 M1.19 156.06 C46.32 108.09, 86.42 58.29, 137 -0.16 M1.19 156.06 C36.21 115.07, 71.63 75.19, 137 -0.16 M0.93 162.46 C52.96 104.91, 102.14 47.59, 141.98 0.2 M0.93 162.46 C33.17 127.1, 63.74 91.34, 141.98 0.2 M1.98 167.35 C51.25 111.39, 98.03 56.03, 147.63 -0.2 M1.98 167.35 C47.47 113.48, 94.39 59.47, 147.63 -0.2 M3.69 171.48 C38.79 132.37, 76.19 89.38, 152.61 0.16 M3.69 171.48 C62.21 103.06, 120.98 36.43, 152.61 0.16 M4.74 176.37 C48.11 128.97, 89.54 83.33, 158.26 -0.23 M4.74 176.37 C46.91 128.14, 87.34 80.83, 158.26 -0.23 M7.1 179.75 C46.95 134.57, 86.82 87.24, 163.24 0.13 M7.1 179.75 C44.4 136.29, 82.25 92.69, 163.24 0.13 M10.12 182.37 C52.95 133.78, 94.51 82.66, 168.89 -0.27 M10.12 182.37 C48.24 137.71, 86.85 93.74, 168.89 -0.27 M13.14 185 C64.58 124.93, 115.63 65.1, 173.87 0.09 M13.14 185 C61.8 129.03, 112.74 70.4, 173.87 0.09 M17.47 186.11 C64.08 131.18, 110.52 81.54, 178.86 0.45 M17.47 186.11 C74.69 118.35, 134.09 51.74, 178.86 0.45 M21.15 187.98 C57.01 143.62, 93.88 102.57, 184.5 0.06 M21.15 187.98 C65.45 137.07, 108.43 86.48, 184.5 0.06 M26.13 188.34 C81.23 120.76, 140.12 55.86, 189.49 0.42 M26.13 188.34 C61.56 146.53, 98.57 105.3, 189.49 0.42 M31.12 188.7 C80.73 129.65, 130.64 74.91, 195.13 0.03 M31.12 188.7 C62.96 151.17, 97 112.7, 195.13 0.03 M36.11 189.06 C91.22 128.67, 143.91 68.62, 200.12 0.39 M36.11 189.06 C96.98 120.55, 157.32 50.03, 200.12 0.39 M41.09 189.42 C95.82 125.24, 150.99 61.44, 205.76 -0.01 M41.09 189.42 C92.07 128.19, 144.34 69.1, 205.76 -0.01 M46.74 189.03 C102.13 122.62, 160.7 56.55, 210.75 0.35 M46.74 189.03 C86.99 142.29, 128.37 96.11, 210.75 0.35 M51.72 189.39 C96.13 138.53, 141.51 85.88, 216.39 -0.04 M51.72 189.39 C94.25 142.16, 135.57 95.05, 216.39 -0.04 M57.37 188.99 C119.16 119.37, 178.57 48.42, 221.38 0.32 M57.37 188.99 C101.22 138.24, 144.04 89, 221.38 0.32 M62.35 189.35 C110.36 132.82, 156.64 78.07, 227.02 -0.08 M62.35 189.35 C121.87 120.61, 182.29 51.48, 227.02 -0.08 M68 188.96 C110.06 140.89, 152.13 92.95, 232.01 0.28 M68 188.96 C115.97 133.9, 166.17 76.34, 232.01 0.28 M72.98 189.32 C127.66 127.22, 183.97 63.58, 237.65 -0.11 M72.98 189.32 C111.08 146.71, 148.26 102.6, 237.65 -0.11 M78.63 188.93 C119.04 144.63, 156.32 97.77, 242.64 0.25 M78.63 188.93 C112.36 147.7, 146.89 107.4, 242.64 0.25 M83.61 189.29 C146.44 114.53, 213.38 37.62, 248.28 -0.15 M83.61 189.29 C141.36 121.2, 200.37 54.05, 248.28 -0.15 M89.26 188.89 C138.71 134.17, 189.18 78.65, 253.27 0.21 M89.26 188.89 C144.58 126.22, 198.42 64.16, 253.27 0.21 M94.24 189.25 C131.27 148.65, 167.34 106.03, 258.91 -0.18 M94.24 189.25 C139.13 136.81, 184.67 85.62, 258.91 -0.18 M99.89 188.86 C160.02 116.58, 222.04 47.21, 263.9 0.18 M99.89 188.86 C157.66 122.19, 215.74 54.99, 263.9 0.18 M104.87 189.22 C168.85 113.31, 234.74 39.08, 269.54 -0.22 M104.87 189.22 C142.98 145.48, 181.39 101.26, 269.54 -0.22 M110.52 188.82 C164.51 126.65, 217.84 63.84, 274.53 0.14 M110.52 188.82 C152.63 140.24, 194.32 90.62, 274.53 0.14 M115.5 189.18 C163.17 136.29, 210.45 83.48, 280.17 -0.25 M115.5 189.18 C165.45 129.35, 216.86 72.29, 280.17 -0.25 M121.15 188.79 C158.02 147.12, 194.4 104.52, 285.16 0.11 M121.15 188.79 C186.68 115.87, 249.82 40.95, 285.16 0.11 M126.13 189.15 C169.84 139.57, 211.56 90.15, 290.15 0.47 M126.13 189.15 C175.82 133.98, 224.75 76.64, 290.15 0.47 M131.78 188.75 C166.78 147.91, 203.74 109.7, 293.82 2.34 M131.78 188.75 C192.83 117.96, 253.47 47.66, 293.82 2.34 M136.76 189.11 C183.73 135.86, 234.12 78.62, 298.15 3.45 M136.76 189.11 C172.38 149.03, 207.41 107.43, 298.15 3.45 M141.75 189.47 C185.32 137.28, 231.78 87.5, 301.83 5.32 M141.75 189.47 C175.85 149.51, 209.57 110.71, 301.83 5.32 M147.39 189.08 C206.26 118.49, 267.27 51.58, 304.85 7.95 M147.39 189.08 C183.74 147.8, 219.22 106.9, 304.85 7.95 M152.38 189.44 C191.02 142.51, 234.8 96.49, 307.87 10.57 M152.38 189.44 C209.8 124.28, 268.03 58.43, 307.87 10.57 M158.02 189.04 C200.57 142.55, 243.91 93.6, 310.23 13.95 M158.02 189.04 C199.84 140.65, 242.54 92.13, 310.23 13.95 M163.01 189.4 C199.67 147.62, 238.47 105.96, 311.94 18.08 M163.01 189.4 C206.09 140.84, 248.5 92.58, 311.94 18.08 M168.65 189.01 C222.48 127.04, 277.98 63.09, 313.64 22.22 M168.65 189.01 C207.84 142.55, 247.04 96.25, 313.64 22.22 M173.64 189.37 C229.1 125.32, 284.01 61.78, 314.04 27.86 M173.64 189.37 C213.15 145.31, 251.55 101.27, 314.04 27.86 M179.28 188.97 C210.3 150.98, 245.76 111.28, 314.43 33.5 M179.28 188.97 C222.5 138.44, 266.66 87.57, 314.43 33.5 M184.27 189.33 C222.55 146.72, 257.67 108.68, 314.17 39.9 M184.27 189.33 C216.01 155.19, 246.46 120.05, 314.17 39.9 M189.91 188.94 C226.31 147.74, 261.95 107.06, 314.57 45.55 M189.91 188.94 C225.55 150.61, 258.48 112.64, 314.57 45.55 M194.9 189.3 C236.89 139.93, 279.67 90.51, 314.3 51.94 M194.9 189.3 C234.51 145.08, 272.35 100.97, 314.3 51.94 M200.54 188.91 C227.74 154.09, 260.32 119.55, 314.04 58.34 M200.54 188.91 C244.16 138.38, 286.48 90.77, 314.04 58.34 M205.53 189.27 C238.64 151.27, 273.01 111.62, 314.44 63.98 M205.53 189.27 C235.68 153.2, 266.98 118.34, 314.44 63.98 M211.17 188.87 C251.29 143.04, 289.21 98.81, 314.18 70.38 M211.17 188.87 C232.63 163.9, 256.97 137.05, 314.18 70.38 M216.16 189.23 C246.46 152.43, 277.04 116.08, 314.57 76.02 M216.16 189.23 C245.15 153.96, 275.91 118.79, 314.57 76.02 M221.8 188.84 C241.42 167.6, 260.02 145.96, 314.31 82.42 M221.8 188.84 C241.91 165.39, 261.48 142.13, 314.31 82.42 M226.79 189.2 C254.58 154.1, 286.69 118.74, 314.05 88.82 M226.79 189.2 C261.31 149.4, 295.97 110.42, 314.05 88.82 M232.43 188.8 C261.02 156.66, 288.4 124.43, 314.44 94.46 M232.43 188.8 C257.25 160.64, 283.23 131.27, 314.44 94.46 M237.42 189.16 C259.43 164.95, 282.25 138.13, 314.18 100.86 M237.42 189.16 C251.98 171.91, 269.22 153.39, 314.18 100.86 M243.06 188.77 C270.2 158.12, 295.44 127.57, 314.58 106.5 M243.06 188.77 C260.15 169.2, 275.41 151.22, 314.58 106.5 M248.05 189.13 C273.93 158.67, 300.6 129.02, 314.31 112.9 M248.05 189.13 C271.01 161.58, 295.58 134.05, 314.31 112.9 M253.04 189.49 C274.02 168.94, 290 148.08, 314.05 119.3 M253.04 189.49 C269.15 169.35, 285.9 149.46, 314.05 119.3 M258.68 189.09 C273.15 171.2, 287.35 153.45, 314.45 124.94 M258.68 189.09 C280.1 166.58, 299.18 141.79, 314.45 124.94 M263.67 189.45 C280.12 172.83, 295.44 152.47, 314.19 131.34 M263.67 189.45 C281.1 170.31, 299.65 148.3, 314.19 131.34 M269.31 189.06 C281.3 173.21, 296.14 157.15, 314.58 136.98 M269.31 189.06 C282.41 172.71, 295.98 158.27, 314.58 136.98 M274.3 189.42 C283.74 180.42, 290.72 169.3, 314.32 143.38 M274.3 189.42 C285.37 176.56, 296.67 164.62, 314.32 143.38 M279.94 189.02 C290.77 175.24, 304.22 163.39, 314.06 149.78 M279.94 189.02 C291.2 178.14, 300.59 165.09, 314.06 149.78 M285.59 188.63 C296.89 177.21, 308.16 165.91, 314.45 155.42 M285.59 188.63 C294.06 180.26, 302.77 168.95, 314.45 155.42 M291.23 188.24 C298.07 179.69, 303.41 172.03, 314.19 161.82 M291.23 188.24 C298.23 179.81, 306.21 172.22, 314.19 161.82 M298.18 186.33 C301.32 184.65, 305.18 179.22, 312.62 169.73 M298.18 186.33 C303.84 180.44, 309.1 174.45, 312.62 169.73" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M32 0 C88.09 2.34, 143.93 -0.57, 282.13 0 M32 0 C93.25 0.05, 154.82 -0.08, 282.13 0 M282.13 0 C302.36 -0.27, 314.89 9.08, 314.13 32 M282.13 0 C303.43 1.3, 313.87 11.91, 314.13 32 M314.13 32 C313.61 68.2, 312.83 102.2, 314.13 157.05 M314.13 32 C313.69 57.99, 314.21 84.7, 314.13 157.05 M314.13 157.05 C314.13 176.54, 301.75 190.51, 282.13 189.05 M314.13 157.05 C313.21 179.85, 301.3 189.16, 282.13 189.05 M282.13 189.05 C230.4 187.44, 175.97 188.49, 32 189.05 M282.13 189.05 C185.68 187.73, 89.18 188.1, 32 189.05 M32 189.05 C9.96 190.15, -0.07 177.26, 0 157.05 M32 189.05 C9.26 188.86, 2.19 176.26, 0 157.05 M0 157.05 C0.57 114.78, -1.32 69.03, 0 32 M0 157.05 C-0.03 121.01, 0.46 87.47, 0 32 M0 32 C-0.87 9.42, 10.92 0.84, 32 0 M0 32 C-0.41 10.38, 9.09 2.09, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(973.6058147150577 377.6021512771649) rotate(0 54.789947509765625 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">File Service</text></g><g stroke-linecap="round" transform="translate(1385.148345690294 444.9292157875452) rotate(0 117.01249907786587 103.27901920109548)"><path d="M23.2 41.37 C23.2 41.37, 23.2 41.37, 23.2 41.37 M23.2 41.37 C23.2 41.37, 23.2 41.37, 23.2 41.37 M15.06 56.82 C21.01 48.9, 30.58 39.52, 43.28 24.37 M15.06 56.82 C24.82 45.38, 34.57 34.19, 43.28 24.37 M6.27 73.03 C27.04 48.75, 46.25 29.86, 56.79 14.92 M6.27 73.03 C26.17 49.71, 46.35 28.05, 56.79 14.92 M4.04 81.69 C16.63 66.97, 31.23 47.02, 64.4 12.26 M4.04 81.69 C18.81 66.5, 31.02 51.82, 64.4 12.26 M3.13 88.84 C19.79 68.23, 37.73 46.64, 72.01 9.6 M3.13 88.84 C27.94 60.84, 52.93 33.47, 72.01 9.6 M2.21 96 C29.26 62.91, 59.01 33.02, 79.62 6.94 M2.21 96 C25.72 69.67, 49.01 42.3, 79.62 6.94 M1.29 103.15 C22.36 75.5, 47.66 53.62, 87.24 4.28 M1.29 103.15 C30.23 72.25, 57.67 38.89, 87.24 4.28 M0.37 110.3 C37.24 66.99, 74 23.71, 94.85 1.62 M0.37 110.3 C28.62 78.42, 56.57 45.91, 94.85 1.62 M0.77 115.95 C30.66 78.01, 63.94 42.4, 99.83 1.98 M0.77 115.95 C24.87 85.85, 50.76 56.74, 99.83 1.98 M2.48 120.08 C32.83 82.33, 63.62 45.25, 105.48 1.59 M2.48 120.08 C34.77 81.65, 68.62 42.75, 105.48 1.59 M3.53 124.97 C25.44 98.53, 47.32 75.76, 110.46 1.95 M3.53 124.97 C30.53 95.35, 55.09 66.92, 110.46 1.95 M5.23 129.1 C36.42 93.93, 66.58 57.42, 116.11 1.55 M5.23 129.1 C31.99 100.29, 58.06 70.53, 116.11 1.55 M6.94 133.23 C49.06 86.48, 91.36 36.69, 121.09 1.91 M6.94 133.23 C33.08 102.09, 60.61 70.59, 121.09 1.91 M7.99 138.12 C37.02 105.65, 65.35 71.52, 126.74 1.52 M7.99 138.12 C47.09 94.32, 83.69 52.59, 126.74 1.52 M9.7 142.26 C45.23 101.29, 79.37 62.14, 131.72 1.88 M9.7 142.26 C37 109.88, 66.07 77.93, 131.72 1.88 M11.4 146.39 C39.53 115.2, 67.76 82.64, 137.37 1.49 M11.4 146.39 C55.84 95.7, 100.62 44.69, 137.37 1.49 M12.46 151.28 C53.23 104.66, 90.85 59.76, 141.7 2.6 M12.46 151.28 C40.5 119.04, 66.83 87.67, 141.7 2.6 M15.47 153.9 C62.52 101.95, 107.58 48.31, 145.37 4.47 M15.47 153.9 C64.1 97.83, 112.49 42.22, 145.37 4.47 M17.84 157.28 C66.47 99.36, 119.26 40.94, 149.7 5.58 M17.84 157.28 C70.14 96.95, 121.19 37.64, 149.7 5.58 M20.86 159.91 C50.43 123.35, 83.22 87.75, 153.38 7.45 M20.86 159.91 C62.84 112.3, 105.58 62.44, 153.38 7.45 M23.22 163.28 C74.8 102.39, 128.52 40.05, 157.71 8.57 M23.22 163.28 C53.93 125.91, 86.12 89.16, 157.71 8.57 M25.58 166.66 C56.93 129.95, 89.23 96.13, 162.04 9.68 M25.58 166.66 C75.99 108.8, 124.99 52.07, 162.04 9.68 M28.6 169.29 C57.75 137.23, 85.37 103.77, 165.72 11.55 M28.6 169.29 C81.52 108.39, 136.48 44.87, 165.72 11.55 M30.96 172.67 C77.6 117.14, 125.08 61.74, 170.05 12.67 M30.96 172.67 C85.31 110.56, 140.36 46.78, 170.05 12.67 M33.98 175.29 C87.56 114.22, 142.99 49.99, 173.72 14.54 M33.98 175.29 C85.47 115.98, 137.05 55.6, 173.72 14.54 M36.34 178.67 C82.06 125.63, 127.15 74.36, 178.05 15.65 M36.34 178.67 C83.2 124.28, 131.34 71.19, 178.05 15.65 M38.71 182.05 C81.07 132.76, 121.34 84.75, 181.07 18.28 M38.71 182.05 C75.84 140.62, 113.28 97.84, 181.07 18.28 M42.38 183.92 C96.44 124.37, 147.04 62.96, 184.09 20.9 M42.38 183.92 C72.62 150.59, 101.99 117.09, 184.09 20.9 M46.06 185.79 C78.2 149.92, 108.6 115.11, 187.11 23.53 M46.06 185.79 C78.77 148.32, 111.66 110.29, 187.11 23.53 M49.73 187.66 C87.29 144.07, 123.25 102, 190.78 25.4 M49.73 187.66 C90.5 140.64, 130.56 93.7, 190.78 25.4 M53.41 189.53 C82.1 152.17, 115.03 118.9, 193.8 28.02 M53.41 189.53 C83.76 156.18, 111.96 122.57, 193.8 28.02 M57.08 191.4 C111.31 126.18, 166.17 63.76, 196.82 30.64 M57.08 191.4 C108.86 132.85, 157.96 75.05, 196.82 30.64 M60.76 193.27 C98.14 151.14, 134.5 106.06, 199.84 33.27 M60.76 193.27 C90.56 157.45, 119.42 123.95, 199.84 33.27 M64.43 195.14 C113.35 139.41, 159.47 87.59, 202.86 35.89 M64.43 195.14 C96.64 157.99, 127.6 121.28, 202.86 35.89 M68.11 197.01 C117.4 139.75, 165.99 86.9, 206.53 37.76 M68.11 197.01 C98.16 162.7, 129.68 126.78, 206.53 37.76 M71.78 198.87 C112.84 149.62, 157.18 100.41, 208.9 41.14 M71.78 198.87 C103.18 160.97, 135.48 123.55, 208.9 41.14 M75.46 200.74 C121.24 147.12, 163.94 95.67, 211.26 44.52 M75.46 200.74 C116.24 153.35, 156.02 107.7, 211.26 44.52 M80.44 201.1 C116.45 159.64, 151.79 120.32, 213.62 47.9 M80.44 201.1 C124.13 150.74, 167.98 101.08, 213.62 47.9 M85.43 201.46 C124.59 158.34, 163.67 113.36, 215.99 51.28 M85.43 201.46 C118.17 161.88, 153.43 120.93, 215.99 51.28 M89.76 202.58 C120.94 169.93, 149.32 134.37, 218.35 54.66 M89.76 202.58 C139.01 145.73, 187.63 87.86, 218.35 54.66 M94.75 202.94 C124.65 168.21, 153.69 137.03, 220.06 58.79 M94.75 202.94 C125.15 169.91, 153.75 136.98, 220.06 58.79 M99.74 203.3 C142.73 149.45, 191.2 99.34, 222.42 62.17 M99.74 203.3 C136.68 158.78, 176.11 115.29, 222.42 62.17 M104.07 204.41 C143.61 160.32, 183.12 115.92, 224.78 65.55 M104.07 204.41 C136.44 167.09, 170.17 128.04, 224.78 65.55 M109.05 204.77 C146.57 163.44, 180.62 121.53, 227.14 68.93 M109.05 204.77 C147.6 157.08, 187.83 112.11, 227.14 68.93 M114.04 205.13 C140.11 174.37, 165.11 145.36, 229.51 72.31 M114.04 205.13 C151.67 161.38, 191.22 118.1, 229.51 72.31 M118.37 206.25 C161.81 156.67, 204.98 105.25, 229.9 77.95 M118.37 206.25 C153.28 167.12, 188.6 127.29, 229.9 77.95 M124.67 205.1 C151.56 174.9, 176.99 145.25, 230.95 82.84 M124.67 205.1 C160.43 162.13, 196.08 120.33, 230.95 82.84 M130.31 204.71 C157.65 172.08, 185.46 140.23, 231.35 88.48 M130.31 204.71 C149.73 180.25, 169.81 156.98, 231.35 88.48 M136.61 203.56 C172.6 162.93, 209.31 121.48, 232.4 93.37 M136.61 203.56 C166.26 170.07, 195.17 136.19, 232.4 93.37 M142.91 202.41 C173.75 169.51, 203.38 134.65, 232.79 99.01 M142.91 202.41 C162.57 181.64, 181.42 160.67, 232.79 99.01 M148.55 202.01 C182.75 162.64, 213 126.26, 233.19 104.65 M148.55 202.01 C182.18 165.18, 214.5 128.04, 233.19 104.65 M154.85 200.86 C183.14 169.6, 214.27 133.71, 234.24 109.54 M154.85 200.86 C175.98 177.98, 196.08 153.9, 234.24 109.54 M161.15 199.71 C188.86 167.37, 218.51 136.11, 233.32 116.7 M161.15 199.71 C176.54 181.3, 192.36 164.19, 233.32 116.7 M170.73 194.79 C192.57 169.01, 214.16 141.75, 230.43 126.11 M170.73 194.79 C186.65 174.97, 204.59 157.32, 230.43 126.11 M180.97 189.11 C191.95 176.72, 204.99 161.99, 227.55 135.53 M180.97 189.11 C192.66 175.87, 202.82 164.52, 227.55 135.53 M191.2 183.44 C204.83 169.58, 216.55 153.63, 224.66 144.95 M191.2 183.44 C202.23 169.44, 213.38 156.31, 224.66 144.95" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M94.03 1.17 C106.79 -2.73, 123.03 -1.37, 136.86 0.95 C150.7 3.26, 165.1 8.59, 177.05 15.08 C189 21.56, 199.81 30.12, 208.58 39.85 C217.35 49.59, 225.38 61.61, 229.65 73.48 C233.93 85.36, 235.44 98.53, 234.21 111.1 C232.98 123.68, 228.47 137.53, 222.26 148.92 C216.05 160.3, 207.28 170.97, 196.95 179.41 C186.63 187.84, 173.52 195.13, 160.33 199.55 C147.14 203.96, 131.95 205.74, 117.82 205.9 C103.7 206.05, 88.78 204.55, 75.58 200.48 C62.39 196.41, 49.22 189.79, 38.65 181.48 C28.09 173.17, 18.67 161.97, 12.19 150.63 C5.7 139.29, 0.98 125.85, -0.26 113.42 C-1.5 100.98, 0.83 88.06, 4.75 76.04 C8.67 64.01, 15.06 51.39, 23.27 41.28 C31.49 31.17, 41.64 22.05, 54.04 15.37 C66.44 8.69, 89.56 3.43, 97.68 1.23 C105.8 -0.98, 102.48 0.45, 102.78 2.16 M165.09 9.33 C177.85 13.05, 190.19 22.77, 200.01 31.77 C209.82 40.76, 218.33 52.16, 223.98 63.31 C229.62 74.46, 233.44 86.4, 233.89 98.67 C234.34 110.94, 231.04 125.27, 226.68 136.93 C222.32 148.59, 216.57 159.05, 207.73 168.65 C198.89 178.25, 186.24 188.22, 173.62 194.53 C160.99 200.83, 145.96 205.07, 131.98 206.46 C118 207.86, 103.62 206.07, 89.71 202.93 C75.8 199.78, 60.15 194.71, 48.53 187.62 C36.9 180.54, 27.56 170.94, 19.96 160.43 C12.37 149.91, 5.93 136.45, 2.96 124.54 C-0.01 112.62, 0.17 101.16, 2.12 88.94 C4.08 76.72, 7.83 62.07, 14.7 51.21 C21.56 40.36, 32.34 31.54, 43.33 23.81 C54.32 16.09, 67.44 8.57, 80.64 4.85 C93.84 1.14, 108.45 0.63, 122.52 1.53 C136.6 2.43, 158.17 8.56, 165.12 10.25 C172.06 11.93, 164.84 10.24, 164.18 11.63" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1430.2701225616163 535.6789401572504) rotate(0 71.650390625 12.5)"><text x="71.650390625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">File Metadata DB</text></g><g stroke-linecap="round"><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M-0.76 0.19 C23.5 13.53, 120.7 66.77, 145.07 80.05 M1.05 -0.75 C25.71 12.78, 123.35 67.94, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M117.65 76.6 C125.67 76.34, 133.04 78.28, 147.23 81.59 M117.65 76.6 C126.13 78.83, 134.5 80.23, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(259.4466736614181 267.39746806649055) rotate(0 73.05676806735187 40.02804750196674)"><path d="M127.78 58.75 C133.17 63.07, 137.9 69.65, 147.23 81.59 M127.78 58.75 C133.42 66.01, 138.89 72.52, 147.23 81.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M-1.04 0 C28.75 0.23, 147.99 1.49, 178.02 1.63 M0.61 -1.05 C30.86 -0.64, 150.72 2.63, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M151.98 12.72 C158.69 9.58, 165.16 9.15, 180.39 3.08 M151.98 12.72 C158.13 10.97, 164.28 8.07, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(668.5686008594873 392.48575175139285) rotate(0 89.34179463331839 0.8959964371688329)"><path d="M152.43 -7.8 C159.06 -6.08, 165.43 -1.64, 180.39 3.08 M152.43 -7.8 C158.48 -5.01, 164.53 -3.39, 180.39 3.08" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M-0.66 -0.16 C27.29 12.35, 138.87 62.28, 166.69 75.1 M1.19 -1.3 C29.12 11.34, 138.6 63.46, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M136.1 73.43 C142.19 74.92, 147.24 74.72, 165.98 76.13 M136.1 73.43 C146.51 74, 158.32 75.08, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1203.2937849248126 441.30555193681994) rotate(0 83.11742096649232 38.024713571359825)"><path d="M144.83 54.86 C149.06 60.26, 152.25 64.01, 165.98 76.13 M144.83 54.86 C152.11 62.1, 160.81 69.8, 165.98 76.13" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(1650.7678232569504 462.894218089049) rotate(0 127.74990081787115 100)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FileMetata</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- fileId</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- name</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- size</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- mimeType</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- uploadedBy</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- status</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- s3Url (link to file in s3)</text></g><g stroke-linecap="round" transform="translate(1382.0862635331484 147.80441222978064) rotate(0 117.01249907786587 103.27901920109548)"><path d="M32.61 30.99 C32.61 30.99, 32.61 30.99, 32.61 30.99 M32.61 30.99 C32.61 30.99, 32.61 30.99, 32.61 30.99 M11.35 61.54 C22.29 50.36, 34.38 34.95, 44.15 23.81 M11.35 61.54 C23.15 45.74, 36.01 31.28, 44.15 23.81 M13.06 65.68 C24.34 54.15, 32.22 43.76, 55.05 17.38 M13.06 65.68 C23.6 53.74, 36.18 41.24, 55.05 17.38 M10.83 74.34 C24.65 54.63, 39.68 38.02, 66.59 10.19 M10.83 74.34 C21.91 61.45, 34.04 48.07, 66.59 10.19 M7.94 83.76 C29.78 56.81, 53.48 28.03, 70.92 11.3 M7.94 83.76 C28.52 58.9, 50.39 34.53, 70.92 11.3 M5.71 92.42 C19.99 76.68, 35.11 55.39, 77.22 10.15 M5.71 92.42 C31.98 59.36, 60.79 28.71, 77.22 10.15 M2.83 101.83 C20.06 81.88, 35.68 62.67, 83.52 9 M2.83 101.83 C19.85 81.82, 37.82 61.73, 83.52 9 M3.88 106.72 C33.71 72.82, 60.62 38.34, 89.82 7.86 M3.88 106.72 C33.27 75.56, 60.12 42.44, 89.82 7.86 M4.93 111.61 C39.33 74.47, 70.74 34.79, 96.78 5.95 M4.93 111.61 C26.06 88.93, 45.62 65.15, 96.78 5.95 M5.98 116.5 C33.52 86.12, 61.27 52.95, 103.08 4.8 M5.98 116.5 C33.04 84.79, 63.46 51.05, 103.08 4.8 M6.37 122.14 C42.81 81.96, 79.05 40.32, 110.69 2.14 M6.37 122.14 C46.23 76.71, 86.07 32.56, 110.69 2.14 M7.42 127.03 C34.09 92.65, 62.94 61.83, 115.67 2.5 M7.42 127.03 C31.94 99.63, 55 72.36, 115.67 2.5 M8.48 131.92 C38.72 96.63, 69.28 62.48, 120.66 2.86 M8.48 131.92 C39.12 96.17, 72.04 59.26, 120.66 2.86 M8.87 137.56 C48.72 91.2, 88.83 45.07, 125.65 3.22 M8.87 137.56 C50.6 91.59, 91.25 43.91, 125.65 3.22 M11.23 140.94 C56.95 92.52, 101.04 41.9, 129.98 4.34 M11.23 140.94 C56.19 86.38, 102.5 33.11, 129.98 4.34 M12.94 145.07 C51.01 103.37, 90.39 58.02, 134.97 4.7 M12.94 145.07 C56.5 97.74, 99.31 48.6, 134.97 4.7 M15.3 148.45 C48.21 111.89, 81.55 75.22, 139.95 5.06 M15.3 148.45 C58.19 97.06, 102 46.03, 139.95 5.06 M17.66 151.83 C48.5 118.02, 74.86 85.12, 144.94 5.42 M17.66 151.83 C68.1 93.6, 118.59 35.46, 144.94 5.42 M19.37 155.97 C51.89 119.25, 82.14 81.53, 149.93 5.78 M19.37 155.97 C55.2 113.85, 90.98 73.35, 149.93 5.78 M21.73 159.34 C64.48 110.51, 102.89 64.7, 154.26 6.89 M21.73 159.34 C64.33 113.89, 103.92 66.97, 154.26 6.89 M24.1 162.72 C58.03 120.51, 94.1 79.1, 157.93 8.76 M24.1 162.72 C55.84 124.01, 90.02 84.63, 157.93 8.76 M26.46 166.1 C52.49 133.82, 81.6 102.44, 161.61 10.63 M26.46 166.1 C57.04 130.27, 86.19 96.74, 161.61 10.63 M28.17 170.24 C76.07 116.04, 122.81 60.29, 165.28 12.5 M28.17 170.24 C62.27 131.33, 94.49 94.88, 165.28 12.5 M31.19 172.86 C77.91 116.59, 125.57 62.69, 168.96 14.37 M31.19 172.86 C73.61 125.05, 114.64 78.11, 168.96 14.37 M34.86 174.73 C76.57 128.27, 118.45 79.21, 172.63 16.24 M34.86 174.73 C84.59 116.81, 134.64 58.45, 172.63 16.24 M37.88 177.35 C92.36 115.14, 145.18 53.71, 176.96 17.36 M37.88 177.35 C67.74 142.18, 97.87 108.34, 176.96 17.36 M41.55 179.22 C76.14 135.2, 113.79 95.17, 180.64 19.23 M41.55 179.22 C75.79 141.19, 110.2 102.62, 180.64 19.23 M44.57 181.85 C90.23 129.02, 138.49 74.82, 184.31 21.09 M44.57 181.85 C84.16 136.56, 124.67 90.03, 184.31 21.09 M48.25 183.72 C97.97 126.8, 148.46 68.69, 187.99 22.96 M48.25 183.72 C84.53 144.17, 119.74 103.9, 187.99 22.96 M51.27 186.34 C88.24 144.75, 123.94 99.1, 191.66 24.83 M51.27 186.34 C98.37 132.58, 146.47 78.57, 191.66 24.83 M54.29 188.97 C84.8 154.71, 113.46 118.17, 194.68 27.46 M54.29 188.97 C86.74 149.47, 121.84 109.81, 194.68 27.46 M57.96 190.84 C85.07 159.31, 113.02 128.13, 197.04 30.84 M57.96 190.84 C89.71 157.54, 120.35 121.32, 197.04 30.84 M60.98 193.46 C97.25 148.93, 136.91 104.32, 200.06 33.46 M60.98 193.46 C94.18 155.58, 128.55 116.2, 200.06 33.46 M64 196.08 C89.28 163.45, 118.88 129.16, 203.08 36.09 M64 196.08 C106.25 147.06, 148.1 99.04, 203.08 36.09 M68.33 197.2 C104.8 154.76, 138.85 113.59, 206.1 38.71 M68.33 197.2 C119.17 141.44, 168.29 83.61, 206.1 38.71 M72.66 198.31 C114.06 152.22, 154.79 104.15, 208.46 42.09 M72.66 198.31 C101.51 166.28, 129.85 133.46, 208.46 42.09 M76.99 199.43 C117.94 151.46, 160.76 102.32, 211.48 44.71 M76.99 199.43 C110.69 159.24, 145.98 118.55, 211.48 44.71 M81.32 200.54 C127.22 145.35, 174.47 93.25, 214.5 47.34 M81.32 200.54 C111.82 165.31, 141.58 129.8, 214.5 47.34 M85.65 201.66 C120.96 161.99, 158 122.37, 216.86 50.72 M85.65 201.66 C124.13 156.4, 162.56 112, 216.86 50.72 M89.98 202.77 C119.07 172.22, 145.54 141.44, 219.88 53.34 M89.98 202.77 C132.87 153, 178.55 102.24, 219.88 53.34 M94.31 203.89 C139.85 150.79, 184.49 94.5, 221.59 57.47 M94.31 203.89 C143 148.02, 190.25 91.83, 221.59 57.47 M98.65 205 C136.3 157.77, 177.84 112.48, 223.3 61.61 M98.65 205 C148.79 149.28, 197.88 92.62, 223.3 61.61 M103.63 205.36 C144.65 159.58, 189.2 109.99, 225 65.74 M103.63 205.36 C144.07 161.48, 181.47 115.65, 225 65.74 M109.28 204.97 C148.61 162.77, 186.65 117.37, 226.71 69.87 M109.28 204.97 C143.27 164.32, 176.91 125.05, 226.71 69.87 M114.26 205.33 C152.95 158.36, 191.07 115.25, 228.42 74.01 M114.26 205.33 C144.66 169.25, 175.38 134.6, 228.42 74.01 M119.91 204.93 C153.6 167.35, 187.98 128.4, 229.47 78.9 M119.91 204.93 C146.87 173.33, 173.34 141.24, 229.47 78.9 M125.55 204.54 C148.04 180.43, 167.97 155.81, 231.17 83.03 M125.55 204.54 C155.62 172.22, 184.05 137.58, 231.17 83.03 M131.19 204.14 C160.69 169.91, 191.38 135.5, 232.88 87.16 M131.19 204.14 C161.58 169.3, 192.96 133.85, 232.88 87.16 M136.18 204.5 C171.75 162.74, 210.17 121.24, 235.24 90.54 M136.18 204.5 C171.18 164.1, 207.38 124.37, 235.24 90.54 M141.82 204.11 C175.4 164.05, 210.9 122.85, 234.98 96.94 M141.82 204.11 C161.29 179.91, 183.31 156.45, 234.98 96.94 M146.81 204.47 C183.12 163.29, 215.83 126.3, 234.72 103.34 M146.81 204.47 C181.55 164.59, 217.49 124.73, 234.72 103.34 M155.73 200.3 C185.15 164.62, 213.88 132.38, 234.46 109.74 M155.73 200.3 C185.59 165.35, 215.94 130.02, 234.46 109.74 M164 196.89 C180.76 179.02, 194.51 161.15, 234.2 116.13 M164 196.89 C182.69 175.9, 200.19 154.39, 234.2 116.13 M172.27 193.47 C193.04 168.2, 216.26 142.63, 233.94 122.53 M172.27 193.47 C191.6 171.18, 211.97 148.23, 233.94 122.53 M181.19 189.31 C194.72 171.81, 212.44 154.26, 233.68 128.93 M181.19 189.31 C196.64 173.1, 209.97 155.37, 233.68 128.93 M186.18 189.67 C193.34 178.7, 204.81 170.42, 226.2 143.63 M186.18 189.67 C199.16 174.96, 212.2 157.62, 226.2 143.63" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M110.08 1.1 C123.23 -1.01, 139.48 2.05, 152.84 5.8 C166.21 9.55, 179.44 16.01, 190.25 23.6 C201.07 31.2, 210.78 40.6, 217.74 51.37 C224.69 62.15, 229.88 75.69, 231.99 88.25 C234.11 100.8, 233.53 114.62, 230.43 126.69 C227.34 138.77, 221.3 150.65, 213.44 160.69 C205.58 170.74, 194.56 179.89, 183.29 186.97 C172.01 194.04, 159.22 200.18, 145.8 203.14 C132.38 206.11, 116.87 206.44, 102.78 204.78 C88.69 203.12, 73.77 198.98, 61.26 193.17 C48.75 187.37, 36.71 179.43, 27.71 169.97 C18.7 160.51, 11.85 148.16, 7.2 136.42 C2.56 124.68, -0.67 111.77, -0.16 99.53 C0.36 87.29, 4.83 74.4, 10.3 62.97 C15.77 51.53, 22.95 39.92, 32.68 30.91 C42.4 21.9, 53.57 14.1, 68.64 8.91 C83.71 3.71, 112.03 0.71, 123.08 -0.24 C134.12 -1.19, 135.19 1.52, 134.91 3.19 M112.81 0.63 C125.85 -1.11, 141.31 2.46, 154.63 6.27 C167.96 10.07, 182.2 15.66, 192.77 23.47 C203.35 31.28, 211.35 42.21, 218.08 53.14 C224.8 64.08, 230.96 76.95, 233.1 89.09 C235.24 101.23, 234.07 113.66, 230.9 125.97 C227.73 138.28, 222.23 152.65, 214.08 162.95 C205.94 173.26, 193.82 180.88, 182.05 187.81 C170.28 194.75, 157.14 201.63, 143.47 204.55 C129.81 207.47, 114.2 206.97, 100.05 205.31 C85.9 203.66, 70.85 200.54, 58.58 194.64 C46.31 188.74, 35.26 179.68, 26.45 169.93 C17.64 160.19, 10 148.18, 5.73 136.19 C1.46 124.2, 0.13 110.38, 0.83 98.01 C1.54 85.63, 4.55 73.07, 9.96 61.95 C15.37 50.82, 23.12 40.22, 33.27 31.28 C43.43 22.33, 57.5 13.3, 70.88 8.27 C84.27 3.23, 106.93 2.12, 113.6 1.07 C120.27 0.01, 111.04 0.52, 110.9 1.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1488.2969075919707 238.55413659948584) rotate(0 10.5615234375 12.5)"><text x="10.5615234375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">S3</text></g><g transform="translate(1640.5905110761503 193.05905577124852) rotate(0 120.10989379882818 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Stores the actual file</text></g><g mask="url(#mask-7_NapHJKX7kE17IpxNbql)" stroke-linecap="round"><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M1.11 -0.14 C29.66 -16.14, 142.75 -80.19, 171 -96.29 M0.24 -1.26 C28.73 -17.08, 142.23 -79.29, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M20.6 -22.95 C14.93 -14.85, 8.75 -9.13, 1.11 -0.14 M20.6 -22.95 C16.66 -18.98, 13 -14.16, 1.11 -0.14" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M30.7 -5.08 C22.27 -1.83, 13.31 -1.06, 1.11 -0.14 M30.7 -5.08 C24.71 -5.01, 18.89 -4.02, 1.11 -0.14" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M150.84 -72.47 C156.12 -77.29, 160.79 -84.14, 170.56 -95.07 M150.84 -72.47 C155.58 -77.94, 160.32 -82.84, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1201.3757256897895 381.72167367744714) rotate(0 85.01876778700353 -47.84162224605052)"><path d="M140.92 -90.43 C148.9 -90.38, 156.32 -92.26, 170.56 -95.07 M140.92 -90.43 C147.67 -91.98, 154.53 -93.04, 170.56 -95.07" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-7_NapHJKX7kE17IpxNbql"><rect x="0" y="0" fill="#fff" width="1471.4132612637966" height="577.4049181695482"></rect><rect x="1214.7489856642928" y="321.3800514313966" fill="#000" width="143.291015625" height="25" opacity="1"></rect></mask><g transform="translate(1214.7489856642928 321.3800514313966) rotate(0 72.24588065383023 12.126699001714584)"><text x="71.6455078125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">getPresignedUrl()</text></g><g mask="url(#mask-h_9knwtDXtHmYEqrFUHUK)" stroke-linecap="round"><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M0.61 -1.03 C3.52 12.86, 26.03 56.38, 18.41 82.72 C10.78 109.05, -34.66 144.64, -45.15 157 M-0.53 1.04 C2.68 15.11, 28.24 57.66, 20.71 83.8 C13.19 109.93, -34.33 145.55, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M-31.87 131.2 C-38.97 140.11, -43.96 152.28, -45.68 157.83 M-31.87 131.2 C-34.7 136.09, -38.64 143.67, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1626.0138663080209 294.2648926046595) rotate(0 -13.205737269222709 78.96624788188728)"><path d="M-17.98 146.31 C-30.29 149.54, -40.56 155.97, -45.68 157.83 M-17.98 146.31 C-24.04 147.72, -31.07 151.94, -45.68 157.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-h_9knwtDXtHmYEqrFUHUK"><rect x="0" y="0" fill="#fff" width="1790.7995206117073" height="552.1973883684341"></rect><rect x="1571.0359171281411" y="352.8498024900214" fill="#000" width="148.330078125" height="50" opacity="1"></rect></mask><g transform="translate(1571.0359171281411 352.8498024900214) rotate(0 43.18346391083304 19.81656738189953)"><text x="74.1650390625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">s3 Notification on </text><text x="74.1650390625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">completed upload</text></g><g mask="url(#mask-faRIOu6wwKV7jd3n5zz1z)" stroke-linecap="round"><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M0.45 -0.93 C36.06 -18.97, 47.57 -93.11, 212.89 -109.13 C378.21 -125.14, 829.93 -118.42, 992.37 -97.03 C1154.82 -75.65, 1154.94 -0.16, 1187.57 19.19 M-0.77 1.2 C34.84 -16.65, 47.11 -91.86, 212.51 -108.11 C377.9 -124.36, 829.14 -117.17, 991.61 -96.3 C1154.07 -75.43, 1154.2 -2.27, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M15.92 -26.63 C10.55 -18.75, 6.79 -14.49, 0.45 -0.93 M15.92 -26.63 C12.09 -20.55, 8.33 -15.8, 0.45 -0.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M28.82 -10.68 C20.54 -6.5, 13.74 -5.99, 0.45 -0.93 M28.82 -10.68 C22.45 -7.81, 16.01 -6.38, 0.45 -0.93" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M1160.8 2.98 C1165.37 7.98, 1171.47 9.52, 1187.27 17.09 M1160.8 2.98 C1165.77 6.36, 1170.73 8.69, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(225.57604061302663 150.97591429913157) rotate(0 593.3972654814404 -49.39426814967558)"><path d="M1176.06 -10.73 C1176.95 -2.46, 1179.46 2.31, 1187.27 17.09 M1176.06 -10.73 C1177.75 -4.4, 1179.53 0.78, 1187.27 17.09" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-faRIOu6wwKV7jd3n5zz1z"><rect x="0" y="0" fill="#fff" width="1514.1757964154122" height="377.41579363560504"></rect><rect x="745.554277914893" y="10" fill="#000" width="184.970703125" height="50" opacity="1"></rect></mask><g transform="translate(745.554277914893 10) rotate(0 73.41902817957407 91.58164614945599)"><text x="92.4853515625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Upload file directly to </text><text x="92.4853515625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">S3 via pre-signed URL</text></g><g stroke-linecap="round"><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M0 -1.11 C22.71 -14.89, 114.33 -69.91, 137.3 -83.69 M-1.46 0.92 C21.52 -13.1, 116.42 -70.91, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M18.86 -24.44 C9.48 -17.08, 5.45 -7.09, 0 -1.11 M18.86 -24.44 C10.9 -16.07, 4.75 -6.74, 0 -1.11" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M29.45 -6.85 C16.1 -6.34, 7.95 -3.19, 0 -1.11 M29.45 -6.85 C17.8 -4.87, 7.8 -1.95, 0 -1.11" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M120.86 -61.82 C126.45 -72.69, 136.99 -80.93, 139.47 -85.35 M120.86 -61.82 C126.97 -70.52, 134.45 -78.24, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(261.8869435860238 506.00774037096835) rotate(0 69.16565350188375 -42.28051237178215)"><path d="M110.09 -79.29 C119.72 -83.37, 134.45 -84.81, 139.47 -85.35 M110.09 -79.29 C119.95 -81.63, 131.35 -83, 139.47 -85.35" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(43.614638659676075 783.3098277852059) rotate(0 117.01249907786587 103.27901920109548)"><path d="M22.58 42.15 C22.58 42.15, 22.58 42.15, 22.58 42.15 M22.58 42.15 C22.58 42.15, 22.58 42.15, 22.58 42.15 M12.48 59.87 C22.13 45.78, 35.31 36.4, 41.34 26.67 M12.48 59.87 C21.61 48.12, 30.47 36.95, 41.34 26.67 M3.69 76.08 C19.2 58.93, 33.06 44.41, 54.86 17.21 M3.69 76.08 C20.23 56.21, 36.36 37.37, 54.86 17.21 M3.43 82.48 C17.87 63.7, 32.78 47.1, 62.47 14.56 M3.43 82.48 C25.73 56.25, 49.28 30.5, 62.47 14.56 M3.16 88.88 C18.15 68.86, 31.51 52.99, 70.74 11.14 M3.16 88.88 C31.76 58.18, 57.72 26.69, 70.74 11.14 M2.9 95.27 C26.9 67.58, 50.6 41.6, 78.35 8.48 M2.9 95.27 C26.37 68.78, 49.47 40.7, 78.35 8.48 M1.99 102.43 C17.82 85.23, 36.66 63.74, 86.62 5.07 M1.99 102.43 C21.61 80.25, 42.07 56.34, 86.62 5.07 M1.72 108.82 C26.12 82.72, 50.68 54.52, 94.88 1.66 M1.72 108.82 C34.02 70.89, 68.24 32.94, 94.88 1.66 M1.46 115.22 C24.22 85.2, 50.77 61.1, 99.87 2.02 M1.46 115.22 C28.46 83.64, 56.74 52.03, 99.87 2.02 M3.17 119.36 C31.09 84.31, 60.98 50.5, 105.51 1.62 M3.17 119.36 C39.44 77.53, 73.66 37.09, 105.51 1.62 M4.22 124.24 C46.4 76.84, 89.66 25.72, 110.5 1.98 M4.22 124.24 C40.61 81.58, 77.5 39.37, 110.5 1.98 M5.93 128.38 C42.68 85.39, 79.38 47.04, 115.49 2.34 M5.93 128.38 C31.75 97.91, 57.82 67.77, 115.49 2.34 M7.63 132.51 C29.48 105.28, 55.93 76.72, 121.13 1.95 M7.63 132.51 C41.53 92.21, 78.73 51.14, 121.13 1.95 M9.34 136.65 C54.89 82.31, 98.29 29.67, 126.12 2.31 M9.34 136.65 C36.9 105.63, 65.1 74.91, 126.12 2.31 M10.39 141.53 C35.73 110.92, 65.46 80.27, 131.76 1.91 M10.39 141.53 C42.03 106.94, 72.55 72.44, 131.76 1.91 M12.1 145.67 C58.27 91.53, 102.25 39.1, 137.41 1.52 M12.1 145.67 C44.02 112.65, 73.25 77.03, 137.41 1.52 M13.8 149.8 C52.42 106.25, 89.67 63.34, 141.08 3.39 M13.8 149.8 C51.13 106.82, 88.92 62.87, 141.08 3.39 M16.17 153.18 C53.37 110.89, 88.92 68.16, 145.41 4.5 M16.17 153.18 C66.72 97.57, 114.78 39.29, 145.41 4.5 M18.53 156.56 C53.41 117.64, 91.73 74.04, 149.74 5.62 M18.53 156.56 C63.54 103.03, 108.68 50.95, 149.74 5.62 M21.55 159.18 C54.87 120.35, 86.95 85, 154.07 6.73 M21.55 159.18 C65.52 107.71, 109.42 58.07, 154.07 6.73 M23.91 162.56 C67.93 115.74, 107.18 66.52, 158.4 7.85 M23.91 162.56 C76.13 102.89, 128.63 42.21, 158.4 7.85 M26.27 165.94 C65.61 125.64, 99.88 82.83, 162.08 9.72 M26.27 165.94 C74.39 110.27, 121.51 54.98, 162.08 9.72 M29.29 168.57 C78.49 114.88, 125.9 59.54, 166.41 10.83 M29.29 168.57 C82.17 108.23, 135.31 47.93, 166.41 10.83 M31.66 171.94 C69.21 127.29, 107.09 83.27, 170.74 11.95 M31.66 171.94 C67.08 130.16, 103.32 87.74, 170.74 11.95 M34.02 175.32 C70.86 132.71, 106.57 90.33, 175.07 13.06 M34.02 175.32 C85.42 116.51, 134.16 59.56, 175.07 13.06 M37.04 177.95 C76.96 131.07, 118.58 85.56, 178.75 14.93 M37.04 177.95 C76.35 130.67, 117.63 84.75, 178.75 14.93 M39.4 181.33 C79.41 133.16, 122.14 86.3, 181.77 17.55 M39.4 181.33 C81.95 131.65, 125.75 81.9, 181.77 17.55 M43.08 183.2 C73.31 150.27, 104.46 116.42, 184.78 20.18 M43.08 183.2 C95.66 121.78, 149.55 60.04, 184.78 20.18 M46.75 185.07 C72.9 152.18, 101.98 121.14, 187.8 22.8 M46.75 185.07 C92.9 134.24, 136.95 82.78, 187.8 22.8 M49.77 187.69 C92.28 138.77, 132.76 94.07, 191.48 24.67 M49.77 187.69 C93.28 138.54, 135.96 89.88, 191.48 24.67 M53.44 189.56 C102.89 134, 155.37 77.24, 194.5 27.3 M53.44 189.56 C85.57 152.62, 116.34 117.42, 194.5 27.3 M57.12 191.43 C87.09 155.61, 119.92 121.01, 197.52 29.92 M57.12 191.43 C109.77 131.11, 160.35 73.36, 197.52 29.92 M60.79 193.3 C88.46 159.57, 117.45 124.22, 200.53 32.55 M60.79 193.3 C111.55 135.72, 161.04 77.18, 200.53 32.55 M64.47 195.17 C97.09 156.76, 134.01 115.85, 203.55 35.17 M64.47 195.17 C104.35 150.63, 143.87 105.41, 203.55 35.17 M68.14 197.04 C101.15 161.87, 132.91 126.34, 206.57 37.79 M68.14 197.04 C97.69 161.7, 128.13 127.43, 206.57 37.79 M71.82 198.91 C112.13 152.22, 151.89 107.43, 209.59 40.42 M71.82 198.91 C113.83 148.87, 156.18 99.68, 209.59 40.42 M75.49 200.78 C127.68 141.2, 180.62 78.71, 211.95 43.8 M75.49 200.78 C125.36 143.31, 176.19 86.5, 211.95 43.8 M78.51 203.4 C131.52 144.06, 181.67 84.62, 214.32 47.18 M78.51 203.4 C121.25 156.86, 163.34 108.61, 214.32 47.18 M83.5 203.76 C111.87 167.44, 143.84 135.16, 216.02 51.31 M83.5 203.76 C129.74 149.33, 176.3 94.9, 216.02 51.31 M88.49 204.12 C117.86 169.76, 148.16 132.34, 218.39 54.69 M88.49 204.12 C123.73 162.27, 158.19 122.56, 218.39 54.69 M93.47 204.48 C121.96 169.43, 154.5 133.73, 220.75 58.07 M93.47 204.48 C141.97 148.19, 192.11 93.17, 220.75 58.07 M97.8 205.6 C136.66 164.37, 175.81 118.23, 223.11 61.45 M97.8 205.6 C123.64 175.02, 151.86 143.86, 223.11 61.45 M102.79 205.96 C138.37 165.51, 171.18 123.91, 224.82 65.58 M102.79 205.96 C135.03 169.01, 165.28 132.05, 224.82 65.58 M107.78 206.32 C144.66 163.57, 179.17 122.13, 227.18 68.96 M107.78 206.32 C140.22 168.39, 174.18 130.63, 227.18 68.96 M112.77 206.68 C153.56 162.15, 192.23 115.58, 229.54 72.34 M112.77 206.68 C141.83 175.33, 169.99 142.57, 229.54 72.34 M118.41 206.28 C149.15 170.85, 184.02 132.03, 231.91 75.72 M118.41 206.28 C144.16 177.68, 168.9 149.31, 231.91 75.72 M124.71 205.13 C163.81 160.15, 204.03 116.38, 232.3 81.36 M124.71 205.13 C162.55 160.32, 201.01 117.02, 232.3 81.36 M131.01 203.98 C165.41 161.03, 202.83 120.3, 232.7 87 M131.01 203.98 C164.58 164.58, 197.36 126.59, 232.7 87 M137.31 202.83 C162.92 174.45, 184.72 150.86, 233.09 92.65 M137.31 202.83 C168.05 167.9, 198.06 131.2, 233.09 92.65 M142.95 202.44 C177.24 160.21, 214.12 120.59, 234.14 97.53 M142.95 202.44 C171.81 170.11, 198.69 137.08, 234.14 97.53 M149.25 201.29 C167.79 175.6, 189.48 151.08, 234.54 103.18 M149.25 201.29 C170 179.83, 188.61 156.95, 234.54 103.18 M155.55 200.14 C179.57 172.95, 203.57 143.93, 234.93 108.82 M155.55 200.14 C170.98 179.9, 188.31 161.1, 234.93 108.82 M161.85 198.99 C186.78 168.27, 213.91 139.7, 235.98 113.71 M161.85 198.99 C178.68 179.51, 194.2 162.26, 235.98 113.71 M172.08 193.31 C194.59 170.54, 216.43 143.63, 233.75 122.37 M172.08 193.31 C189.92 173.64, 205.25 156.12, 233.75 122.37 M182.97 186.88 C199.84 166.77, 218.07 146.54, 230.87 131.79 M182.97 186.88 C194.6 174.78, 204.33 161.51, 230.87 131.79 M193.21 181.2 C202.57 170.79, 208.52 161.17, 227.98 141.2 M193.21 181.2 C202.82 170.06, 211.95 159.31, 227.98 141.2" stroke="#ffffff" stroke-width="0.5" fill="none"></path><path d="M93.76 1.18 C106.39 -2.61, 122.59 -0.81, 136.59 1.3 C150.59 3.41, 165.69 7.47, 177.77 13.86 C189.84 20.25, 200.36 29.64, 209.05 39.63 C217.74 49.63, 225.9 61.92, 229.9 73.82 C233.89 85.72, 234.21 98.77, 233 111.05 C231.79 123.33, 228.52 136.32, 222.64 147.5 C216.76 158.69, 207.9 169.58, 197.72 178.15 C187.53 186.73, 174.77 194.32, 161.53 198.95 C148.29 203.58, 132.47 205.58, 118.28 205.94 C104.08 206.29, 89.64 205.24, 76.37 201.11 C63.09 196.97, 49.1 189.52, 38.62 181.12 C28.13 172.72, 19.69 161.76, 13.45 150.71 C7.21 139.65, 2.84 127.32, 1.19 114.81 C-0.46 102.3, 0.02 87.69, 3.54 75.62 C7.07 63.56, 14.01 52.29, 22.35 42.42 C30.7 32.55, 40.47 23.24, 53.61 16.4 C66.75 9.56, 91.58 3.83, 101.22 1.4 C110.85 -1.04, 111.11 0.14, 111.41 1.78 M140.32 3.62 C153.8 4.72, 168.91 11.21, 180.85 17.88 C192.79 24.55, 203.58 33.7, 211.94 43.63 C220.29 53.56, 227.49 65.36, 231 77.45 C234.51 89.54, 234.99 103.58, 233 116.16 C231.01 128.74, 225.5 142.14, 219.06 152.94 C212.61 163.74, 204.5 172.87, 194.33 180.95 C184.16 189.04, 171.62 197.23, 158.03 201.46 C144.44 205.68, 127.08 206.92, 112.78 206.31 C98.47 205.69, 84.83 202.72, 72.19 197.76 C59.55 192.8, 47.09 185.15, 36.93 176.55 C26.76 167.95, 17.37 157.34, 11.2 146.15 C5.03 134.96, 1.03 121.71, -0.07 109.42 C-1.18 97.13, 0.1 84.36, 4.57 72.41 C9.03 60.47, 17.73 47.43, 26.72 37.74 C35.71 28.05, 46.51 20.31, 58.52 14.27 C70.54 8.23, 85.06 3.46, 98.8 1.51 C112.54 -0.43, 134.03 1.95, 140.96 2.61 C147.88 3.26, 140.66 3.68, 140.35 5.46" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(139.27352490599833 874.0595521549111) rotate(0 21.11328125 12.5)"><text x="21.11328125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">CDN</text></g><g mask="url(#mask-pvNbZq1Zw8khHhoTHLKrG)" stroke-linecap="round"><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M-1.13 0.05 C-1.51 -17.42, -2.63 -86.88, -2.75 -104.06 M0.47 -0.96 C0.5 -18.31, -0.06 -85.27, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M10.17 -74.6 C7.28 -83.75, 4.15 -89.61, -0.6 -102.6 M10.17 -74.6 C6.26 -84.18, 2.74 -96.11, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(140.3232893021418 758.4597952312961) rotate(0 -0.8453113855380252 -51.95774552741341)"><path d="M-10.35 -74.23 C-7.91 -83.29, -5.71 -89.24, -0.6 -102.6 M-10.35 -74.23 C-6.64 -83.9, -2.53 -95.97, -0.6 -102.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-pvNbZq1Zw8khHhoTHLKrG"><rect x="0" y="0" fill="#fff" width="242.01391207321785" height="962.3752862861229"></rect><rect x="79.76118104160378" y="694.0020497038828" fill="#000" width="119.43359375" height="25" opacity="1"></rect></mask><g transform="translate(79.76118104160378 694.0020497038828) rotate(0 59.42343826789258 12.452803225442779)"><text x="59.716796875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Download File</text></g><g mask="url(#mask-3m6x94U0XhO28k20EQPhz)" stroke-linecap="round"><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-0.21 0.86 C-132.02 74.36, -602.33 352.21, -791.93 440.87 C-981.53 529.54, -1080.27 517.82, -1137.82 532.84 M-1.78 0.26 C-133.12 73.96, -600.22 353.81, -789.7 442.27 C-979.18 530.73, -1080.82 516.13, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-1112.15 517 C-1116.35 518.37, -1123.84 522.63, -1138.67 531.03 M-1112.15 517 C-1122.47 522.3, -1132.89 528.16, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(1432.7327301428606 354.26476258940056) rotate(0 -568.8327681514888 265.9086369138199)"><path d="M-1109.34 537.32 C-1114.1 534.4, -1122.19 534.35, -1138.67 531.03 M-1109.34 537.32 C-1120.81 534.78, -1132.31 532.81, -1138.67 531.03" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-3m6x94U0XhO28k20EQPhz"><rect x="0" y="0" fill="#fff" width="2670.398266445838" height="986.0820364170404"></rect><rect x="516.5078123709833" y="782.9115685669467" fill="#000" width="250.44921875" height="25" opacity="1"></rect></mask><g transform="translate(516.5078123709834 782.9115685669468) rotate(0 346.7863413016561 -162.0958444742074)"><text x="125.224609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Cache frequently accessed files</text></g><g transform="translate(1917.046063231449 455.49424423101846) rotate(0 66.39994049072266 37.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SharedFiles</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- userId (PK)</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- fileId </text></g><g stroke-linecap="round" transform="translate(10 160.65529265587432) rotate(0 121.49741104278652 109.34987420638313)"><path d="M32 0 C82.02 -0.94, 134.92 -1.36, 210.99 0 M32 0 C95.22 -1.55, 157.9 -1.07, 210.99 0 M210.99 0 C234.23 -1.85, 243.88 11.38, 242.99 32 M210.99 0 C232.22 1.17, 243.91 9.66, 242.99 32 M242.99 32 C242.18 63.91, 240.82 96.65, 242.99 186.7 M242.99 32 C242.45 88.33, 242.14 143.7, 242.99 186.7 M242.99 186.7 C241.62 209.85, 232.06 220.08, 210.99 218.7 M242.99 186.7 C242.74 208.85, 233.37 218.65, 210.99 218.7 M210.99 218.7 C161.82 217.92, 108.56 219, 32 218.7 M210.99 218.7 C145.7 217.86, 80.8 217.56, 32 218.7 M32 218.7 C10.92 217.55, -0.45 206.9, 0 186.7 M32 218.7 C9.55 218.46, 2.02 206.06, 0 186.7 M0 186.7 C0.14 133.26, 0.34 80.17, 0 32 M0 186.7 C0.69 127.13, 0.72 70.1, 0 32 M0 32 C1.96 9.22, 9.03 -1.23, 32 0 M0 32 C-1.41 9.45, 12.58 -1.48, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(86.99741382353704 203.47100713651346) rotate(0 42.369964599609375 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Uploader</text></g><g stroke-linecap="round" transform="translate(26.058176997470582 262.9218618917894) rotate(0 106.24924507612394 44.770800757774055)"><path d="M22.39 0 C71.19 -0.1, 118.96 0.54, 190.11 0 M22.39 0 C64.24 -0.78, 104.63 0.5, 190.11 0 M190.11 0 C204.94 1.02, 213.3 6.59, 212.5 22.39 M190.11 0 C202.86 -0.44, 212.69 6.87, 212.5 22.39 M212.5 22.39 C213.31 35.27, 210.83 50.15, 212.5 67.16 M212.5 22.39 C211.73 38.6, 212.28 53.69, 212.5 67.16 M212.5 67.16 C212.27 82.79, 205.95 89.5, 190.11 89.54 M212.5 67.16 C212.15 83.33, 202.92 91.62, 190.11 89.54 M190.11 89.54 C133.86 89.38, 74.71 91.35, 22.39 89.54 M190.11 89.54 C149.62 87.5, 108.65 87.51, 22.39 89.54 M22.39 89.54 C6.49 89.33, 1.75 80.37, 0 67.16 M22.39 89.54 C8.43 89.72, 0.67 82.38, 0 67.16 M0 67.16 C1.47 55.1, 1.17 44.32, 0 22.39 M0 67.16 C0.58 57.35, -1.21 48.38, 0 22.39 M0 22.39 C-1.23 6.41, 9.13 -1.29, 22.39 0 M0 22.39 C1.5 7.63, 6.09 1.95, 22.39 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(35.15368585603028 273.6887222667892) rotate(0 98.23194122314453 20)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Watch for changes and</text><text x="0" y="20" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">upload to remote</text></g><g stroke-linecap="round" transform="translate(10.440933726090407 428.694676614683) rotate(0 121.49741104278652 109.34987420638313)"><path d="M32 0 C78.21 -1.15, 126.51 1.97, 210.99 0 M32 0 C69.14 -0.13, 106.76 -1.08, 210.99 0 M210.99 0 C230.43 -0.39, 243.16 10.15, 242.99 32 M210.99 0 C232.49 -2.16, 244.28 12.08, 242.99 32 M242.99 32 C242.87 71.33, 241.78 110, 242.99 186.7 M242.99 32 C242.67 92.84, 243.24 152.95, 242.99 186.7 M242.99 186.7 C242.69 209.12, 230.49 220.51, 210.99 218.7 M242.99 186.7 C243.99 207.5, 234.56 220.2, 210.99 218.7 M210.99 218.7 C172.15 220.01, 133.88 219.11, 32 218.7 M210.99 218.7 C167.09 217.59, 125.03 216.83, 32 218.7 M32 218.7 C11.51 218.85, 0.58 208.29, 0 186.7 M32 218.7 C10.07 219.23, -0.79 209.84, 0 186.7 M0 186.7 C-2.93 140.43, 0.18 92.58, 0 32 M0 186.7 C0.65 150.97, 2.1 115.66, 0 32 M0 32 C1.31 10.81, 9.48 1.69, 32 0 M0 32 C-0.94 8.49, 8.84 -1.83, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(87.5619750372598 471.5103910953221) rotate(0 54.39995574951172 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Downloader</text></g><g stroke-linecap="round" transform="translate(26.49911072356099 530.9612458505981) rotate(0 106.24924507612394 44.770800757774055)"><path d="M22.39 0 C60.64 -0.71, 103.29 -1.69, 190.11 0 M22.39 0 C80.29 0.54, 140.17 0.47, 190.11 0 M190.11 0 C205.18 -1.88, 213.62 8.69, 212.5 22.39 M190.11 0 C204.04 -1.43, 212.79 8.43, 212.5 22.39 M212.5 22.39 C214.26 34.75, 213.83 47.43, 212.5 67.16 M212.5 22.39 C212.55 37.95, 211.78 53.34, 212.5 67.16 M212.5 67.16 C213.36 81.62, 206.98 90.85, 190.11 89.54 M212.5 67.16 C210.44 81.74, 205.24 88.21, 190.11 89.54 M190.11 89.54 C129.03 89.3, 69.12 88.79, 22.39 89.54 M190.11 89.54 C141.96 88.18, 93.26 88.23, 22.39 89.54 M22.39 89.54 C6.94 90.01, -0.69 83.65, 0 67.16 M22.39 89.54 C7.7 91.01, 1.95 79.84, 0 67.16 M0 67.16 C-1.71 48.12, -1.5 31.14, 0 22.39 M0 67.16 C0.28 56.16, -0.97 45.87, 0 22.39 M0 22.39 C-0.82 5.57, 5.87 -1.59, 22.39 0 M0 22.39 C0.57 9.53, 8.09 -0.45, 22.39 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(51.37159071292126 552.4071586602295) rotate(0 82.88794708251953 20)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- poll for changes in </text><text x="0" y="20" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">remote and sync</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Final</span></div></div></div></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Uploader</strong>: This is the client that uploads the file. It could be a web browser, a mobile app, or a desktop app. It is also responsible for proactively identifying local changes and pushing the updates to remote storage.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Downloader</strong>: This is the client that downloads the file. Of course, this can be the same client as the uploader, but it doesn't have to be. We separate them in our design for clarity. It is also responsible for determining when a file it has locally has changed on the remote server and downloading these changes.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>LB &amp; API Gateway</strong>: This is the load balancer and API Gateway that sits in front of our application servers. It's responsible for routing requests to the appropriate server and handling things like SSL termination, rate limiting, and request validation.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>File Service</strong>: The file service is only responsible for writing to and from the file metadata db as well as requesting presigned URLs from S3. It doesn't actually handle the file upload or download. It's just a middleman between the client and S3.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>File Metadata DB</strong>: This is where we store metadata about the files. This includes things like the file name, size, MIME type, and the user who uploaded the file. We also store a shared files table here that maps files to users who have access to them. We use this table to enforce permissions when a user tries to download a file.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>S3</strong>: This is where the files are actually stored. We upload and download files directly to and from S3 using the presigned URLs we get from the file server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>CDN</strong>: This is a content delivery network that caches files close to the user to reduce latency. We use the CDN to serve files to the downloader.</div></li>
</ul>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="potential-deep-dives"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/in-a-hurry/delivery#deep-dives-10-minutes" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Potential Deep Dives</a></h2>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="1-how-can-you-support-large-files">1) How can you support large files?</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The first thing you should consider when thinking about large files is the user experience. There are two key insights that should stick out and ultimately guide your design:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Progress Indicator</strong>: Users should be able to see the progress of their upload so that they know it's working and how long it will take.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Resumable Uploads</strong>: Users should be able to pause and resume uploads. If they lose their internet connection or close the browser, they should be able to pick up where they left off rather than redownloading the 49GB that may have already been uploaded before the interruption.</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is, in some sense, the meat of the problem and where I usually end up spending the most time with candidates in a real interview.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before we go deep on solutions, let's take a moment to acknowledge the limitations that come with uploading a large file via a single POST request.</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Timeouts</strong>: Web servers and clients typically have timeout settings to prevent indefinite waiting for a response. A single POST request for a 50GB file could easily exceed these timeouts. In fact, this may be an appropriate time to do some quick math in the interview. If we have a 50GB file and an internet connection of 100Mbps, how long will it take to upload the file? <span class="MuiBox-root mui-1vu004u">50GB * 8 bits/byte / 100Mbps = 4000 seconds</span> then <span class="MuiBox-root mui-1vu004u">4000 seconds / 60 seconds/minute / 60 minutes/hour = 1.11 hours</span>. That's a long time to wait without any response from the server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Browser and Server Limitation</strong>: In most cases, it's not even possible to upload a 50GB file via a single POST request due to limitations configured in the browser or on the server. Both browsers and web servers often impose limits on the size of a request payload. For instance, popular web servers like Apache and NGINX have configurable limits, but the default is typically set to less than 2GB. Most modern services, like Amazon API Gateway, have default limits that are much lower and cannot be increased. This is just 10MB in the case of Amazon API Gateway which we are using in our design.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Network Interruptions</strong>: Large files are more susceptible to network interruptions. If a user is uploading a 50GB file and their internet connection drops, they will have to start the upload from scratch.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>User Experience</strong>: Users are effectively blind to the progress of their upload. They have no idea how long it will take or if it's even working.</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To address these limitations, we can use a technique called "chunking" to break the file into smaller pieces and upload them one at a time (or in parallel, depending on network bandwidth). Chunking needs to be done on the client so that the file can be broken into pieces before it is sent to the server (or S3 in our case). A very common mistake candidates make is to chunk the file on the server, which effectively defeats the purpose since you still upload the entire file at once to get it on the server in the first place. When we chunk, we typically break the file into 5-10 MB pieces, but this can be adjusted based on the network conditions and the size of the file.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">With chunks, it's rather straightforward for us to show a progress indicator to the user. We can simply track the progress of each chunk and update the progress bar as each chunk is successfully uploaded. This provides a much better user experience than the user simply staring at a spinning wheel for an hour.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The next question is: <strong>how will we handle resumable uploads?</strong> We need to keep track of which chunks have been uploaded and which haven't. We can do this by saving the state of the upload in the database, specifically in our <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table. Let's update the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> schema to include a <span class="MuiBox-root mui-1vu004u">chunks</span> field.</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"123"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"name"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"file.txt"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"size"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"mimeType"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"text/plain"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"uploadedBy"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"user1"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"status"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"uploading"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  </span><span class="token" style="color: rgb(228, 86, 73);">"chunks"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">[</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"chunk1"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"status"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"uploaded"</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"chunk2"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"status"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"uploading"</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"id"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"chunk3"</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>      </span><span class="token" style="color: rgb(228, 86, 73);">"status"</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">"not-uploaded"</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">]</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span></code></div></div></pre>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When the user resumes the upload, we can check the <span class="MuiBox-root mui-1vu004u">chunks</span> field to see which chunks have been uploaded and which haven't. We can then start uploading the chunks that haven't been uploaded yet. This way, the user doesn't have to start the upload from scratch if they lose their internet connection or close the browser.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>But how should we ensure this <span class="MuiBox-root mui-1vu004u">chunks</span> field is kept in sync with the actual chunks that have been uploaded?</strong></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are two approaches we can take:</div>
<div class="my-6 flex flex-col gap-4"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-nhbct3"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-guv1gb" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Good Solution: Update based on client PATCH request</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-9">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The most obvious approach is to use the client to orchestrate chunk statuses. So the flow would look like:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client takes the file, chunks it, and uploads the chunks directly to S3.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">S3 responds to each chunk upload with a success message.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Upon success, the client sends a PATCH request to our backend to update the <span class="MuiBox-root mui-1vu004u">chunks</span> field in the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table.</div></li>
</ol><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span>PATCH /files/{fileId}/chunks
</span>Request:
{
  "chunks": [
    {
      "id": "chunk1",
      "status": "uploaded"
    },
  ]
}</code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="challenges-8">Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The issue here is that we are trusting the client to keep the <span class="MuiBox-root mui-1vu004u">chunks</span> field in sync with the actual chunks that have been uploaded which is a security risk. A malicious user could send a PATCH request to our backend to mark all of the chunks as uploaded without actually uploading them. While they'd only be able to corrupt their own file download in this case and not anyone else's, it is still a risk that can lead to an inconsistent state, which is difficult to debug. We can address this issue by using a server-side approach to ensure that the 'chunks' field stays in sync with the actual uploaded chunks.</div></div></div></div></div></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation0 MuiAccordion-root MuiAccordion-rounded MuiAccordion-gutters mui-11r69q9"><div class="MuiButtonBase-root MuiAccordionSummary-root MuiAccordionSummary-gutters mui-3ujfba" tabindex="0" role="button" aria-expanded="false" aria-controls="panel1bh-content" id="panel1bh-header"><div class="MuiAccordionSummary-content MuiAccordionSummary-contentGutters mui-l0jafl"><p class="MuiTypography-root MuiTypography-body1 mui-h8owmt">Great Solution: Rely on S3 Event Notifications</p></div><div class="MuiAccordionSummary-expandIconWrapper mui-awtdfi"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div></div><div class="MuiCollapse-root MuiCollapse-vertical MuiCollapse-hidden mui-a0y2e3" style="min-height: 0px;"><div class="MuiCollapse-wrapper MuiCollapse-vertical mui-hboir5"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical mui-8atqhb"><div aria-labelledby="panel1bh-header" id="panel1bh-content" role="region" class="MuiAccordion-region"><div class="MuiAccordionDetails-root mui-u7qq7e"><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="approach-10">Approach</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A better approach is to use S3 event notifications to keep the <span class="MuiBox-root mui-1vu004u">chunks</span> field in sync with the actual chunks that have been uploaded. <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/EventNotifications.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">S3 event notifications</a> are a feature of S3 that allow you to trigger a Lambda function or send a message to an SNS topic when a file is uploaded to S3. We can use this feature to send a message to our backend when a chunk is successfully uploaded and then update the <span class="MuiBox-root mui-1vu004u">chunks</span> field in the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table without relying on the client.</div></div></div></div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Next, let's talk about how to uniquely identify a file and a chunk. When you try to resume an upload, the very first question that should be asked is: (1) Have I tried to upload this file before? and (2) If yes, which chunks have I already uploaded? To answer the first question, we cannot naively rely on the file name. This is because two different users (or even the same user) could upload files with the same name. Instead, we need to rely on a unique identifier that is derived from the file's content. This is called a fingerprint.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/Fingerprint_(computing)" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">fingerprint</a> is a mathematical calculation that generates a unique hash value based on the content of the file. This hash value, often created using cryptographic hash functions like SHA-256, serves as a robust and unique identifier for the file regardless of its name or the source of the upload. By computing this fingerprint, we can efficiently determine whether the file, or any portion of it, has been uploaded before.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For resumable uploads, the process involves not only fingerprinting the entire file but also generating fingerprints for each individual chunk. This chunk-level fingerprinting allows the system to precisely identify which parts of the file have already been transmitted.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Taking a step back, we can tie it all together. Here is what will happen when a user uploads a large file:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client will chunk the file into 5-10Mb pieces and calculate a fingerprint for each chunk. It will also calculate a fingerprint for the entire file, this becomes the fileId.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client will send a GET request to fetch the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> for the file with the given fileId (fingerprint) in order to see if it already exists -- in which case, we can resume the upload.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If the file does not exist, the client will POST a request to <span class="MuiBox-root mui-1vu004u">/files/presigned-url</span> to get a presigned URL for the file. The backend will save the file metadata in the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table with a status of "uploading" and the <span class="MuiBox-root mui-1vu004u">chunks</span> array will be a list of the chunk fingerprints with a status of "not-uploaded".</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client will then upload each chunk to S3 using the presigned URL. After each chunk is uploaded, S3 will send a message to our backend using S3 event notifications. Our backend will then update the <span class="MuiBox-root mui-1vu004u">chunks</span> field in the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table to mark the chunk as "uploaded".</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Once all chunks in our <span class="MuiBox-root mui-1vu004u">chunks</span> array are marked as "uploaded", the backend will update the <span class="MuiBox-root mui-1vu004u">FileMetadata</span> table to mark the file as "uploaded".</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">All throughout this process, the client is responsible for keeping track of the progress of the upload and updating the user interface accordingly so the user knows how far in they are and how much longer it will take.</div>
<div class="my-6"><div class="MuiBox-root mui-132lzuk"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>AWS Multipart Upload</strong></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The approach we just described is not novel. In fact, this is a problem that has been solved by cloud storage providers like Amazon S3. They have a feature called <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/mpuoverview.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Multipart Upload</a> that allows you to upload large objects in parts. This is exactly what we just described. The client breaks the file into parts and uploads each part to S3. S3 then combines the parts into a single object. They even provide a handy <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://aws.amazon.com/blogs/compute/uploading-large-objects-to-amazon-s3-using-multipart-upload-and-transfer-acceleration/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">JavaScript SDK</a> which will handle all of the chunking and uploading for you.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In practice, you'd rely on this API when designing a system like Dropbox. However, it's almost certaintly the case that you could not get away with just saying, "I'd use the S3 Multipart Upload API" in your interview without being able to explain how it works and how you would implement it yourself if you had to. Making the interviewer aware that you are familiar with multipart upload is a good idea, however, as it shows hands on experience.</div></div><div class="MuiBox-root mui-iqoxai"></div><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation mui-cmu0xt" tabindex="0" type="button">Show More<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-4 w-4"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button></div></div></div>
<div class="my-4 flex-col w-full undefined"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><div class="w-full"><img class="w-full max-w-full max-h-full" src="https://d248djf5mc6iku.cloudfront.net/excalidraw/86b27d5668364431c4df4a58213c14e5"></div></div></div></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="2-how-can-we-make-uploads-downloads-and-syncing-as-fast-as-possible">2) How can we make uploads, downloads, and syncing as fast as possible?</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We've already touched on a few ways to speed up both download and upload respectively, but there is still more we can do to make the system as fast as possible. To recap, for download we used a CDN to cache the file closer to the user. This made it so that the file doesn't have to travel as far to get to the user, reducing latency and speeding up download times. For upload, chunking, beyond being useful for resumable uploads, also plays a significant role in speeding up the upload process. While bandwidth is fixed (put another way, the pipe is only so big), we can use chunking to make the most of the bandwidth we have. By sending multiple chunks in parallel, and utilizing adaptive chunk sizes based on network conditions, we can maximize the use of available bandwidth. The same chunking approach can be used for syncing files - when a file changes, we can identify which chunks have changed and only sync those chunks rather than the entire file, making syncing much faster.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Beyond that which we've already discussed, <strong>we can also utilize compression to speed up both uploads and downloads</strong>. Compression reduces the size of the file, which means fewer bytes need to be transferred. We can compress a file on the client before uploading it and then decompress it on the server after it's uploaded. We can also compress the file on the server before sending it to the client and then rely on the client to decompress it.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We'll need to be smart about when we compress though. Compression is only useful if the speed gained from transferring fewer bytes outweighs the time it takes to compress and decompress the file. For some file types, particularly media files like images and videos, the compression ratio is so low that it's not worth the time it takes to compress and decompress the file. If you take a <span class="MuiBox-root mui-1vu004u">.png</span> off your computer right now and compress it, you'll be lucky to have decreased the file size by more than a few percent -- so it's not worth it. For text files, on the other hand, the compression ratio is much higher and, depending on network conditions, it may very well be worth it. A 5GB text file could compress down to 1GB or even less depending on the content.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In the end, you'll want to implement logic on the client that decides whether or not to compress the file before uploading it based on the file type, size, and network conditions.</div>
<div class="my-6"><div class="MuiBox-root mui-132lzuk"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Compression Algorithms</strong></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are a number of compression algorithms that you can use to compress files. The most common are <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/Gzip" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Gzip</a>, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/Brotli" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Brotli</a>, and <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/Zstandard" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Zstandard</a>. Each of these algorithms has its own tradeoffs in terms of compression ratio and speed. Gzip is the most widely used and is supported by all modern web browsers. Brotli is newer and has a higher compression ratio than Gzip, but it's not supported by all web browsers. Zstandard is the newest and has the highest compression ratio and speed, but it's not supported by all web browsers. You'll need to decide which algorithm to use based on your specific use case.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">One important fact about compression is that you should always compress before you encrypt in cases where encryption is necessary. This is because encryption naturally introduces randomness into the file, which makes it difficult to compress. By compressing before encrypting, you will achieve a much higher compression ratio.</div></div><div class="MuiBox-root mui-iqoxai"></div><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation MuiButton-root MuiButton-text MuiButton-textInfo MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorInfo MuiButton-disableElevation mui-cmu0xt" tabindex="0" type="button">Show More<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-4 w-4"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button></div></div></div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="3-how-can-you-ensure-file-security">3) How can you ensure file security?</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Security is a critical aspect of any file storage system. We need to ensure that files are secure and only accessible to authorized users.</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Encryption in Transit</strong>: Sure, to most candidates, this is a no-brainer. We should use HTTPS to encrypt the data as it's transferred between the client and the server. This is a standard practice and is supported by all modern web browsers.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Encryption at Rest</strong>: We should also encrypt the files when they are stored in S3. This is a feature of S3 and is easy to enable. When a file is uploaded to S3, we can specify that it should be encrypted. S3 will then encrypt the file using a unique key and store the key separately from the file. This way, even if someone gains access to the file, they won't be able to decrypt it without the key. You can learn more about S3 encryption <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingServerSideEncryption.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">here</a>.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Access Control</strong>: Our <span class="MuiBox-root mui-1vu004u">shareList</span> or separate share table/cache is our basic ACL. As discussed earlier, we make sure that we share download links only with authorized users.</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">But what happens if an authorized user shares a download link with an unauthorized user? For example, an authorized user may, intentionally or unintentionally, post a download link to a public forum or social media and we need to make sure that unauthorized users cannot download the file.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is where those signed URLs we talked about early come back into play. When a user requests a download link, we generate a signed URL that is only valid for a short period of time (e.g. 5 minutes). This signed URL is then sent to the user, who can use it to download the file. If an unauthorized user gets a hold of the signed URL, they won't be able to use it to download the file because it will have expired.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">They also work with modern CDNs like CloudFront and are a feature of S3. Here is how:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Generation: A signed URL is generated on the server, including a signature that typically incorporates the URL path, an expiration timestamp, and possibly other restrictions (like IP address). This signature is encrypted with a secret key known only to the content provider and the CDN.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Distribution: The signed URL is distributed to an authorized user, who can use it to access the specified resource directly from the CDN.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Validation: When the CDN receives a request with a signed URL, it checks the signature in the URL against the expected format and parameters, including verifying the expiration timestamp. If the signature is valid and the URL has not expired, the CDN serves the requested content. If not, it denies access.</div></li>
</ol>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="what-is-expected-at-each-level"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/blog/the-system-design-interview-what-is-expected-at-each-level" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">What is Expected at Each Level?</a></h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Ok, that was a lot. You may be thinking, “how much of that is actually required from me in an interview?” Let’s break it down.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="mid-level">Mid-level</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Breadth vs. Depth:</strong> A mid-level candidate will be mostly focused on breadth (80% vs 20%). You should be able to craft a high-level design that meets the functional requirements you've defined, but many of the components will be abstractions with which you only have surface-level familiarity.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Probing the Basics:</strong> Your interviewer will spend some time probing the basics to confirm that you know what each component in your system does. For example, if you add an API Gateway, expect that they may ask you what it does and how it works (at a high level). In short, the interviewer is not taking anything for granted with respect to your knowledge.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Mixture of Driving and Taking the Backseat:</strong> You should drive the early stages of the interview in particular, but the interviewer doesn’t expect that you are able to proactively recognize problems in your design with high precision. Because of this, it’s reasonable that they will take over and drive the later stages of the interview while probing your design.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Dropbox:</strong> For this question, an E4 candidate will have clearly defined the API endpoints and data model, landed on a high-level design that is functional for all of uploading, downloading, and sharing. I don't expect candidates to know about pre-signed URLs or uploading/downloading to/from S3 directly, or to immediately know about chunking. However, I expect that when I ask probing questions like, "You're uploading the file twice right now, how can we avoid that?" or "How can you show a user's progress while allowing them to resume an upload?" that they can reason through the problem and come to a solution via some back and forth.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="senior">Senior</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Depth of Expertise</strong>: As a senior candidate, expectations shift towards more in-depth knowledge — about 60% breadth and 40% depth. This means you should be able to go into technical details in areas where you have hands-on experience. It's crucial that you demonstrate a deep understanding of key concepts and technologies relevant to the task at hand.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Advanced System Design</strong>: You should be familiar with advanced system design principles. For example, knowing how to utilize blob storage for large files, or how to implement a CDN for faster downloads. You should be able to discuss the trade-offs involved in different design choices and justify your decisions based on your experience.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Articulating Architectural Decisions</strong>: You should be able to clearly articulate the pros and cons of different architectural choices, especially how they impact scalability, performance, and maintainability. You justify your decisions and explain the trade-offs involved in your design choices.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Problem-Solving and Proactivity</strong>: You should demonstrate strong problem-solving skills and a proactive approach. This includes anticipating potential challenges in your designs and suggesting improvements. You need to be adept at identifying and addressing bottlenecks, optimizing performance, and ensuring system reliability.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Dropbox:</strong> For this question, E5 candidates are expected to quickly go through the initial high-level design so that they can spend time discussing, in detail, how to handle uploading large files, in particular. I expect them to be more proactive here than mid-level candidates, thinking through several options and arriving at a reasonable solution. While not strictly required, many candidates will have experience with file uploads and can speak directly about certain APIs (like multipart upload) and how they work.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="staff">Staff+</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Emphasis on Depth</strong>: As a staff+ candidate, the expectation is a deep dive into the nuances of system design — I'm looking for about 40% breadth and 60% depth in your understanding. This level is all about demonstrating that, while you may not have solved this particular problem before, you have solved enough problems in the real world to be able to confidently design a solution backed by your experience.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">You should know which technologies to use, not just in theory but in practice, and be able to draw from your past experiences to explain how they’d be applied to solve specific problems effectively. The interviewer knows you know the small stuff (REST API, data normalization, etc) so you can breeze through that at a high level so you have time to get into what is interesting.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>High Degree of Proactivity</strong>: At this level, an exceptional degree of proactivity is expected. You should be able to identify and solve issues independently, demonstrating a strong ability to recognize and address the core challenges in system design. This involves not just responding to problems as they arise but anticipating them and implementing preemptive solutions. Your interviewer should intervene only to focus, not to steer.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Practical Application of Technology</strong>: You should be well-versed in the practical application of various technologies. Your experience should guide the conversation, showing a clear understanding of how different tools and systems can be configured in real-world scenarios to meet specific requirements.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Complex Problem-Solving and Decision-Making</strong>: Your problem-solving skills should be top-notch. This means not only being able to tackle complex technical challenges but also making informed decisions that consider various factors such as scalability, performance, reliability, and maintenance.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Advanced System Design and Scalability</strong>: Your approach to system design should be advanced, focusing on scalability and reliability, especially under high load conditions. This includes a thorough understanding of distributed systems, load balancing, caching strategies, and other advanced concepts necessary for building robust, scalable systems.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>The Bar for Dropbox:</strong> For a staff-level candidate, expectations are high regarding the depth and quality of solutions, especially for the complex scenarios discussed earlier. Exceptional candidates delve deeply into each of the topics mentioned above and may even steer the conversation in a different direction, focusing extensively on a topic they find particularly interesting or relevant. They are also expected to possess a solid understanding of the trade-offs between various solutions and to be able to articulate them clearly, treating the interviewer as a peer.</div>
</body>
</html>