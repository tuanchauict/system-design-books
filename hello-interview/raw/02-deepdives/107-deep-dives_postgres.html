<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostgreSQL Deep Dive for System Design Interviews</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div><div class="flex flex-col gap-2 md:gap-4"><div class="flex flex-col"><h6 class="MuiTypography-root MuiTypography-h6 mui-zfm63x">Deep Dives</h6><h1 class="MuiTypography-root MuiTypography-h2 mui-161snwm">PostgreSQL</h1><p class="MuiTypography-root MuiTypography-body2 mui-45a2r">Learn when and how to leverage PostgreSQL in system design interviews</p></div></div><hr class="MuiDivider-root MuiDivider-fullWidth mui-1rvhejo"></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="intro">Intro</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There's a good chance you'll find yourself discussing PostgreSQL in your system design interview. After all, it's consistently ranked as the most beloved database in <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://survey.stackoverflow.co/2023/#section-most-popular-technologies-databases" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Stack Overflow's developer survey</a> and is used by companies from Reddit to Instagram and even the very website you're reading right now.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">That said, it's important to understand that while PostgreSQL is packed with features and capabilities, your interviewer isn't looking for a database administrator. They want to see that you can make informed architectural decisions. When should you choose PostgreSQL? When should you look elsewhere? What are the key trade-offs to consider?</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">I often see candidates get tripped up here. They either dive too deep into PostgreSQL internals (talking about MVCC and WAL when the interviewer just wants to know if it can handle their data relationships), or they make overly broad statements like "NoSQL scales better than PostgreSQL" without understanding the nuances.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In this deep dive, we'll focus specifically on what you need to know about PostgreSQL for system design interviews. We'll start with a practical example, explore the key capabilities and limits that should inform your choices, and build up to common interview scenarios.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For this deep dive, we're going to assume you have a basic understanding of SQL. If you don't, I've added an <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="#appendix-basic-sql-concepts" target="_self" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Appendix: Basic SQL Concepts</a> at the end of this page for you to review.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's get started.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="a-motivating-example">A Motivating Example</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's build up our intuition about PostgreSQL through a concrete example. Imagine we're designing a social media platform - not a massive one like Facebook, but one that's growing and needs a solid foundation.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Our platform needs to handle some fundamental relationships:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can create posts</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can comment on posts</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can follow other users</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can like both posts and comments</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users can create direct messages (DMs) with other users</div></li>
</ul>
<div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is exactly the kind of scenario that comes up in interviews. The relationships between entities are clear but non-trivial, and there are interesting questions about data consistency and scaling.</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">What makes this interesting from a database perspective? Well, different operations have different requirements:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Multi-step operations like creating DM threads need to be atomic (creating the thread, adding participants, and storing the first message must happen together)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Comment and follow relationships need referential integrity (you can't have a comment without a valid post or follow a non-existent user)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Like counts can be eventually consistent (it's not critical if it takes a few seconds to update)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">When someone requests a user's profile, we need to efficiently fetch their recent posts, follower count, and other metadata</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Users need to be able to search through posts and find other users</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">As our platform grows, we'll need to handle more data and more complex queries</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This combination of requirements - complex relationships, mixed consistency needs, search capabilities, and room for growth - makes it a perfect example for exploring PostgreSQL's strengths and limitations. Throughout this deep dive, we'll keep coming back to this example to ground our discussion in practical terms.</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="core-capabilities--limitations">Core Capabilities &amp; Limitations</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">With a motivating example in place, let's dive into what PostgreSQL can and can't do well. Most system design discussions about PostgreSQL will center around its read performance, write capabilities, consistency guarantees, and schema flexibility. Understanding these core characteristics will help you make informed decisions about when to use PostgreSQL in your design.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="read-performance">Read Performance</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">First up is read performance - this is critical because in most applications, reads vastly outnumber writes. In our social media example, users spend far more time browsing posts and profiles than they do creating content.</div>
<div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In system design interviews, you don't need to dive into query planner internals. Instead, focus on practical performance patterns and when different types of indexes make sense.</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a user views a profile, we need to efficiently fetch all posts by that user. Without proper indexing, PostgreSQL would need to scan every row in the posts table to find matching posts - a process that gets increasingly expensive as our data grows. This is where indexes come in. By creating an index on the <span class="MuiBox-root mui-1vu004u">user_id</span> column of our posts table, we can quickly locate all posts for a given user without scanning the entire table.</div>
<h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="basic-indexing">Basic Indexing</h4>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The most fundamental way to speed up reads in PostgreSQL is through indexes. By default, PostgreSQL uses B-tree indexes, which work great for:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Exact matches (WHERE email = '<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="mailto:user@example.com" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">user@example.com</a>')</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Range queries (WHERE created_at &gt; '2024-01-01')</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Sorting (ORDER BY username if the ORDER BY column match the index columns' order)</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">By default, PostgreSQL will create a B-tree index on your primary key column, but you also have the ability to create indexes on other columns as well.</div>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- This is your bread and butter index</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_users_email </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>email</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Multi-column indexes for common query patterns</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_posts_user_date </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> posts</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>user_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> created_at</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre>
<div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A common trap in interviews is to suggest adding indexes for every column. Remember that each index:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Makes writes slower (as the index must be updated)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Takes up disk space</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">May not even be used if the query planner thinks a sequential scan would be faster</div></li>
</ul></div></div></div></div>
<h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="beyond-basic-indexes">Beyond Basic Indexes</h4>
<div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Where PostgreSQL really shines is its support for specialized indexes. These come up frequently in system design interviews because they can eliminate the need for separate specialized databases:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Full-Text Search</strong> using GIN indexes. Postgres supports full-text search out of the box using GIN (Generalized Inverted Index) indexes. GIN indexes work like the index at the back of a book - they store a mapping of each word to all the locations where it appears. This makes them perfect for full-text search where you need to quickly find documents containing specific words:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Add a tsvector column for search</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ALTER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts </span><span class="token" style="color: rgb(166, 38, 164);">ADD</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">COLUMN</span><span> search_vector tsvector</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_posts_search </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> posts </span><span class="token" style="color: rgb(166, 38, 164);">USING</span><span> GIN</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>search_vector</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Now you can do full-text search</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> search_vector @@ to_tsquery</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'postgresql &amp; database'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>        </span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For many applications, this built-in search capability means you don't need a separate <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/elasticsearch" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Elasticsearch</a> cluster. It supports everything from:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Word stemming (finding/find/finds all match)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Relevance ranking</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Multiple languages</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex queries with AND/OR/NOT</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While PostgreSQL's full-text search is powerful, it may not fully replace Elasticsearch for all use cases. Consider Elasticsearch when you need:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More sophisticated relevancy scoring</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Faceted search capabilities</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Fuzzy matching and "search as you type" features</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Real-time index updates</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Distributed search across very large datasets</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Advanced analytics and aggregations</div></li>
</ul></div></div></div></div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Start with PostgreSQL's built-in search for simpler use cases. Only introduce Elasticsearch when you have specific requirements that PostgreSQL's search capabilities can't meet. This keeps your architecture simpler and reduces operational complexity.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">JSONB columns with GIN indexes are particularly useful when you need flexible metadata on your posts. For example, in our social media platform, each post might have different attributes like location, mentioned users, hashtags, or attached media. Rather than creating separate columns for each possibility, we can store this in a JSONB column (giving us the flexibility to add new attributes as needed just like we would in a NoSQL database!).</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Add a JSONB column for post metadata</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ALTER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts </span><span class="token" style="color: rgb(166, 38, 164);">ADD</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">COLUMN</span><span> metadata JSONB</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_posts_metadata </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> posts </span><span class="token" style="color: rgb(166, 38, 164);">USING</span><span> GIN</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>metadata</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Now we can efficiently query posts with specific metadata</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> metadata @</span><span class="token" style="color: rgb(64, 120, 242);">&gt;</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'{"type": "video"}'</span><span> 
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">AND</span><span> metadata @</span><span class="token" style="color: rgb(64, 120, 242);">&gt;</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'{"hashtags": ["coding"]}'</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Or find all posts that mention a specific user</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> metadata @</span><span class="token" style="color: rgb(64, 120, 242);">&gt;</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'{"mentions": ["user123"]}'</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Geospatial Search with PostGIS. While not built into PostgreSQL core, the PostGIS extension adds powerful spatial capabilities. Just like we can index text for fast searching, PostGIS lets us index location data for efficient geospatial queries. This is perfect for our social media platform when we want to show users posts from their local area:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Enable PostGIS</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> EXTENSION postgis</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Add a location column to posts</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ALTER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ADD</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">COLUMN</span><span> location </span><span class="token" style="color: rgb(166, 38, 164);">geometry</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(166, 38, 164);">Point</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Create a spatial index</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_posts_location 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> posts </span><span class="token" style="color: rgb(166, 38, 164);">USING</span><span> GIST</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>location</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Find all posts within 5km of a user</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> ST_DWithin</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    location::geography</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    ST_MakePoint</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(64, 120, 242);">-</span><span class="token" style="color: rgb(183, 107, 1);">122.4194</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">37.7749</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span>::geography</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- SF coordinates</span><span>
</span><span>    </span><span class="token" style="color: rgb(183, 107, 1);">5000</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- 5km in meters</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostGIS is incredibly powerful - it can handle:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Different types of spatial data (points, lines, polygons)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Various distance calculations (as-the-crow-flies, driving distance)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Spatial operations (intersections, containment)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Different coordinate systems</div></li>
</ul><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostGIS is so capable that companies like Uber initially used it for their entire ride-matching system. While they've since moved to custom solutions for scale, it shows how far you can go with PostgreSQL's extensions before needing specialized databases.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The index type used here (GIST) is specifically optimized for geometric data, using R-tree indexing under the hood. This means queries like "find all posts within X kilometers" or "find posts inside this boundary" can be executed efficiently without having to check every single row.</div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Just like with full-text search, you should consider PostGIS before reaching for a specialized geospatial database. It's another example of getting sophisticated functionality while keeping your architecture simple.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Better yet, we can combine all these capabilities to create rich search experiences. For example, we can find all video posts within 5km of San Francisco that mention "food" in their content and are tagged with "restaurant":</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> search_vector @@ to_tsquery</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'food'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">AND</span><span> metadata @</span><span class="token" style="color: rgb(64, 120, 242);">&gt;</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'{"type": "video", "hashtags": ["restaurant"]}'</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">AND</span><span> ST_DWithin</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    location::geography</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    ST_MakePoint</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(64, 120, 242);">-</span><span class="token" style="color: rgb(183, 107, 1);">122.4194</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">37.7749</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span>::geography</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(183, 107, 1);">5000</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let me rewrite this section to better explain the why and connect the concepts:</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="query-optimization-essentials">Query Optimization Essentials</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">So far we've covered the different types of indexes PostgreSQL offers, but there's more to query optimization than just picking the right index type. Let's look at some advanced indexing strategies that can dramatically improve read performance.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="covering-indexes">Covering Indexes</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When PostgreSQL uses an index to find a row, it typically needs to do two things:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Look up the value in the index to find the row's location</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Fetch the actual row from the table to get other columns you need</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">But what if we could store all the data we need right in the index itself? That's what covering indexes do:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Let's say this is a common query in our social media app:</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> title</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> created_at 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> posts 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> user_id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span> 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ORDER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">BY</span><span> created_at </span><span class="token" style="color: rgb(166, 38, 164);">DESC</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- A covering index that includes all needed columns</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_posts_user_include 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> posts</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>user_id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> INCLUDE </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>title</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> created_at</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Covering indexes can make queries significantly faster because PostgreSQL can satisfy the entire query just from the index without touching the table. The trade-off is that the index takes up more space and writes become slightly slower.</div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="partial-indexes">Partial Indexes</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Sometimes you only need to index a subset of your data. For example, in our social media platform, most queries are probably looking for active users, not deleted ones:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Standard index indexes everything</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_users_email </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>email</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Indexes ALL users</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Partial index only indexes active users</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INDEX</span><span> idx_active_users 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>email</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">status</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'active'</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Smaller, faster index</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Partial indexes are particularly effective in scenarios where most of your queries only need a subset of rows, when you have many "inactive" or "deleted" records that don't need to be indexed, or when you want to reduce the overall size and maintenance overhead of your indexes. By only indexing the relevant subset of data, partial indexes can significantly improve both query performance and resource utilization.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="practical-performance-limits">Practical Performance Limits</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There is a good chance that during your non-functional requirements you outlined some latency goals. Ideally, you even quantified them! That means that as you go deep into the design, you need some basic performance numbers in mind. These numbers are very rough estimates as real numbers depend heavily on the hardware and the specific workload. That said, estimates should be enough to get you started in an interview.</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Query Performance</strong>:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Simple indexed lookups: thousands per second per core</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex joins: hundreds per second</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Full-table scans: depends heavily on whether data fits in memory</div></li>
</ul>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Scale Limits</strong>:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Tables start getting unwieldy past 100M rows</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Full-text search works well up to tens of millions of documents</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex joins become challenging with tables &gt;10M rows</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Performance drops significantly when working set exceeds available RAM</div></li>
</ul>
</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">These aren't hard limits - PostgreSQL can handle much more with proper optimization. But they're good rules of thumb for when you should start considering partitioning, sharding, or other scaling strategies.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Keep in mind, memory is king when it comes to performance! Queries that can be satisfied from memory are orders of magnitude faster than those requiring disk access. As a rule of thumb, you should try to keep your working set (frequently accessed data) in RAM for optimal performance.</div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, showing knowledge of these practical limits helps demonstrate that you understand not just how to use PostgreSQL, but when you might need to consider alternatives or additional optimization strategies.</div></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="write-performance">Write Performance</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now let's talk about writes. While reads might dominate most workloads, write performance is often more critical because it directly impacts user experience - nobody wants to wait seconds after hitting "Post" for their content to appear.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a write occurs in PostgreSQL, several steps happen to ensure both performance and durability:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Transaction Log (WAL) Write [Disk]</strong>: Changes are first written to the Write-Ahead Log (WAL) on disk. This is a sequential write operation, making it relatively fast. The WAL is critical for durability - once changes are written here, the transaction is considered durable because even if the server crashes, PostgreSQL can recover the changes from the WAL.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Buffer Cache Update [Memory]</strong>: Changes are made to the data pages in PostgreSQL's shared buffer cache, where the actual tables and indexes live in memory. When pages are modified, they're marked as "dirty" to indicate they need to be written to disk eventually.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Background Writer [Memory  Disk]</strong>: Dirty pages in memory are periodically written to the actual data files on disk. This happens asynchronously through the background writer, when memory pressure gets too high, or when a checkpoint occurs. This delayed write strategy allows PostgreSQL to batch multiple changes together for better performance.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Index Updates [Memory &amp; Disk]</strong>: Each index needs to be updated to reflect the changes. Like table data, index changes also go through the WAL for durability. This is why having many indexes can significantly slow down writes - each index requires additional WAL entries and memory updates.</div>
</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This architecture is why PostgreSQL can be fast for writes - most of the work happens in memory, while ensuring durability through the WAL. The actual writing of data pages to disk happens later and is optimized for batch operations.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The practical implication of this design is that write performance is typically bounded by how fast you can write to the WAL (disk I/O), how many indexes need to be updated, and how much memory is available for the buffer cache.</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="throughput-limitations">Throughput Limitations</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now we know about what happens when a write occurs in PostgreSQL, before we go onto optimizations, let's first talk about the practical limits of write throughput. This is important to know as it will help you decide whether PostgreSQL is a good fit for your system.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A well-tuned PostgreSQL instance on good (not great) hardware can handle:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Simple inserts: ~5,000 per second per core</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Updates with index modifications: ~1,000-2,000 per second per core</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex transactions (multiple tables/indexes): Hundreds per second</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Bulk operations: Tens of thousands of rows per second</div></li>
</ul><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">These numbers assume PostgreSQL's default transaction isolation level (Read Committed), where transactions only see data that was committed before their query began. If you change the default isolation level these numbers can go up or down.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">What affects these limits? Several factors:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Hardware: Write throughput is often bottlenecked by disk I/O for the WAL</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Indexes: Each additional index reduces write throughput</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Replication: If configured, synchronous replication adds latency as we wait for replicas to confirm</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Transaction Complexity: More tables or indexes touched = slower transactions</div></li>
</ul><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Remember, were talking about a single node here! So if your system has higher write throughput that, say, 5k writes per second, this does not mean that PostgreSQL is off the table, it just means that you are going to need to shard your data across multiple nodes/machines.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let me continue from there, building on our social media example:</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="write-performance-optimizations">Write Performance Optimizations</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Ok, a single node can handle around 5k writes per second, so what can we do? How can we improve our write performance if we require more than that? Let's look at strategies ranging from simple optimizations to architectural changes.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We have a few options:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Batch Processing</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Vertical Scaling</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Write Offloading</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Table Partitioning</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Sharding</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's discuss each of these in turn.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>1. Vertical Scaling</strong>
Before jumping to complex solutions, we can always consider just upgrading our hardware. This could mean using faster NVMe disks for better WAL performance, adding more RAM to increase the buffer cache size, or upgrading to CPUs with more cores to handle parallel operations more effectively.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This usually isn't the most compelling solution in an interview, but it's a good place to start.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>2. Batch Processing</strong>
The simplest optimization is to batch writes together. Instead of processing each write individually, we collect multiple operations and execute them in a single transaction. For example, instead of inserting 1000 likes one at a time, we can insert them all in a single transaction. This means we're buffering writes in our server's memory before committing them to disk. The risk here is clear, if we crash in the middle of a batch, we'll lose all the writes in that batch.</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Instead of 1000 separate inserts:</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">INSERT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INTO</span><span> likes </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>post_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> user_id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">VALUES</span><span> 
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">1</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">101</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">1</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">102</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">1</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>3. Write Offloading</strong>
Some writes don't need to happen synchronously. For example, analytics data, activity logs, or aggregated metrics can often be processed asynchronously. Instead of writing directly to PostgreSQL, we can:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Send writes to a message queue (like Kafka)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Have background workers process these queued writes in batches</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Optionally maintain a separate analytics database</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This pattern works especially well for handling activity logging, analytics events, metrics aggregation, and non-critical updates like "last seen" timestamps. These types of writes don't need to happen immediately and can be processed in the background without impacting the core user experience.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>4. Table Partitioning</strong></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For large tables, partitioning can improve both read and write performance by splitting data across multiple physical tables. The most common use case is time-based partitioning. Going back to our social media example, let's say we have a posts table that grows by millions of rows per month:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    id </span><span class="token" style="color: rgb(166, 38, 164);">SERIAL</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    user_id </span><span class="token" style="color: rgb(166, 38, 164);">INT</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    content </span><span class="token" style="color: rgb(166, 38, 164);">TEXT</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    created_at </span><span class="token" style="color: rgb(166, 38, 164);">TIMESTAMP</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">PARTITION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">BY</span><span> RANGE </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>created_at</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Create partitions by month</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts_2024_01 </span><span class="token" style="color: rgb(166, 38, 164);">PARTITION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">OF</span><span> posts
</span><span>    </span><span class="token" style="color: rgb(166, 38, 164);">FOR</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">VALUES</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'2024-01-01'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TO</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'2024-02-01'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Why does this help writes? First, different database sessions can write to different partitions simultaneously, increasing concurrency. Second, when data is inserted, index updates only need to happen on the relevant partition rather than the entire table. Finally, bulk loading operations can be performed partition by partition, making it easier to load large amounts of data efficiently.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Conveniently, it also helps with reads. When users view recent posts, PostgreSQL only needs to scan the recent partitions. No need to wade through years of historical data.</div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A common pattern is to keep recent partitions on fast storage (like NVMe drives) while moving older partitions to cheaper storage. Users get fast access to recent data, which is typically what they care about most.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is a great strategy for data that has a natural lifecycle like social media posts where new ones are most relevant.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>5. Sharding</strong>
This is the most common solution in an interview. When a single node isn't enough, sharding lets you distribute writes across multiple PostgreSQL instances. You'll just want to be clear about what you're sharding on and how you're distributing the data.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For example, we may consider sharing our posts by <span class="MuiBox-root mui-1vu004u">user_id</span>. This way, all the data for a user lives on a single shard. This is important, because when we go to read the data we want to avoid cross-shard queries where we need to scatter-gather data from multiple shards.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">You typically want to shard on the column that you're querying by most often. So if we typically query for all posts from a given user, we'll shard by <span class="MuiBox-root mui-1vu004u">user_id</span>.</div><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Sharding adds complexity - you'll need to handle cross-shard queries, maintain consistent schemas across shards, and manage multiple databases. Only introduce it when simpler optimizations aren't sufficient.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Unlike DynamoDB, PostgreSQL doesn't have a built-in sharding solution. You'll need to implement sharding manually, which can be a bit of a challenge. Alternatively, you can use managed services like <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.citusdata.com/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Citus</a> which handles many of the sharding complexities for you.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="replication">Replication</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While we've discussed how to optimize write performance on a single node, most real-world deployments use replication for two key purposes:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Scaling reads by distributing queries across replicas</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Providing high availability in case of node failures</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Replication is the process of copying data from one database to one or more other databases. This is a key part of PostgreSQL's scalability and availability story.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL supports two main types of replication: synchronous and asynchronous. In synchronous replication, the primary waits for acknowledgment from replicas before confirming the write to the client. With asynchronous replication, the primary confirms the write to the client immediately and replicates changes to replicas in the background. While the technical details may not come up in an interview, understanding these tradeoffs is important - synchronous replication provides stronger consistency but higher latency, while asynchronous replication offers better performance but potential inconsistency between replicas.</div><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Many organizations use a hybrid approach: keeping a small number of synchronous replicas for stronger consistency while maintaining additional asynchronous replicas for read scaling. PostgreSQL allows you to specify which replicas should be synchronous.</div></div></div></div></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="scaling-reads">Scaling reads</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The most common use for replication is to scale read performance. By creating read replicas, you can distribute read queries across multiple database instances while sending all writes to the primary. This is particularly effective because most applications are read-heavy.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's go back to our social media example. When users browse their feed or view profiles, these are all read operations that can be handled by any replica. Only when they create posts or update their profile do we need to use the primary. Now we have multiplied our read throughput by N where N is the number of replicas.</div><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There's one key caveat with read replicas: replication lag. If a user makes a change and immediately tries to read it back, they might not see their change if they hit a replica that hasn't caught up yet. This is known as "read-your-writes" consistency.</div></div></div></div></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="high-availability">High Availability</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The second major benefit of replication is high availability. By maintaining copies of your data across multiple nodes, you can handle hardware failures without downtime. If your primary node fails, one of the replicas can be promoted to become the new primary.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This failover process typically involves:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Detecting that the primary is down</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Promoting a replica to primary</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Updating connection information</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Repointing applications to the new primary</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, emphasize that replication isn't just about scaling - it's about reliability. You might say: "We'll use replication not just for distributing read load, but also to ensure our service stays available even if we lose a database node."</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Most teams use managed PostgreSQL services (like AWS RDS or GCP Cloud SQL) that handle the complexities of failover automatically. In your interview, it's enough to know that failover is possible and roughly how it works - you don't need to get into the details of how to configure it manually.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="data-consistency">Data Consistency</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If you've chosen to prioritize consistency over availability in your non-functional requirements, then PostgreSQL is a strong choice. It's built from the ground up to provide strong consistency guarantees through ACID transactions. However, simply choosing PostgreSQL isn't enough - you need to understand how to actually achieve the consistency your system requires.</div><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A common mistake in interviews is to say "We'll use PostgreSQL because it's ACID compliant" without being able to explain how you'll actually use those ACID properties to solve your consistency requirements.</div></div></div></div></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="transactions">Transactions</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">One of the most common points of discussion in interviews ends up being around transactions. A transaction is a set of operations that are executed together and must either all succeed or all fail together. This is the foundation for ensuring consistency in PostgreSQL.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's consider a simple example where we need to transfer money between two bank accounts. We need to ensure that if we deduct money from one account, it must be added to the other account. Neither operation can happen in isolation:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> accounts </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">-</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> accounts </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">+</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">2</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This transaction ensures atomicity - either both updates happen or neither does. However, transactions alone don't ensure consistency in all scenarios, particularly when multiple transactions are happening concurrently.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="transactions-and-concurrent-operations">Transactions and Concurrent Operations</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Transactions ensure consistency for a single series of operations, but things get more complicated when multiple transactions are happening concurrently. Remember, in most real applications, you'll have multiple users or services trying to read and modify data at the same time.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This is where many candidates get tripped up in interviews. They understand basic transactions but haven't thought through how to maintain consistency when multiple operations are happening simultaneously.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's look at an auction system as an example. Here users place bids on items and we accept bids only if they're higher than the current max bid. A single transaction can ensure that checking the current bid and placing a new bid happen atomically, but what happens when two users try to bid at the same time?</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Get current max bid for item 123</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> maxBid </span><span class="token" style="color: rgb(166, 38, 164);">from</span><span> Auction </span><span class="token" style="color: rgb(166, 38, 164);">where</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Place new bid if it's higher</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">INSERT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INTO</span><span> bids </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>item_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> user_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> amount</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">VALUES</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">456</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Update the max bid</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> Auction </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> maxBid </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Even though this is in a transaction, with PostgreSQL's default isolation level (Read Committed), we could still have consistency problems if two users bid simultaneously. Both transactions could read the same max bid before either commits.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Here's how this could lead to an inconsistent state:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User A's transaction reads current max bid: $90</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User B's transaction reads current max bid: $90</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User A places bid for $100</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User A commits</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User B places bid for $95</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User B commits</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now we have an invalid state: a $95 bid was accepted after a $100 bid!</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are two main ways we can solve this concurrency issue:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>1. Row-Level Locking</strong>
The simplest solution is to lock the auction row while we're checking and updating bids. By using the <span class="MuiBox-root mui-1vu004u">FOR UPDATE</span> clause, we tell PostgreSQL to lock the rows we're reading. Other transactions trying to read these rows with <span class="MuiBox-root mui-1vu004u">FOR UPDATE</span> will have to wait until our transaction completes. This ensures we have a consistent view of the data while making our changes.</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Lock the item and get current max bid</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> maxBid </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> Auction </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FOR</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Place new bid if it's higher</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">INSERT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INTO</span><span> bids </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>item_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> user_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> amount</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">VALUES</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">456</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Update the max bid</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> Auction </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> maxBid </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">So when you need to ensure that two operations happen atomically, you'll want to emphasize to your interviewer how you will achieve that beyond simply saying "we'll use transactions". Instead, "we'll use transactions and row-level locking on the auction row", for this case.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>2. Higher Isolation Level</strong>
Alternatively, we can use a stricter isolation level:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TRANSACTION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">ISOLATION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">LEVEL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">SERIALIZABLE</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Same code as before...</span><span>
</span>
<span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While serializable isolation prevents all consistency anomalies, it comes with a cost: if two transactions conflict, one will be rolled back and need to retry. Your application needs to be prepared to handle these retry scenarios.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL supports three isolation levels, each providing different consistency guarantees:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Read Committed</strong> (Default) is PostgreSQL's default isolation level that only sees data that was committed before the query began. As transactions execute, each query within a transaction can see new commits made by other transactions that completed after the transaction started. While this provides good performance, it can lead to non-repeatable reads where the same query returns different results within a transaction.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Repeatable Read</strong> in PostgreSQL provides stronger guarantees than the SQL standard requires. It creates a consistent snapshot of the data as of the start of the transaction, and unlike other databases, PostgreSQL's implementation prevents both non-repeatable reads AND phantom reads. This means not only will the same query return the same results within a transaction, but no new rows will appear that match your query conditions - even if other transactions commit such rows.</div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>Serializable</strong> is the strongest isolation level that makes transactions behave as if they were executed one after another in sequence. This prevents all types of concurrency anomalies but comes with the trade-off of requiring retry logic in your application to handle transaction conflicts.</div>
</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL's implementation of Repeatable Read is notably stronger than what the SQL standard requires. While other databases might allow phantom reads at this isolation level, PostgreSQL prevents them. This means you might not need Serializable isolation in cases where you would in other databases.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">So, when should you use row-locking and when should you use a higher isolation level?</div><div class="MuiTableContainer-root mui-ntrpdu"><table class="MuiTable-root mui-hu1vpi"><thead class="MuiTableHead-root mui-1wbz3t9"><tr class="MuiTableRow-root MuiTableRow-head mui-a1y8t3"><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Aspect</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Serializable Isolation</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Row-Level Locking</th></tr></thead><tbody class="MuiTableBody-root mui-1xnox0e"><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Concurrency</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Lower - transactions might need to retry on conflict</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Higher - only conflicts when touching same rows</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Performance</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">More overhead - must track all read/write dependencies</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Less overhead - only locks specific rows</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Use Case</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Complex transactions where it's hard to know what to lock</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">When you know exactly which rows need atomic updates</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Complexity</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Simple to implement but requires retry logic</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">More explicit in code but no retries needed</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Error Handling</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Must handle serialization failures</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Must handle deadlock scenarios</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Example</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Complex financial calculations across multiple tables</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Auction bidding, inventory updates</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Memory Usage</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Higher - tracks entire transaction history</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Lower - only tracks locks</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><strong>Scalability</strong></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Doesn't scale as well with concurrent transactions</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Scales better when conflicts are rare</td></tr></tbody></table></div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Row-level locking is generally preferred when you know exactly which rows need to be locked. Save serializable isolation for cases where the transaction is too complex to reason about which locks are needed.</div></div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="when-to-use-postgresql-and-when-not-to">When to Use PostgreSQL (and When Not To)</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let me revise that opening with more concrete technical advantages:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Here's my advice: in your system design interview, PostgreSQL should be your default choice unless you have a specific reason to use something else. Why? Because PostgreSQL:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Provides strong ACID guarantees while still scaling effectively with replication and partitioning</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Handles both structured and unstructured data through JSONB support</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Includes built-in solutions for common needs like full-text search and geospatial queries</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Can scale reads effectively through replication</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Offers excellent tooling and a mature ecosystem</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Start with PostgreSQL, then justify why you might need to deviate. This is much stronger than starting with a niche solution and trying to justify why it's better than PostgreSQL.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL shines when you need:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex relationships between data</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Strong consistency guarantees</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Rich querying capabilities</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">A mix of structured and unstructured data (JSONB)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Built-in full-text search</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Geospatial queries</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For example, it's perfect for:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">E-commerce platforms (inventory, orders, user data)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Financial systems (transactions, accounts, audit logs)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Content management systems (posts, comments, users)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Analytics platforms (up to reasonable scale)</div></li>
</ul><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="when-to-consider-alternatives">When to Consider Alternatives</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">That said, we aren't maxis over here. There are legitimate reasons to look beyond PostgreSQL.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>1. Extreme Write Throughput</strong>
If you need to handle millions of writes per second, PostgreSQL will struggle because each write requires a WAL entry and index updates, creating I/O bottlenecks even with the fastest storage. Even with sharding, coordinating writes across many PostgreSQL nodes adds complexity and latency. In these cases, you might consider:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">NoSQL databases (like <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/cassandra" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Cassandra</a>) for event streaming</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Key-value stores (like <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/redis" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Redis</a>) for real-time counters</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>2. Global Multi-Region Requirements</strong>
When you need active-active deployment across regions (where multiple regions accept writes simultaneously), PostgreSQL faces fundamental limitations. Its single-primary architecture means one region must be designated as the primary writer, while others act as read replicas. Attempting true active-active deployment creates significant challenges around data consistency and conflict resolution, as PostgreSQL wasn't designed to handle simultaneous writes from multiple primaries. The synchronous replication needed across regions also introduces substantial latency, as changes must be confirmed by distant replicas before being committed. For these scenarios, consider:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">CockroachDB for global ACID compliance</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/cassandra" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Cassandra</a> for eventual consistency at global scale</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/dynamodb" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">DynamoDB</a> for managed global tables</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>3. Simple Key-Value Access Patterns</strong>
If your access patterns are truly key-value (meaning you're just storing and retrieving values by key without joins or complex queries), PostgreSQL is overkill. Its MVCC architecture, WAL logging, and complex query planner add overhead you don't need. In these cases, consider:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/redis" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Redis</a> for in-memory performance</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/dynamodb" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">DynamoDB</a> for managed scalability</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/cassandra" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Cassandra</a> for write-heavy workloads</div></li>
</ul><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Scalability alone is not a good reason to choose an alternative to PostgreSQL. PostgreSQL can handle significant scale with proper design.</div></div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="summary">Summary</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL should be your default choice in system design interviews unless specific requirements demand otherwise. Its combination of ACID compliance, rich feature set, and scalability options make it suitable for a wide range of use cases, from simple CRUD applications to complex transactional systems.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When discussing PostgreSQL in interviews, focus on analyzing concrete requirements around data consistency, query patterns, and scale, rather than following trends. Be prepared to discuss key trade-offs like ACID vs eventual consistency, read vs write scaling strategies, and indexing decisions. Start simple and add complexity only as needed.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL's rich feature set often eliminates the need for additional systems in your architecture. Its full-text search capabilities might replace Elasticsearch, JSONB support could eliminate the need for MongoDB, and PostGIS handles geospatial needs that might otherwise require specialized databases. Built-in replication often provides sufficient scaling capabilities for many use cases. However, it's equally important to recognize when PostgreSQL might not be the best fit, such as cases requiring extreme write scaling or global distribution, where databases like Cassandra or CockroachDB might be more appropriate.</div><hr class="MuiDivider-root MuiDivider-fullWidth mui-ss6lby"><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="appendix-basic-sql-concepts">Appendix: Basic SQL Concepts</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before diving into PostgreSQL-specific features, let's review how SQL databases organize data. These core concepts apply to any SQL database, not just PostgreSQL but are a necessary foundation that we will build on throughout this deep dive.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="relational-database-principles">Relational Database Principles</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">At its core, PostgreSQL stores data in tables (also called relations). Think of a table like a spreadsheet with rows and columns. Each column has a specific data type (like text, numbers, or dates), and each row represents one complete record.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's look at a concrete example. Imagine we're designing a social media platform. We might have a <span class="MuiBox-root mui-1vu004u">users</span> table that looks like this:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> users </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    id </span><span class="token" style="color: rgb(166, 38, 164);">SERIAL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">PRIMARY</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">KEY</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    username </span><span class="token" style="color: rgb(166, 38, 164);">VARCHAR</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">50</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">UNIQUE</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">NOT</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">NULL</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    email </span><span class="token" style="color: rgb(166, 38, 164);">VARCHAR</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">255</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">UNIQUE</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">NOT</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">NULL</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    created_at </span><span class="token" style="color: rgb(166, 38, 164);">TIMESTAMP</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">DEFAULT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">CURRENT_TIMESTAMP</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This command would create the following table (data is just for example):</div><div class="MuiTableContainer-root mui-ntrpdu"><table class="MuiTable-root mui-hu1vpi"><thead class="MuiTableHead-root mui-1wbz3t9"><tr class="MuiTableRow-root MuiTableRow-head mui-a1y8t3"><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">id</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">username</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">email</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">created_at</th></tr></thead><tbody class="MuiTableBody-root mui-1xnox0e"><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">1</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">johndoe</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="mailto:john@example.com" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">john@example.com</a></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:00:00</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">janedoe</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="mailto:jane@example.com" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">jane@example.com</a></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:05:00</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">3</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">bobsmith</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="mailto:bob@example.com" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">bob@example.com</a></td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:10:00</td></tr></tbody></table></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a new user signs up, we create a new row in this table. Each user gets a unique <span class="MuiBox-root mui-1vu004u">id</span> (that's what <span class="MuiBox-root mui-1vu004u">PRIMARY KEY</span> means), and we ensure no two users can have the same username or email (that's what <span class="MuiBox-root mui-1vu004u">UNIQUE</span> does).</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">But users aren't much fun by themselves. They need to be able to post content. Here's where the "relational" part of relational databases comes in. We can create a <span class="MuiBox-root mui-1vu004u">posts</span> table that's connected to our users:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> posts </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    id </span><span class="token" style="color: rgb(166, 38, 164);">SERIAL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">PRIMARY</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">KEY</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    user_id </span><span class="token" style="color: rgb(166, 38, 164);">INTEGER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">REFERENCES</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    content </span><span class="token" style="color: rgb(166, 38, 164);">TEXT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">NOT</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">NULL</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    created_at </span><span class="token" style="color: rgb(166, 38, 164);">TIMESTAMP</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">DEFAULT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">CURRENT_TIMESTAMP</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTableContainer-root mui-ntrpdu"><table class="MuiTable-root mui-hu1vpi"><thead class="MuiTableHead-root mui-1wbz3t9"><tr class="MuiTableRow-root MuiTableRow-head mui-a1y8t3"><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">id</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">user_id</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">content</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">created_at</th></tr></thead><tbody class="MuiTableBody-root mui-1xnox0e"><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">1</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">1</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Hello, world!</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:00:00</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">1</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">My first post</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:05:00</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">3</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Another post</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">2024-01-01 10:10:00</td></tr></tbody></table></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">See <span class="MuiBox-root mui-1vu004u">REFERENCES users(id)</span>? That's called a foreign key - it creates a relationship between posts and users. Every post must belong to a valid user, and PostgreSQL will enforce this for us. This is one of the key strengths of relational databases: they help maintain data integrity by enforcing these relationships.</div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, being able to explain these relationships is crucial. There are three main types:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">One-to-One: Like a user and their profile settings</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">One-to-Many: Like our users and posts (one user can have many posts)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Many-to-Many: Like users and the posts they like (which we'll see next)</div></li>
</ul></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now, what if we want users to be able to like posts? This introduces a many-to-many relationship - one user can like many posts, and one post can be liked by many users. We handle this with what's called a join table:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> likes </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    user_id </span><span class="token" style="color: rgb(166, 38, 164);">INTEGER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">REFERENCES</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    post_id </span><span class="token" style="color: rgb(166, 38, 164);">INTEGER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">REFERENCES</span><span> posts</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    created_at </span><span class="token" style="color: rgb(166, 38, 164);">TIMESTAMP</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">DEFAULT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">CURRENT_TIMESTAMP</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token" style="color: rgb(166, 38, 164);">PRIMARY</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">KEY</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>user_id</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> post_id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This structure, where we break data into separate tables and connect them through relationships, is called "normalization." It helps us:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Avoid duplicating data (we don't store user information in every post)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Maintain data integrity (if a user changes their username, it updates everywhere)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Make our data model flexible (we can add new user attributes without touching posts)</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While normalization is generally good, sometimes we intentionally denormalize data for performance. For example, we might store a post's like count directly in the posts table even though we could calculate it from the likes table. This trade-off between data consistency and query performance is exactly the kind of thing you should discuss in your interview!</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Understanding these fundamentals - tables, relationships, and normalization - is important. They're what make SQL databases like PostgreSQL so powerful for applications that need to maintain complex relationships between different types of data. In your interview, being able to explain not just how to use these concepts, but when and why to use them (or break them), will set you apart.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="acid-properties">ACID Properties</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">One of PostgreSQL's greatest strengths is its strict adherence to ACID (Atomicity, Consistency, Isolation, and Durability) properties. If you've used databases like MongoDB or Cassandra, you're familiar with eventual consistency or relaxed transaction guarantees which are common trade-offs in NoSQL databases. PostgreSQL takes a different approach  it ensures that your data always follows all defined rules and constraints (like foreign keys, unique constraints, and custom checks), and that all transactions complete fully or not at all, even if it means sacrificing some performance.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's break down what ACID means using a real-world example: transferring money between bank accounts.</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="atomicity-all-or-nothing">Atomicity (All or Nothing)</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Imagine you're transferring $100 from your savings to your checking account. This involves two operations:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Deduct $100 from savings</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Add $100 to checking</div></li>
</ol><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> accounts </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">-</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> account_id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'savings'</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> accounts </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> balance </span><span class="token" style="color: rgb(64, 120, 242);">+</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">100</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> account_id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'checking'</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Atomicity guarantees that either both operations succeed or neither does. If the system crashes after deducting from savings but before adding to checking, PostgreSQL will roll back the entire transaction. Your money never disappears into thin air.</div><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, emphasize how atomicity prevents partial failures. Without it, distributed systems can end up in inconsistent states that are very difficult to recover from.</div></div></div></div></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="consistency-data-integrity">Consistency (Data Integrity)</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Consistency ensures that transactions can only bring the database from one valid state to another. For example, let's say we have a rule that account balances can't go negative:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> accounts </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>    account_id </span><span class="token" style="color: rgb(166, 38, 164);">TEXT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">PRIMARY</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">KEY</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    balance </span><span class="token" style="color: rgb(166, 38, 164);">DECIMAL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">CHECK</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>balance </span><span class="token" style="color: rgb(64, 120, 242);">&gt;=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">0</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    owner_id </span><span class="token" style="color: rgb(166, 38, 164);">INTEGER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">REFERENCES</span><span> users</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>id</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If a transaction would make your balance negative, PostgreSQL will reject the entire transaction. This is different from NoSQL databases where you often have to enforce these rules in your application code.</div><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Confusingly, consistency in ACID has a slightly different meaning than consistency in CAP Theorem. In ACID, consistency means that the database always follows all defined rules and constraints. In the CAP Theorem, consistency means that the database always returns the correct result, even if it means sacrificing availability or partition tolerance.</div></div></div></div></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="isolation-concurrent-transactions">Isolation (Concurrent Transactions)</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Isolation levels determine how transactions can interact with data that's being modified by other concurrent transactions. PostgreSQL supports four isolation levels, each preventing different types of phenomena:</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TRANSACTION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">ISOLATION</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">LEVEL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">READ</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">COMMITTED</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Default level</span><span>
</span><span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- or REPEATABLE READ</span><span>
</span><span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- or SERIALIZABLE</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><div class="my-4"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL's default "Read Committed" level only prevents dirty reads (reading uncommitted changes). It allows non-repeatable reads and phantom reads. Check the <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.postgresql.org/docs/current/transaction-iso.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">PostgreSQL documentation</a> for a detailed breakdown of which anomalies each level prevents.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While the SQL standard defines four isolation levels, PostgreSQL implements only three distinct levels internally. Specifically, Read Uncommitted behaves identically to Read Committed in PostgreSQL. This design choice aligns with PostgreSQL's multiversion concurrency control (MVCC) architecture, which always provides snapshot isolation - making it impossible to read uncommitted data.</div><div class="MuiTableContainer-root mui-ntrpdu"><table class="MuiTable-root mui-hu1vpi"><thead class="MuiTableHead-root mui-1wbz3t9"><tr class="MuiTableRow-root MuiTableRow-head mui-a1y8t3"><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Isolation Level</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Dirty Read</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Nonrepeatable Read</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Phantom Read</th><th class="MuiTableCell-root MuiTableCell-head MuiTableCell-sizeSmall mui-1dvcw2j" scope="col">Serialization Anomaly</th></tr></thead><tbody class="MuiTableBody-root mui-1xnox0e"><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Read uncommitted</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Allowed, but not in PG</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Read committed</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Repeatable read</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Allowed, but not in PG</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Possible</td></tr><tr class="MuiTableRow-root mui-a1y8t3"><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Serializable</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td><td class="MuiTableCell-root MuiTableCell-body MuiTableCell-sizeSmall mui-7wgons">Not possible</td></tr></tbody></table></div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="durability-permanent-storage">Durability (Permanent Storage)</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Once PostgreSQL says a transaction is committed, that data is guaranteed to have been written to disk and sync'd, protecting against crashes or power failures. This is achieved through Write-Ahead Logging (WAL):</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Changes are first written to a log</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The log is flushed to disk</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Only then is the transaction considered committed</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While durability is guaranteed, there's a performance cost. Some applications might choose to relax durability for speed (like setting <span class="MuiBox-root mui-1vu004u">synchronous_commit = off</span>), meaning some writes which haven't been written to disk may be lost in the event of a power outage or crash.</div></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="why-acid-matters">Why ACID Matters</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, you'll often need to decide between different types of databases. ACID compliance is a crucial factor in this decision. Consider these scenarios:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Financial transactions</strong>: You absolutely need ACID properties to prevent money from being lost or double-spent</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Social media likes</strong>: You might be okay with eventual consistency</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>User authentication</strong>: You probably want ACID to prevent security issues</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Analytics data</strong>: You might prioritize performance over strict consistency</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">PostgreSQL's strict ACID compliance makes it an excellent choice for systems where data consistency is crucial. While performance trade-offs nowadays are minor, they're still worth being aware of.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="sql-language">SQL Language</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's talk about SQL briefly. While you rarely write actual SQL queries in system design interviews, understanding SQL's capabilities helps you make better architectural decisions. Plus, if you're interviewing for a more junior role, you might be asked to write some basic queries to demonstrate database understanding.</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="sql-command-types">SQL Command Types</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">SQL commands fall into four main categories:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>DDL (Data Definition Language)</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Creates and modifies database structure</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Examples: <span class="MuiBox-root mui-1vu004u">CREATE TABLE</span>, <span class="MuiBox-root mui-1vu004u">ALTER TABLE</span>, <span class="MuiBox-root mui-1vu004u">DROP TABLE</span></div></li>
</ul>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">CREATE</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> users </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>
</span><span>  id </span><span class="token" style="color: rgb(166, 38, 164);">SERIAL</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">PRIMARY</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">KEY</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>  email </span><span class="token" style="color: rgb(166, 38, 164);">VARCHAR</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">255</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">UNIQUE</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(166, 38, 164);">ALTER</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">TABLE</span><span> users </span><span class="token" style="color: rgb(166, 38, 164);">ADD</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">COLUMN</span><span> username </span><span class="token" style="color: rgb(166, 38, 164);">TEXT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>DML (Data Manipulation Language)</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Manages data within tables</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Examples: <span class="MuiBox-root mui-1vu004u">SELECT</span>, <span class="MuiBox-root mui-1vu004u">INSERT</span>, <span class="MuiBox-root mui-1vu004u">UPDATE</span>, <span class="MuiBox-root mui-1vu004u">DELETE</span></div></li>
</ul>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Find all users who joined in the last week</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">*</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">FROM</span><span> users 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> created_at </span><span class="token" style="color: rgb(64, 120, 242);">&gt;</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">NOW</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">-</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">INTERVAL</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'7 days'</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Update a user's email</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">UPDATE</span><span> users </span><span class="token" style="color: rgb(166, 38, 164);">SET</span><span> email </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'new@email.com'</span><span> 
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">WHERE</span><span> id </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">123</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>DCL (Data Control Language)</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Controls access permissions</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Examples: <span class="MuiBox-root mui-1vu004u">GRANT</span>, <span class="MuiBox-root mui-1vu004u">REVOKE</span></div></li>
</ul>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Give read access to a specific user</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">GRANT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">SELECT</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">ON</span><span> users </span><span class="token" style="color: rgb(166, 38, 164);">TO</span><span> read_only_user</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><strong>TCL (Transaction Control Language)</strong></div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Manages transactions</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Examples: <span class="MuiBox-root mui-1vu004u">BEGIN</span>, <span class="MuiBox-root mui-1vu004u">COMMIT</span>, <span class="MuiBox-root mui-1vu004u">ROLLBACK</span></div></li>
</ul>
<pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">BEGIN</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">-- Multiple operations...</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">COMMIT</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre>
</div></li>
</ol><div class="my-4"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In your interview, you might be asked about database access patterns rather than specific queries. For example, "How would you query this data efficiently?" or "What indexes would you create?" These questions test your understanding of database concepts rather than SQL syntax.</div></div></div></div></div></div>
</body>
</html>