<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Updates Deep Dive for System Design Interviews</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div><div class="flex flex-col gap-2 md:gap-4"><div class="flex flex-col"><h6 class="MuiTypography-root MuiTypography-h6 mui-zfm63x">Deep Dives</h6><h1 class="MuiTypography-root MuiTypography-h2 mui-161snwm">Real-time Updates</h1><p class="MuiTypography-root MuiTypography-body2 mui-45a2r">Learn about methods for triggering real-time updates in your system design</p></div></div><hr class="MuiDivider-root MuiDivider-fullWidth mui-1rvhejo"></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="intro">Intro</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In many products, its helpful to get real-time updates from the system as things happen or as data changes. From chat applications where messages need to be delivered immediately to live dashboards that show you what's going on in real-time, users expect to be notified as soon as something happens.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There's two hops we have to be concerned with to make this happen: the connection between the client and the server, and the connection between the server and the data or events.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 692.1779174804688 435.45703125">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="692.1779174804688" height="435.45703125" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 166.125) rotate(0 64.42578125 73.314453125)"><path d="M32 0 C53.94 0.72, 74.99 0.14, 96.85 0 M32 0 C48.43 -0.77, 64.59 -0.3, 96.85 0 M96.85 0 C119.35 -0.25, 128.71 11.22, 128.85 32 M96.85 0 C117.53 -0.09, 126.6 11.36, 128.85 32 M128.85 32 C127.37 56.86, 126.68 82.31, 128.85 114.63 M128.85 32 C129.5 56.29, 129.91 81.09, 128.85 114.63 M128.85 114.63 C126.91 134.92, 117.43 144.92, 96.85 146.63 M128.85 114.63 C128.75 138.23, 116.87 146.41, 96.85 146.63 M96.85 146.63 C73.94 147.51, 52.63 147.25, 32 146.63 M96.85 146.63 C75.65 146.6, 56 146.35, 32 146.63 M32 146.63 C9.24 146.02, -0.03 136.54, 0 114.63 M32 146.63 C12.77 146.73, -0.63 137, 0 114.63 M0 114.63 C0.74 80.47, 0.99 50.28, 0 32 M0 114.63 C-0.1 91.2, -1.09 69, 0 32 M0 32 C-0.2 9.07, 9.09 -0.33, 32 0 M0 32 C-0.6 11.58, 9.13 0.05, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(47.37580871582031 226.939453125) rotate(0 27.049972534179688 12.5)"><text x="27.049972534179688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g stroke-linecap="round" transform="translate(276.234375 170.9609375) rotate(0 63.974609375 74.046875)"><path d="M31.99 0 C50.84 -1.93, 71.31 -0.02, 95.96 0 M31.99 0 C51.42 -0.51, 71.74 1, 95.96 0 M95.96 0 C115.98 1.63, 126.81 9.48, 127.95 31.99 M95.96 0 C118.61 1.41, 129.43 12.15, 127.95 31.99 M127.95 31.99 C126.35 54.65, 129.09 73.48, 127.95 116.11 M127.95 31.99 C127.85 50.97, 127.95 71.38, 127.95 116.11 M127.95 116.11 C127 137.95, 118.85 146.11, 95.96 148.09 M127.95 116.11 C128.71 135.61, 118.66 148.9, 95.96 148.09 M95.96 148.09 C79.74 146.03, 58.62 146.82, 31.99 148.09 M95.96 148.09 C78.41 147.05, 62.46 147.47, 31.99 148.09 M31.99 148.09 C10.8 147.85, 0.67 137.61, 0 116.11 M31.99 148.09 C10.79 147.96, 0.39 135.72, 0 116.11 M0 116.11 C1.93 98.82, 1.89 80.82, 0 31.99 M0 116.11 C-0.59 85.45, 0.42 53.44, 0 31.99 M0 31.99 C-0.99 9.11, 11.67 -1.16, 31.99 0 M0 31.99 C-1.42 11.72, 9.55 -0.99, 31.99 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(309.35901641845703 232.5078125) rotate(0 30.84996795654297 12.5)"><text x="30.84996795654297" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(534.3359375 176.09375) rotate(0 68.115234375 68.724609375)"><path d="M47.11 3.13 C55.69 -0.66, 66.44 0.21, 76.19 1.45 C85.94 2.7, 97.15 5.35, 105.6 10.6 C114.05 15.85, 121.93 24.23, 126.88 32.95 C131.83 41.67, 134.43 52.85, 135.31 62.91 C136.18 72.98, 135.62 84.12, 132.15 93.32 C128.68 102.53, 121.77 111.5, 114.49 118.16 C107.21 124.82, 97.53 130.14, 88.47 133.29 C79.41 136.43, 69.91 138.19, 60.13 137.03 C50.35 135.88, 38.09 131.78, 29.78 126.37 C21.47 120.95, 15.35 113.23, 10.28 104.56 C5.21 95.89, 0.36 84.34, -0.66 74.35 C-1.68 64.36, 0.63 53.87, 4.15 44.61 C7.68 35.36, 11.63 26.13, 20.47 18.81 C29.3 11.5, 49 3.69, 57.15 0.71 C65.31 -2.27, 69.22 -0.26, 69.4 0.92 M71.88 -0.94 C80.97 -1.56, 90.52 4.73, 98.92 9.44 C107.31 14.15, 116.26 19.75, 122.23 27.31 C128.2 34.88, 132.6 45.07, 134.75 54.83 C136.9 64.59, 137.83 76.29, 135.13 85.9 C132.44 95.5, 125.41 104.97, 118.58 112.45 C111.76 119.94, 103 126.91, 94.17 130.82 C85.33 134.73, 75.35 136.04, 65.58 135.92 C55.81 135.81, 44.31 134.35, 35.54 130.15 C26.77 125.95, 18.53 119, 12.97 110.74 C7.42 102.48, 4.13 90.78, 2.19 80.61 C0.25 70.45, -1.01 59.14, 1.34 49.75 C3.7 40.36, 9.52 31.84, 16.29 24.27 C23.07 16.71, 32.81 8.34, 41.99 4.35 C51.17 0.36, 66.82 0.96, 71.39 0.33 C75.96 -0.29, 69.55 -0.39, 69.42 0.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(561.3064625363655 232.22272205154093) rotate(0 40.97996520996088 12.5)"><text x="40.97996520996094" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g stroke-linecap="round"><g transform="translate(525.0536795255614 241.3823761930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-0.35 0.54 C-18.61 0.64, -90.51 -0.36, -108.74 -0.5 M1.67 -0.23 C-16.8 0.19, -90.76 0.87, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(525.0536795255614 241.3823761930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-81.44 -9.46 C-91.04 -5.09, -102.14 -2.85, -109.52 1.1 M-81.44 -9.46 C-89.94 -6.43, -99.26 -3.81, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(525.0536795255614 241.3823761930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-81.22 11.06 C-90.71 7.83, -101.89 2.47, -109.52 1.1 M-81.22 11.06 C-89.65 7.43, -99.05 3.4, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(263.234375 241.27711400127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-0.25 -0.27 C-18.18 -0.75, -89.81 -3.41, -107.65 -3.83 M1.82 -1.46 C-16.23 -1.73, -90.18 -2.76, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 241.27711400127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-80.16 -12.79 C-89.01 -9.35, -98.31 -5.79, -108.43 -2.75 M-80.16 -12.79 C-89.22 -8.9, -98 -7.18, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 241.27711400127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-80.32 7.73 C-88.96 5.13, -98.22 2.66, -108.43 -2.75 M-80.32 7.73 C-89.19 5.2, -97.92 0.5, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(291.87890625 110.77401666235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-0.23 -1.2 C-14.38 1.26, -67.18 0.54, -84.79 15.43 C-102.4 30.32, -102.6 76.01, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(291.87890625 110.77401666235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-111.94 58.77 C-111.87 67.36, -106.45 75.88, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(291.87890625 110.77401666235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-91.64 61.74 C-97.9 69.37, -98.8 76.97, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(304.23828125 86.3359375) rotate(0 188.96981811523438 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Step 1</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">How do updates propagate to clients?</text></g><g stroke-linecap="round"><g transform="translate(373.9453125 374.22301762502184) rotate(0 52.7109375 -59.79705568751092)"><path d="M0.09 0.67 C14.42 -3.35, 68.8 -3.72, 86.43 -23.8 C104.06 -43.88, 102.89 -103.69, 105.87 -119.81" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(373.9453125 374.22301762502184) rotate(0 52.7109375 -59.79705568751092)"><path d="M113.54 -90.8 C111.97 -102.52, 109.21 -109.76, 105.87 -119.81" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(373.9453125 374.22301762502184) rotate(0 52.7109375 -59.79705568751092)"><path d="M93.1 -92.66 C98.49 -103.76, 102.67 -110.37, 105.87 -119.81" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(23.5390625 350.45703125) rotate(0 169.2098388671875 37.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Step 2</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">How does our server get triggered</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">when updates happen?</text></g><g transform="translate(155.578125 10) rotate(0 156.9059295654297 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Realtime Updates</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Two Hops for Real-time Updates</span></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><em>How</em> this happens is an important part of system design - facilitating these real-time updates can have significant implications for your overall architecture and is often the source of interesting deep-dive interview questions (<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/uber" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Uber</a>, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/fb-live-comments" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Live Comments</a>, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/whatsapp" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Whatsapp</a>, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/problem-breakdowns/google-docs" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Google Docs</a>, etc.).  For mid-level engineers, this is frequently a bonus and will help set you apart from other candidates. For staff level engineers, some familiarity is expected.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In this deep dive, we'll cover the different methods for facilitating real-time updates in your system design. We'll start by giving a bit of background about the networking concepts that make real-time updates possible (you can skip this if you're already familiar!). We'll then dive into the first hop, with different protocols for facilitating connections from servers to clients with pros and cons that come up in an interview. Finally, we'll address the second hop: the push/pull issues you'll need to address on the server side.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Let's go!</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="networking-101">Networking 101</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Before diving into the different protocols for facilitating real-time updates, it's helpful to understand a bit about how networking works — in some sense the problems we're talking about here are just networking problems! Networks are built on a layered architecture (the so-called <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://en.wikipedia.org/wiki/OSI_model" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">"OSI model"</a>) which greatly simplifies the world for us application developers who sit on top of it.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="networking-layers">Networking Layers</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In networks, each layer builds on the <strong>abstractions</strong> of the previous one. This way, when you're requesting a webpage, you don't need to know which voltages represent a <span class="MuiBox-root mui-1vu004u">1</span> or a <span class="MuiBox-root mui-1vu004u">0</span> on the network wire - you just need to know how to use the next layer down the stack. While the full networking stack is fascinating, there are three key layers that come up most often in system design interviews:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Network Layer (Layer 3):</strong> At this layer is IP, the protocol that handles routing and addressing. It's responsible for breaking the data into packets, handling packet forwarding between networks, and providing best-effort delivery to any destination IP address on the network. However, there are no guarantees: packets can get lost, duplicated, or reordered along the way.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Transport Layer (Layer 4):</strong> At this layer, we have TCP and UDP, which provide end-to-end communication services:
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">TCP is a <strong>connection-oriented</strong> protocol: before you can send data, you need to establish a connection with the other side. Once the connection is established, it ensures that the data is delivered correctly and in order. This is a great guarantee to have but it also means that TCP connections take time to establish, resources to maintain, and bandwidth to use.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">UDP is a <strong>connectionless</strong> protocol: you can send data to any other IP address on the network without any prior setup. It does not ensure that the data is delivered correctly or in order. Spray and pray!</div></li>
</ul>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Application Layer (Layer 7):</strong> At the final layer are the application protocols like DNS, HTTP, Websockets, WebRTC. These are common protocols that build on top of TCP to provide a layer of abstraction for different types of data typically associated with web applications. We'll get into them in a bit!</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">These layers work together to enable all our network communications. To see how they interact in practice, let's walk through a concrete example of how a simple web request works.</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="request-lifecycle">Request Lifecycle</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When you type a URL into your browser, several layers of networking protocols spring into action. Let's break down how these layers work together to retrieve a simple web page over HTTP. First, we use DNS to convert a human-readable domain name like <span class="MuiBox-root mui-1vu004u">hellointerview.com</span> into an IP address like <span class="MuiBox-root mui-1vu004u">32.42.52.62</span>. Then, a series of carefully orchestrated steps begins:</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 722.5796661376953 682.44921875">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="722.5796661376953" height="682.44921875" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(113.63281250000006 46.80859375) rotate(0 70.79687499999997 299.783203125)"><path d="M32 0 C50.82 1.1, 73.27 0.86, 109.59 0 C132.45 -3.09, 141.08 13.34, 141.59 32 C137.7 201.82, 137.42 370.41, 141.59 567.57 C141.2 592.21, 131.91 598.86, 109.59 599.57 C86.63 601.2, 65.49 598.88, 32 599.57 C11.18 599.22, 2.57 588.57, 0 567.57 C-1.34 396.32, -4.17 226.33, 0 32 C0.93 12.13, 13.61 -1.34, 32 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M32 0 C54.59 -0.91, 77.63 2.19, 109.59 0 M109.59 0 C129.62 0.61, 140.65 10.98, 141.59 32 M141.59 32 C141.57 232.15, 140.8 431.4, 141.59 567.57 M141.59 567.57 C142.83 587.9, 130.8 600.48, 109.59 599.57 M109.59 599.57 C92.38 599.55, 73.1 600.66, 32 599.57 M32 599.57 C11.03 599, 0.69 587.88, 0 567.57 M0 567.57 C-0.43 375.74, -0.27 183.01, 0 32 M0 32 C-0.19 11.93, 11.19 -0.09, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(174.17187500000006 10) rotate(0 12.059989929199219 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">IP</text></g><g stroke-linecap="round" transform="translate(256.52343750000006 109.064453125) rotate(0 70.79687499999997 236.99609375)"><path d="M32 0 C59.6 -3.5, 83.64 2.26, 109.59 0 C131.49 -3.32, 145.06 9.82, 141.59 32 C139.63 178.09, 140.39 320.16, 141.59 441.99 C141.22 465.2, 127.64 473.5, 109.59 473.99 C80.56 473.87, 53.08 473.9, 32 473.99 C11.31 476.55, 1.35 466.83, 0 441.99 C4.54 350.38, 5.65 256.42, 0 32 C3.3 12.19, 12.19 2.84, 32 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M32 0 C47.55 0.05, 64.77 -0.25, 109.59 0 M109.59 0 C132.38 -0.67, 140.95 12.39, 141.59 32 M141.59 32 C142.07 184.15, 141.32 337.9, 141.59 441.99 M141.59 441.99 C140.5 465.25, 132.72 475.8, 109.59 473.99 M109.59 473.99 C89.46 473.58, 69.28 473.12, 32 473.99 M32 473.99 C11.83 474.89, 1.67 464.67, 0 441.99 M0 441.99 C-2.08 314.02, -1.68 184.6, 0 32 M0 32 C-0.83 9.87, 10.95 -0.68, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(297.03906250000006 73.48046875) rotate(0 21.089981079101562 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP</text></g><g stroke-linecap="round" transform="translate(396.52734375 242.15234375) rotate(0 70.796875 91.265625)"><path d="M32 0 C49.18 -4.36, 68.7 -1.88, 109.59 0 C132.8 -1.55, 142.25 10.27, 141.59 32 C141.8 80.35, 138.88 124.44, 141.59 150.53 C144.5 172.7, 131.52 183.04, 109.59 182.53 C87.71 184.96, 65.89 185.91, 32 182.53 C7.98 178.95, -2.25 172.8, 0 150.53 C1.56 111.66, -0.22 72.59, 0 32 C1.27 10.07, 11.93 0.98, 32 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M32 0 C59.09 -0.79, 82.64 1.6, 109.59 0 M109.59 0 C132.38 -0.18, 142.22 11.9, 141.59 32 M141.59 32 C140.42 63.56, 143.31 93.08, 141.59 150.53 M141.59 150.53 C140.88 173.42, 131.32 182.9, 109.59 182.53 M109.59 182.53 C89.69 183.04, 69.11 183.48, 32 182.53 M32 182.53 C10.94 184.28, -1.7 171.67, 0 150.53 M0 150.53 C-1.15 106.68, -0.02 63.73, 0 32 M0 32 C0.72 11.33, 11.25 0.85, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(440.890625 199.2265625) rotate(0 28.199974060058594 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP</text></g><g mask="url(#mask-CwnNRLpbDERwNQMj8qPcB)" stroke-linecap="round"><g transform="translate(94.95312500000006 140.69921875) rotate(0 124.58203125 -1.435546875)"><path d="M1.03 0.87 C42.61 0.52, 207.58 -1.77, 249.05 -2.5 M0.12 0.28 C41.56 -0.41, 206.48 -3.97, 248.05 -4.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(94.95312500000006 140.69921875) rotate(0 124.58203125 -1.435546875)"><path d="M220.04 6.31 C228.99 3.03, 235.63 1.58, 248.05 -4.42 M220.04 6.31 C226.5 4.47, 234.95 1.72, 248.05 -4.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(94.95312500000006 140.69921875) rotate(0 124.58203125 -1.435546875)"><path d="M219.69 -14.2 C228.67 -12.02, 235.4 -8, 248.05 -4.42 M219.69 -14.2 C226.22 -10.93, 234.76 -8.54, 248.05 -4.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-CwnNRLpbDERwNQMj8qPcB"><rect x="0" y="0" fill="#fff" width="444.11718750000006" height="243.5703125"></rect><rect x="205.39116668701178" y="129.263671875" fill="#000" width="28.287979125976562" height="20" opacity="1"></rect></mask><g transform="translate(205.39116668701178 129.263671875) rotate(0 14.146947798174793 9.658472715201782)"><text x="14.143989562988281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN</text></g><g transform="translate(551.5859375 320.52734375) rotate(89.99999999999994 55.52997589111328 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g transform="translate(-16.189971923828125 324.94124603271484) rotate(270 48.689971923828125 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g mask="url(#mask-vr5e46buHrWxzzNaY0-BO)" stroke-linecap="round"><g transform="translate(348.24218750000006 179.82421875) rotate(0 -126.626953125 0)"><path d="M-0.66 1.16 C-42.67 1.25, -210.01 1.12, -252.18 1.08 M1.2 0.72 C-40.88 0.45, -209.92 -0.19, -252.56 -0.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(348.24218750000006 179.82421875) rotate(0 -126.626953125 0)"><path d="M-224.32 -10.59 C-230.63 -5.98, -239.04 -5.52, -252.56 -0.47 M-224.32 -10.59 C-235.25 -6.37, -246.13 -2.31, -252.56 -0.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(348.24218750000006 179.82421875) rotate(0 -126.626953125 0)"><path d="M-224.42 9.93 C-230.8 8.52, -239.18 2.96, -252.56 -0.47 M-224.42 9.93 C-235.35 6.4, -246.2 2.71, -252.56 -0.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-vr5e46buHrWxzzNaY0-BO"><rect x="0" y="0" fill="#fff" width="701.49609375" height="279.82421875"></rect><rect x="188.87926483154303" y="169.82421875" fill="#000" width="65.47193908691406" height="20" opacity="1"></rect></mask><g transform="translate(188.87926483154303 169.82421875) rotate(0 33.68120612018741 10.35988825200937)"><text x="32.73596954345703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN-ACK</text></g><g mask="url(#mask-Fk9N-8TnAhbIxmqDh9XD_)" stroke-linecap="round"><g transform="translate(92.92968750000006 216.08984375) rotate(0 126.662109375 -1.40234375)"><path d="M-0.43 0.93 C41.65 0.32, 211.33 -2.03, 253.56 -2.58 M1.55 0.37 C43.4 -0.11, 210.99 -3.78, 252.74 -4.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(92.92968750000006 216.08984375) rotate(0 126.662109375 -1.40234375)"><path d="M224.77 6.25 C237.12 2.52, 246.84 -2.67, 252.74 -4.59 M224.77 6.25 C234.63 3.29, 244.21 -1.03, 252.74 -4.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(92.92968750000006 216.08984375) rotate(0 126.662109375 -1.40234375)"><path d="M224.34 -14.27 C237.05 -10, 246.93 -7.19, 252.74 -4.59 M224.34 -14.27 C234.24 -10.36, 243.97 -7.82, 252.74 -4.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-Fk9N-8TnAhbIxmqDh9XD_"><rect x="0" y="0" fill="#fff" width="446.25390625000006" height="318.89453125"></rect><rect x="204.28781127929693" y="204.6875" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(204.28781127929693 204.6875) rotate(0 15.20798956751824 9.572434302153994)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g stroke-linecap="round"><g transform="translate(452.19921875 77.40625) rotate(0 -47.943359375 63.552734375)"><path d="M-0.34 0.41 C-10.73 6.85, -46.28 17.58, -62.11 38.86 C-77.95 60.14, -89.85 113.37, -95.35 128.11" stroke="#1e1e1e" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g><g transform="translate(452.19921875 77.40625) rotate(0 -47.943359375 63.552734375)"><path d="M-96.97 98.15 C-95.7 106.71, -94.71 118.22, -95.35 128.11" stroke="#1e1e1e" stroke-width="1.5" fill="none"></path></g><g transform="translate(452.19921875 77.40625) rotate(0 -47.943359375 63.552734375)"><path d="M-77.33 104.12 C-82.36 110.71, -87.64 120.31, -95.35 128.11" stroke="#1e1e1e" stroke-width="1.5" fill="none"></path></g></g><mask></mask><g transform="translate(459.5078125 66.79296875) rotate(0 126.53592681884766 10)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP Connection now Established</text></g><g mask="url(#mask-QAklTNBTsw2xmsje6MnZP)" stroke-linecap="round"><g transform="translate(84.17968750000006 282.98828125) rotate(0 243.07031249999997 4.5078125)"><path d="M0.54 1 C81.8 2.41, 405.84 8.02, 486.95 9.18 M-0.63 0.48 C80.59 2.05, 405.16 9.42, 486.43 10.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(84.17968750000006 282.98828125) rotate(0 243.07031249999997 4.5078125)"><path d="M458.03 20.49 C466.71 19.3, 472.39 17.29, 486.43 10.81 M458.03 20.49 C464.41 18.19, 469.84 15.75, 486.43 10.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(84.17968750000006 282.98828125) rotate(0 243.07031249999997 4.5078125)"><path d="M458.45 -0.02 C467.14 3.9, 472.72 6.99, 486.43 10.81 M458.45 -0.02 C464.72 2.09, 470.06 4.06, 486.43 10.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-QAklTNBTsw2xmsje6MnZP"><rect x="0" y="0" fill="#fff" width="670.3203125" height="392.00390625"></rect><rect x="282.55401611328125" y="277.49609375" fill="#000" width="89.3919677734375" height="20" opacity="1"></rect></mask><g transform="translate(282.55401611328125 277.49609375) rotate(0 44.78362083379645 11.135369054293221)"><text x="44.69598388671875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP GET</text></g><g mask="url(#mask-LxDEeCKZi4ouVrMnl0sPX)" stroke-linecap="round"><g transform="translate(572.05078125 370.08984375) rotate(0 -245.927734375 -3.07421875)"><path d="M1.05 -1.02 C-81.08 -1.95, -409.87 -4.53, -491.97 -5.39 M0.14 1.06 C-82.23 -0.22, -410.93 -6.12, -492.98 -7.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(572.05078125 370.08984375) rotate(0 -245.927734375 -3.07421875)"><path d="M-464.63 -16.94 C-476.73 -13.27, -484.18 -8.95, -492.98 -7.11 M-464.63 -16.94 C-472.91 -14.49, -481.07 -10.91, -492.98 -7.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(572.05078125 370.08984375) rotate(0 -245.927734375 -3.07421875)"><path d="M-464.95 3.58 C-476.96 -0.29, -484.3 -3.51, -492.98 -7.11 M-464.95 3.58 C-473.05 -0.03, -481.12 -2.52, -492.98 -7.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-LxDEeCKZi4ouVrMnl0sPX"><rect x="0" y="0" fill="#fff" width="1163.90625" height="476.23828125"></rect><rect x="264.5870819091797" y="357.015625" fill="#000" width="123.07192993164062" height="20" opacity="1"></rect></mask><g transform="translate(264.5870819091797 357.015625) rotate(0 61.498848851216025 10.047677394365849)"><text x="61.53596496582031" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP Response</text></g><g mask="url(#mask-PLbvdsMGOjPJ45lXTSK0h)" stroke-linecap="round"><g transform="translate(84.94531250000006 446.62109375) rotate(0 128.705078125 0)"><path d="M0.31 -0.05 C43.15 -0.26, 214.03 -0.42, 256.91 -0.48 M-0.98 -1.13 C41.67 -1.24, 212.72 0.51, 255.7 0.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(84.94531250000006 446.62109375) rotate(0 128.705078125 0)"><path d="M227.42 10.83 C235.48 7.01, 242.99 5.22, 255.7 0.81 M227.42 10.83 C235.2 8.49, 241.57 5.26, 255.7 0.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(84.94531250000006 446.62109375) rotate(0 128.705078125 0)"><path d="M227.6 -9.69 C235.74 -7.55, 243.19 -3.38, 255.7 0.81 M227.6 -9.69 C235.41 -6.57, 241.73 -4.34, 255.7 0.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-PLbvdsMGOjPJ45lXTSK0h"><rect x="0" y="0" fill="#fff" width="442.35546875000006" height="546.62109375"></rect><rect x="199.54640960693365" y="436.62109375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(199.54640960693365 436.62109375) rotate(0 13.36369385663886 9.839318083971932)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-W1adbq8jqdtxy8FBx37pn)" stroke-linecap="round"><g transform="translate(86.69131404784054 478.59375) rotate(0 128.705078125 0)"><path d="M0.17 -0.41 C43.23 -0.26, 214.91 0.25, 257.84 0.4 M-1.2 -1.67 C41.78 -1.85, 214.06 -1.53, 257.12 -1.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(86.69131404784054 478.59375) rotate(0 128.705078125 0)"><path d="M28.39 -10.58 C20.39 -7.19, 14.44 -4.7, 0.17 -0.41 M28.39 -10.58 C19.39 -6.98, 8.06 -2.69, 0.17 -0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(86.69131404784054 478.59375) rotate(0 128.705078125 0)"><path d="M28.33 9.94 C20.42 8.03, 14.49 5.22, 0.17 -0.41 M28.33 9.94 C19.52 6.51, 8.21 3.78, 0.17 -0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-W1adbq8jqdtxy8FBx37pn"><rect x="0" y="0" fill="#fff" width="444.10147029784054" height="578.59375"></rect><rect x="200.0924065771374" y="468.59375" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(200.0924065771374 468.59375) rotate(0 14.921697592181147 9.337421948815745)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-EskaT6Bb4V9333wxAq_cm)" stroke-linecap="round"><g transform="translate(87.8736217103899 511.734375) rotate(0 128.705078125 0)"><path d="M0.35 0.51 C43.01 0.41, 213.39 -0.12, 256.38 -0.17 M-0.92 -0.27 C42.06 -0.21, 215.4 0.96, 258.55 1.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(87.8736217103899 511.734375) rotate(0 128.705078125 0)"><path d="M28.51 -9.83 C19.93 -7.99, 9.33 -1.31, 0.35 0.51 M28.51 -9.83 C19.29 -5.78, 10.21 -2.85, 0.35 0.51" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(87.8736217103899 511.734375) rotate(0 128.705078125 0)"><path d="M28.57 10.69 C19.9 5.64, 9.28 5.42, 0.35 0.51 M28.57 10.69 C19.52 8.27, 10.42 4.72, 0.35 0.51" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-EskaT6Bb4V9333wxAq_cm"><rect x="0" y="0" fill="#fff" width="445.2837779603899" height="611.734375"></rect><rect x="202.4747188173235" y="501.734375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(202.4747188173235 501.734375) rotate(0 14.213857401544232 10.502906857943174)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-fIOQQdaFarlK1-NcLq7x8)" stroke-linecap="round"><g transform="translate(86.27742753401407 549.8491862964531) rotate(0 128.705078125 0)"><path d="M0.89 0.19 C43.78 0.41, 213.6 1.08, 256.3 1.15 M-0.1 -0.76 C43.23 -0.83, 215.71 -0.26, 258.43 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(86.27742753401407 549.8491862964531) rotate(0 128.705078125 0)"><path d="M230.23 9.88 C236.6 5.63, 244.25 4.81, 258.43 -0.36 M230.23 9.88 C240.09 7.14, 250.4 2.42, 258.43 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(86.27742753401407 549.8491862964531) rotate(0 128.705078125 0)"><path d="M230.25 -10.64 C236.58 -10.5, 244.23 -6.92, 258.43 -0.36 M230.25 -10.64 C240.01 -6.16, 250.31 -3.65, 258.43 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-fIOQQdaFarlK1-NcLq7x8"><rect x="0" y="0" fill="#fff" width="443.68758378401407" height="649.8491862964531"></rect><rect x="199.67852006331094" y="539.8491862964531" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(199.67852006331094 539.8491862964531) rotate(0 15.765236653024317 10.195151597063273)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g transform="translate(421.09688568115234 652.44921875) rotate(0 97.56795501708984 10)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Connection is Terminated</text></g><g stroke-linecap="round"><g transform="translate(469.86257723058816 642.48046875) rotate(0 -55.48792924029408 -47.607421875)"><path d="M-0.52 0.22 C-4.33 -10.3, -4.8 -46.55, -23.15 -62.49 C-41.51 -78.44, -95.99 -90.1, -110.65 -95.45" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(469.86257723058816 642.48046875) rotate(0 -55.48792924029408 -47.607421875)"><path d="M-80.71 -97.31 C-88.61 -97.14, -95.42 -95.86, -110.65 -95.45" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(469.86257723058816 642.48046875) rotate(0 -55.48792924029408 -47.607421875)"><path d="M-86.52 -77.63 C-92.92 -82.88, -98.12 -87.04, -110.65 -95.45" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Simple HTTP Request</span></div></div></div></div>
<div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>DNS Resolution</strong>: The client starts by resolving the domain name of the website to an IP address using DNS (Domain Name System)<sup><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" id="user-content-fnref-dns" data-footnote-ref="true" aria-describedby="footnote-label" href="#user-content-fn-dns" target="_self" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">1</a></sup>.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>TCP Handshake</strong>: The client initiates a TCP connection with the server using a three-way handshake:
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>SYN</strong>: The client sends a SYN (synchronize) packet to the server to request a connection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>SYN-ACK</strong>: The server responds with a SYN-ACK (synchronize-acknowledge) packet to acknowledge the request.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>ACK</strong>: The client sends an ACK (acknowledge) packet to establish the connection.</div></li>
</ul>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>HTTP Request</strong>: Once the TCP connection is established, the client sends an HTTP GET request to the server to request the web page.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Server Processing</strong>: The server processes the request, retrieves the requested web page, and prepares an HTTP response.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>HTTP Response</strong>: The server sends the HTTP response back to the client, which includes the requested web page content.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>TCP Teardown</strong>: After the data transfer is complete, the client and server close the TCP connection using a four-way handshake:
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>FIN</strong>: The client sends a FIN (finish) packet to the server to terminate the connection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>ACK</strong>: The server acknowledges the FIN packet with an ACK.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>FIN</strong>: The server sends a FIN packet to the client to terminate its side of the connection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>ACK</strong>: The client acknowledges the server's FIN packet with an ACK.</div></li>
</ul>
</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While the specific details of TCP handshakes might seem technical, two key points are particularly relevant for system design interviews:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">First, each round trip between client and server adds <strong>latency</strong> to our request, including those to establish connections before we send our application data.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Second, the TCP connection itself represents <strong>state</strong> that both the client and server must maintain. Unless we use features like HTTP keep-alive, we need to repeat this connection setup process for every request - a potentially significant overhead.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Understanding when connections are established and how they are managed is crucial to touching on the important choices relevant for realtime updates.</div><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">It's less common recently in BigTech, but it used to be a popular interview question to ask candidates to dive into the details of "what happens when you type (e.g.) <span class="MuiBox-root mui-1vu004u">hellointerview.com</span> into your browser and press enter?".</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Details like these aren't typically a part of a system design interview but it's helpful to understand the basics of networking. It may save you some headaches on the job!</div></div></div></div></div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="with-load-balancers">With Load Balancers</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In real-world systems, we typically have multiple servers working together behind a load balancer. Load balancers distribute incoming requests across these servers to ensure even load distribution and high availability. There are two main types of load balancers you'll encounter in system design interviews: Layer 4 and Layer 7.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">These will have some implications for decisions we'll make later, but let's briefly cover the difference between the two.</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="layer-4-load-balancers">Layer 4 Load Balancers</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Layer 4 load balancers operate at the transport layer (TCP/UDP). They make routing decisions based on network information like IP addresses and ports, without looking at the actual content of the packets. The effect of a L4 load balancer is as-if you randomly selected a backend server and assumed that TCP connections were established directly between the client that server — this mental model is not far off.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1151.0788955688477 735.349365234375">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="1151.0788955688477" height="735.349365234375" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(104.27343750000006 114.152099609375) rotate(0 70.79687499999999 299.783203125)"><path d="M32 0 C58 -0.49, 77.69 -0.07, 109.59 0 C131.51 1.38, 143.64 12.22, 141.59 32 C143.71 176.31, 144.54 317.94, 141.59 567.57 C143.11 588.04, 130.06 602.85, 109.59 599.57 C84.59 602.45, 54.76 602.53, 32 599.57 C14.03 597.6, 2.7 590.78, 0 567.57 C2.16 435.1, 2.08 304.38, 0 32 C1.84 8, 10.02 -1.65, 32 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M32 0 C59.61 -1.51, 85.72 -0.8, 109.59 0 M109.59 0 C130.19 -1.19, 141.44 12.17, 141.59 32 M141.59 32 C139.18 226.09, 139.58 418.76, 141.59 567.57 M141.59 567.57 C141.3 589.9, 130.35 599.47, 109.59 599.57 M109.59 599.57 C85.76 598.47, 63.76 598.81, 32 599.57 M32 599.57 C10.6 598.28, 1.93 588.12, 0 567.57 M0 567.57 C0.63 402.35, 1.8 238.57, 0 32 M0 32 C1.17 10.82, 12.61 -0.9, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(164.81250000000006 77.343505859375) rotate(0 12.059989929199219 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">IP</text></g><g stroke-linecap="round" transform="translate(247.16406250000006 176.407958984375) rotate(0 70.79687499999999 236.99609375)"><path d="M32 0 C54.8 1.41, 78.48 1.58, 109.59 0 C129.75 1.99, 144.68 10.63, 141.59 32 C144.74 187.49, 143.43 345.74, 141.59 441.99 C143.8 461.96, 133.01 477.02, 109.59 473.99 C85.2 472.86, 56.78 476.71, 32 473.99 C8.73 472.22, 1.99 463.96, 0 441.99 C0.51 335.42, -0.86 230.88, 0 32 C-1.43 8.65, 11.51 1.84, 32 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M32 0 C50.52 -1.06, 70.37 1.64, 109.59 0 M109.59 0 C132.15 -1.98, 140.86 9.93, 141.59 32 M141.59 32 C141.73 184.71, 141.57 336.26, 141.59 441.99 M141.59 441.99 C141.46 462.21, 130.59 472.94, 109.59 473.99 M109.59 473.99 C90 472.47, 72.47 472.97, 32 473.99 M32 473.99 C10.82 472.7, 1.66 461.43, 0 441.99 M0 441.99 C-0.5 347.21, -0.08 251.76, 0 32 M0 32 C-0.17 9.93, 10.66 1.88, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(287.67968750000006 140.823974609375) rotate(0 21.089981079101562 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP</text></g><g stroke-linecap="round" transform="translate(918.70703125 306.585693359375) rotate(0 70.796875 91.265625)"><path d="M32 0 C57.08 1.38, 87.59 -0.64, 109.59 0 C133.82 2.05, 140.72 12.18, 141.59 32 C143.29 63.35, 143.16 100.46, 141.59 150.53 C143.67 173.09, 133.08 185.9, 109.59 182.53 C88.62 181.49, 73.51 183.9, 32 182.53 C9.1 182.98, 1.2 173.71, 0 150.53 C-1.04 121.74, 1.22 98.83, 0 32 C2.35 10.21, 11.13 1.6, 32 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M32 0 C51.89 -2.56, 68.59 -1.32, 109.59 0 M109.59 0 C132.35 0.26, 140.87 10.37, 141.59 32 M141.59 32 C141.12 72.4, 140.91 113.98, 141.59 150.53 M141.59 150.53 C140.63 171.59, 130.3 182.47, 109.59 182.53 M109.59 182.53 C91.44 180.93, 74.65 180.34, 32 182.53 M32 182.53 C9.29 183.55, 0.83 173.04, 0 150.53 M0 150.53 C-1.32 113.32, -1.16 79.44, 0 32 M0 32 C-0.27 10.92, 10.63 0.32, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g mask="url(#mask-gVfnSgMNC17Z0hi4l0tW0)" stroke-linecap="round"><g transform="translate(85.59375000000006 208.042724609375) rotate(0 155.197265625 0.0546875)"><path d="M-1.19 -0.44 C50.32 -0.4, 258 0.94, 309.95 0.96 M0.39 -1.72 C51.63 -2.08, 257.19 -1.13, 308.77 -0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(85.59375000000006 208.042724609375) rotate(0 155.197265625 0.0546875)"><path d="M280.52 9.38 C290.33 5.13, 303.09 2.34, 308.77 -0.71 M280.52 9.38 C287.7 6.53, 295.37 3.36, 308.77 -0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(85.59375000000006 208.042724609375) rotate(0 155.197265625 0.0546875)"><path d="M280.64 -11.14 C290.53 -7.68, 303.25 -2.77, 308.77 -0.71 M280.64 -11.14 C287.75 -8.58, 295.4 -6.34, 308.77 -0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-gVfnSgMNC17Z0hi4l0tW0"><rect x="0" y="0" fill="#fff" width="495.98828125000006" height="308.152099609375"></rect><rect x="226.64702606201178" y="198.097412109375" fill="#000" width="28.287979125976562" height="20" opacity="1"></rect></mask><g transform="translate(226.64702606201178 198.097412109375) rotate(0 13.329765829443915 9.528126192807235)"><text x="14.143989562988281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN</text></g><g transform="translate(430.7349700927735 185.72628021240234) rotate(0 78.33597564697266 67.5)"><text x="78.33597564697266" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Layer 4 </text><text x="78.33597564697266" y="45" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Load</text><text x="78.33597564697266" y="90" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Balancer</text></g><g transform="translate(-16.189971923828125 376.55428314208984) rotate(270 48.689971923828125 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g mask="url(#mask-ScPW4rj1Zl3mc6phpqoFu)" stroke-linecap="round"><g transform="translate(403.48437500000006 247.273193359375) rotate(0 -158.927734375 -0.052734375)"><path d="M-0.35 -0.06 C-53.31 -0.29, -264.98 -0.66, -317.93 -0.77 M1.67 -1.13 C-51.44 -1.27, -265.49 0.18, -318.92 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(403.48437500000006 247.273193359375) rotate(0 -158.927734375 -0.052734375)"><path d="M-290.79 -10.01 C-298.86 -7.24, -307.91 -4.48, -318.92 0.41 M-290.79 -10.01 C-298.11 -7.5, -305.4 -3.93, -318.92 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(403.48437500000006 247.273193359375) rotate(0 -158.927734375 -0.052734375)"><path d="M-290.67 10.52 C-298.88 7.42, -307.96 4.33, -318.92 0.41 M-290.67 10.52 C-297.93 7.94, -305.25 6.44, -318.92 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-ScPW4rj1Zl3mc6phpqoFu"><rect x="0" y="0" fill="#fff" width="821.33984375" height="347.378662109375"></rect><rect x="211.82067108154303" y="237.220458984375" fill="#000" width="65.47193908691406" height="20" opacity="1"></rect></mask><g transform="translate(211.82067108154303 237.220458984375) rotate(0 33.03890968204476 9.68890015179818)"><text x="32.73596954345703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN-ACK</text></g><g mask="url(#mask-dGVKHop0ApA5jHoYebEQF)" stroke-linecap="round"><g transform="translate(83.57031250000006 283.433349609375) rotate(0 160.66015625 0.015625)"><path d="M-0.2 -0.63 C53.27 -0.54, 267.21 -0.24, 320.74 -0.14 M-1.77 1.65 C52.11 1.99, 269.52 1.38, 323.15 1.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(83.57031250000006 283.433349609375) rotate(0 160.66015625 0.015625)"><path d="M294.98 11.63 C302.25 7.68, 311.3 5, 323.15 1.31 M294.98 11.63 C303.01 8.37, 311.11 6.07, 323.15 1.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(83.57031250000006 283.433349609375) rotate(0 160.66015625 0.015625)"><path d="M294.94 -8.89 C302.11 -6.81, 311.16 -3.48, 323.15 1.31 M294.94 -8.89 C302.85 -6.06, 310.96 -2.28, 323.15 1.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-dGVKHop0ApA5jHoYebEQF"><rect x="0" y="0" fill="#fff" width="504.89062500000006" height="383.464599609375"></rect><rect x="228.92648315429693" y="273.448974609375" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(228.92648315429693 273.448974609375) rotate(0 15.331842654952766 10.54585526520475)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-KtM7yOEaHlltNgXkvtTv3)" stroke-linecap="round"><g transform="translate(75.58593750000006 513.964599609375) rotate(0 165.345703125 0.41015625)"><path d="M-0.37 -0.04 C54.71 0.32, 274.82 1.82, 329.92 1.98 M1.63 -1.11 C57.15 -1.04, 277.63 -0.1, 332.23 0.46" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(75.58593750000006 513.964599609375) rotate(0 165.345703125 0.41015625)"><path d="M303.97 10.53 C311.03 6.8, 320.13 4.78, 332.23 0.46 M303.97 10.53 C311.78 6.51, 321.92 4.52, 332.23 0.46" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(75.58593750000006 513.964599609375) rotate(0 165.345703125 0.41015625)"><path d="M304.11 -9.99 C311.1 -8.55, 320.17 -5.42, 332.23 0.46 M304.11 -9.99 C311.74 -7.7, 321.84 -3.38, 332.23 0.46" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-KtM7yOEaHlltNgXkvtTv3"><rect x="0" y="0" fill="#fff" width="506.27734375000006" height="614.784912109375"></rect><rect x="226.82765960693365" y="504.374755859375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(226.82765960693365 504.374755859375) rotate(0 14.685997152556666 10.025505923326136)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-icGwl7ItUxAyPom7No8xA)" stroke-linecap="round"><g transform="translate(77.33193904784054 545.937255859375) rotate(0 161.5234375 -0.220703125)"><path d="M-0.47 0.09 C53.37 -0.01, 268.54 0.78, 322.27 0.55 M1.49 -0.91 C55.78 -0.82, 270.79 -1.13, 324.57 -1.05" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(77.33193904784054 545.937255859375) rotate(0 161.5234375 -0.220703125)"><path d="M27.74 -10.12 C21.34 -9.12, 16.19 -7.31, -0.47 0.09 M27.74 -10.12 C21.86 -7.56, 15.71 -5.73, -0.47 0.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(77.33193904784054 545.937255859375) rotate(0 161.5234375 -0.220703125)"><path d="M27.71 10.4 C21.11 6.56, 15.98 3.53, -0.47 0.09 M27.71 10.4 C21.72 8.21, 15.59 5.3, -0.47 0.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-icGwl7ItUxAyPom7No8xA"><rect x="0" y="0" fill="#fff" width="500.37881404784054" height="646.378662109375"></rect><rect x="223.5513909521374" y="535.716552734375" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(223.5513909521374 535.716552734375) rotate(0 15.834228451480186 9.987855951840515)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-ULwyHcq210t10EVp--iLU)" stroke-linecap="round"><g transform="translate(78.5142467103899 579.077880859375) rotate(0 162.119140625 -1.017578125)"><path d="M-1.14 -0.82 C53.13 -1.25, 270.5 -1.35, 324.85 -1.54 M0.47 1.36 C54.7 1.1, 270.21 -3.08, 324.22 -3.4" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(78.5142467103899 579.077880859375) rotate(0 162.119140625 -1.017578125)"><path d="M27.03 -11.15 C19.12 -7.97, 14.7 -5.38, -1.14 -0.82 M27.03 -11.15 C18.38 -8.46, 9.79 -3.98, -1.14 -0.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(78.5142467103899 579.077880859375) rotate(0 162.119140625 -1.017578125)"><path d="M27.08 9.37 C18.99 7.73, 14.55 5.48, -1.14 -0.82 M27.08 9.37 C18.21 5.74, 9.61 3.91, -1.14 -0.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-ULwyHcq210t10EVp--iLU"><rect x="0" y="0" fill="#fff" width="502.7525279603899" height="681.113037109375"></rect><rect x="226.5294063173235" y="568.060302734375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(226.5294063173235 568.060302734375) rotate(0 13.841459783911688 9.99810748352661)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-Tu7AzKNBdXtFfoDF7frzj)" stroke-linecap="round"><g transform="translate(76.91805253401407 617.1926921558281) rotate(0 165.263671875 -0.708984375)"><path d="M0.7 0.09 C55.88 -0.32, 276.74 -1.63, 331.69 -1.96 M-0.39 -0.9 C54.69 -1.2, 276.36 -0.73, 331.35 -0.7" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(76.91805253401407 617.1926921558281) rotate(0 165.263671875 -0.708984375)"><path d="M303.15 9.52 C313.16 7.71, 322 2.01, 331.35 -0.7 M303.15 9.52 C310.44 6.69, 317.99 4.03, 331.35 -0.7" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(76.91805253401407 617.1926921558281) rotate(0 165.263671875 -0.708984375)"><path d="M303.18 -11 C313.26 -5.61, 322.1 -4.11, 331.35 -0.7 M303.18 -11 C310.46 -8.43, 318 -5.68, 331.35 -0.7" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-Tu7AzKNBdXtFfoDF7frzj"><rect x="0" y="0" fill="#fff" width="507.44539628401407" height="718.6106609058281"></rect><rect x="226.87773881331094" y="606.4837077808281" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(226.87773881331094 606.4837077808281) rotate(0 15.693471584697278 9.776473060250282)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g transform="translate(1063.0489196777344 376.91971588134766) rotate(89.99999999999994 55.52997589111328 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(630.2497474058393 125.782958984375) rotate(0 70.79687499999997 299.783203125)"><path d="M32 0 C54.04 2.03, 71.94 0.13, 109.59 0 C132.53 -0.04, 138.72 8.47, 141.59 32 C136.58 162.4, 138.6 290.92, 141.59 567.57 C138.73 586.07, 130.34 599.98, 109.59 599.57 C96.28 597.09, 76.16 596.4, 32 599.57 C7.16 596.33, 0.18 588.85, 0 567.57 C4.28 393.97, 2.16 222.37, 0 32 C-2.53 10.46, 13.14 -2.73, 32 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M32 0 C56.5 -0.27, 77.49 -0.04, 109.59 0 M109.59 0 C131.25 0.77, 142.73 11.53, 141.59 32 M141.59 32 C142.77 175.79, 143.23 318.1, 141.59 567.57 M141.59 567.57 C142.44 588.42, 130.45 601.39, 109.59 599.57 M109.59 599.57 C83.25 601.17, 54.21 601.21, 32 599.57 M32 599.57 C12.54 598.47, 1.5 589.95, 0 567.57 M0 567.57 C1.2 435.38, 1.16 304.17, 0 32 M0 32 C1.02 9.18, 10.31 -0.92, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(690.7888099058393 88.974365234375) rotate(0 12.059989929199219 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">IP</text></g><g stroke-linecap="round" transform="translate(773.1403724058391 188.038818359375) rotate(0 70.79687499999997 236.99609375)"><path d="M32 0 C61.95 -0.22, 85.83 -2.37, 109.59 0 C128.85 -3.39, 145 7.2, 141.59 32 C141.81 169.98, 143.06 311.3, 141.59 441.99 C138.56 465.33, 131.18 477.42, 109.59 473.99 C88.34 469.49, 74.29 472.67, 32 473.99 C11.47 471.27, -0.07 466.72, 0 441.99 C0.74 346.98, 3.49 250.69, 0 32 C-1.82 12.91, 13.87 -1.42, 32 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M32 0 C54.54 0.78, 77.58 0.88, 109.59 0 M109.59 0 C130.27 1.1, 143.31 10.65, 141.59 32 M141.59 32 C143.34 187.7, 142.61 344.94, 141.59 441.99 M141.59 441.99 C142.82 462.57, 132.08 475.67, 109.59 473.99 M109.59 473.99 C83.71 473.36, 55.58 475.5, 32 473.99 M32 473.99 C9.59 473.01, 1.11 463.68, 0 441.99 M0 441.99 C0.28 336.07, -0.48 231.28, 0 32 M0 32 C-0.79 9.54, 11.13 1.02, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(813.6559974058391 152.454833984375) rotate(0 21.089981079101534 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP</text></g><g mask="url(#mask-T2nlZbt3JRGQgWG2EYTiw)" stroke-linecap="round"><g transform="translate(610.1481849058391 214.87878535308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M0.52 -0.39 C48.71 0.58, 241.56 5.39, 289.63 6.54 M-0.67 -1.64 C47.39 -1.04, 240.89 3.91, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(610.1481849058391 214.87878535308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M260.6 14.54 C269.51 12.28, 281.5 7.91, 289.03 4.95 M260.6 14.54 C271.78 10.72, 281.94 8.23, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(610.1481849058391 214.87878535308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M261.09 -5.97 C269.95 -1.29, 281.77 1.28, 289.03 4.95 M261.09 -5.97 C272.2 -1.99, 282.17 3.32, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-T2nlZbt3JRGQgWG2EYTiw"><rect x="0" y="0" fill="#fff" width="999.1169349058392" height="320.3884277343749"></rect><rect x="740.4885703428508" y="207.6336065437299" fill="#000" width="28.287979125976562" height="20" opacity="1"></rect></mask><g transform="translate(740.488570342851 207.6336065437299) rotate(0 14.140325698037628 9.691574967200722)"><text x="14.143989562988281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN</text></g><g mask="url(#mask-vcNMb1GfnVYHwZQGDePZ0)" stroke-linecap="round"><g transform="translate(864.8591224058391 258.798583984375) rotate(0 -126.626953125 0)"><path d="M-0.01 0.96 C-42.22 0.75, -210.45 -0.08, -252.57 -0.29 M-1.48 0.43 C-43.84 0.91, -211.2 1.02, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(864.8591224058391 258.798583984375) rotate(0 -126.626953125 0)"><path d="M-224.98 -9.21 C-233.3 -4.41, -245.4 -1.05, -253.16 1.09 M-224.98 -9.21 C-232.17 -6.49, -239.98 -2.42, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(864.8591224058391 258.798583984375) rotate(0 -126.626953125 0)"><path d="M-224.96 11.32 C-233.45 8.82, -245.56 4.9, -253.16 1.09 M-224.96 11.32 C-232.1 8.37, -239.92 6.77, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-vcNMb1GfnVYHwZQGDePZ0"><rect x="0" y="0" fill="#fff" width="1218.1130286558391" height="358.798583984375"></rect><rect x="705.4961997373821" y="248.798583984375" fill="#000" width="65.47193908691406" height="20" opacity="1"></rect></mask><g transform="translate(705.4961997373821 248.798583984375) rotate(0 32.77654439829752 10.400513477767845)"><text x="32.73596954345703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN-ACK</text></g><g mask="url(#mask-F9ZO9BQ5_oGhX3SRPrAmk)" stroke-linecap="round"><g transform="translate(612.3513099058391 296.0694284189133) rotate(0 144.45117187500009 -0.11198471726913795)"><path d="M0.51 -0.29 C48.49 -0.09, 240.43 0.94, 288.61 0.87 M-0.69 -1.49 C47.06 -1.58, 239.19 -0.99, 287.52 -0.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(612.3513099058391 296.0694284189133) rotate(0 144.45117187500009 -0.11198471726913795)"><path d="M259.28 9.46 C268.9 5.24, 281.28 3.33, 287.52 -0.68 M259.28 9.46 C267.2 6.91, 274.62 4.85, 287.52 -0.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(612.3513099058391 296.0694284189133) rotate(0 144.45117187500009 -0.11198471726913795)"><path d="M259.37 -11.06 C268.91 -7.95, 281.26 -2.54, 287.52 -0.68 M259.37 -11.06 C267.38 -8.24, 274.78 -4.92, 287.52 -0.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-F9ZO9BQ5_oGhX3SRPrAmk"><rect x="0" y="0" fill="#fff" width="1001.2536536558392" height="396.29339785345155"></rect><rect x="741.498496185136" y="285.957443701644" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(741.4984961851361 285.957443701644) rotate(0 14.81638134398034 9.801957904110964)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-JFJe1s9RJAGlNnAVeGB1e)" stroke-linecap="round"><g transform="translate(600.2731849058391 526.5089479425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M0.73 -0.46 C50.41 -0.02, 248.27 3.09, 297.78 3.68 M-0.34 -1.74 C49.27 -1.11, 247.57 1.64, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(600.2731849058391 526.5089479425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M268.88 12.02 C275.85 10.26, 286.1 7.52, 297.19 2.09 M268.88 12.02 C277.73 9.19, 288.26 4.58, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(600.2731849058391 526.5089479425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M269.12 -8.5 C276.21 -4.6, 286.4 -1.67, 297.19 2.09 M269.12 -8.5 C278.02 -4.48, 288.46 -2.23, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-JFJe1s9RJAGlNnAVeGB1e"><rect x="0" y="0" fill="#fff" width="997.3552161558392" height="629.181396484375"></rect><rect x="734.7102195127727" y="517.8451722134862" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(734.7102195127728 517.8451722134862) rotate(0 14.281769014974117 9.634398732478758)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-7_1goELSTTuzocRgEx4Fr)" stroke-linecap="round"><g transform="translate(600.0428083579986 562.1706907868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M0.69 0.41 C50.54 0.26, 250.16 0.19, 299.78 0.11 M-0.4 -0.42 C49.29 -0.36, 249.59 -1.17, 299.21 -1.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(600.0428083579986 562.1706907868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M28.87 -9.88 C19.56 -4.84, 10.66 -3.45, 0.69 0.41 M28.87 -9.88 C17.87 -5.62, 7.97 -2.75, 0.69 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(600.0428083579986 562.1706907868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M28.89 10.64 C19.4 8.34, 10.5 2.39, 0.69 0.41 M28.89 10.64 C17.77 7.21, 7.87 2.38, 0.69 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-7_1goELSTTuzocRgEx4Fr"><rect x="0" y="0" fill="#fff" width="999.1012177036797" height="663.1873288393276"></rect><rect x="734.268027435136" y="551.6623717606133" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(734.2680274351361 551.662371760613) rotate(0 15.461566323419106 9.998244631732973)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-9j3OxWVdDH2NcIIZxzkxo)" stroke-linecap="round"><g transform="translate(608.3019069454492 590.2061596296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M-0.66 0.9 C47.99 1.29, 243.93 2.8, 292.61 3.44 M1.2 0.33 C49.68 1.37, 243.81 4.24, 291.99 4.64" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(608.3019069454492 590.2061596296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M27.62 -9.13 C19.04 -4.63, 6.29 -3.05, -0.66 0.9 M27.62 -9.13 C17.71 -5.36, 8.05 -2.87, -0.66 0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(608.3019069454492 590.2061596296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M27.45 11.39 C18.74 8.51, 6.05 2.7, -0.66 0.9 M27.45 11.39 C17.57 7.87, 7.97 3.07, -0.66 0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-9j3OxWVdDH2NcIIZxzkxo"><rect x="0" y="0" fill="#fff" width="1000.2835253662291" height="694.2946777343751"></rect><rect x="740.1887351377727" y="582.2504186820365" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(740.1887351377728 582.2504186820363) rotate(0 14.089962801337236 10.43906755938201)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-Eld8NuTbG7y--lBR_oL3V)" stroke-linecap="round"><g transform="translate(603.1285698718254 632.1876030338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M-0.59 0.66 C48.6 0.72, 246.39 -0.29, 295.77 -0.3 M1.3 -0.03 C50.29 0.24, 245.98 1.21, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(603.1285698718254 632.1876030338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M266.74 11.2 C277.83 8.09, 285.79 4.37, 294.93 0.96 M266.74 11.2 C275.9 7.54, 285.08 4.02, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(603.1285698718254 632.1876030338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M266.75 -9.32 C277.73 -5.21, 285.68 -1.69, 294.93 0.96 M266.75 -9.32 C276.02 -6.14, 285.19 -2.82, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-Eld8NuTbG7y--lBR_oL3V"><rect x="0" y="0" fill="#fff" width="998.6873311898531" height="732.4094890308281"></rect><rect x="735.6039649351362" y="622.2985460323318" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(735.6039649351362 622.2985460323318) rotate(0 15.114034494757647 10.23836337849366)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-znQR1Mv8h3sNtUxjW-ltT)" stroke-linecap="round"><g transform="translate(275.3203125 352.41071536528034) rotate(0 408.97070312500006 4.017078074283518)"><path d="M0.15 0.4 C136.54 1.68, 682.29 5.96, 818.56 7.14 M-1.23 -0.44 C135.04 1.01, 681.58 6.72, 817.93 8.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(275.3203125 352.41071536528034) rotate(0 408.97070312500006 4.017078074283518)"><path d="M789.63 18.17 C799.33 16, 806.17 11.45, 817.93 8.21 M789.63 18.17 C797.1 16.31, 804.71 13.14, 817.93 8.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(275.3203125 352.41071536528034) rotate(0 408.97070312500006 4.017078074283518)"><path d="M789.85 -2.35 C799.39 2, 806.16 3.97, 817.93 8.21 M789.85 -2.35 C797.18 1.01, 804.74 3.05, 817.93 8.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-znQR1Mv8h3sNtUxjW-ltT"><rect x="0" y="0" fill="#fff" width="1193.26171875" height="460.4448715138474"></rect><rect x="639.5950317382812" y="346.42779343956386" fill="#000" width="89.3919677734375" height="20" opacity="1"></rect></mask><g transform="translate(639.5950317382812 346.42779343956386) rotate(0 44.38709960617592 9.872039046427176)"><text x="44.69598388671875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP GET</text></g><g mask="url(#mask-rwi0sA7McaEz286ekENe_)" stroke-linecap="round"><g transform="translate(1087.0820312500002 424.80548936137507) rotate(0 -508.1210937500001 3.2311272423975197)"><path d="M-0.22 -0.55 C-169.77 0.56, -847.43 4.52, -1016.72 5.79 M-1.79 1.78 C-171.6 3.11, -848.78 6.43, -1017.92 6.97" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1087.0820312500002 424.80548936137507) rotate(0 -508.1210937500001 3.2311272423975197)"><path d="M-989.77 -3.41 C-1000.65 -0.61, -1010.74 4.3, -1017.92 6.97 M-989.77 -3.41 C-999.46 0.65, -1009.48 3.05, -1017.92 6.97" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1087.0820312500002 424.80548936137507) rotate(0 -508.1210937500001 3.2311272423975197)"><path d="M-989.68 17.11 C-1000.44 12.71, -1010.56 10.41, -1017.92 6.97 M-989.68 17.11 C-999.53 13.96, -1009.58 9.16, -1017.92 6.97" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-rwi0sA7McaEz286ekENe_"><rect x="0" y="0" fill="#fff" width="2203.3242187500005" height="531.2677438461701"></rect><rect x="517.4249725341799" y="418.0366166037725" fill="#000" width="123.07192993164062" height="20" opacity="1"></rect></mask><g transform="translate(517.4249725341798 418.0366166037725) rotate(0 60.59131353043489 9.9805625085487)"><text x="61.53596496582031" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP Response</text></g><g stroke-linecap="round"><g transform="translate(335.0453071594238 41.921875) rotate(0 65.02535718225434 64.1953125)"><path d="M-0.62 -0.03 C19.19 4.45, 98.13 5.37, 119.79 26.82 C141.45 48.27, 127.6 111.87, 129.34 128.68" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(335.0453071594238 41.921875) rotate(0 65.02535718225434 64.1953125)"><path d="M120.5 100.01 C123.81 112.51, 128.33 120.68, 129.34 128.68" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(335.0453071594238 41.921875) rotate(0 65.02535718225434 64.1953125)"><path d="M140.99 101.03 C136.51 113.04, 133.24 120.82, 129.34 128.68" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(145.42421340942383 10) rotate(0 201.15988159179688 10)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">AWS's Network Load Balancer (NLB) is an example</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Simple HTTP Request with L4 Load Balancer</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Key characteristics of L4 load balancers:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Maintain persistent TCP connections between client and server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Fast and efficient due to minimal packet inspection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Cannot make routing decisions based on application data.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Typically used when raw performance is the priority.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For example, if a client establishes a TCP connection through an L4 load balancer, that same server will handle all subsequent requests within that TCP session. This makes L4 load balancers particularly well-suited for protocols that require persistent connections, like WebSocket connections. At a conceptual level, <em>it's as if we have a direct TCP connection between client and server which we can use to communicate at higher layers</em>.</div><h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="layer-7-load-balancers">Layer 7 Load Balancers</h4><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Layer 7 load balancers operate at the application layer, understanding protocols like HTTP. They can examine the actual content of each request and make more intelligent routing decisions.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1289.4968643188477 732.279052734375">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="1289.4968643188477" height="732.279052734375" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(247.16406250000006 172.122802734375) rotate(0 70.79687499999999 236.99609375)"><path d="M32 0 C54.8 1.41, 78.48 1.58, 109.59 0 C129.75 1.99, 144.68 10.63, 141.59 32 C144.74 187.49, 143.43 345.74, 141.59 441.99 C143.8 461.96, 133.01 477.02, 109.59 473.99 C85.2 472.86, 56.78 476.71, 32 473.99 C8.73 472.22, 1.99 463.96, 0 441.99 C0.51 335.42, -0.86 230.88, 0 32 C-1.43 8.65, 11.51 1.84, 32 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M32 0 C50.52 -1.06, 70.37 1.64, 109.59 0 M109.59 0 C132.15 -1.98, 140.86 9.93, 141.59 32 M141.59 32 C141.73 184.71, 141.57 336.26, 141.59 441.99 M141.59 441.99 C141.46 462.21, 130.59 472.94, 109.59 473.99 M109.59 473.99 C90 472.47, 72.47 472.97, 32 473.99 M32 473.99 C10.82 472.7, 1.66 461.43, 0 441.99 M0 441.99 C-0.5 347.21, -0.08 251.76, 0 32 M0 32 C-0.17 9.93, 10.66 1.88, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g stroke-linecap="round" transform="translate(387.2210884094238 299.6551513671875) rotate(0 47.777343749999986 91.265625)"><path d="M23.89 0 C44.66 -2.45, 60.43 -2.9, 71.67 0 C90.72 1.2, 95.88 8.06, 95.55 23.89 C97.51 53.91, 97.21 88.25, 95.55 158.64 C98.34 171.2, 84.3 181.38, 71.67 182.53 C58.39 185.62, 43.24 183.4, 23.89 182.53 C5.04 180.71, 0.89 175.51, 0 158.64 C0.91 126.64, 0.24 88.84, 0 23.89 C0.36 9.24, 5.1 -1.94, 23.89 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M23.89 0 C35.55 -0.25, 47.85 -0.76, 71.67 0 M71.67 0 C86.05 -1.47, 95.46 6.05, 95.55 23.89 M95.55 23.89 C95.27 72.89, 95.48 119.65, 95.55 158.64 M95.55 158.64 C95.62 172.58, 86.38 184.31, 71.67 182.53 M71.67 182.53 C54.44 181.1, 37.33 180.69, 23.89 182.53 M23.89 182.53 C9.92 184.44, -1.97 173.86, 0 158.64 M0 158.64 C-0.52 131, -2.27 103.36, 0 23.89 M0 23.89 C-1.3 6.4, 6.04 0.25, 23.89 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g stroke-linecap="round" transform="translate(104.27343750000006 109.866943359375) rotate(0 70.79687499999999 299.783203125)"><path d="M32 0 C58 -0.49, 77.69 -0.07, 109.59 0 C131.51 1.38, 143.64 12.22, 141.59 32 C143.71 176.31, 144.54 317.94, 141.59 567.57 C143.11 588.04, 130.06 602.85, 109.59 599.57 C84.59 602.45, 54.76 602.53, 32 599.57 C14.03 597.6, 2.7 590.78, 0 567.57 C2.16 435.1, 2.08 304.38, 0 32 C1.84 8, 10.02 -1.65, 32 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M32 0 C59.61 -1.51, 85.72 -0.8, 109.59 0 M109.59 0 C130.19 -1.19, 141.44 12.17, 141.59 32 M141.59 32 C139.18 226.09, 139.58 418.76, 141.59 567.57 M141.59 567.57 C141.3 589.9, 130.35 599.47, 109.59 599.57 M109.59 599.57 C85.76 598.47, 63.76 598.81, 32 599.57 M32 599.57 C10.6 598.28, 1.93 588.12, 0 567.57 M0 567.57 C0.63 402.35, 1.8 238.57, 0 32 M0 32 C1.17 10.82, 12.61 -0.9, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(254.75000000000006 77.343505859375) rotate(0 12.059989929199219 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">IP</text></g><g transform="translate(287.67968750000006 136.538818359375) rotate(0 21.089981079101562 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP</text></g><g stroke-linecap="round" transform="translate(1062.9609375 303.515380859375) rotate(0 70.796875 91.265625)"><path d="M32 0 C57.08 1.38, 87.59 -0.64, 109.59 0 C133.82 2.05, 140.72 12.18, 141.59 32 C143.29 63.35, 143.16 100.46, 141.59 150.53 C143.67 173.09, 133.08 185.9, 109.59 182.53 C88.62 181.49, 73.51 183.9, 32 182.53 C9.1 182.98, 1.2 173.71, 0 150.53 C-1.04 121.74, 1.22 98.83, 0 32 C2.35 10.21, 11.13 1.6, 32 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M32 0 C51.89 -2.56, 68.59 -1.32, 109.59 0 M109.59 0 C132.35 0.26, 140.87 10.37, 141.59 32 M141.59 32 C141.12 72.4, 140.91 113.98, 141.59 150.53 M141.59 150.53 C140.63 171.59, 130.3 182.47, 109.59 182.53 M109.59 182.53 C91.44 180.93, 74.65 180.34, 32 182.53 M32 182.53 C9.29 183.55, 0.83 173.04, 0 150.53 M0 150.53 C-1.32 113.32, -1.16 79.44, 0 32 M0 32 C-0.27 10.92, 10.63 0.32, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g mask="url(#mask-gVfnSgMNC17Z0hi4l0tW0)" stroke-linecap="round"><g transform="translate(85.59375000000006 203.757568359375) rotate(0 124.58203125 -1.435546875)"><path d="M-1.19 -0.44 C40.12 -0.9, 206.97 -1.54, 248.72 -2.02 M0.39 -1.72 C41.42 -2.57, 206.17 -3.61, 247.54 -3.69" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(85.59375000000006 203.757568359375) rotate(0 124.58203125 -1.435546875)"><path d="M219.4 6.7 C229.16 2.34, 241.89 -0.56, 247.54 -3.69 M219.4 6.7 C226.55 3.77, 234.19 0.52, 247.54 -3.69" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(85.59375000000006 203.757568359375) rotate(0 124.58203125 -1.435546875)"><path d="M219.3 -13.82 C229.23 -10.48, 241.99 -5.68, 247.54 -3.69 M219.3 -13.82 C226.44 -11.34, 234.12 -9.18, 247.54 -3.69" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-gVfnSgMNC17Z0hi4l0tW0"><rect x="0" y="0" fill="#fff" width="434.75781250000006" height="306.628662109375"></rect><rect x="196.03179168701178" y="192.322021484375" fill="#000" width="28.287979125976562" height="20" opacity="1"></rect></mask><g transform="translate(196.03179168701178 192.322021484375) rotate(0 13.329765829443943 9.368897370542413)"><text x="14.143989562988281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN</text></g><g transform="translate(533.3398818969727 319.33956146240234) rotate(0 76.85997009277344 67.5)"><text x="76.85997009277344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Layer 7 </text><text x="76.85997009277344" y="45" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Load</text><text x="76.85997009277344" y="90" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Balancer</text></g><g transform="translate(-16.189971923828125 372.26912689208984) rotate(270 48.689971923828125 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g mask="url(#mask-ScPW4rj1Zl3mc6phpqoFu)" stroke-linecap="round"><g transform="translate(338.88281250000006 242.882568359375) rotate(0 -126.626953125 0)"><path d="M-0.35 -0.06 C-42.54 -0.27, -211.15 -0.57, -253.33 -0.67 M1.67 -1.13 C-40.67 -1.25, -211.65 0.27, -254.32 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(338.88281250000006 242.882568359375) rotate(0 -126.626953125 0)"><path d="M-226.21 -9.95 C-234.27 -7.17, -243.31 -4.4, -254.32 0.52 M-226.21 -9.95 C-233.53 -7.43, -240.81 -3.85, -254.32 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(338.88281250000006 242.882568359375) rotate(0 -126.626953125 0)"><path d="M-226.05 10.57 C-234.26 7.49, -243.35 4.41, -254.32 0.52 M-226.05 10.57 C-233.31 8.01, -240.64 6.52, -254.32 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-ScPW4rj1Zl3mc6phpqoFu"><rect x="0" y="0" fill="#fff" width="692.13671875" height="342.882568359375"></rect><rect x="179.51988983154303" y="232.882568359375" fill="#000" width="65.47193908691406" height="20" opacity="1"></rect></mask><g transform="translate(179.51988983154303 232.882568359375) rotate(0 33.03890968204476 9.690116286803118)"><text x="32.73596954345703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN-ACK</text></g><g mask="url(#mask-dGVKHop0ApA5jHoYebEQF)" stroke-linecap="round"><g transform="translate(83.57031250000006 279.148193359375) rotate(0 126.662109375 -1.40234375)"><path d="M-0.2 -0.63 C41.93 -1.01, 210.55 -2.6, 252.74 -2.97 M-1.77 1.65 C40.77 1.52, 212.86 -0.99, 255.15 -1.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(83.57031250000006 279.148193359375) rotate(0 126.662109375 -1.40234375)"><path d="M227.1 9.12 C234.34 5.08, 243.35 2.3, 255.15 -1.52 M227.1 9.12 C235.11 5.77, 243.17 3.36, 255.15 -1.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(83.57031250000006 279.148193359375) rotate(0 126.662109375 -1.40234375)"><path d="M226.82 -11.4 C234.03 -9.42, 243.12 -6.18, 255.15 -1.52 M226.82 -11.4 C234.78 -8.67, 242.92 -4.98, 255.15 -1.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-dGVKHop0ApA5jHoYebEQF"><rect x="0" y="0" fill="#fff" width="436.89453125000006" height="381.952880859375"></rect><rect x="194.92843627929693" y="267.745849609375" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(194.92843627929693 267.745849609375) rotate(0 15.331842654952766 10.743144456441541)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-KtM7yOEaHlltNgXkvtTv3)" stroke-linecap="round"><g transform="translate(75.58593750000006 509.679443359375) rotate(0 128.705078125 0)"><path d="M-0.37 -0.04 C42.5 0.18, 213.75 1.13, 256.64 1.16 M1.63 -1.11 C44.94 -1.17, 216.56 -0.79, 258.95 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(75.58593750000006 509.679443359375) rotate(0 128.705078125 0)"><path d="M230.7 9.75 C237.76 6.01, 246.86 3.97, 258.95 -0.36 M230.7 9.75 C238.51 5.72, 248.65 3.71, 258.95 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(75.58593750000006 509.679443359375) rotate(0 128.705078125 0)"><path d="M230.81 -10.77 C237.81 -9.35, 246.89 -6.22, 258.95 -0.36 M230.81 -10.77 C238.45 -8.49, 248.56 -4.19, 258.95 -0.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-KtM7yOEaHlltNgXkvtTv3"><rect x="0" y="0" fill="#fff" width="432.99609375000006" height="609.679443359375"></rect><rect x="190.18703460693365" y="499.679443359375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(190.18703460693365 499.679443359375) rotate(0 14.685997152556666 10.021471477761224)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-icGwl7ItUxAyPom7No8xA)" stroke-linecap="round"><g transform="translate(77.33193904784054 541.652099609375) rotate(0 128.705078125 0)"><path d="M-0.47 0.09 C42.43 0.06, 213.84 1.15, 256.63 1 M1.49 -0.91 C44.84 -0.75, 216.09 -0.77, 258.94 -0.6" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(77.33193904784054 541.652099609375) rotate(0 128.705078125 0)"><path d="M27.77 -10.06 C21.35 -9.07, 16.21 -7.27, -0.47 0.09 M27.77 -10.06 C21.87 -7.51, 15.72 -5.69, -0.47 0.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(77.33193904784054 541.652099609375) rotate(0 128.705078125 0)"><path d="M27.68 10.46 C21.09 6.61, 15.96 3.57, -0.47 0.09 M27.68 10.46 C21.7 8.26, 15.57 5.33, -0.47 0.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-icGwl7ItUxAyPom7No8xA"><rect x="0" y="0" fill="#fff" width="434.74209529784054" height="641.652099609375"></rect><rect x="190.7330315771374" y="531.652099609375" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(190.7330315771374 531.652099609375) rotate(0 15.834228451480158 10.050754976636654)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-ULwyHcq210t10EVp--iLU)" stroke-linecap="round"><g transform="translate(78.5142467103899 574.792724609375) rotate(0 128.705078125 0)"><path d="M-1.14 -0.82 C42 -0.91, 214.81 0.35, 258.02 0.5 M0.47 1.36 C43.56 1.44, 214.52 -1.38, 257.39 -1.36" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(78.5142467103899 574.792724609375) rotate(0 128.705078125 0)"><path d="M27.1 -10.94 C19.17 -7.81, 14.73 -5.28, -1.14 -0.82 M27.1 -10.94 C18.43 -8.32, 9.82 -3.9, -1.14 -0.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(78.5142467103899 574.792724609375) rotate(0 128.705078125 0)"><path d="M27 9.58 C18.93 7.88, 14.51 5.59, -1.14 -0.82 M27 9.58 C18.16 5.88, 9.58 3.99, -1.14 -0.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-ULwyHcq210t10EVp--iLU"><rect x="0" y="0" fill="#fff" width="435.9244029603899" height="674.792724609375"></rect><rect x="193.1153438173235" y="564.792724609375" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(193.1153438173235 564.792724609375) rotate(0 13.841459783911688 9.998863199498714)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-Tu7AzKNBdXtFfoDF7frzj)" stroke-linecap="round"><g transform="translate(76.91805253401407 612.9075359058281) rotate(0 128.705078125 0)"><path d="M0.7 0.09 C43.7 -0.08, 215.81 -0.45, 258.57 -0.54 M-0.39 -0.9 C42.5 -0.96, 215.43 0.45, 258.24 0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(76.91805253401407 612.9075359058281) rotate(0 128.705078125 0)"><path d="M229.97 10.77 C240.01 9.02, 248.87 3.38, 258.24 0.71 M229.97 10.77 C237.28 7.98, 244.84 5.37, 258.24 0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(76.91805253401407 612.9075359058281) rotate(0 128.705078125 0)"><path d="M230.12 -9.75 C240.19 -4.3, 249 -2.74, 258.24 0.71 M230.12 -9.75 C237.39 -7.13, 244.91 -4.34, 258.24 0.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-Tu7AzKNBdXtFfoDF7frzj"><rect x="0" y="0" fill="#fff" width="434.32820878401407" height="712.9075359058281"></rect><rect x="190.31914506331094" y="602.9075359058281" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(190.31914506331094 602.9075359058281) rotate(0 15.693471584697278 9.904117828579274)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g transform="translate(1201.4668884277344 373.97049713134766) rotate(89.99999999999994 55.52997589111328 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(774.5036536558393 122.712646484375) rotate(0 70.79687499999997 299.783203125)"><path d="M32 0 C54.04 2.03, 71.94 0.13, 109.59 0 C132.53 -0.04, 138.72 8.47, 141.59 32 C136.58 162.4, 138.6 290.92, 141.59 567.57 C138.73 586.07, 130.34 599.98, 109.59 599.57 C96.28 597.09, 76.16 596.4, 32 599.57 C7.16 596.33, 0.18 588.85, 0 567.57 C4.28 393.97, 2.16 222.37, 0 32 C-2.53 10.46, 13.14 -2.73, 32 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M32 0 C56.5 -0.27, 77.49 -0.04, 109.59 0 M109.59 0 C131.25 0.77, 142.73 11.53, 141.59 32 M141.59 32 C142.77 175.79, 143.23 318.1, 141.59 567.57 M141.59 567.57 C142.44 588.42, 130.45 601.39, 109.59 599.57 M109.59 599.57 C83.25 601.17, 54.21 601.21, 32 599.57 M32 599.57 C12.54 598.47, 1.5 589.95, 0 567.57 M0 567.57 C1.2 435.38, 1.16 304.17, 0 32 M0 32 C1.02 9.18, 10.31 -0.92, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(835.0427161558393 85.904052734375) rotate(0 12.059989929199219 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">IP</text></g><g stroke-linecap="round" transform="translate(917.3942786558391 184.968505859375) rotate(0 70.79687499999997 236.99609375)"><path d="M32 0 C61.95 -0.22, 85.83 -2.37, 109.59 0 C128.85 -3.39, 145 7.2, 141.59 32 C141.81 169.98, 143.06 311.3, 141.59 441.99 C138.56 465.33, 131.18 477.42, 109.59 473.99 C88.34 469.49, 74.29 472.67, 32 473.99 C11.47 471.27, -0.07 466.72, 0 441.99 C0.74 346.98, 3.49 250.69, 0 32 C-1.82 12.91, 13.87 -1.42, 32 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M32 0 C54.54 0.78, 77.58 0.88, 109.59 0 M109.59 0 C130.27 1.1, 143.31 10.65, 141.59 32 M141.59 32 C143.34 187.7, 142.61 344.94, 141.59 441.99 M141.59 441.99 C142.82 462.57, 132.08 475.67, 109.59 473.99 M109.59 473.99 C83.71 473.36, 55.58 475.5, 32 473.99 M32 473.99 C9.59 473.01, 1.11 463.68, 0 441.99 M0 441.99 C0.28 336.07, -0.48 231.28, 0 32 M0 32 C-0.79 9.54, 11.13 1.02, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="1.5 8"></path></g><g transform="translate(957.9099036558391 149.384521484375) rotate(0 21.089981079101562 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TCP</text></g><g mask="url(#mask-T2nlZbt3JRGQgWG2EYTiw)" stroke-linecap="round"><g transform="translate(754.4020911558391 211.80847285308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M0.52 -0.39 C48.71 0.58, 241.56 5.39, 289.63 6.54 M-0.67 -1.64 C47.39 -1.04, 240.89 3.91, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(754.4020911558391 211.80847285308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M260.6 14.54 C269.51 12.28, 281.5 7.91, 289.03 4.95 M260.6 14.54 C271.78 10.72, 281.94 8.23, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(754.4020911558391 211.80847285308482) rotate(0 144.48437500000009 2.754821190645089)"><path d="M261.09 -5.97 C269.95 -1.29, 281.77 1.28, 289.03 4.95 M261.09 -5.97 C272.2 -1.99, 282.17 3.32, 289.03 4.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-T2nlZbt3JRGQgWG2EYTiw"><rect x="0" y="0" fill="#fff" width="1143.3708411558391" height="317.3181152343749"></rect><rect x="884.7424765928508" y="204.5632940437299" fill="#000" width="28.287979125976562" height="20" opacity="1"></rect></mask><g transform="translate(884.742476592851 204.5632940437299) rotate(0 14.140325698037628 9.691574967200722)"><text x="14.143989562988281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN</text></g><g mask="url(#mask-vcNMb1GfnVYHwZQGDePZ0)" stroke-linecap="round"><g transform="translate(1009.1130286558391 255.728271484375) rotate(0 -126.626953125 0)"><path d="M-0.01 0.96 C-42.22 0.75, -210.45 -0.08, -252.57 -0.29 M-1.48 0.43 C-43.84 0.91, -211.2 1.02, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1009.1130286558391 255.728271484375) rotate(0 -126.626953125 0)"><path d="M-224.98 -9.21 C-233.3 -4.41, -245.4 -1.05, -253.16 1.09 M-224.98 -9.21 C-232.17 -6.49, -239.98 -2.42, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1009.1130286558391 255.728271484375) rotate(0 -126.626953125 0)"><path d="M-224.96 11.32 C-233.45 8.82, -245.56 4.9, -253.16 1.09 M-224.96 11.32 C-232.1 8.37, -239.92 6.77, -253.16 1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-vcNMb1GfnVYHwZQGDePZ0"><rect x="0" y="0" fill="#fff" width="1362.3669349058391" height="355.728271484375"></rect><rect x="849.7501059873821" y="245.728271484375" fill="#000" width="65.47193908691406" height="20" opacity="1"></rect></mask><g transform="translate(849.7501059873821 245.728271484375) rotate(0 32.77654439829752 10.400513477767845)"><text x="32.73596954345703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SYN-ACK</text></g><g mask="url(#mask-F9ZO9BQ5_oGhX3SRPrAmk)" stroke-linecap="round"><g transform="translate(752.3825599058391 290.9014596689133) rotate(0 146.56250000000006 0.936843407730862)"><path d="M0.51 -0.29 C49.2 0.26, 243.94 2.68, 292.84 2.97 M-0.69 -1.49 C47.76 -1.23, 242.71 0.76, 291.74 1.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(752.3825599058391 290.9014596689133) rotate(0 146.56250000000006 0.936843407730862)"><path d="M263.43 11.36 C273.08 7.21, 285.48 5.37, 291.74 1.42 M263.43 11.36 C271.37 8.86, 278.81 6.85, 291.74 1.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(752.3825599058391 290.9014596689133) rotate(0 146.56250000000006 0.936843407730862)"><path d="M263.67 -9.16 C273.18 -5.98, 285.5 -0.5, 291.74 1.42 M263.67 -9.16 C271.66 -6.29, 279.04 -2.92, 291.74 1.42" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-F9ZO9BQ5_oGhX3SRPrAmk"><rect x="0" y="0" fill="#fff" width="1145.5075599058391" height="392.775146484375"></rect><rect x="883.641074310136" y="281.838303076644" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(883.6410743101361 281.838303076644) rotate(0 14.816381343980368 9.805165088470176)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-JFJe1s9RJAGlNnAVeGB1e)" stroke-linecap="round"><g transform="translate(744.5270911558391 523.4386354425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M0.73 -0.46 C50.41 -0.02, 248.27 3.09, 297.78 3.68 M-0.34 -1.74 C49.27 -1.11, 247.57 1.64, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(744.5270911558391 523.4386354425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M268.88 12.02 C275.85 10.26, 286.1 7.52, 297.19 2.09 M268.88 12.02 C277.73 9.19, 288.26 4.58, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(744.5270911558391 523.4386354425974) rotate(0 148.54101562500009 1.3362242708888061)"><path d="M269.12 -8.5 C276.21 -4.6, 286.4 -1.67, 297.19 2.09 M269.12 -8.5 C278.02 -4.48, 288.46 -2.23, 297.19 2.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-JFJe1s9RJAGlNnAVeGB1e"><rect x="0" y="0" fill="#fff" width="1141.6091224058391" height="626.111083984375"></rect><rect x="878.9641257627727" y="514.7748597134862" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(878.9641257627728 514.7748597134862) rotate(0 14.281769014974117 9.634398732478758)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-7_1goELSTTuzocRgEx4Fr)" stroke-linecap="round"><g transform="translate(744.2967146079986 559.1003782868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M0.69 0.41 C50.54 0.26, 250.16 0.19, 299.78 0.11 M-0.4 -0.42 C49.29 -0.36, 249.59 -1.17, 299.21 -1.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(744.2967146079986 559.1003782868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M28.87 -9.88 C19.56 -4.84, 10.66 -3.45, 0.69 0.41 M28.87 -9.88 C17.87 -5.62, 7.97 -2.75, 0.69 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(744.2967146079986 559.1003782868513) rotate(0 149.52920467284056 -0.508319026238155)"><path d="M28.89 10.64 C19.4 8.34, 10.5 2.39, 0.69 0.41 M28.89 10.64 C17.77 7.21, 7.87 2.38, 0.69 0.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-7_1goELSTTuzocRgEx4Fr"><rect x="0" y="0" fill="#fff" width="1143.3551239536796" height="660.1170163393276"></rect><rect x="878.521933685136" y="548.5920592606133" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(878.5219336851361 548.592059260613) rotate(0 15.461566323419106 9.998244631732973)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g mask="url(#mask-9j3OxWVdDH2NcIIZxzkxo)" stroke-linecap="round"><g transform="translate(752.5558131954492 587.1358471296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M-0.66 0.9 C47.99 1.29, 243.93 2.8, 292.61 3.44 M1.2 0.33 C49.68 1.37, 243.81 4.24, 291.99 4.64" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(752.5558131954492 587.1358471296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M27.62 -9.13 C19.04 -4.63, 6.29 -3.05, -0.66 0.9 M27.62 -9.13 C17.71 -5.36, 8.05 -2.87, -0.66 0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(752.5558131954492 587.1358471296976) rotate(0 145.99080921038998 2.0442590523387025)"><path d="M27.45 11.39 C18.74 8.51, 6.05 2.7, -0.66 0.9 M27.45 11.39 C17.57 7.87, 7.97 3.07, -0.66 0.9" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-9j3OxWVdDH2NcIIZxzkxo"><rect x="0" y="0" fill="#fff" width="1144.5374316162292" height="691.2243652343751"></rect><rect x="884.4426413877729" y="579.1801061820365" fill="#000" width="28.207962036132812" height="20" opacity="1"></rect></mask><g transform="translate(884.4426413877728 579.1801061820363) rotate(0 14.089962801337236 10.43906755938201)"><text x="14.103981018066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FIN</text></g><g mask="url(#mask-Eld8NuTbG7y--lBR_oL3V)" stroke-linecap="round"><g transform="translate(747.3824761218254 629.1172905338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M-0.59 0.66 C48.6 0.72, 246.39 -0.29, 295.77 -0.3 M1.3 -0.03 C50.29 0.24, 245.98 1.21, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(747.3824761218254 629.1172905338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M266.74 11.2 C277.83 8.09, 285.79 4.37, 294.93 0.96 M266.74 11.2 C275.9 7.54, 285.08 4.02, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(747.3824761218254 629.1172905338356) rotate(0 147.77938065901387 0.11094299849628442)"><path d="M266.75 -9.32 C277.73 -5.21, 285.68 -1.69, 294.93 0.96 M266.75 -9.32 C276.02 -6.14, 285.19 -2.82, 294.93 0.96" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-Eld8NuTbG7y--lBR_oL3V"><rect x="0" y="0" fill="#fff" width="1142.941237439853" height="729.3391765308281"></rect><rect x="879.8578711851362" y="619.2282335323318" fill="#000" width="30.60797119140625" height="20" opacity="1"></rect></mask><g transform="translate(879.8578711851362 619.2282335323318) rotate(0 15.114034494757647 10.23836337849366)"><text x="15.303985595703125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ACK</text></g><g stroke-linecap="round"><g transform="translate(428.34243481832357 41.921875) rotate(0 69.69329571516668 131.001953125)"><path d="M-0.62 -0.03 C18.63 4.45, 93.22 -16.9, 116.43 26.82 C139.65 70.54, 134.82 223.22, 138.68 262.29" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(428.34243481832357 41.921875) rotate(0 69.69329571516668 131.001953125)"><path d="M127.43 234.48 C131.65 246.67, 137.09 254.51, 138.68 262.29" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(428.34243481832357 41.921875) rotate(0 69.69329571516668 131.001953125)"><path d="M147.93 233.75 C144.36 246.11, 142 254.23, 138.68 262.29" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(235.36171340942383 10) rotate(0 211.35186767578125 10)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">AWS's Application Load Balancer (ALB) is an example</text></g><g mask="url(#mask-N3PgYySZRnfK7HaaLkk3t)" stroke-linecap="round"><g transform="translate(704.8304634094238 357.20227702868306) rotate(0 260.744140625 2.3117207518993155)"><path d="M-0.33 0.03 C86.76 0.94, 434.46 3.32, 521.31 4.28 M1.7 -1 C88.72 0.19, 433.34 4.8, 520.27 5.64" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(704.8304634094238 357.20227702868306) rotate(0 260.744140625 2.3117207518993155)"><path d="M491.96 15.56 C497.78 13.35, 502.83 10.41, 520.27 5.64 M491.96 15.56 C503.19 12.04, 515.02 6.58, 520.27 5.64" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(704.8304634094238 357.20227702868306) rotate(0 260.744140625 2.3117207518993155)"><path d="M492.2 -4.96 C497.78 -3.05, 502.78 -1.88, 520.27 5.64 M492.2 -4.96 C503.19 -0.36, 514.92 2.31, 520.27 5.64" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-N3PgYySZRnfK7HaaLkk3t"><rect x="0" y="0" fill="#fff" width="1326.3187446594238" height="461.8257185324817"></rect><rect x="909.7046394348145" y="347.0139977805825" fill="#000" width="111.73992919921875" height="25" opacity="1"></rect></mask><g transform="translate(909.7046394348145 347.0139977805825) rotate(0 55.61651727296413 12.508156300950759)"><text x="55.869964599609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP GET</text></g><g mask="url(#mask--GQgDT9WIYcX4JEfSKdvD)" stroke-linecap="round"><g transform="translate(1224.8968696594238 416.11636842879875) rotate(0 -260.11328125000006 0.7587063333387505)"><path d="M-0.79 0.98 C-87.44 1.43, -434.03 1.58, -520.52 1.83 M1 0.44 C-85.78 0.59, -434.75 -0.16, -521.63 -0.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1224.8968696594238 416.11636842879875) rotate(0 -260.11328125000006 0.7587063333387505)"><path d="M-493.42 -10.37 C-498.84 -8.52, -506.92 -4.72, -521.63 -0.14 M-493.42 -10.37 C-504.06 -6.2, -513.97 -1.63, -521.63 -0.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1224.8968696594238 416.11636842879875) rotate(0 -260.11328125000006 0.7587063333387505)"><path d="M-493.45 10.16 C-498.7 6.94, -506.78 5.66, -521.63 -0.14 M-493.45 10.16 C-503.89 6.59, -513.79 3.43, -521.63 -0.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask--GQgDT9WIYcX4JEfSKdvD"><rect x="0" y="0" fill="#fff" width="1845.1234321594238" height="517.6337810954763"></rect><rect x="887.8636589050292" y="404.3750747621375" fill="#000" width="153.83985900878906" height="25" opacity="1"></rect></mask><g transform="translate(887.8636589050293 404.3750747621375) rotate(0 76.71940590519466 12.586170796317447)"><text x="76.91992950439453" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP Response</text></g><g mask="url(#mask-znQR1Mv8h3sNtUxjW-ltT)" stroke-linecap="round"><g transform="translate(79.17187500000006 356.2383754164059) rotate(0 219.65429687499997 -0.7872785285154578)"><path d="M0.15 0.4 C73.43 0.08, 366.77 -2.04, 439.92 -2.46 M-1.23 -0.44 C71.93 -0.59, 366.06 -1.28, 439.3 -1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(79.17187500000006 356.2383754164059) rotate(0 219.65429687499997 -0.7872785285154578)"><path d="M411.13 8.92 C420.79 6.63, 427.59 1.97, 439.3 -1.39 M411.13 8.92 C418.56 6.97, 426.14 3.71, 439.3 -1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(79.17187500000006 356.2383754164059) rotate(0 219.65429687499997 -0.7872785285154578)"><path d="M411.09 -11.6 C420.67 -7.37, 427.48 -5.51, 439.3 -1.39 M411.09 -11.6 C418.45 -8.34, 426.04 -6.38, 439.3 -1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-znQR1Mv8h3sNtUxjW-ltT"><rect x="0" y="0" fill="#fff" width="618.48046875" height="457.81293247343683"></rect><rect x="254.13018798828128" y="345.45109688789034" fill="#000" width="89.3919677734375" height="20" opacity="1"></rect></mask><g transform="translate(254.13018798828128 345.45109688789034) rotate(0 44.387099606175894 9.754838290810653)"><text x="44.69598388671875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP GET</text></g><g mask="url(#mask-rwi0sA7McaEz286ekENe_)" stroke-linecap="round"><g transform="translate(515.20703125 426.425537109375) rotate(0 -217.62890625 0.802734375)"><path d="M-0.22 -0.55 C-72.94 -0.25, -363.27 0.47, -435.73 0.93 M-1.79 1.78 C-74.77 2.3, -364.63 2.38, -436.93 2.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(515.20703125 426.425537109375) rotate(0 -217.62890625 0.802734375)"><path d="M-408.73 -8.11 C-419.62 -5.36, -429.73 -0.51, -436.93 2.12 M-408.73 -8.11 C-418.44 -4.11, -428.48 -1.76, -436.93 2.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(515.20703125 426.425537109375) rotate(0 -217.62890625 0.802734375)"><path d="M-408.75 12.41 C-419.49 7.95, -429.59 5.6, -436.93 2.12 M-408.75 12.41 C-418.59 9.21, -428.62 4.35, -436.93 2.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-rwi0sA7McaEz286ekENe_"><rect x="0" y="0" fill="#fff" width="1050.46484375" height="528.031005859375"></rect><rect x="236.0421600341797" y="417.228271484375" fill="#000" width="123.07192993164062" height="20" opacity="1"></rect></mask><g transform="translate(236.0421600341797 417.228271484375) rotate(0 60.59131353043486 10.054046433844519)"><text x="61.53596496582031" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">HTTP Response</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Simple HTTP Request with L7 Load Balancer</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Key characteristics of L7 load balancers:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Terminate incoming connections and create new ones to backend servers.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Can route based on request content (URL, headers, cookies, etc.).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More CPU-intensive due to packet inspection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Provide more flexibility and features.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Better suited for HTTP-based traffic.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For example, an L7 load balancer could route all API requests to one set of servers while sending web page requests to another (providing similar functionality to an <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/deep-dives/api-gateway" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">API Gateway</a>), or it could ensure that all requests from a specific user go to the same server based on a cookie. The underlying TCP connection that's made to your server via an L7 load balancer is not all that relevant! It's just a way for the load balancer to forward L7 requests, like HTTP, to your server.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">While L7 load balancers can help us to not have to worry about lower-level details like TCP connections, we aren't able to ignore the connection-level reality if we want peristent connections to consistent servers.</div><div class="my-6"><div class="MuiBox-root mui-1ygn9bx"><div class="MuiBox-root mui-14185gn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The choice between L4 and L7 load balancers often comes up in system design interviews when discussing real-time features. There are some L7 load balancers which explicitly support connection-oriented protocols like WebSockets, but generally speaking L4 load balancers are  better for WebSocket connections, while L7 load balancers offer more flexibility for HTTP-based solutions like long polling. We'll get into more detail on this in the next section.</div></div></div></div></div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="approaches-for-client-updates">Approaches for Client Updates</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Alright, now that we covered the necessary networking concepts, let's dive into the different approaches for facilitating real-time updates between clients and servers, our first "hop". As a motivating example, let's consider a chat application where users need to receive new messages sent to the chat room they are a part of.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="simple-polling-the-baseline">Simple Polling: The Baseline</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The simplest possible approach is to have the client regularly poll the server for updates. This could be done with a simple HTTP request that the client makes at a regular interval. This doesn't technically qualify as real-time, but it's a good starting point and provides a good contrast for our other methods.</div><div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A lot of interview questions don't <em>actually</em> require real-time updates. Think critically about the product and ask yourself whether lower frequency updates (e.g. every 2-5 seconds) would work. If so, you may want to propose a simple, polling-based approach. It's better to suggest a less-than-perfect solution than to fail to implement a complex one.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">That said, do make this proposal to your interviewer before pulling the trigger. If they are dead-set on you talking about WebSockets, SSE, or WebRTC, you'll want to know that sooner than later!</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">How does it work? It's dead simple! The client makes a request to the server at a regular interval and the server responds with the current state of the world. In our chat app, we would just constantly be polling for "what messages have I not received yet?".</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(166, 38, 164);">async</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">function</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">poll</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> response </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">fetch</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'/api/updates'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> data </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> response</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">json</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">processData</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Poll every 2 seconds</span><span>
</span><span></span><span class="token" style="color: rgb(64, 120, 242);">setInterval</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>poll</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">2000</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Simple to implement.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Stateless.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">No special infrastructure needed.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Works with any standard networking infrastructure.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Doesn't take much time to explain.</div></li>
</ul><div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This last point is underrated. If the crux of your problem is <em>not</em> real-time updates, you'll want to propose a simple, polling-based approach. You'll preserve your mental energy and interview time for the parts of the system that truly matter.</div></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Higher latency than other methods. Updates might be delayed as long as the polling interval + the time it takes to process the request.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Limited update frequency.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More bandwidth usage.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Can be resource-intensive with many clients, establishing new connections, etc.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-simple-polling">When to use simple polling</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Simple polling is a great baseline and, absent a problem which specifically requires very-low latency, real-time updates, it's a great solution. It's also appropriate when the window where you need updates is short, like in our <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/problem-breakdowns/leetcode" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Leetcode system design</a>.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">You'll want to be clear with your interviewer about the trade-offs you're making with polling vs other methods. A good explanation highlights the simplicity of the approach and gives yourself a backdoor if you discover that you need something more sophisticated. "I'm going to start with a simple polling approach so I can focus on X, but we can switch to something more sophisticated if we need to later."</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The most common objection from interviewers to polling is either that it's too slow or that it's not efficient. Be prepared to discuss why the polling frequency you've chosen is apropriate and sufficient for the problem. On the efficiency front, it's great to be able to discuss how you can reduce the overhead. One way to do this is to take advantage of HTTP keep-alive connections. Setting an HTTP keep-alive which is longer than the polling interval will mean that, in most cases, you'll only need to establish a TCP connection once which minimizes some of the setup and teardown overhead.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="long-polling-the-easy-solution">Long Polling: The Easy Solution</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">After a baseline for simple polling, long polling is the easiest approach to achieving near real-time updates. It builds on standard HTTP, making it easy to implement and scale.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The idea is also simple: the client makes a request to the server and the server holds the request open until new data is available. It's as if the server is just taking really long to process the request. The server then responds with the data, finalizes the HTTP requests, and the client immediately makes a <strong>new</strong> HTTP request. This repeats until the server has new data to send. If no data has come through in a long while, we might even return an empty response to the client so that they can make another request.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For our chat app, we would keep making a request to get the <em>next message</em>. If there was no message to retrieve, the server would just hold the request open until a new message was sent before responding to us. After we received that message, we'd make a new request for the next message.</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Client makes HTTP request to server</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Server holds request open until new data is available</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Server responds with data</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Client immediately makes new request</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Process repeats</div></li>
</ol><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Client-side of long polling</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">async</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">function</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">longPoll</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token control-flow" style="color: rgb(166, 38, 164);">while</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(183, 107, 1);">true</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    </span><span class="token control-flow" style="color: rgb(166, 38, 164);">try</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>      </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> response </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">fetch</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'/api/updates'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>      </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> data </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> response</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">json</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>      
<span>      </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Handle data</span><span>
</span><span>      </span><span class="token" style="color: rgb(64, 120, 242);">processData</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">catch</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>error</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>      </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Handle error</span><span>
</span><span>      </span><span class="token console" style="color: rgb(183, 107, 1);">console</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">error</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>error</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>      
<span>      </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Add small delay before retrying on error</span><span>
</span><span>      </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">new</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">Promise</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">resolve</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">setTimeout</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>resolve</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>    </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span></code></div></div></pre><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The simplicity of the approach hides an important trade-off for high-frequency updates. Since the client needs to "call back" to the server after each receipt, the approach can introduce some extra latency:</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 916.986686706543 587.859375">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="916.986686706543" height="587.859375" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(235.51012420654297 110.1875) rotate(0 20.947265625 24.5)"><path d="M24.23 0.19 C28.48 0.62, 33.64 4.85, 36.53 8.74 C39.43 12.63, 41.52 18.42, 41.59 23.55 C41.66 28.68, 39.69 35.41, 36.93 39.51 C34.18 43.6, 29.39 47.08, 25.04 48.15 C20.7 49.21, 14.84 48.39, 10.86 45.91 C6.87 43.43, 2.81 38.1, 1.14 33.28 C-0.53 28.46, -0.64 21.95, 0.86 16.99 C2.37 12.02, 6.12 6.25, 10.16 3.47 C14.21 0.68, 22.33 0.67, 25.12 0.28 C27.92 -0.11, 26.92 0.66, 26.92 1.12 M23.31 -0.47 C27.59 -0.32, 32.5 3.75, 35.51 7.49 C38.52 11.23, 40.93 16.75, 41.38 21.97 C41.84 27.19, 40.63 34.55, 38.24 38.79 C35.84 43.04, 31.42 46.01, 27.02 47.42 C22.62 48.83, 16.09 49.36, 11.84 47.25 C7.59 45.14, 3.36 39.73, 1.52 34.78 C-0.32 29.82, -0.48 22.66, 0.8 17.55 C2.09 12.44, 5.59 7.1, 9.25 4.11 C12.92 1.12, 20.66 0.17, 22.8 -0.38 C24.95 -0.92, 22.27 0.3, 22.11 0.83" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M21.24 0.49 C25.49 0.34, 31.35 2.83, 34.75 6.18 C38.14 9.53, 40.9 15.43, 41.6 20.59 C42.29 25.76, 41.3 32.63, 38.91 37.16 C36.52 41.7, 31.49 46.13, 27.27 47.81 C23.05 49.5, 17.69 49.31, 13.59 47.28 C9.5 45.24, 4.85 40.19, 2.69 35.62 C0.52 31.04, -0.33 24.83, 0.62 19.84 C1.58 14.84, 4.92 9.02, 8.43 5.67 C11.94 2.32, 19.38 0.53, 21.68 -0.28 C23.97 -1.1, 22.04 0.32, 22.18 0.77 M17.72 0.08 C21.89 -0.93, 27.62 1.19, 31.46 3.87 C35.31 6.55, 39.15 11.37, 40.79 16.17 C42.43 20.98, 42.93 27.86, 41.33 32.7 C39.73 37.55, 35.18 42.5, 31.19 45.24 C27.2 47.97, 21.85 49.98, 17.38 49.11 C12.92 48.24, 7.21 44.12, 4.39 40.01 C1.58 35.9, 0.29 29.63, 0.47 24.46 C0.66 19.29, 2.62 12.99, 5.49 9.01 C8.36 5.04, 15.72 1.97, 17.68 0.6 C19.65 -0.77, 17.44 0.38, 17.29 0.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(253.9354371763169 122.36338386092956) rotate(0 2.7099990844726562 12.5)"><text x="2.7099990844726562" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1</text></g><g stroke-linecap="round" transform="translate(318.71910858154297 116.619140625) rotate(0 20.947265625 24.5)"><path d="M24.24 0.24 C28.37 0.8, 33.46 4.36, 36.48 8.46 C39.5 12.55, 42.32 19.53, 42.34 24.83 C42.36 30.12, 39.5 36.22, 36.59 40.22 C33.68 44.23, 29.28 47.99, 24.9 48.88 C20.52 49.76, 14.2 48.26, 10.3 45.53 C6.4 42.81, 3.01 37.48, 1.5 32.56 C0 27.63, -0.22 20.92, 1.28 16 C2.78 11.08, 6.4 5.65, 10.5 3.05 C14.6 0.45, 23.18 0.59, 25.88 0.4 C28.57 0.22, 26.73 1.43, 26.68 1.95 M21.81 0.2 C26.17 0.14, 31.9 2.64, 35.24 6.33 C38.58 10.01, 41.27 17.12, 41.87 22.32 C42.46 27.53, 41.19 33.22, 38.81 37.55 C36.44 41.88, 32.02 46.7, 27.61 48.3 C23.19 49.9, 16.48 49.26, 12.32 47.15 C8.16 45.04, 4.6 40.35, 2.66 35.66 C0.71 30.96, -0.33 24.12, 0.65 18.98 C1.62 13.84, 4.85 7.89, 8.5 4.84 C12.16 1.78, 20.41 1.48, 22.57 0.67 C24.74 -0.14, 21.63 -0.33, 21.47 -0.03" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M19.88 -0.26 C24.07 -0.88, 29.81 1.73, 33.39 4.94 C36.96 8.15, 40.33 13.85, 41.32 19 C42.31 24.15, 41.48 31.16, 39.35 35.82 C37.21 40.49, 32.68 44.94, 28.51 46.97 C24.33 49.01, 18.49 49.65, 14.3 48.05 C10.12 46.45, 5.78 41.9, 3.39 37.37 C1 32.84, -0.69 26.08, -0.06 20.86 C0.58 15.64, 3.58 9.49, 7.21 6.03 C10.84 2.56, 19.08 1.02, 21.71 0.08 C24.35 -0.85, 23.04 -0.03, 23.01 0.43 M16.63 0.12 C20.82 -1.13, 27.21 0.95, 31.29 3.45 C35.37 5.95, 39.6 10.18, 41.12 15.12 C42.64 20.06, 42.06 28.06, 40.4 33.11 C38.74 38.15, 34.95 42.93, 31.17 45.41 C27.38 47.89, 21.96 48.86, 17.67 47.98 C13.38 47.1, 8.38 44.04, 5.45 40.1 C2.52 36.16, 0.32 29.48, 0.11 24.34 C-0.1 19.19, 1.47 13.17, 4.19 9.24 C6.9 5.3, 14.32 2.11, 16.41 0.72 C18.5 -0.68, 16.44 0.4, 16.73 0.86" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(332.73442551860205 128.79502448592956) rotate(0 7.1199951171875 12.5)"><text x="7.1199951171875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2</text></g><g stroke-linecap="round" transform="translate(159.38903045654297 323.484375) rotate(0 45.392578125 20.203125)"><path d="M10.1 0 C34.31 2.96, 65.35 -1.33, 80.68 0 C86.35 2.56, 88.83 2.39, 90.79 10.1 C92.43 14.66, 93.87 16.67, 90.79 30.3 C90.16 35, 85.78 36.92, 80.68 40.41 C63.51 39.14, 52.93 38.74, 10.1 40.41 C3.65 42.32, -1.32 38.87, 0 30.3 C-3.42 25.82, 3.22 20.3, 0 10.1 C3.47 3.65, 4.22 -1.57, 10.1 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M10.1 0 C23.26 -1.93, 40.45 -0.87, 80.68 0 M10.1 0 C36.22 0.02, 63.23 0.69, 80.68 0 M80.68 0 C87.81 0.05, 91.34 5.04, 90.79 10.1 M80.68 0 C88 -0.17, 89.98 2.09, 90.79 10.1 M90.79 10.1 C91.82 13.84, 92.29 23.05, 90.79 30.3 M90.79 10.1 C90.58 17.49, 91.61 24.59, 90.79 30.3 M90.79 30.3 C89.12 36.34, 85.59 40.95, 80.68 40.41 M90.79 30.3 C88.66 35.58, 88.84 40.61, 80.68 40.41 M80.68 40.41 C59.14 39.04, 35.01 42.96, 10.1 40.41 M80.68 40.41 C54.73 40.22, 29.13 40.22, 10.1 40.41 M10.1 40.41 C4.34 40.37, -0.84 35.31, 0 30.3 M10.1 40.41 C1.89 39.27, -2.18 36.95, 0 30.3 M0 30.3 C-1.58 26.85, 1.44 19.79, 0 10.1 M0 30.3 C-0.86 24.47, -0.81 19.06, 0 10.1 M0 10.1 C-1.62 1.99, 4.66 0.4, 10.1 0 M0 10.1 C1.03 4.5, 4.15 1.12, 10.1 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(170.94163513183594 331.1875) rotate(0 33.83997344970703 12.5)"><text x="33.83997344970703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Waiting</text></g><g stroke-linecap="round"><g transform="translate(151.59215545654297 284.515625) rotate(0 368.2265625 -0.4140625)"><path d="M0.72 -0.48 C0.92 -0.38, -120.2 0.06, 2.25 -0.17 C124.69 -0.4, 612.88 -1.83, 735.37 -1.86 M-0.36 -1.77 C-0.4 -1.95, -121.6 -2.06, 1.41 -1.95 C124.42 -1.84, 614.95 -1.58, 737.7 -1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(151.59215545654297 284.515625) rotate(0 368.2265625 -0.4140625)"><path d="M709.48 9.11 C719.75 5.32, 732.63 -0.82, 737.7 -1.09 M709.48 9.11 C715.35 6.58, 722.38 5.43, 737.7 -1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(151.59215545654297 284.515625) rotate(0 368.2265625 -0.4140625)"><path d="M709.53 -11.41 C719.65 -7.2, 732.51 -5.34, 737.7 -1.09 M709.53 -11.41 C715.51 -9.56, 722.53 -6.32, 737.7 -1.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(749.994499206543 242.5703125) rotate(0 22.02997589111328 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Time</text></g><g stroke-linecap="round"><g transform="translate(241.82653045654297 269.671875) rotate(0 0 14.507812500000057)"><path d="M-0.03 -0.24 C-0.02 4.64, 0.48 23.93, 0.54 28.8 M-0.71 0.82 C-0.77 5.83, 0.24 24.6, 0.39 29.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(391.12880059940437 271.389567135009) rotate(0 0 14.507812500000057)"><path d="M-0.47 0.54 C-0.4 5.46, 0.14 24.7, 0.22 29.4 M0.29 0.34 C0.32 5.11, 0 23.83, -0.09 28.64" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(546.8553630994044 268.877848385009) rotate(0 0 14.507812500000057)"><path d="M0.22 -0.49 C0.22 4.3, 0.31 23.54, 0.25 28.51 M-0.34 0.45 C-0.4 5.31, -0.01 24.28, -0.05 28.95" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(698.9881755994044 270.432535885009) rotate(0 0 14.507812500000057)"><path d="M0.1 -0.38 C0.1 4.38, -0.34 23.69, -0.34 28.59 M-0.52 0.62 C-0.31 5.42, 0.67 24.23, 0.72 29.06" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(55.87340545654297 10) rotate(0 40.97996520996094 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g stroke-linecap="round"><g transform="translate(144.74840545654297 22.484375) rotate(0 56.30634646003284 39.21322168085226)"><path d="M-0.35 -0.67 C14.37 3.72, 68.99 12.19, 87.77 25.33 C106.56 38.48, 108.33 69.26, 112.37 78.18" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(144.74840545654297 22.484375) rotate(0 56.30634646003284 39.21322168085226)"><path d="M95.17 53.98 C98.18 60.19, 104.99 65.81, 112.37 78.18" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(144.74840545654297 22.484375) rotate(0 56.30634646003284 39.21322168085226)"><path d="M114.76 48.59 C112.79 56.1, 114.67 63.07, 112.37 78.18" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(100.09215545654297 451.94921875) rotate(0 25.1484375 -54.97172706746335)"><path d="M-1.04 0.66 C7.49 -17.7, 42.74 -91.21, 51.35 -109.63 M0.61 -0.04 C9.06 -18.82, 42.72 -93.51, 50.96 -111.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(100.09215545654297 451.94921875) rotate(0 25.1484375 -54.97172706746335)"><path d="M48.68 -81.68 C50.37 -89.25, 50.51 -99.78, 50.96 -111.59 M48.68 -81.68 C49.32 -90.83, 50.33 -100.79, 50.96 -111.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(100.09215545654297 451.94921875) rotate(0 25.1484375 -54.97172706746335)"><path d="M29.98 -90.14 C37.55 -94.9, 43.53 -102.79, 50.96 -111.59 M29.98 -90.14 C36.32 -96.75, 43.08 -104.11, 50.96 -111.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(13.865592956542969 329.46875) rotate(0 30.84996795654297 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g transform="translate(10 439.16015625) rotate(0 27.049972534179688 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g mask="url(#mask-K78xx3i0s5qzY4BfhgbhZ)" stroke-linecap="round"><g transform="translate(256.57262420654297 337.95309737919183) rotate(0 34.76953125 64.33204506040408)"><path d="M-0.01 0.78 C11.71 22.22, 58.78 106.45, 70.42 127.74 M-1.48 0.14 C10.16 21.79, 58.16 107.19, 69.93 128.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(256.57262420654297 337.95309737919183) rotate(0 34.76953125 64.33204506040408)"><path d="M47.29 109.11 C55.34 116.59, 59.42 121.54, 69.93 128.79 M47.29 109.11 C54.12 115.5, 60.72 120.32, 69.93 128.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(256.57262420654297 337.95309737919183) rotate(0 34.76953125 64.33204506040408)"><path d="M65.24 99.16 C67.73 109.67, 66.33 117.66, 69.93 128.79 M65.24 99.16 C66.9 108.3, 68.36 115.97, 69.93 128.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-K78xx3i0s5qzY4BfhgbhZ"><rect x="0" y="0" fill="#fff" width="426.11168670654297" height="566.6171875"></rect><rect x="286.4641571044922" y="379.7851424395959" fill="#000" width="9.755996704101562" height="45" opacity="1"></rect></mask><g transform="translate(286.4641571044922 379.7851424395959) rotate(0 4.576736038522824 22.63295370368286)"><text x="4.877998352050781" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1</text></g><g stroke-linecap="round"><g transform="translate(325.90465545654297 467.109375) rotate(0 37.302734375 -63.716796875)"><path d="M-1.2 -0.02 C11.43 -21.55, 62.32 -106.61, 74.81 -128.02 M0.38 -1.08 C12.95 -21.94, 61.33 -105.68, 73.98 -126.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(325.90465545654297 467.109375) rotate(0 37.302734375 -63.716796875)"><path d="M68.55 -97.29 C69.42 -103.36, 69.68 -111.59, 73.98 -126.79 M68.55 -97.29 C69.81 -104.11, 70.62 -109.84, 73.98 -126.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(325.90465545654297 467.109375) rotate(0 37.302734375 -63.716796875)"><path d="M50.85 -107.68 C55.71 -111.3, 59.85 -117.24, 73.98 -126.79 M50.85 -107.68 C55.84 -112.15, 60.36 -115.7, 73.98 -126.79" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(405.63903045654297 320.0625) rotate(0 1.728515625 21.0078125)"><path d="M0.86 0 C1.43 0, 1.68 -0.01, 2.59 0 C3.93 -1.24, 1.81 1.62, 3.46 0.86 C1.34 12.84, 1.84 26.64, 3.46 41.15 C0.98 40.26, 4.68 40.81, 2.59 42.02 C1.93 42.08, 1.42 42.18, 0.86 42.02 C0.75 44.31, -1.92 40.88, 0 41.15 C-1.89 29.11, 0.24 21.34, 0 0.86 C1.91 -0.13, -0.43 -0.22, 0.86 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M0.86 0 C1.5 0.05, 2.1 0.05, 2.59 0 M0.86 0 C1.51 -0.01, 2.24 0.01, 2.59 0 M2.59 0 C3.89 0.76, 2.59 0.23, 3.46 0.86 M2.59 0 C3.67 -0.05, 3.68 0.29, 3.46 0.86 M3.46 0.86 C3.75 15.77, 2.71 30.56, 3.46 41.15 M3.46 0.86 C3.04 11.73, 3.68 23.35, 3.46 41.15 M3.46 41.15 C3.43 42.15, 2.43 42.35, 2.59 42.02 M3.46 41.15 C2.4 41.91, 3.16 41.54, 2.59 42.02 M2.59 42.02 C2.1 41.98, 1.67 42.06, 0.86 42.02 M2.59 42.02 C2.22 42, 1.82 42.05, 0.86 42.02 M0.86 42.02 C0.16 42.3, -0.76 40.96, 0 41.15 M0.86 42.02 C-0.21 43.04, -0.95 40.72, 0 41.15 M0 41.15 C0.22 25.39, -0.05 9.59, 0 0.86 M0 41.15 C0.09 30, 0.08 18.28, 0 0.86 M0 0.86 C-0.13 1, -0.56 -0.79, 0.86 0 M0 0.86 C0.23 1.22, 1.33 0.31, 0.86 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g mask="url(#mask-wD9ToLqla1phL2u8eoy8p)" stroke-linecap="round"><g transform="translate(417.07653045654297 342.90625) rotate(0 36.28125 61.431640625)"><path d="M-0.07 -0.6 C11.95 19.96, 59.58 102.61, 71.7 123.14 M-1.57 1.69 C10.87 21.9, 61.7 100.82, 73.97 121.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(417.07653045654297 342.90625) rotate(0 36.28125 61.431640625)"><path d="M50.31 102.71 C55.53 106.17, 63.25 112.72, 73.97 121.16 M50.31 102.71 C56.52 107.01, 63.59 112.96, 73.97 121.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(417.07653045654297 342.90625) rotate(0 36.28125 61.431640625)"><path d="M67.71 91.82 C68.3 98.16, 71.42 107.58, 73.97 121.16 M67.71 91.82 C69.09 99.11, 71.37 108.06, 73.97 121.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-wD9ToLqla1phL2u8eoy8p"><rect x="0" y="0" fill="#fff" width="589.639030456543" height="565.76953125"></rect><rect x="440.54178619384766" y="381.837890625" fill="#000" width="25.631988525390625" height="45" opacity="1"></rect></mask><g transform="translate(440.54178619384766 381.837890625) rotate(0 12.732665894348202 22.336341549083556)"><text x="12.815994262695312" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2</text></g><g stroke-linecap="round"><g transform="translate(491.26403045654297 462.921875) rotate(0 30.925781249999886 -63.47467844328844)"><path d="M-0.98 0.83 C9.19 -19.97, 51.24 -104.33, 61.66 -125.79 M0.71 0.21 C10.65 -20.8, 50.63 -106.07, 60.62 -127.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(491.26403045654297 462.921875) rotate(0 30.925781249999886 -63.47467844328844)"><path d="M57.92 -97.43 C60.51 -108.33, 62.01 -119.12, 60.62 -127.31 M57.92 -97.43 C57.76 -104.13, 58.26 -109.54, 60.62 -127.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(491.26403045654297 462.921875) rotate(0 30.925781249999886 -63.47467844328844)"><path d="M39.35 -106.15 C48.45 -113.8, 56.54 -121.5, 60.62 -127.31 M39.35 -106.15 C43.11 -110.96, 47.57 -114.51, 60.62 -127.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(560.224967956543 327.2109375) rotate(0 173.380859375 20.203125)"><path d="M10.1 0 C105.25 -4.44, 200.96 -2.35, 336.66 0 C343.36 -0.68, 349.99 0.99, 346.76 10.1 C349.23 18.46, 349.38 21.88, 346.76 30.3 C343.67 34.19, 346.26 40.3, 336.66 40.41 C206.97 37.99, 75.73 35.31, 10.1 40.41 C1.58 39.85, 2.18 35, 0 30.3 C-2.47 26.7, 0.23 23.32, 0 10.1 C3.24 2.67, 3.28 -2.71, 10.1 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M10.1 0 C105.75 2.85, 201.56 2.64, 336.66 0 M10.1 0 C77.61 0.66, 145.64 0.77, 336.66 0 M336.66 0 C341.97 0.83, 345.14 3.95, 346.76 10.1 M336.66 0 C345.3 -1.63, 347.58 3.81, 346.76 10.1 M346.76 10.1 C347.41 15.36, 346.39 21.62, 346.76 30.3 M346.76 10.1 C346.92 18.19, 347.46 25.88, 346.76 30.3 M346.76 30.3 C346.25 36.28, 341.88 41.92, 336.66 40.41 M346.76 30.3 C347.65 35.36, 343.17 38.47, 336.66 40.41 M336.66 40.41 C253.17 41.24, 170.06 41.61, 10.1 40.41 M336.66 40.41 C221.9 39.46, 106.39 39.54, 10.1 40.41 M10.1 40.41 C1.57 39.93, 0.56 35.41, 0 30.3 M10.1 40.41 C3.56 41.42, -1.06 38.23, 0 30.3 M0 30.3 C-1.85 22.56, 1.08 15.77, 0 10.1 M0 30.3 C-0.34 25.22, -0.13 18.35, 0 10.1 M0 10.1 C1.63 4.91, 1.53 1.23, 10.1 0 M0 10.1 C-0.18 2.31, 1.97 0.69, 10.1 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(699.7658538818359 334.9140625) rotate(0 33.83997344970703 12.5)"><text x="33.83997344970703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Waiting</text></g><g stroke-linecap="round"><g transform="translate(253.18981170654297 229.9765625) rotate(0 5.684341886080802e-14 13.47265625)"><path d="M-0.1 -0.5 C-0.03 4.06, 0.19 22.76, 0.27 27.32 M-0.81 0.43 C-0.78 4.84, -0.19 22.05, -0.03 26.54" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(325.66303695999534 227.8511328218039) rotate(0 5.684341886080802e-14 13.472656250000028)"><path d="M0.12 -0.45 C-0.03 3.91, -0.47 22.06, -0.49 26.58 M-0.48 0.5 C-0.5 4.89, 0.47 22.65, 0.49 27.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(254.59215545654297 243.328125) rotate(0 35.166015625 -0.193359375)"><path d="M-0.19 -0.26 C11.5 -0.45, 58.65 0.14, 70.32 0.05 M-1.75 -1.45 C9.76 -1.5, 57.61 -2.14, 69.37 -1.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(99.91637420654297 192.7421875) rotate(0 71.064453125 24.98046875)"><path d="M0.99 1.19 C3.53 5.71, -7.69 19.66, 15.94 27.82 C39.57 35.97, 121.82 46.24, 142.79 50.1" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(99.91637420654297 192.7421875) rotate(0 71.064453125 24.98046875)"><path d="M113.36 55.94 C125.84 54.96, 132.38 52.63, 142.79 50.1" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(99.91637420654297 192.7421875) rotate(0 71.064453125 24.98046875)"><path d="M116.5 35.65 C127.97 41.95, 133.4 46.87, 142.79 50.1" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(22.43590545654297 131.1953125) rotate(0 70.5799331665039 25)"><text x="70.5799331665039" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Latency for 1 </text><text x="70.5799331665039" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to be received</text></g><g stroke-linecap="round"><g transform="translate(338.06260289297177 182.58026234518036) rotate(0 5.684341886080802e-14 13.47265625)"><path d="M-0.3 0.42 C-0.4 4.85, -0.51 22.67, -0.41 27.14 M0.55 0.16 C0.6 4.66, 0.69 21.92, 0.61 26.27" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(483.02883985159065 180.66062850269725) rotate(0 5.684341886080802e-14 13.47265625)"><path d="M-0.49 -0.42 C-0.43 4.1, 0.19 22.41, 0.22 26.99 M0.26 0.56 C0.28 5.18, 0.08 23.18, -0.1 27.71" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(337.24840545654297 197.890625) rotate(0 71.80078125 -1.23828125)"><path d="M-1.09 -0.8 C22.94 -1, 119.01 -2.21, 143.17 -2.31 M0.54 1.4 C24.46 1.5, 118.21 0.08, 142 -0.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(550.623405456543 118.046875) rotate(0 70.5799331665039 25)"><text x="70.5799331665039" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Latency for 2</text><text x="70.5799331665039" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to be received</text></g><g stroke-linecap="round"><g transform="translate(614.670280456543 176.046875) rotate(0 -55.3515625 10.861328125)"><path d="M0.48 -0.99 C-3.16 1.98, -2.84 14.95, -21.25 18.78 C-39.67 22.62, -94.99 21.32, -110.01 22" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(614.670280456543 176.046875) rotate(0 -55.3515625 10.861328125)"><path d="M-81.94 11.4 C-93.32 15.24, -100.77 20.09, -110.01 22" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(614.670280456543 176.046875) rotate(0 -55.3515625 10.861328125)"><path d="M-81.69 31.92 C-93.33 28.58, -100.87 26.26, -110.01 22" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(194.10778045654297 518.1875) rotate(0 -29.638671875 -54.205078125)"><path d="M-0.94 -0.97 C-7.64 -8.16, -31.26 -25.16, -40.8 -42.97 C-50.34 -60.77, -55.09 -96.89, -58.18 -107.81" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(194.10778045654297 518.1875) rotate(0 -29.638671875 -54.205078125)"><path d="M-42.23 -82.39 C-47.87 -90.58, -48.98 -93.37, -58.18 -107.81" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(194.10778045654297 518.1875) rotate(0 -29.638671875 -54.205078125)"><path d="M-62.3 -78.09 C-62.94 -87.2, -59.03 -91.06, -58.18 -107.81" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(172.70657348632812 521.125) rotate(0 45.369956970214844 12.5)"><text x="45.369956970214844" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Requests</text></g><g stroke-linecap="round"><g transform="translate(414.6384032264922 540.078125) rotate(0 2.299141740025391 -58.44140625)"><path d="M-0.99 0.52 C-0.21 -19.18, 4.01 -98.45, 5.06 -118.07" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(414.6384032264922 540.078125) rotate(0 2.299141740025391 -58.44140625)"><path d="M13.81 -89.37 C11.74 -98.24, 5.98 -107.37, 5.06 -118.07" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(414.6384032264922 540.078125) rotate(0 2.299141740025391 -58.44140625)"><path d="M-6.68 -90.46 C-1.92 -98.8, -0.85 -107.56, 5.06 -118.07" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(368.3406448364258 552.859375) rotate(0 49.14994812011719 12.5)"><text x="49.14994812011719" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Responses</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Long Polling Latency</span></div></div></div></div><blockquote>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><em>Assume the latency between the client and server is 100ms.</em></div>
</blockquote><blockquote>
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><em>If we have 2 updates which occur within 10ms of each other, with long polling we'll receive the first update 100ms after it occurred (100ms of network latency) but the second update may be up to 290ms after it occurred (90ms for the first response to finish returning, 100ms for the second request to be made, and another 100ms to get the response).</em></div>
</blockquote><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-1">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Builds on standard HTTP and works everywhere HTTP works.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Easy to implement.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">No special infrastructure needed.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Stateless server-side.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-1">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Higher latency than alternatives.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More HTTP overhead.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Can be resource-intensive with many clients.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Not suitable for frequent updates due to the issues mentioned above.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Makes monitoring more painful since requests can hang around for a long time.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Browsers limit the number of concurrent connections per domain, meaning you may only be able to have a few long-polling connections per domain.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-long-polling">When to Use Long Polling</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Long polling is a great solution for near real-time updates with a simple implementation. It's a good choice when updates are infrequent and a simple solution is preferred. If the latency trade-off of a simple polling solution is at all an issue, long-polling is an obvious upgrade with minimal additional complexity.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Long Polling is a great solution for applications where a long async process is running but you want to know when it finishes, as soon as it finishes - like is often the case in payment processing. We'll long-poll for the payment status before showing the user a success page.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-1">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Because long-polling utilizes the existing HTTP infrastructure, there's not a bunch of extra infrastructure you're going to need to talk through. Even though the polling is "long", you still do need to be specific about the polling frequency. Keep in mind that each hop in your infrastructure needs to be aware of these lengthy requests: you don't want your load balancer hanging up on the client after 30 seconds when your long-polling server is happy to keep the connection open for 60 (15-30s is a pretty common polling interval that minimizes the fuss here).</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="server-sent-events-sse-the-efficient-one-way-street">Server-Sent Events (SSE): The Efficient One-Way Street</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">SSE is an extension on long-polling that allows the server to send a stream of data to the client.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Normally HTTP responses have a header like <span class="MuiBox-root mui-1vu004u">Content-Length</span> which tells the client how much data to expect. SSE instead uses a special header <span class="MuiBox-root mui-1vu004u">Transfer-Encoding: chunked</span> which tells the client that the response is a series of chunks - we don't know how many there are or how big they are until we send them. This allows us to move from a single, atomic request/response to a more granular "stream" of data.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">With SSE, instead of sending a full response once data becomes available, the server sends a chunk of data and then keeps the request open to send more data as needed. SSE is perfect for scenarios where servers need to push data to clients, but clients don't need to send data back frequently.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In our chat app, we would open up a request to stream messages and then each new message would be sent as a chunk to the client.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="how-sse-works">How SSE Works</h5><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Client establishes SSE connection</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Server keeps connection open</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Server sends messages when data changes or updates happen</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Client receives updates in real-time</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Modern browsers have built-in support for SSE through the <span class="MuiBox-root mui-1vu004u">EventSource</span> object, making the client-side implementation straightforward.</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Client-side</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> eventSource </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">new</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">EventSource</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'/api/updates'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>eventSource</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method-variable function-variable method property-access" style="color: rgb(64, 120, 242);">onmessage</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">event</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> data </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token known-class-name" style="color: rgb(183, 107, 1);">JSON</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">parse</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>event</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token property-access">data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">updateUI</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Server-side (Node.js/Express example)</span><span>
</span><span>app</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">get</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'/api/updates'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">req</span><span class="token parameter" style="color: rgb(56, 58, 66);">,</span><span class="token parameter"> res</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  res</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">setHeader</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'Content-Type'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'text/event-stream'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  res</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">setHeader</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'Cache-Control'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'no-cache'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  res</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">setHeader</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'Connection'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(80, 161, 79);">'keep-alive'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> </span><span class="token function-variable" style="color: rgb(64, 120, 242);">sendUpdate</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    res</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">write</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token template-string template-punctuation" style="color: rgb(80, 161, 79);">`</span><span class="token template-string" style="color: rgb(80, 161, 79);">data: </span><span class="token template-string interpolation" style="color: rgb(56, 58, 66);">${</span><span class="token template-string interpolation known-class-name" style="color: rgb(183, 107, 1);">JSON</span><span class="token template-string interpolation" style="color: rgb(56, 58, 66);">.</span><span class="token template-string interpolation method property-access" style="color: rgb(64, 120, 242);">stringify</span><span class="token template-string interpolation" style="color: rgb(56, 58, 66);">(</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation" style="color: rgb(56, 58, 66);">)</span><span class="token template-string interpolation" style="color: rgb(56, 58, 66);">}</span><span class="token template-string" style="color: rgb(80, 161, 79);">\n\n</span><span class="token template-string template-punctuation" style="color: rgb(80, 161, 79);">`</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Send updates when data changes</span><span>
</span><span>  dataSource</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">on</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'update'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> sendUpdate</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Clean up on client disconnect</span><span>
</span><span>  req</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">on</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'close'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    dataSource</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">off</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'update'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> sendUpdate</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-2">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Built into browsers.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Automatic reconnection.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Works over HTTP.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More efficient than long polling due to less connection initiation/teardown.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Simple to implement.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-2">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">One-way communication only.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Limited browser support (not an issue for modern browsers).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Some proxies and networking equipment don't support streaming. Nasty to debug!</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Browsers limit the number of concurrent connections per domain, meaning you may only be able to have a few SSE connections per domain.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Makes monitoring more painful since requests can hang around for a long time.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-sse">When to Use SSE</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">SSE is a great upgrade to long-polling because it eliminates the issues around high-frequency updates while still building on top of standard HTTP. That said, it comes with lesser overall support because you'll need both browsers and and/all infra between the client and server to support streaming responses.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">A very popular use-case for SSE today is AI chat apps which frequently involve the need to stream new tokens (words) to the user as they are generated to keep the UI responsive.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">An example of an infra gap is that many proxies and load balancers don't support streaming responses. In these cases, the proxy will try to buffer the response until it completes - which effectively blocks our stream in an annoying, opaque way that is hard to debug! <sup><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" id="user-content-fnref-sse" data-footnote-ref="true" aria-describedby="footnote-label" href="#user-content-fn-sse" target="_self" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">2</a></sup></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">As an aside: most interviewers will not be familiar with the <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://dev.to/miketalbot/server-sent-events-are-still-not-production-ready-after-a-decade-a-lesson-for-me-a-warning-for-you-2gie" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">infrastructure considerations associated with SSE</a> and aren't going to ask you detailed questions about them. But if the role you're interviewing for is very frontend-centric be prepared in case they expect you to know your stuff!</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-2">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">SSE rides on existing HTTP infrastructure, so there's not a lot of extra infrastructure you'll need to talk through. You also don't have a polling interval to negotiate or tune.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Most SSE connections won't be super-long-lived (e.g. 30-60s is pretty typical), so if you need to send messages for a longer period you'll need to talk about how clients re-establish connections and how they deal with the gaps in between. The <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://html.spec.whatwg.org/multipage/server-sent-events.html" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">SSE standard</a> includes a "last event ID" which is intended to cover this gap, and the <span class="MuiBox-root mui-1vu004u">EventSource</span> object in browsers explicitly handles this reconnection logic. If a client loses its connection, it can reconnect and provide the last event ID it received. The server can then use that ID to send all the events that occurred while the client was disconnected.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="websocket-the-full-duplex-champion">WebSocket: The Full-Duplex Champion</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">WebSocket is the go-to choice for true bi-directional communication between client and server. If you have high frequency writes <em>and</em> reads, WebSocket is the champ.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="how-websocket-works">How WebSocket Works</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Websocket builds on HTTP through an "upgrade" protocol, which allows an existing TCP connection to change L7 protocols. This is super convenient because it means you can utilize some of the existing HTTP session information (e.g. cookies, headers, etc.) to your advantage.</div><div class="my-6"><div class="MuiBox-root mui-o9fqh4"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Just because clients can upgrade from HTTP to WebSocket doesn't mean that the infrastructure will support it. Every piece of infrastructure between the client and server will need to support WebSocket connections.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Once a connection is established, both client and server can send "messages" to each other which are effectively opaque binary blobs. You can shove strings, JSON, Protobufs, or anything else in there. Think of WebSockets like a TCP connection with some niceties that make establishing the connection easier, especially for browsers.</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Client initiates WebSocket handshake over HTTP</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Connection upgrades to WebSocket protocol</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Both client and server can send messages</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Connection stays open until explicitly closed</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For our chat app, we'd connect to a WebSocket endpoint over HTTP, sharing our authentication token via cookies. The connection would get upgraded to a WebSocket connection and then we'd be able to receive messages back to the client over the connection as they happen. Bonus: we'd also be able to send messages to other users in the chat room!</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Client-side</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> ws </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">new</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">WebSocket</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'ws://api.example.com/socket'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>ws</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method-variable function-variable method property-access" style="color: rgb(64, 120, 242);">onmessage</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">event</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> data </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token known-class-name" style="color: rgb(183, 107, 1);">JSON</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">parse</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>event</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token property-access">data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">handleUpdate</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>ws</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method-variable function-variable method property-access" style="color: rgb(64, 120, 242);">onclose</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Implement reconnection logic</span><span>
</span><span>  </span><span class="token" style="color: rgb(64, 120, 242);">setTimeout</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>connectWebSocket</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">1000</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span></span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Server-side (Node.js/ws example)</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> </span><span class="token maybe-class-name">WebSocket</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">require</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'ws'</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> wss </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">new</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">WebSocket</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token" style="color: rgb(183, 107, 1);">Server</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">{</span><span> </span><span class="token literal-property" style="color: rgb(228, 86, 73);">port</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">8080</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>wss</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">on</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'connection'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">ws</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  ws</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">on</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'message'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">message</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Handle incoming messages</span><span>
</span><span>    </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> data </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token known-class-name" style="color: rgb(183, 107, 1);">JSON</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">parse</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>message</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>    </span><span class="token" style="color: rgb(64, 120, 242);">processMessage</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Send updates to client</span><span>
</span><span>  dataSource</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">on</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(80, 161, 79);">'update'</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    ws</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">send</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token known-class-name" style="color: rgb(183, 107, 1);">JSON</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">stringify</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>data</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="extra-challenges">Extra Challenges</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Because the Websocket is a <em>persistent connection</em>, we need our infrastructure to support it. Some L7 load balancers support websockets, but support is generally spotty (remember that L7 load balancers aren't guaranteeing we're using the same TCP connection for each incoming request). L4 load balancers will support websockets natively since the same TCP connection is used for each request.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When we have long-running connections we have another problem: deployments. When servers are redeployed, we either need to sever all old connections and have them reconnect or have the new servers take over and keep the connections alive. Generally speaking you should prefer the former since it's simpler, but it does have some ramifications on how "persistent" you expect the connection to be. You also need to be able to handle situations where a client needs to reconnect and may have missed updates while they were disconnected.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Finally, balancing load across websocket servers can be more complex. If the connections are truly long-running, we have to "stick with" each allocation decision we made. If we have a load balancer that wants to send a new request to a different server, it can't do that if it would break an existing websocket connection.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Because of all the issues associated with <em>stateful</em> connections, many architectures will terminate WebSockets into a WebSocket service early in their infrastructure. This service can then handle the connection management and scaling concerns and allows the rest of the system to remain <em>stateless</em>. The WebSocket service is also less likely to change meaning it requires less deployments which churn connections.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 805.037109375 394.86411550045017">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="805.037109375" height="394.86411550045017" fill="#ffffff"></rect><g stroke-linecap="round"><g transform="translate(297.46875 9.413930117338907) rotate(0 -1.296875 187.88671875)"><path d="M-0.84 0.59 C-1.43 63.08, -3.5 312.84, -3.61 375.45" stroke="#1e1e1e" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(10 111.69518011733891) rotate(0 69.46484375 92.4453125)"><path d="M32 0 C56.07 1.58, 82.34 0.41, 106.93 0 M32 0 C50.03 0.92, 66.7 -0.06, 106.93 0 M106.93 0 C129.72 1.71, 139.68 9.83, 138.93 32 M106.93 0 C127.7 1.58, 140.17 12.56, 138.93 32 M138.93 32 C139.15 72.29, 138.8 109.06, 138.93 152.89 M138.93 32 C138.78 58.15, 139.1 85.42, 138.93 152.89 M138.93 152.89 C138.67 172.53, 129.57 184.64, 106.93 184.89 M138.93 152.89 C137.65 174.24, 126.94 186.41, 106.93 184.89 M106.93 184.89 C90.99 185.75, 74.87 185.61, 32 184.89 M106.93 184.89 C88.12 185.63, 69.39 184.64, 32 184.89 M32 184.89 C10.85 184.56, 0.24 174.55, 0 152.89 M32 184.89 C8.41 182.62, 1.55 173.66, 0 152.89 M0 152.89 C-1.58 119.73, -1.36 81.1, 0 32 M0 152.89 C-1.03 113.99, -1.82 73.15, 0 32 M0 32 C1.77 9.71, 10.75 -0.96, 32 0 M0 32 C1.36 8.71, 11.36 -0.32, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(57.12486267089844 191.6404926173389) rotate(0 22.339981079101562 12.5)"><text x="22.339981079101562" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User</text></g><g stroke-linecap="round" transform="translate(233.09375 117.96080511733891) rotate(0 64.90234375 89.08984375)"><path d="M32 0 C42.2 1.82, 58.93 -2.72, 97.8 0 C119.72 1.1, 126.98 8.24, 129.8 32 C134.25 63.32, 130.17 100.45, 129.8 146.18 C131.86 168.24, 118.58 179.27, 97.8 178.18 C78 176.94, 54.05 182.14, 32 178.18 C10.55 177.3, -1.36 167.96, 0 146.18 C1.15 103.24, -3.49 62.77, 0 32 C1.26 7.11, 7.26 2.59, 32 0" stroke="none" stroke-width="0" fill="#ffffff"></path><path d="M32 0 C45.33 -1, 59.02 -2.05, 97.8 0 M32 0 C58.29 -0.12, 84.28 0.08, 97.8 0 M97.8 0 C118.03 -0.96, 129.13 11.17, 129.8 32 M97.8 0 C117.36 0.14, 129.53 9.22, 129.8 32 M129.8 32 C127.73 77.03, 129.63 123.74, 129.8 146.18 M129.8 32 C131.36 69.35, 131.54 107.16, 129.8 146.18 M129.8 146.18 C128.35 165.69, 117.63 176.33, 97.8 178.18 M129.8 146.18 C128.18 167.56, 120.51 177.86, 97.8 178.18 M97.8 178.18 C81.35 177.36, 63.15 177, 32 178.18 M97.8 178.18 C82.01 177.21, 65.35 177.26, 32 178.18 M32 178.18 C12.61 179.33, 0.44 165.79, 0 146.18 M32 178.18 C11.02 178.85, 1.38 165.92, 0 146.18 M0 146.18 C-1.16 111.28, 1.99 75.01, 0 32 M0 146.18 C0.78 109.05, -0.28 72.4, 0 32 M0 32 C-0.84 10.87, 10.32 -0.88, 32 0 M0 32 C0.77 12.81, 12.42 1.46, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(251.71611785888672 182.0506488673389) rotate(0 46.27997589111328 25)"><text x="46.27997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">L4 Load </text><text x="46.27997589111328" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Balancer</text></g><g stroke-linecap="round" transform="translate(454.33203125 119.07408636733891) rotate(0 61.236328125 83.09375)"><path d="M30.62 0 C44.82 1.79, 62.9 -1.24, 91.85 0 M30.62 0 C50.39 0.46, 68.42 -0.69, 91.85 0 M91.85 0 C114.04 -1.46, 121.55 12.18, 122.47 30.62 M91.85 0 C114.49 1.49, 123.97 12.35, 122.47 30.62 M122.47 30.62 C124.11 54.51, 123.42 72.82, 122.47 135.57 M122.47 30.62 C122.95 65.16, 122.94 100.48, 122.47 135.57 M122.47 135.57 C123.16 154.09, 112.77 167.49, 91.85 166.19 M122.47 135.57 C121.12 154.19, 110.89 168.24, 91.85 166.19 M91.85 166.19 C73.21 167.37, 51.1 168, 30.62 166.19 M91.85 166.19 C71.85 166.85, 50.78 166.26, 30.62 166.19 M30.62 166.19 C9.94 164.53, -0.07 155.16, 0 135.57 M30.62 166.19 C9.61 165.99, 1.53 158.07, 0 135.57 M0 135.57 C0.5 105.07, 1.1 69.2, 0 30.62 M0 135.57 C-0.99 96.18, -0.82 57.59, 0 30.62 M0 30.62 C-0.61 11.14, 10.16 1.74, 30.62 0 M0 30.62 C0.57 8.07, 9.48 -0.78, 30.62 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(469.634765625 135.8006488673389) rotate(0 61.236328125 83.09375)"><path d="M30.62 0 C53.33 2.37, 80.77 1.31, 91.85 0 M30.62 0 C47.4 0.3, 64.47 0.45, 91.85 0 M91.85 0 C111.89 -0.99, 124.19 10.02, 122.47 30.62 M91.85 0 C114.4 -2.1, 122.58 12.04, 122.47 30.62 M122.47 30.62 C121.71 62.07, 121.37 91.78, 122.47 135.57 M122.47 30.62 C121.88 67.62, 122.9 102.74, 122.47 135.57 M122.47 135.57 C121.94 155.88, 112.61 164.77, 91.85 166.19 M122.47 135.57 C120.83 153.98, 111.01 167.16, 91.85 166.19 M91.85 166.19 C72.21 165.39, 50.63 165.89, 30.62 166.19 M91.85 166.19 C71.83 165.77, 51.17 165.72, 30.62 166.19 M30.62 166.19 C8.88 164.87, 1.65 156.91, 0 135.57 M30.62 166.19 C8.71 168.38, -1.33 156.36, 0 135.57 M0 135.57 C2.06 100.58, -0.57 68.05, 0 30.62 M0 135.57 C0.39 94.86, 0.58 54.98, 0 30.62 M0 30.62 C0.21 10.53, 9.43 -0.26, 30.62 0 M0 30.62 C-1.95 10.29, 8.33 -0.95, 30.62 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(475.23114013671875 193.8943988673389) rotate(0 55.63995361328125 25)"><text x="55.63995361328125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">WebSocket </text><text x="55.63995361328125" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Service</text></g><g stroke-linecap="round"><g transform="translate(152.890625 200.79526230423863) rotate(0 36.302734375 2.347945188208598)"><path d="M1.01 0.68 C13.15 1.54, 60.03 4.65, 71.89 5.48 M0.08 0 C12.7 0.49, 62.38 3.14, 74.22 3.76" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(152.890625 200.79526230423863) rotate(0 36.302734375 2.347945188208598)"><path d="M29.83 -7.65 C24.67 -6.78, 18.52 -4.51, 1.01 0.68 M29.83 -7.65 C19.28 -3.71, 7.73 -1.42, 1.01 0.68" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(152.890625 200.79526230423863) rotate(0 36.302734375 2.347945188208598)"><path d="M28.44 12.82 C23.54 9.19, 17.68 6.98, 1.01 0.68 M28.44 12.82 C18.61 9.05, 7.58 3.62, 1.01 0.68" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(152.890625 200.79526230423863) rotate(0 36.302734375 2.347945188208598)"><path d="M45.53 12.52 C52.93 9.16, 59.39 7.69, 74.22 3.76 M45.53 12.52 C56.82 10.03, 66.96 5.88, 74.22 3.76" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(152.890625 200.79526230423863) rotate(0 36.302734375 2.347945188208598)"><path d="M46.61 -7.97 C53.84 -6.83, 60.05 -3.81, 74.22 3.76 M46.61 -7.97 C57.31 -2.73, 67.04 0.84, 74.22 3.76" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(371.42187500000006 200.97254996869748) rotate(0 39.07617187499997 -0.4386597417325788)"><path d="M-0.31 0.55 C12.98 0.64, 65.85 -0.13, 78.86 -0.56 M1.74 -0.21 C15 -0.4, 65.77 -2.33, 78.29 -2.52" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(371.42187500000006 200.97254996869748) rotate(0 39.07617187499997 -0.4386597417325788)"><path d="M27.77 -10.03 C22.18 -6.51, 15.39 -5.89, -0.31 0.55 M27.77 -10.03 C22.46 -7.3, 16.38 -6.76, -0.31 0.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(371.42187500000006 200.97254996869748) rotate(0 39.07617187499997 -0.4386597417325788)"><path d="M28 10.49 C22.55 9.33, 15.71 5.27, -0.31 0.55 M28 10.49 C22.64 9.07, 16.51 5.46, -0.31 0.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(371.42187500000006 200.97254996869748) rotate(0 39.07617187499997 -0.4386597417325788)"><path d="M50.39 8.53 C57.77 7.26, 63.74 2.94, 78.29 -2.52 M50.39 8.53 C56.4 7.41, 61.63 3.58, 78.29 -2.52" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(371.42187500000006 200.97254996869748) rotate(0 39.07617187499997 -0.4386597417325788)"><path d="M49.82 -11.98 C57.14 -8.57, 63.24 -8.21, 78.29 -2.52 M49.82 -11.98 C55.94 -8.95, 61.29 -8.63, 78.29 -2.52" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(665.91796875 124.52721136733891) rotate(0 57.896484375 78.3671875)"><path d="M28.95 0 C47.54 1.96, 70.78 -0.5, 86.84 0 M28.95 0 C41.21 -1.13, 52.38 -1.18, 86.84 0 M86.84 0 C104.89 0.11, 115.58 9.17, 115.79 28.95 M86.84 0 C104.2 1.19, 117.24 11.4, 115.79 28.95 M115.79 28.95 C115.16 50.38, 114.78 72.31, 115.79 127.79 M115.79 28.95 C116.78 62.58, 115.79 96.79, 115.79 127.79 M115.79 127.79 C115.95 148.36, 104.46 158.62, 86.84 156.73 M115.79 127.79 C117.59 145.36, 106.18 156.61, 86.84 156.73 M86.84 156.73 C64.71 156.61, 43.01 155.67, 28.95 156.73 M86.84 156.73 C69.44 157.41, 50.61 156.31, 28.95 156.73 M28.95 156.73 C9.1 156.11, -1.21 147.45, 0 127.79 M28.95 156.73 C9.37 154.49, -0.88 146.51, 0 127.79 M0 127.79 C1.45 104.27, -0.05 78.78, 0 28.95 M0 127.79 C-0.84 94.38, 0.47 58.9, 0 28.95 M0 28.95 C0.49 8.85, 7.9 1.16, 28.95 0 M0 28.95 C-1.27 11.33, 11.67 -0.24, 28.95 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(679.244140625 140.2029926173389) rotate(0 57.896484375 78.3671875)"><path d="M28.95 0 C48.78 -0.35, 66.06 0.57, 86.84 0 M28.95 0 C52.58 0.86, 74.38 0.97, 86.84 0 M86.84 0 C107.44 1.38, 116.06 8.5, 115.79 28.95 M86.84 0 C107.62 -1.9, 116.53 9.39, 115.79 28.95 M115.79 28.95 C114.06 51.86, 117.23 77.53, 115.79 127.79 M115.79 28.95 C113.95 65.16, 115.03 103.44, 115.79 127.79 M115.79 127.79 C115.9 148.88, 104.31 157.23, 86.84 156.73 M115.79 127.79 C117.32 146.85, 104.78 158.76, 86.84 156.73 M86.84 156.73 C72.33 156.84, 60.12 159.17, 28.95 156.73 M86.84 156.73 C64.38 156.88, 44.44 156.23, 28.95 156.73 M28.95 156.73 C10.36 156.79, 0.08 145.47, 0 127.79 M28.95 156.73 C9.39 156.09, 1.76 149.18, 0 127.79 M0 127.79 C-1.3 90.91, -0.42 56.38, 0 28.95 M0 127.79 C0.7 89.22, -0.24 52.8, 0 28.95 M0 28.95 C1.37 11.35, 10.82 -0.27, 28.95 0 M0 28.95 C0.59 10, 11.15 1.05, 28.95 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(702.8506546020508 193.5701801173389) rotate(0 34.28997039794922 25)"><text x="34.28997039794922" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Driver </text><text x="34.28997039794922" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Service</text></g><g stroke-linecap="round"><g transform="translate(604.01171875 207.0272113673389) rotate(0 24.494140625 -0.03125)"><path d="M-0.16 0.39 C7.89 0.34, 40.56 -0.32, 48.67 -0.47 M0.76 0.12 C8.95 0.14, 41.61 0.06, 49.74 0.02" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(604.01171875 207.0272113673389) rotate(0 24.494140625 -0.03125)"><path d="M22.71 -8.38 C14.84 -5.69, 4.8 -2.72, -0.16 0.39 M22.71 -8.38 C17.61 -6.86, 12.18 -3.96, -0.16 0.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(604.01171875 207.0272113673389) rotate(0 24.494140625 -0.03125)"><path d="M23 8.38 C15.04 4.77, 4.89 1.46, -0.16 0.39 M23 8.38 C17.87 6.17, 12.36 5.35, -0.16 0.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(604.01171875 207.0272113673389) rotate(0 24.494140625 -0.03125)"><path d="M26.76 8.48 C36.11 4.76, 43.28 1.28, 49.74 0.02 M26.76 8.48 C31.88 6.08, 36.63 5.16, 49.74 0.02" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(604.01171875 207.0272113673389) rotate(0 24.494140625 -0.03125)"><path d="M26.7 -8.28 C36.05 -5.7, 43.25 -2.9, 49.74 0.02 M26.7 -8.28 C31.81 -6.95, 36.58 -4.15, 49.74 0.02" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">WebSocket Reference Architecture</span></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-3">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Full-duplex (read and write) communication.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Lower latency than HTTP due to reduced overhead (e.g. no headers).</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Efficient for frequent messages.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Wide browser support.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-3">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">More complex to implement.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Requires special infrastructure.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Stateful connections, can make load balancing and scaling more complex.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Need to handle reconnection.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-websockets">When to Use WebSockets</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Generally speaking, if you need <strong>high-frequency</strong>, bi-directional communication, you're going to want to use WebSocket. I'm emphasizing high-frequency here because you can always make additional requests/connections for writes: a very common pattern is to have SSE subscriptions for updates and do writes over simple HTTP POST/PUT whenever they occur.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">I often find candidates too eagerly adopting Websockets when they could be using SSE or simple polling instead. Because of the additional complexity and infra lift, you'll want to defer to SSE unless you have a specific need for this bi-directional communication.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-3">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Websockets are a powerful tool, but they do come with a lot of complexity. You'll want to talk through how you'll manage connections and deal with reconnections. You'll also need to consider how your deployment strategy will handle server restarts.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Managing <em>statefulness</em> is a big part of the conversation. Senior/staff candidates will frequently talk about how to minimize the spread of state across their architecture.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There's also a lot to discuss about how to scale WebSocket servers. Load can be uneven which can result in hotspots and failures. Using a "least connections" strategy for the load balancer can help, as well as minimizing the amount of work the WebSocket servers need to do as they process messages. Using the reference architecture above and offloading more intensive processing to other services (which can scale independently) can help.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="webrtc-the-peer-to-peer-solution">WebRTC: The Peer-to-Peer Solution</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Our last option is the most unique. WebRTC enables direct peer-to-peer communication between browsers, perfect for video/audio calls and some data sharing like document editors.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Clients talk to a central "signaling server" which keeps track of which peers are available together with their connection information. Once a client has the connection information for another peer, they can try to establish a direct connection without going through any intermediary servers.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In practice, most clients don't allow inbound connections for security reasons (the exception would be servers which broadcast their availability on specific ports at specific addresses) using devices like NAT (network address translation). So if we stopped there, most peers wouldn't be able to "speak" to each other.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The WebRTC standard includes two methods to work around these restrictions:</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>STUN</strong>: "Session Traversal Utilities for NAT" is a protocol and a set of techniques like "hole punching" which allows peers to establish publically routable addresses and ports. I won't go into details here, but as hacky as it sounds it's a standard way to deal with NAT traversal and it involves repeatedly creating open ports and sharing them via the signaling server with peers.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>TURN</strong>: "Traversal Using Relays around NAT" is effectively a relay service, a way to bounce requests through a central server which can then be routed to the appropriate peer.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1074.7138671875 852.81640625">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="1074.7138671875" height="852.81640625" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(612.0076904296875 238.8125) rotate(0 60.556640625 59.0546875)"><path d="M29.53 0 C42.69 0.75, 56.33 1.3, 91.59 0 M29.53 0 C44.07 1.04, 60.17 0.63, 91.59 0 M91.59 0 C109.89 0.16, 121.22 9.32, 121.11 29.53 M91.59 0 C111.59 1.95, 121.88 10.43, 121.11 29.53 M121.11 29.53 C120.29 51.98, 122.13 72.93, 121.11 88.58 M121.11 29.53 C121.93 52.61, 122.46 75, 121.11 88.58 M121.11 88.58 C121.91 109.28, 109.86 116.31, 91.59 118.11 M121.11 88.58 C123.27 109.86, 110.63 117.97, 91.59 118.11 M91.59 118.11 C75.35 117.19, 60.61 118.67, 29.53 118.11 M91.59 118.11 C75.57 117.81, 60.22 118.93, 29.53 118.11 M29.53 118.11 C8.68 119.39, -0.47 109.15, 0 88.58 M29.53 118.11 C12.07 117.85, 0.99 108.46, 0 88.58 M0 88.58 C-0.07 77.36, 0.17 61.27, 0 29.53 M0 88.58 C-0.96 65.16, 0.12 44.23, 0 29.53 M0 29.53 C0.83 8.6, 11.65 -1.62, 29.53 0 M0 29.53 C0.47 8.18, 10.04 -0.44, 29.53 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(628.4443664550781 272.8671875) rotate(0 44.119964599609375 25)"><text x="44.119964599609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Signaling </text><text x="44.119964599609375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(611.1287841796875 385.48046875) rotate(0 59.56640625 66.759765625)"><path d="M29.78 0 C52.72 -2.13, 75.79 -0.85, 89.35 0 M29.78 0 C49.65 0.12, 70.71 0.62, 89.35 0 M89.35 0 C107.41 1.83, 119.98 10.06, 119.13 29.78 M89.35 0 C108.35 0.14, 118.63 9.07, 119.13 29.78 M119.13 29.78 C118.3 53.01, 118.38 74.89, 119.13 103.74 M119.13 29.78 C119.88 50.61, 118.94 69.84, 119.13 103.74 M119.13 103.74 C117.36 124.31, 108.85 135.05, 89.35 133.52 M119.13 103.74 C117.8 123.65, 107.99 133.08, 89.35 133.52 M89.35 133.52 C74.01 133.57, 57.18 132.44, 29.78 133.52 M89.35 133.52 C67.67 132.64, 45.26 134.43, 29.78 133.52 M29.78 133.52 C11.79 133.98, 0.05 121.9, 0 103.74 M29.78 133.52 C8.43 134.48, 0.77 121.89, 0 103.74 M0 103.74 C2.03 75.62, 1.81 49.33, 0 29.78 M0 103.74 C-1.15 80.89, -0.97 60.6, 0 29.78 M0 29.78 C1.32 11.79, 10.76 0.57, 29.78 0 M0 29.78 C-1.85 9.54, 9.2 2.28, 29.78 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(637.9952087402344 427.240234375) rotate(0 32.699981689453125 25)"><text x="32.699981689453125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">STUN </text><text x="32.699981689453125" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(617.5858154296875 545.708984375) rotate(0 59.56640625 66.759765625)"><path d="M29.78 0 C51.2 -0.31, 73.43 0.68, 89.35 0 M29.78 0 C44.44 -0.59, 59.05 -0.45, 89.35 0 M89.35 0 C107.53 1.7, 121.06 11.11, 119.13 29.78 M89.35 0 C107.65 -0.66, 117.98 10.21, 119.13 29.78 M119.13 29.78 C120.54 55.97, 118.03 80.19, 119.13 103.74 M119.13 29.78 C119.72 49.83, 118.74 69.42, 119.13 103.74 M119.13 103.74 C117.35 122.92, 109.42 131.68, 89.35 133.52 M119.13 103.74 C119.54 123.58, 107.53 131.66, 89.35 133.52 M89.35 133.52 C67.03 132.34, 42.44 132.37, 29.78 133.52 M89.35 133.52 C73.41 133.06, 59.02 133.37, 29.78 133.52 M29.78 133.52 C8.89 134.58, 1.53 122.57, 0 103.74 M29.78 133.52 C10.78 134.72, -0.99 125.12, 0 103.74 M0 103.74 C-1.1 76.46, 1.16 45.42, 0 29.78 M0 103.74 C0.96 77.75, 0.63 52.9, 0 29.78 M0 29.78 C-0.78 9.96, 11.3 -1.93, 29.78 0 M0 29.78 C2.17 10.6, 8.95 1.01, 29.78 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(643.7522354125977 587.46875) rotate(0 33.399986267089844 25)"><text x="33.399986267089844" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">TURN </text><text x="33.399986267089844" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round"><g transform="translate(920.3785939371357 455.1400238681882) rotate(0 -82.74927600115768 44.94089382317776)"><path d="M-0.2 -0.97 C-27.77 13.81, -138.56 73.69, -166.3 88.79" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(920.3785939371357 455.1400238681882) rotate(0 -82.74927600115768 44.94089382317776)"><path d="M-146.4 66.33 C-152.51 70.06, -157.23 74.61, -166.3 88.79" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(920.3785939371357 455.1400238681882) rotate(0 -82.74927600115768 44.94089382317776)"><path d="M-136.62 84.38 C-144.97 84, -151.9 84.45, -166.3 88.79" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(775.0740966796875 390.38671875) rotate(0 144.81988525390625 37.5)"><text x="144.81988525390625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Fallback for clients that</text><text x="144.81988525390625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">can't connect to one another</text><text x="144.81988525390625" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g stroke-linecap="round" transform="translate(284.1912841796875 252.98046875) rotate(0 64.953125 78.3828125)"><path d="M32 0 C54.5 -1.54, 78.95 1.08, 97.91 0 M32 0 C53.95 -0.19, 76.75 0.32, 97.91 0 M97.91 0 C118.43 -0.94, 131.3 10.33, 129.91 32 M97.91 0 C118.29 0.15, 131.7 9.84, 129.91 32 M129.91 32 C132.31 64.07, 132.17 96.74, 129.91 124.77 M129.91 32 C129.44 57.33, 130.48 84.74, 129.91 124.77 M129.91 124.77 C130.06 146.38, 118.83 157.37, 97.91 156.77 M129.91 124.77 C130.96 145.25, 119.99 154.98, 97.91 156.77 M97.91 156.77 C80.26 157.03, 62.88 157.45, 32 156.77 M97.91 156.77 C76.39 156.51, 54.71 157.36, 32 156.77 M32 156.77 C11.28 154.8, 0.04 144.18, 0 124.77 M32 156.77 C10.48 154.91, -1.42 148.16, 0 124.77 M0 124.77 C-0.13 97.09, 0.35 73.15, 0 32 M0 124.77 C-0.44 106.14, -1.02 85.01, 0 32 M0 32 C1.7 11.61, 11.61 -0.47, 32 0 M0 32 C1.66 12.41, 9.46 -0.42, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(310.53443908691406 318.86328125) rotate(0 38.60997009277344 12.5)"><text x="38.60997009277344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client A</text></g><g stroke-linecap="round" transform="translate(279.9686279296875 525.34375) rotate(0 64.953125 78.3828125)"><path d="M32 0 C47.07 1.84, 61.01 -0.6, 97.91 0 M32 0 C53.62 -1.2, 74.33 -0.58, 97.91 0 M97.91 0 C120.72 -1.59, 129.02 8.99, 129.91 32 M97.91 0 C121.41 -0.61, 129.22 8.63, 129.91 32 M129.91 32 C127.47 52.09, 127.55 73.16, 129.91 124.77 M129.91 32 C130.3 60, 129.84 88.07, 129.91 124.77 M129.91 124.77 C131.57 144.66, 121.06 154.82, 97.91 156.77 M129.91 124.77 C129.84 143.93, 119.68 155.88, 97.91 156.77 M97.91 156.77 C76.65 159.05, 52.8 156.99, 32 156.77 M97.91 156.77 C81.13 156.69, 65 157.12, 32 156.77 M32 156.77 C9.14 157.11, -1.59 144.14, 0 124.77 M32 156.77 C11.89 155.99, 0.33 143.91, 0 124.77 M0 124.77 C1.8 96.73, 1.62 72.23, 0 32 M0 124.77 C-0.83 98.19, 0.22 73.87, 0 32 M0 32 C-1.13 9.57, 8.83 -1.01, 32 0 M0 32 C-1.04 9.7, 10.37 -0.07, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(305.6017837524414 591.2265625) rotate(0 39.319969177246094 12.5)"><text x="39.319969177246094" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client B</text></g><g stroke-linecap="round"><g transform="translate(427.0975341796875 299.48046875) rotate(0 81.9921875 6.12109375)"><path d="M0.88 -1.17 C28.35 0.76, 137.78 8.92, 165.05 11.18 M-0.12 0.83 C27.27 2.91, 137.31 10, 164.67 12.16" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(427.0975341796875 299.48046875) rotate(0 81.9921875 6.12109375)"><path d="M29.75 -9.31 C18.59 -4.73, 9.58 -3.04, 0.88 -1.17 M29.75 -9.31 C19.84 -5.83, 10.74 -4.94, 0.88 -1.17" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(427.0975341796875 299.48046875) rotate(0 81.9921875 6.12109375)"><path d="M28.23 11.15 C17.62 9.21, 9.09 4.39, 0.88 -1.17 M28.23 11.15 C18.78 8.19, 10.15 2.64, 0.88 -1.17" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(427.0975341796875 299.48046875) rotate(0 81.9921875 6.12109375)"><path d="M135.82 20.41 C143.08 19.36, 152.44 15.83, 164.67 12.16 M135.82 20.41 C144.07 18.7, 153.12 14.43, 164.67 12.16" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(427.0975341796875 299.48046875) rotate(0 81.9921875 6.12109375)"><path d="M137.27 -0.06 C144 5.41, 152.9 8.4, 164.67 12.16 M137.27 -0.06 C145.08 4.67, 153.68 6.85, 164.67 12.16" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(421.41877376418887 514.2819415451729) rotate(0 87.31500822358944 -76.16245455175482)"><path d="M0.44 0.58 C29.7 -24.63, 146.63 -126.22, 175.71 -151.81 M-0.79 -0.17 C28.39 -25.69, 146.15 -128.35, 175.32 -153.66" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(421.41877376418887 514.2819415451729) rotate(0 87.31500822358944 -76.16245455175482)"><path d="M15 -25.65 C11.27 -15.56, 6.59 -8.66, 0.44 0.58 M15 -25.65 C11.29 -19.52, 7.14 -12.07, 0.44 0.58" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(421.41877376418887 514.2819415451729) rotate(0 87.31500822358944 -76.16245455175482)"><path d="M28.46 -10.16 C20.56 -4.88, 11.66 -2.86, 0.44 0.58 M28.46 -10.16 C21.54 -7.92, 14.07 -4.28, 0.44 0.58" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(421.41877376418887 514.2819415451729) rotate(0 87.31500822358944 -76.16245455175482)"><path d="M160.79 -127.41 C166.44 -133.92, 170.91 -143.52, 175.32 -153.66 M160.79 -127.41 C164.6 -134.05, 167.61 -139.52, 175.32 -153.66" stroke="#e03131" stroke-width="2" fill="none"></path></g><g transform="translate(421.41877376418887 514.2819415451729) rotate(0 87.31500822358944 -76.16245455175482)"><path d="M147.32 -142.89 C157.13 -144.59, 165.84 -149.32, 175.32 -153.66 M147.32 -142.89 C154.34 -145.65, 160.67 -147.3, 175.32 -153.66" stroke="#e03131" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(424.2225341796875 155.77734375) rotate(0 29.517578125 58.376953125)"><path d="M0.33 -0.77 C10.19 18.65, 49.51 96.32, 59.15 116.11" stroke="#e03131" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(424.2225341796875 155.77734375) rotate(0 29.517578125 58.376953125)"><path d="M37.39 95.45 C42.53 101.73, 49.22 106.27, 59.15 116.11" stroke="#e03131" stroke-width="2.5" fill="none"></path></g><g transform="translate(424.2225341796875 155.77734375) rotate(0 29.517578125 58.376953125)"><path d="M55.76 86.3 C55.39 95.36, 56.61 102.63, 59.15 116.11" stroke="#e03131" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(205.8319091796875 87.1640625) rotate(0 136.18988037109375 25)"><text x="136.18988037109375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Connect to Signaling Server,</text><text x="136.18988037109375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Learn About Peers</text></g><g stroke-linecap="round"><g transform="translate(427.0037841796875 347.55859375) rotate(0 81.599609375 49.251953125)"><path d="M0.66 -1.09 C27.54 15.27, 135.04 82.69, 162.29 99.35 M-0.45 0.95 C26.71 17.49, 137.14 81.71, 164.52 97.67" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0037841796875 347.55859375) rotate(0 81.599609375 49.251953125)"><path d="M30.02 5.08 C16.9 1.36, 8.89 2.04, 0.66 -1.09 M30.02 5.08 C20.72 3.55, 10.31 0.77, 0.66 -1.09" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0037841796875 347.55859375) rotate(0 81.599609375 49.251953125)"><path d="M19.18 22.51 C10.04 12.05, 6.18 6.06, 0.66 -1.09 M19.18 22.51 C13.61 15.12, 6.78 6.58, 0.66 -1.09" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0037841796875 347.55859375) rotate(0 81.599609375 49.251953125)"><path d="M135 92.34 C144.52 92.7, 159.06 97.78, 164.52 97.67 M135 92.34 C145.07 94.1, 154.13 95.13, 164.52 97.67" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0037841796875 347.55859375) rotate(0 81.599609375 49.251953125)"><path d="M145.33 74.61 C151.07 81.81, 161.65 93.68, 164.52 97.67 M145.33 74.61 C151.84 82.32, 157.48 89.21, 164.52 97.67" stroke="#1971c2" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(427.0731720647495 579.2861838713287) rotate(0 82.07617187500003 -52.736328125)"><path d="M-0.9 0.45 C26.51 -16.99, 135.79 -87.4, 163.35 -104.95 M0.83 -0.35 C28.72 -18.13, 138.47 -89.05, 165.64 -106.79" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0731720647495 579.2861838713287) rotate(0 82.07617187500003 -52.736328125)"><path d="M17.28 -23.41 C14.18 -19.9, 10.5 -13.06, -0.9 0.45 M17.28 -23.41 C9.86 -14.86, 5.19 -5.97, -0.9 0.45" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0731720647495 579.2861838713287) rotate(0 82.07617187500003 -52.736328125)"><path d="M28.37 -6.14 C22.99 -6.32, 16.99 -3.1, -0.9 0.45 M28.37 -6.14 C17.1 -3.82, 8.49 -1.07, -0.9 0.45" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0731720647495 579.2861838713287) rotate(0 82.07617187500003 -52.736328125)"><path d="M147.58 -82.84 C152.17 -89.05, 156.06 -92.21, 165.64 -106.79 M147.58 -82.84 C153.31 -91, 161.53 -99.12, 165.64 -106.79" stroke="#1971c2" stroke-width="2" fill="none"></path></g><g transform="translate(427.0731720647495 579.2861838713287) rotate(0 82.07617187500003 -52.736328125)"><path d="M136.4 -100.06 C143.29 -102.59, 149.51 -102.15, 165.64 -106.79 M136.4 -100.06 C146.02 -102, 158.21 -103.99, 165.64 -106.79" stroke="#1971c2" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(302.2078170776367 21.5) rotate(0 4.877998352050781 22.5)"><text x="4.877998352050781" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1</text></g><g stroke-linecap="round"><g transform="translate(542.6834716796875 704.6484375) rotate(0 -18.927734375 -80.07421875)"><path d="M-0.21 0.8 C-6.45 -26.07, -31.94 -133.93, -38.39 -160.82" stroke="#1971c2" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(542.6834716796875 704.6484375) rotate(0 -18.927734375 -80.07421875)"><path d="M-21.89 -135.77 C-24.28 -142.21, -30.36 -148.63, -38.39 -160.82" stroke="#1971c2" stroke-width="2.5" fill="none"></path></g><g transform="translate(542.6834716796875 704.6484375) rotate(0 -18.927734375 -80.07421875)"><path d="M-41.85 -131.02 C-39.86 -138.47, -41.54 -145.94, -38.39 -160.82" stroke="#1971c2" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(397.5073547363281 731.15234375) rotate(0 134.51986694335938 25)"><text x="134.51986694335938" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Find Publically </text><text x="134.51986694335938" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Addressable Address/Ports</text></g><g transform="translate(519.8909149169922 797.81640625) rotate(0 12.815994262695312 22.5)"><text x="12.815994262695312" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2</text></g><g stroke-linecap="round"><g transform="translate(616.6912841796875 131.73046875) rotate(0 -32.556640625 68.177734375)"><path d="M1.05 0.01 C-9.87 22.55, -54.91 113.42, -66.06 136.2" stroke="#e03131" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(616.6912841796875 131.73046875) rotate(0 -32.556640625 68.177734375)"><path d="M-62.8 106.38 C-63.38 112.35, -64.46 120.16, -66.06 136.2" stroke="#e03131" stroke-width="2.5" fill="none"></path></g><g transform="translate(616.6912841796875 131.73046875) rotate(0 -32.556640625 68.177734375)"><path d="M-44.4 115.45 C-49.68 119.29, -55.41 124.81, -66.06 136.2" stroke="#e03131" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(503.38108825683594 67.74609375) rotate(0 133.23988342285156 25)"><text x="133.23988342285156" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Share Connection</text><text x="133.23988342285156" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Information Between Peers</text></g><g transform="translate(632.0817260742188 10) rotate(0 12.25799560546875 22.5)"><text x="12.25799560546875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3</text></g><g stroke-linecap="round"><g transform="translate(352.0506591796875 416.85546875) rotate(0 -0.033203125 48.9609375)"><path d="M-0.89 0.54 C-0.99 16.8, -0.59 81.55, -0.31 97.84 M0.84 -0.22 C0.54 16.21, -1.33 82.67, -1.38 99.33" stroke="#2f9e44" stroke-width="2" fill="none"></path></g><g transform="translate(352.0506591796875 416.85546875) rotate(0 -0.033203125 48.9609375)"><path d="M9.49 28.69 C6.99 19.17, 2.61 12.01, -0.89 0.54 M9.49 28.69 C5.78 20.47, 1.91 10.88, -0.89 0.54" stroke="#2f9e44" stroke-width="2" fill="none"></path></g><g transform="translate(352.0506591796875 416.85546875) rotate(0 -0.033203125 48.9609375)"><path d="M-11.03 28.78 C-6.93 19.38, -4.72 12.19, -0.89 0.54 M-11.03 28.78 C-8.05 20.59, -5.24 10.97, -0.89 0.54" stroke="#2f9e44" stroke-width="2" fill="none"></path></g><g transform="translate(352.0506591796875 416.85546875) rotate(0 -0.033203125 48.9609375)"><path d="M-11.15 70.96 C-7.04 79.75, -4.95 90.75, -1.38 99.33 M-11.15 70.96 C-7.96 81.22, -5.26 90.05, -1.38 99.33" stroke="#2f9e44" stroke-width="2" fill="none"></path></g><g transform="translate(352.0506591796875 416.85546875) rotate(0 -0.033203125 48.9609375)"><path d="M9.37 71.32 C6.88 79.84, 2.38 90.73, -1.38 99.33 M9.37 71.32 C5.87 81.41, 1.88 90.12, -1.38 99.33" stroke="#2f9e44" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(10 428.23046875) rotate(0 152.7498779296875 37.5)"><text x="152.7498779296875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#2f9e44" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Connect to Peers, Share Data</text><text x="152.7498779296875" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#2f9e44" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Periodically Refresh Connection</text><text x="152.7498779296875" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#2f9e44" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Information</text></g><g transform="translate(146.1791000366211 367.0703125) rotate(0 11.519996643066406 22.5)"><text x="11.519996643066406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">4</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">WebRTC Setup</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In practice, the signaling server is relatively lightweight and isn't handling much of the bandwidth as the bulk of the traffic is handled by the peer-to-peer connections. But interestingly the signaling server does effectively act as a real-time update system for its clients (so they can find their peers and update their connection info) so it either needs to utilize WebSockets, SSE, or some other approach detailed above.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For our chat app, we'd connect to our signaling server over a WebSocket connection to find all of our peers (others in the chat room). Once we'd identified them and exchanged connection information, we'd be able to establish direct peer-to-peer connections with them. Chat messages would be broadcast by room participants to all of their peers (or, if you want to be extra fancy, bounced between participants until they settle).</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="how-webrtc-works">How WebRTC Works</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Ok, but how does it work?</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Peers discover each other through signaling server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Exchange connection info (ICE candidates)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Establish direct peer connection, using STUN/TURN if needed</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Stream audio/video or send data directly</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Pretty simple, apart from the acronyms and NAT traversal.</div><pre><div class="MuiBox-root mui-xnilmx"><div class="MuiBox-root mui-v2ritd"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-4 h-4  cursor-pointer" aria-label="Copy"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></div><div style="background: rgb(250, 250, 250); color: rgb(56, 58, 66); font-family: &quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 2; hyphens: none; padding: 1em; margin: 0px; overflow: auto; border-radius: 0.375rem; border: none;"><code font-size="18" style="white-space: pre;"><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Simplified WebRTC setup</span><span>
</span><span></span><span class="token" style="color: rgb(166, 38, 164);">async</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">function</span><span> </span><span class="token" style="color: rgb(64, 120, 242);">startCall</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> pc </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token" style="color: rgb(166, 38, 164);">new</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">RTCPeerConnection</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>  
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Get local stream</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> stream </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> </span><span class="token dom" style="color: rgb(64, 120, 242);">navigator</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token property-access">mediaDevices</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">getUserMedia</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    </span><span class="token literal-property" style="color: rgb(228, 86, 73);">video</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">true</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span>
</span><span>    </span><span class="token literal-property" style="color: rgb(228, 86, 73);">audio</span><span class="token" style="color: rgb(64, 120, 242);">:</span><span> </span><span class="token" style="color: rgb(183, 107, 1);">true</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>  
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Add tracks to peer connection</span><span>
</span><span>  stream</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">getTracks</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">forEach</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token parameter">track</span><span> </span><span class="token arrow" style="color: rgb(64, 120, 242);">=&gt;</span><span> </span><span class="token" style="color: rgb(56, 58, 66);">{</span><span>
</span><span>    pc</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">addTrack</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>track</span><span class="token" style="color: rgb(56, 58, 66);">,</span><span> stream</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token" style="color: rgb(56, 58, 66);">}</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>  
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Create and send offer</span><span>
</span><span>  </span><span class="token" style="color: rgb(166, 38, 164);">const</span><span> offer </span><span class="token" style="color: rgb(64, 120, 242);">=</span><span> </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> pc</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">createOffer</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span>  </span><span class="token control-flow" style="color: rgb(166, 38, 164);">await</span><span> pc</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">setLocalDescription</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>offer</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span>  
<span>  </span><span class="token" style="color: rgb(160, 161, 167); font-style: italic;">// Send offer to signaling server</span><span>
</span><span>  signalingServer</span><span class="token" style="color: rgb(56, 58, 66);">.</span><span class="token method property-access" style="color: rgb(64, 120, 242);">send</span><span class="token" style="color: rgb(56, 58, 66);">(</span><span>offer</span><span class="token" style="color: rgb(56, 58, 66);">)</span><span class="token" style="color: rgb(56, 58, 66);">;</span><span>
</span><span></span><span class="token" style="color: rgb(56, 58, 66);">}</span></code></div></div></pre><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-webrtc">When to Use WebRTC</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">WebRTC is the most complex and heavyweight of the options we've discussed. It's overkill for most real-time update use cases, but it's a great tool for scenarios like video/audio calls, screen sharing, and gaming.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The notable exception is that it can be used to reduce server load. If you have a system where clients need to talk to each other frequently, you could use WebRTC to reduce the load on <em>your</em> servers by having clients establish their own connections. <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.canva.dev/blog/engineering/realtime-mouse-pointers/" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Canva took this approach with presence/pointer sharing in their canvas editor</a> and it's a popular approach from collaborative document editing like <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/problem-breakdowns/google-docs" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Google Docs</a> when used in conjunction with CRDTs which are better suited for a peer-to-peer architecture.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-4">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Direct peer communication</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Lower latency</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Reduced server costs</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Native audio/video support</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-4">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex setup (&gt; WebSockets)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Requires signaling server</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">NAT/firewall issues</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Connection setup delay</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-4">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If you're building a WebRTC app in a system design interview, it should be really obvious why you're using it. Either you're trying to do video conferencing or the scale strictly requires you to have clients talk to each other directly.</div><div class="my-6"><div class="MuiBox-root mui-1147lff"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Some interviews will get cute and introduce unrealistic constraints to try to get you to think outside the box, like "the system must run on Raspberry Pi". These <em>might</em> be a case where a peer-to-peer architecture makes sense, but tread carefully.</div></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Having some knowledge of the infra requirements (STUN/TURN, signaling servers, etc.) will give you the flexibility to make the best design decision for your system. You'll also want to speak pretty extensively about the communication patterns between peer clients and any eventual synchronization to a central server (almost all design questions will have some calling home to the mothership to store data or report results).</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="client-update-overview">Client Update Overview</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are a lot of options for delivering events from the server to the client. Being familiar with the trade-offs associated with each will give you the flexibility to make the best design decision for your system. If you're in a hurry, the following flowchart will help you choose the right tool for the job.</div><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If you're not latency sensitive, <strong>simple polling</strong> is a great baseline. You should probably start here unless you have a specific need in your system.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If you don't need bi-directional communication, <strong>SSE</strong> is a great choice. It's lightweight and works well for many use cases. There are some infrastructure considerations to keep in mind, but they're less invasive than with WebSocket and generally interviewers are less familiar with them or less critical if you don't address them.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If you need frequent, bi-directional communication, <strong>WebSocket</strong> is the way to go. It's more complex, but the performance benefits are huge.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Finally, if you need to do audio/video calls, <strong>WebRTC</strong> is the only way to go. In some instances peer-to-peer collaboration can be enhanced with WebRTC, but you're unlikely to see it in a system design interview.</div></li>
</ul><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1023.890625 736.2109375">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="1023.890625" height="736.2109375" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 10) rotate(0 125.103515625 135)"><path d="M157.5 34 C177.51 58.01, 197.51 80.21, 218.71 102 M157.5 34 C172.9 50.15, 187.24 68.06, 218.71 102 M218.71 102 C251.36 134.72, 250.93 137.47, 218.71 170 M218.71 102 C248.71 137.64, 250.59 136.46, 218.71 170 M218.71 170 C196.6 195.03, 174.75 216.22, 157.5 236 M218.71 170 C202.4 187.18, 188.06 202.44, 157.5 236 M157.5 236 C127.83 270.3, 127.22 271.85, 94.5 236 M157.5 236 C127.35 271.11, 126.86 271.19, 94.5 236 M94.5 236 C73.31 216.06, 52.94 192.48, 31.5 170 M94.5 236 C71.73 211.45, 46.58 186.23, 31.5 170 M31.5 170 C1.36 135.27, -1.69 135.21, 31.5 102 M31.5 170 C0.31 135.91, -0.23 134.45, 31.5 102 M31.5 102 C44.24 87.73, 58.31 71.2, 94.5 34 M31.5 102 C50.21 82.16, 68.16 63.01, 94.5 34 M94.5 34 C127.99 1.98, 127.34 1.18, 157.5 34 M94.5 34 C127.91 2.28, 126.87 -0.32, 157.5 34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(88.01181030273438 120) rotate(0 47.039947509765625 25)"><text x="47.039947509765625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Latency </text><text x="47.039947509765625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Sensitive?</text></g><g mask="url(#mask-LvEjC0lJjITeFggg3caQu)" stroke-linecap="round"><g transform="translate(139.41015625 280.8828125) rotate(0 -0.22265625 60.04296875)"><path d="M-0.78 -0.48 C-0.97 19.55, -0.72 98.83, -0.75 119.08 M1.01 -1.78 C0.61 18.47, -1.36 99.93, -1.86 120.08" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(139.41015625 280.8828125) rotate(0 -0.22265625 60.04296875)"><path d="M-11.43 91.65 C-9.36 100.57, -7.08 109.58, -1.86 120.08 M-11.43 91.65 C-8.44 103.23, -4.3 113.48, -1.86 120.08" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(139.41015625 280.8828125) rotate(0 -0.22265625 60.04296875)"><path d="M9.08 92.15 C4.41 100.77, -0.07 109.62, -1.86 120.08 M9.08 92.15 C4.32 103.42, 0.71 113.48, -1.86 120.08" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-LvEjC0lJjITeFggg3caQu"><rect x="0" y="0" fill="#fff" width="239.85546875" height="500.96875"></rect><rect x="127.20751190185547" y="328.42578125" fill="#000" width="23.959976196289062" height="25" opacity="1"></rect></mask><g transform="translate(127.20751190185547 328.42578125) rotate(0 11.774188930513333 11.608379274634672)"><text x="11.979988098144531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">No</text></g><g stroke-linecap="round" transform="translate(43.53125 412.546875) rotate(0 92.2890625 45.0703125)"><path d="M58.28 3.66 C69.69 0.81, 86.32 0.58, 99.78 0.93 C113.24 1.27, 127.55 2.41, 139.03 5.73 C150.52 9.05, 161.41 15.48, 168.7 20.85 C176 26.21, 180.75 31.58, 182.8 37.92 C184.85 44.27, 184.74 52.62, 180.99 58.91 C177.24 65.2, 169.45 70.89, 160.31 75.67 C151.16 80.46, 138.76 85.36, 126.13 87.64 C113.5 89.92, 97.88 89.99, 84.52 89.35 C71.15 88.71, 57.55 87.12, 45.96 83.79 C34.37 80.46, 22.36 74.9, 14.96 69.36 C7.56 63.82, 3.5 56.73, 1.57 50.53 C-0.36 44.34, -0.7 38.32, 3.37 32.17 C7.45 26.03, 14.91 18.81, 26.02 13.67 C37.14 8.52, 60.72 3.55, 70.06 1.3 C79.41 -0.95, 81.51 -0.53, 82.08 0.19 M80.83 -0.9 C93.22 -2.13, 109.7 1.04, 122.19 3.52 C134.68 6, 146.22 9.38, 155.77 13.98 C165.32 18.58, 174.61 25.17, 179.48 31.11 C184.35 37.05, 186.26 43.19, 185.01 49.62 C183.77 56.04, 179.42 63.88, 172.01 69.67 C164.61 75.46, 151.9 80.79, 140.59 84.35 C129.27 87.92, 117.14 90.49, 104.11 91.07 C91.08 91.65, 75 89.98, 62.39 87.84 C49.79 85.69, 38.16 82.7, 28.49 78.21 C18.83 73.72, 9.32 67.25, 4.41 60.89 C-0.5 54.53, -2.5 46.81, -0.97 40.02 C0.56 33.24, 6.29 25.64, 13.58 20.19 C20.86 14.75, 31.26 10.59, 42.74 7.34 C54.22 4.1, 75.78 1.64, 82.46 0.72 C89.14 -0.2, 82.85 1.18, 82.81 1.82" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(103.43212384106107 432.7476639010532) rotate(0 32.629966735839844 25)"><text x="32.629966735839844" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Simple </text><text x="32.629966735839844" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Polling</text></g><g mask="url(#mask-gWrBfE9CR1eD3cWDUd6wa)" stroke-linecap="round"><g transform="translate(224.85208225333076 193.5594637637937) rotate(0 36.12423022166223 19.04693539462764)"><path d="M-0.62 -0.83 C11.47 5.61, 59.54 31.31, 71.51 37.95 M1.26 1.35 C13.82 8.04, 61.79 33.45, 73.84 39.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(224.85208225333076 193.5594637637937) rotate(0 36.12423022166223 19.04693539462764)"><path d="M44.08 35.63 C49.16 35.38, 56.79 35.68, 73.84 39.41 M44.08 35.63 C54.88 37.9, 66.46 39.61, 73.84 39.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(224.85208225333076 193.5594637637937) rotate(0 36.12423022166223 19.04693539462764)"><path d="M53.47 17.38 C56.41 21.06, 61.99 25.34, 73.84 39.41 M53.47 17.38 C60.83 26.41, 68.89 34.96, 73.84 39.41" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-gWrBfE9CR1eD3cWDUd6wa"><rect x="0" y="0" fill="#fff" width="397.1005426966552" height="331.653334553049"></rect><rect x="244.91633017518825" y="200.10639915842137" fill="#000" width="32.119964599609375" height="25" opacity="1"></rect></mask><g transform="translate(244.91633017518825 200.10639915842137) rotate(0 16.545389391877734 12.745741455829688)"><text x="16.059982299804688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Yes</text></g><g stroke-linecap="round" transform="translate(240.671875 158.20703125) rotate(0 155.83593749999994 134.140625)"><path d="M195 33.75 C217.24 53.61, 238.77 73.67, 272.67 101.25 M195 33.75 C212.73 49.46, 231.75 65.63, 272.67 101.25 M272.67 101.25 C309.67 134.56, 310.86 134.03, 272.67 168.75 M272.67 101.25 C313.37 133.45, 312.87 134.29, 272.67 168.75 M272.67 168.75 C256.01 182.27, 241.45 198.69, 195 234.53 M272.67 168.75 C255.15 183.7, 236.95 198.3, 195 234.53 M195 234.53 C154.92 268.15, 154.02 268.96, 117 234.53 M195 234.53 C156.03 269.87, 156.23 266.53, 117 234.53 M117 234.53 C97.9 218.09, 81.07 202.43, 39 168.75 M117 234.53 C95.03 214.56, 71.39 194.56, 39 168.75 M39 168.75 C-1.13 133.95, 1.96 135.38, 39 101.25 M39 168.75 C1.27 133.81, -1.22 133.22, 39 101.25 M39 101.25 C61.02 80.52, 86.21 61.24, 117 33.75 M39 101.25 C54.49 86.86, 70.71 74.06, 117 33.75 M117 33.75 C155.02 -1.41, 154.96 -1.25, 195 33.75 M117 33.75 C153.96 0.09, 154.92 1.57, 195 33.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(325.0099105834961 254.77734375) rotate(0 71.5799331665039 37.5)"><text x="71.5799331665039" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Frequent,</text><text x="71.5799331665039" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Bi-Directional </text><text x="71.5799331665039" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Communication?</text></g><g mask="url(#mask-6VxyAY6Fi6sKnJn5SI7Cs)" stroke-linecap="round"><g transform="translate(398.6846672936472 435.1119376049137) rotate(0 -0.35165974889912377 38.74750104609927)"><path d="M0.34 -0.87 C0.05 12.11, -1.53 64.63, -1.79 77.86 M-0.94 1.29 C-0.88 13.89, 0.57 63.36, 0.35 75.92" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(398.6846672936472 435.1119376049137) rotate(0 -0.35165974889912377 38.74750104609927)"><path d="M-10.16 47.83 C-8.49 54.35, -3.31 63.68, 0.35 75.92 M-10.16 47.83 C-5.66 57.74, -1.48 69.93, 0.35 75.92" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(398.6846672936472 435.1119376049137) rotate(0 -0.35165974889912377 38.74750104609927)"><path d="M10.36 47.64 C5.93 54.28, 5 63.66, 0.35 75.92 M10.36 47.64 C6.99 57.46, 3.31 69.72, 0.35 75.92" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-6VxyAY6Fi6sKnJn5SI7Cs"><rect x="0" y="0" fill="#fff" width="499.3879867914454" height="612.6069396971122"></rect><rect x="386.3530194466034" y="461.3594386510131" fill="#000" width="23.959976196289062" height="25" opacity="1"></rect></mask><g transform="translate(386.3530194466034 461.35943865101297) rotate(0 11.62577342758459 12.24537107199427)"><text x="11.979988098144531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">No</text></g><g stroke-linecap="round" transform="translate(306.45703125 517.1875) rotate(0 92.2890625 45.0703125)"><path d="M69.24 1.31 C80.99 -0.78, 96.25 0.53, 109.37 1.77 C122.5 3, 137.15 4.99, 147.98 8.7 C158.8 12.41, 168.21 18.05, 174.32 24.02 C180.43 29.98, 184.35 37.9, 184.63 44.47 C184.91 51.04, 181.49 57.71, 176.01 63.41 C170.52 69.11, 161.76 74.5, 151.71 78.67 C141.65 82.84, 128.55 86.71, 115.7 88.44 C102.85 90.17, 87.7 90.38, 74.59 89.04 C61.48 87.7, 47.63 84.37, 37.04 80.4 C26.45 76.43, 17.33 71, 11.06 65.23 C4.78 59.46, 0.01 52.25, -0.61 45.78 C-1.23 39.31, 1.69 32.39, 7.34 26.42 C12.99 20.44, 21.45 14.16, 33.27 9.94 C45.1 5.73, 69.55 2.5, 78.29 1.11 C87.03 -0.28, 85.62 0.9, 85.72 1.61 M63.26 0.89 C75.13 -1.64, 91.67 0.26, 105.07 1.22 C118.47 2.17, 132.44 3.39, 143.65 6.61 C154.86 9.83, 165.57 14.8, 172.32 20.56 C179.08 26.33, 183.25 34.6, 184.17 41.2 C185.09 47.8, 182.41 54.25, 177.85 60.16 C173.3 66.07, 166.17 72.08, 156.81 76.65 C147.46 81.22, 134.47 85.43, 121.73 87.56 C108.98 89.68, 93.67 90.14, 80.33 89.39 C67 88.63, 52.88 86.4, 41.74 83.01 C30.6 79.62, 20.16 74.73, 13.5 69.04 C6.85 63.35, 3.05 55.64, 1.8 48.88 C0.55 42.11, 1.49 34.46, 5.99 28.44 C10.5 22.42, 19.28 16.92, 28.84 12.76 C38.4 8.59, 57.48 5.22, 63.35 3.47 C69.22 1.73, 63.6 1.82, 64.07 2.28" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(380.08788555981107 549.8882889010532) rotate(0 18.899986267089844 12.5)"><text x="18.899986267089844" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">SSE</text></g><g stroke-linecap="round" transform="translate(518.1328125 343.3359375) rotate(0 158.107421875 123.248046875)"><path d="M198.75 31 C225.17 54.41, 251.71 74.13, 276.46 93 M198.75 31 C217.12 46.39, 234.54 59.88, 276.46 93 M276.46 93 C314.59 125.06, 315.7 123.96, 276.46 155 M276.46 93 C317.79 124.54, 315.84 125.31, 276.46 155 M276.46 155 C252.6 172.54, 229.12 191, 198.75 215.5 M276.46 155 C246.96 179.06, 218.62 200.28, 198.75 215.5 M198.75 215.5 C160.41 245.71, 157.29 245.88, 119.25 215.5 M198.75 215.5 C157.39 245.82, 160.13 244.44, 119.25 215.5 M119.25 215.5 C91.86 194.17, 62.12 169.69, 39.75 155 M119.25 215.5 C101.28 202.82, 85.22 188.68, 39.75 155 M39.75 155 C-1.45 124.81, -1.21 122.12, 39.75 93 M39.75 155 C1.26 122.48, -1.26 126.27, 39.75 93 M39.75 93 C56.99 78.91, 73.06 65.66, 119.25 31 M39.75 93 C56.13 79.04, 72.16 67.37, 119.25 31 M119.25 31 C159.35 -0.73, 160.85 -0.33, 198.75 31 M119.25 31 C160.54 -1.68, 157.56 0.28, 198.75 31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(606.636589050293 441.4599609375) rotate(0 69.54993438720703 25)"><text x="69.54993438720703" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Peer to Peer?</text><text x="69.54993438720703" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Audio/Video?</text></g><g mask="url(#mask-CDzoVFz20zuXaZdGjqWla)" stroke-linecap="round"><g transform="translate(629.960000942817 558.4351654719471) rotate(0 -19.948586000607634 37.08259659899977)"><path d="M-0.4 1.04 C-7.04 13.74, -34.11 63.05, -40.8 75.36 M1.58 0.54 C-4.6 13.01, -31.36 61.8, -38.57 73.87" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(629.960000942817 558.4351654719471) rotate(0 -19.948586000607634 37.08259659899977)"><path d="M-33.57 44.29 C-33.14 49.28, -33.97 56.21, -38.57 73.87 M-33.57 44.29 C-34.36 55.73, -37.36 65.92, -38.57 73.87" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(629.960000942817 558.4351654719471) rotate(0 -19.948586000607634 37.08259659899977)"><path d="M-15.72 54.43 C-19.15 57.12, -23.91 61.83, -38.57 73.87 M-15.72 54.43 C-23.03 62.22, -32.51 68.73, -38.57 73.87" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-CDzoVFz20zuXaZdGjqWla"><rect x="0" y="0" fill="#fff" width="769.8571729440323" height="732.6003586699467"></rect><rect x="598.0314268440648" y="583.0177620709469" fill="#000" width="23.959976196289062" height="25" opacity="1"></rect></mask><g transform="translate(598.0314268440648 583.0177620709469) rotate(0 12.3198393323878 13.368928155987533)"><text x="11.979988098144531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">No</text></g><g stroke-linecap="round" transform="translate(473.33203125 636.0703125) rotate(0 92.2890625 45.0703125)"><path d="M65.63 2.94 C77.3 0.41, 92.12 -0.14, 105.27 0.77 C118.42 1.67, 133.34 4.57, 144.51 8.37 C155.69 12.16, 165.67 18.09, 172.31 23.53 C178.94 28.97, 183.22 34.57, 184.31 41.01 C185.4 47.46, 183.86 55.87, 178.86 62.2 C173.86 68.53, 164.17 74.74, 154.29 79.01 C144.42 83.27, 132.26 86.1, 119.62 87.78 C106.99 89.45, 91.65 89.83, 78.47 89.05 C65.29 88.27, 51.47 86.76, 40.55 83.09 C29.63 79.43, 19.79 72.94, 12.95 67.06 C6.1 61.19, 0.56 54.26, -0.52 47.85 C-1.59 41.45, 1.53 34.75, 6.5 28.65 C11.46 22.56, 17.78 15.83, 29.26 11.29 C40.74 6.74, 65.73 3.02, 75.36 1.37 C85 -0.27, 86.72 0.62, 87.05 1.4 M134.38 5.77 C146.18 8.08, 157.2 12.74, 165.37 17.91 C173.55 23.08, 180.95 30.31, 183.43 36.79 C185.91 43.28, 183.97 50.62, 180.25 56.81 C176.52 63, 169.73 68.76, 161.08 73.93 C152.42 79.11, 140.42 85.35, 128.32 87.86 C116.22 90.37, 101.6 89.61, 88.47 89 C75.33 88.39, 61.25 87.16, 49.5 84.22 C37.76 81.28, 25.87 76.68, 17.99 71.36 C10.1 66.04, 4.59 58.56, 2.2 52.3 C-0.2 46.03, -0.01 39.82, 3.6 33.76 C7.22 27.7, 15.37 20.74, 23.9 15.93 C32.43 11.13, 42.87 7.34, 54.78 4.94 C66.68 2.54, 82.11 1.53, 95.33 1.51 C108.55 1.48, 127.43 3.84, 134.09 4.79 C140.76 5.74, 135.64 6.5, 135.33 7.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(515.8729197394985 668.7711014010532) rotate(0 49.989952087402344 12.5)"><text x="49.989952087402344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Websocket</text></g><g mask="url(#mask-HYHT4CHx6mqSQmhDJ67Sc)" stroke-linecap="round"><g transform="translate(493.9464085009747 354.10217692231976) rotate(0 40.48647989053097 26.875209243345893)"><path d="M0.98 -0.87 C14.6 8.02, 68.39 43.62, 81.85 52.74 M0.03 1.29 C13.57 10.35, 67.81 44.76, 81.37 53.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(493.9464085009747 354.10217692231976) rotate(0 40.48647989053097 26.875209243345893)"><path d="M52.12 47.04 C59.67 50.34, 68.44 52.2, 81.37 53.74 M52.12 47.04 C60.39 49.22, 70.21 51.22, 81.37 53.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(493.9464085009747 354.10217692231976) rotate(0 40.48647989053097 26.875209243345893)"><path d="M63.27 29.81 C67.29 38.51, 72.63 45.69, 81.37 53.74 M63.27 29.81 C67.97 37.3, 74.36 44.58, 81.37 53.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-HYHT4CHx6mqSQmhDJ67Sc"><rect x="0" y="0" fill="#fff" width="674.9193682820367" height="507.85259540901154"></rect><rect x="518.372906091701" y="368.4773861656657" fill="#000" width="32.119964599609375" height="25" opacity="1"></rect></mask><g transform="translate(518.372906091701 368.4773861656656) rotate(0 16.516265987404665 12.062022270238998)"><text x="16.059982299804688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Yes</text></g><g stroke-linecap="round" transform="translate(831.41015625 599.2421875) rotate(0 91.240234375 53.91015625)"><path d="M117.37 2.92 C129.79 4.27, 143.91 8.83, 153.78 13.94 C163.64 19.04, 171.81 26.1, 176.56 33.53 C181.31 40.96, 183.31 50.69, 182.29 58.5 C181.26 66.32, 177.05 73.9, 170.38 80.42 C163.71 86.94, 153.04 93.15, 142.26 97.64 C131.49 102.13, 118.65 106.06, 105.73 107.35 C92.81 108.64, 77.56 107.66, 64.77 105.38 C51.97 103.11, 38.62 99.03, 28.94 93.71 C19.25 88.38, 11.37 80.8, 6.67 73.44 C1.97 66.08, -0.19 57.26, 0.75 49.55 C1.68 41.83, 5.85 33.79, 12.29 27.17 C18.73 20.55, 28.69 14.41, 39.38 9.82 C50.07 5.23, 61.35 0.54, 76.41 -0.37 C91.46 -1.28, 119.13 2.6, 129.72 4.37 C140.32 6.15, 140.78 9.42, 139.96 10.27 M112.08 1.33 C124.7 1.8, 138.58 5.35, 148.82 10.28 C159.07 15.22, 168.07 23.74, 173.56 30.94 C179.05 38.13, 181.55 45.89, 181.76 53.45 C181.97 61.01, 180.6 69.13, 174.81 76.3 C169.01 83.48, 157.64 91.58, 146.99 96.51 C136.33 101.43, 123.54 103.95, 110.88 105.86 C98.22 107.77, 83.97 109.62, 71.02 107.99 C58.07 106.36, 43.27 101.05, 33.17 96.07 C23.06 91.1, 16.04 85.15, 10.4 78.15 C4.77 71.14, -0.22 61.9, -0.62 54.03 C-1.03 46.15, 2.43 37.95, 7.99 30.88 C13.55 23.81, 22.45 16.55, 32.74 11.62 C43.03 6.68, 56.63 2.95, 69.74 1.29 C82.85 -0.37, 104.78 1.41, 111.41 1.67 C118.05 1.92, 109.99 1.92, 109.55 2.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(883.3638284265048 640.5321066907986) rotate(0 39.26997375488281 12.5)"><text x="39.26997375488281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">WebRTC</text></g><g mask="url(#mask-cof_IKOiGS1-Sx4DEnMo9)" stroke-linecap="round"><g transform="translate(759.4624020379765 528.1596928289653) rotate(0 51.744604511200805 37.71794011939119)"><path d="M-0.96 -0.61 C16.31 11.73, 85.75 62.26, 103.06 74.9 M0.74 1.69 C17.86 14.11, 85.04 63.7, 101.89 76.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(759.4624020379765 528.1596928289653) rotate(0 51.744604511200805 37.71794011939119)"><path d="M73.12 67.66 C79.49 69.34, 86.92 71.26, 101.89 76.16 M73.12 67.66 C81.29 70.93, 88.65 72.07, 101.89 76.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(759.4624020379765 528.1596928289653) rotate(0 51.744604511200805 37.71794011939119)"><path d="M85.31 51.16 C88.7 56.93, 93.03 63.04, 101.89 76.16 M85.31 51.16 C89.96 59, 93.85 64.83, 101.89 76.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask id="mask-cof_IKOiGS1-Sx4DEnMo9"><rect x="0" y="0" fill="#fff" width="962.9516110603781" height="703.5955730677476"></rect><rect x="795.1470242493726" y="553.3776329483564" fill="#000" width="32.119964599609375" height="25" opacity="1"></rect></mask><g transform="translate(795.1470242493724 553.3776329483564) rotate(0 15.366634948551678 12.558350282548929)"><text x="16.059982299804688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Yes</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Client Updates Flowchart</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">But now that we have the first hop out of the way, let's talk about how updates propagate from their source to the server in question.</div><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="server-side-pushpull">Server-Side Push/pull</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now that we've established our options for the hop from server to client (Simple Polling, Long-Polling, SSE, WebSockets, WebRTC), let's talk about how we can propagate updates from the source to the server.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680.56640625 391.14453125">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="680.56640625" height="391.14453125" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 84.7890625) rotate(0 64.42578125 73.314453125)"><path d="M32 0 C53.94 0.72, 74.99 0.14, 96.85 0 M32 0 C48.43 -0.77, 64.59 -0.3, 96.85 0 M96.85 0 C119.35 -0.25, 128.71 11.22, 128.85 32 M96.85 0 C117.53 -0.09, 126.6 11.36, 128.85 32 M128.85 32 C127.37 56.86, 126.68 82.31, 128.85 114.63 M128.85 32 C129.5 56.29, 129.91 81.09, 128.85 114.63 M128.85 114.63 C126.91 134.92, 117.43 144.92, 96.85 146.63 M128.85 114.63 C128.75 138.23, 116.87 146.41, 96.85 146.63 M96.85 146.63 C73.94 147.51, 52.63 147.25, 32 146.63 M96.85 146.63 C75.65 146.6, 56 146.35, 32 146.63 M32 146.63 C9.24 146.02, -0.03 136.54, 0 114.63 M32 146.63 C12.77 146.73, -0.63 137, 0 114.63 M0 114.63 C0.74 80.47, 0.99 50.28, 0 32 M0 114.63 C-0.1 91.2, -1.09 69, 0 32 M0 32 C-0.2 9.07, 9.09 -0.33, 32 0 M0 32 C-0.6 11.58, 9.13 0.05, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(47.37580871582031 145.603515625) rotate(0 27.049972534179688 12.5)"><text x="27.049972534179688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g stroke-linecap="round" transform="translate(276.234375 89.625) rotate(0 63.974609375 74.046875)"><path d="M31.99 0 C50.84 -1.93, 71.31 -0.02, 95.96 0 M31.99 0 C51.42 -0.51, 71.74 1, 95.96 0 M95.96 0 C115.98 1.63, 126.81 9.48, 127.95 31.99 M95.96 0 C118.61 1.41, 129.43 12.15, 127.95 31.99 M127.95 31.99 C126.35 54.65, 129.09 73.48, 127.95 116.11 M127.95 31.99 C127.85 50.97, 127.95 71.38, 127.95 116.11 M127.95 116.11 C127 137.95, 118.85 146.11, 95.96 148.09 M127.95 116.11 C128.71 135.61, 118.66 148.9, 95.96 148.09 M95.96 148.09 C79.74 146.03, 58.62 146.82, 31.99 148.09 M95.96 148.09 C78.41 147.05, 62.46 147.47, 31.99 148.09 M31.99 148.09 C10.8 147.85, 0.67 137.61, 0 116.11 M31.99 148.09 C10.79 147.96, 0.39 135.72, 0 116.11 M0 116.11 C1.93 98.82, 1.89 80.82, 0 31.99 M0 116.11 C-0.59 85.45, 0.42 53.44, 0 31.99 M0 31.99 C-0.99 9.11, 11.67 -1.16, 31.99 0 M0 31.99 C-1.42 11.72, 9.55 -0.99, 31.99 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(309.35901641845703 151.171875) rotate(0 30.84996795654297 12.5)"><text x="30.84996795654297" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(534.3359375 94.7578125) rotate(0 68.115234375 68.724609375)"><path d="M47.11 3.13 C55.69 -0.66, 66.44 0.21, 76.19 1.45 C85.94 2.7, 97.15 5.35, 105.6 10.6 C114.05 15.85, 121.93 24.23, 126.88 32.95 C131.83 41.67, 134.43 52.85, 135.31 62.91 C136.18 72.98, 135.62 84.12, 132.15 93.32 C128.68 102.53, 121.77 111.5, 114.49 118.16 C107.21 124.82, 97.53 130.14, 88.47 133.29 C79.41 136.43, 69.91 138.19, 60.13 137.03 C50.35 135.88, 38.09 131.78, 29.78 126.37 C21.47 120.95, 15.35 113.23, 10.28 104.56 C5.21 95.89, 0.36 84.34, -0.66 74.35 C-1.68 64.36, 0.63 53.87, 4.15 44.61 C7.68 35.36, 11.63 26.13, 20.47 18.81 C29.3 11.5, 49 3.69, 57.15 0.71 C65.31 -2.27, 69.22 -0.26, 69.4 0.92 M71.88 -0.94 C80.97 -1.56, 90.52 4.73, 98.92 9.44 C107.31 14.15, 116.26 19.75, 122.23 27.31 C128.2 34.88, 132.6 45.07, 134.75 54.83 C136.9 64.59, 137.83 76.29, 135.13 85.9 C132.44 95.5, 125.41 104.97, 118.58 112.45 C111.76 119.94, 103 126.91, 94.17 130.82 C85.33 134.73, 75.35 136.04, 65.58 135.92 C55.81 135.81, 44.31 134.35, 35.54 130.15 C26.77 125.95, 18.53 119, 12.97 110.74 C7.42 102.48, 4.13 90.78, 2.19 80.61 C0.25 70.45, -1.01 59.14, 1.34 49.75 C3.7 40.36, 9.52 31.84, 16.29 24.27 C23.07 16.71, 32.81 8.34, 41.99 4.35 C51.17 0.36, 66.82 0.96, 71.39 0.33 C75.96 -0.29, 69.55 -0.39, 69.42 0.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(561.3064625363655 150.88678455154093) rotate(0 40.97996520996088 12.5)"><text x="40.97996520996094" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Updates</text></g><g stroke-linecap="round"><g transform="translate(525.0536795255614 160.0464386930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-0.35 0.54 C-18.61 0.64, -90.51 -0.36, -108.74 -0.5 M1.67 -0.23 C-16.8 0.19, -90.76 0.87, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(525.0536795255614 160.0464386930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-81.44 -9.46 C-91.04 -5.09, -102.14 -2.85, -109.52 1.1 M-81.44 -9.46 C-89.94 -6.43, -99.26 -3.81, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(525.0536795255614 160.0464386930161) rotate(0 -54.534652262780696 -0.309009336160301)"><path d="M-81.22 11.06 C-90.71 7.83, -101.89 2.47, -109.52 1.1 M-81.22 11.06 C-89.65 7.43, -99.05 3.4, -109.52 1.1" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(263.234375 159.94117650127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-0.25 -0.27 C-18.18 -0.75, -89.81 -3.41, -107.65 -3.83 M1.82 -1.46 C-16.23 -1.73, -90.18 -2.76, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 159.94117650127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-80.16 -12.79 C-89.01 -9.35, -98.31 -5.79, -108.43 -2.75 M-80.16 -12.79 C-89.22 -8.9, -98 -7.18, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 159.94117650127578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-80.32 7.73 C-88.96 5.13, -98.22 2.66, -108.43 -2.75 M-80.32 7.73 C-89.19 5.2, -97.92 0.5, -108.43 -2.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(291.87890625 29.43807916235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-0.23 -1.2 C-14.38 1.26, -67.18 0.54, -84.79 15.43 C-102.4 30.32, -102.6 76.01, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(291.87890625 29.43807916235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-111.94 58.77 C-111.87 67.36, -106.45 75.88, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(291.87890625 29.43807916235528) rotate(0 -52.583984375 44.18721041882236)"><path d="M-91.64 61.74 C-97.9 69.37, -98.8 76.97, -105.87 88.15" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(304.23828125 10) rotate(0 151.1759033203125 20)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Step 1</text><text x="0" y="20" font-family="Virgil, Segoe UI Emoji" font-size="16px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">How do updates propagate to clients?</text></g><g stroke-linecap="round"><g transform="translate(452.08003562903264 296.849365234375) rotate(0 17.754904060483682 -61.7781982421875)"><path d="M0.09 0.67 C5.74 -10.93, 29.78 -48.51, 34.39 -69.25 C39 -89.99, 29.1 -114.57, 27.74 -123.77" stroke="#1e1e1e" stroke-width="4.5" fill="none" stroke-dasharray="8 12"></path></g><g transform="translate(452.08003562903264 296.849365234375) rotate(0 17.754904060483682 -61.7781982421875)"><path d="M42.82 -101.17 C38.76 -110.7, 33.47 -115.77, 27.74 -123.77" stroke="#1e1e1e" stroke-width="4.5" fill="none"></path></g><g transform="translate(452.08003562903264 296.849365234375) rotate(0 17.754904060483682 -61.7781982421875)"><path d="M24.77 -96.76 C26.82 -107.81, 27.67 -114.37, 27.74 -123.77" stroke="#1e1e1e" stroke-width="4.5" fill="none"></path></g></g><mask></mask><g transform="translate(52.046875 276.14453125) rotate(0 236.89390563964844 52.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Step 2</text><text x="0" y="35" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">How does our server get triggered</text><text x="0" y="70" font-family="Virgil, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">when updates happen?</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Server-Side Push/Pull</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Invariably our system is somehow <em>producing</em> updates that we want to propagate to our clients. This could be other users making edits to a shared documents, drivers making location updates, or friends sending messages to a shared chat.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Making sure these updates get to their ultimate destination is closely tied to how we propagate updates from the source to the server. Said differently, we need a <strong>trigger</strong>.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When it comes to triggering, there's three patterns that you'll commonly see:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Pulling via Polling</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Pushing via Consistent Hashes</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Pushing via Pub/Sub</div></li>
</ol><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="pulling-with-simple-polling">Pulling with Simple Polling</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">With Simple Polling, we're using a <strong>pull-based</strong> model. Our client is constantly asking the server for updates and the server needs to maintain the state necessary to respond to those requests. The most common way to do this is to have a database where we can store the updates (e.g. all of the messages in the chat room), and from this database our clients can pull the updates they need when they can. For our chat app, we'd basically be polling for "what messages have been sent to the room with a timestamp larger than the last message I received?".</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 662.96875 517.03515625">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="662.96875" height="517.03515625" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 86.888671875) rotate(0 64.42578125 73.314453125)"><path d="M32 0 C54.94 -0.54, 74.03 2.34, 96.85 0 M32 0 C45.63 0.14, 59.86 -0.24, 96.85 0 M96.85 0 C117.93 -0.22, 128.3 12.05, 128.85 32 M96.85 0 C120.24 -1.91, 130.62 11.43, 128.85 32 M128.85 32 C130.02 54.96, 129.29 79.76, 128.85 114.63 M128.85 32 C128.36 55.54, 128.01 77.36, 128.85 114.63 M128.85 114.63 C127.99 136.12, 116.24 145.54, 96.85 146.63 M128.85 114.63 C128.52 137.51, 117.41 145.94, 96.85 146.63 M96.85 146.63 C78.07 145.41, 60.17 145.9, 32 146.63 M96.85 146.63 C83.78 146.64, 71.04 145.89, 32 146.63 M32 146.63 C10.39 145.33, -1.5 137.22, 0 114.63 M32 146.63 C12.9 146.79, -0.61 135.32, 0 114.63 M0 114.63 C-1.44 82.66, -0.59 54.18, 0 32 M0 114.63 C-0.06 95.39, -0.72 76.7, 0 32 M0 32 C1.48 11.35, 11.72 0.82, 32 0 M0 32 C0.3 9.48, 11.25 1.89, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(47.37580871582031 147.703125) rotate(0 27.049972534179688 12.5)"><text x="27.049972534179688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Client</text></g><g stroke-linecap="round" transform="translate(276.234375 91.724609375) rotate(0 63.974609375 74.046875)"><path d="M31.99 0 C45.95 1.43, 63.84 -1.87, 95.96 0 M31.99 0 C53.46 -0.11, 74.9 0.69, 95.96 0 M95.96 0 C119.08 -1.66, 129.48 11.33, 127.95 31.99 M95.96 0 C117.07 -0.99, 127.83 12.41, 127.95 31.99 M127.95 31.99 C127.75 51.19, 130.05 73.87, 127.95 116.11 M127.95 31.99 C127.36 65.37, 126.82 98.05, 127.95 116.11 M127.95 116.11 C127.66 138.78, 116.61 147.5, 95.96 148.09 M127.95 116.11 C127.65 138.02, 116.36 147.91, 95.96 148.09 M95.96 148.09 C77.92 147.48, 64 148.27, 31.99 148.09 M95.96 148.09 C77.16 146.91, 57.9 148.19, 31.99 148.09 M31.99 148.09 C12.61 148.24, -0.53 136.88, 0 116.11 M31.99 148.09 C12.25 149.84, -1.58 136.49, 0 116.11 M0 116.11 C-1.38 97.08, 0.79 77.95, 0 31.99 M0 116.11 C1.35 91.91, 1.14 67.44, 0 31.99 M0 31.99 C0.26 9.63, 11.17 1.65, 31.99 0 M0 31.99 C1.49 11.07, 10.7 -0.18, 31.99 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(309.35901641845703 153.271484375) rotate(0 30.84996795654297 12.5)"><text x="30.84996795654297" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round" transform="translate(516.73828125 216.232421875) rotate(0 68.115234375 68.724609375)"><path d="M44.25 4.04 C52.78 -0.05, 65.41 0.1, 75.1 1.19 C84.79 2.28, 94 5.64, 102.38 10.59 C110.76 15.55, 119.93 22.76, 125.4 30.93 C130.87 39.1, 133.84 49.86, 135.21 59.64 C136.58 69.42, 136.53 80.18, 133.6 89.61 C130.67 99.04, 124.61 109.1, 117.62 116.22 C110.62 123.34, 100.76 128.83, 91.61 132.34 C82.45 135.86, 72.31 138.14, 62.7 137.32 C53.1 136.5, 42.53 132.66, 33.98 127.44 C25.42 122.22, 16.91 114.43, 11.36 105.99 C5.81 97.55, 2.09 86.59, 0.67 76.79 C-0.75 66.98, -0.32 56.5, 2.85 47.16 C6.02 37.82, 11.9 28.22, 19.68 20.76 C27.47 13.3, 43.5 5.49, 49.54 2.39 C55.59 -0.71, 55.62 1.1, 55.97 2.14 M77.36 0.9 C86.87 1.43, 97.86 6.21, 106.26 11.49 C114.67 16.78, 122.87 24.2, 127.79 32.62 C132.71 41.05, 135.32 51.77, 135.78 62.04 C136.25 72.31, 133.85 84.78, 130.61 94.24 C127.36 103.7, 123.36 112.22, 116.32 118.82 C109.27 125.41, 97.8 130.63, 88.34 133.81 C78.88 136.99, 69.42 139.33, 59.56 137.9 C49.7 136.47, 37.73 130.93, 29.18 125.22 C20.64 119.5, 13.06 112.24, 8.3 103.61 C3.55 94.98, 1.27 83.22, 0.64 73.41 C0 63.6, 1.06 53.89, 4.5 44.75 C7.94 35.62, 14.3 25.44, 21.28 18.61 C28.27 11.79, 36.82 6.71, 46.41 3.81 C55.99 0.91, 73.5 1.39, 78.81 1.2 C84.13 1.01, 78.61 1.74, 78.3 2.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(569.6187794308968 272.3613939265409) rotate(0 15.069992065429688 12.5)"><text x="15.069992065429688" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">DB</text></g><g stroke-linecap="round"><g transform="translate(516.8607525184518 247.5303434162671) rotate(0 -50.43818875922585 -25.245914196290585)"><path d="M-0.15 -0.13 C-16.88 -8.41, -84.6 -41.1, -101.21 -49.66 M-1.69 -1.25 C-18.53 -9.86, -85.95 -43.11, -102.33 -51.35" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(516.8607525184518 247.5303434162671) rotate(0 -50.43818875922585 -25.245914196290585)"><path d="M-29.99 -3.27 C-23.38 -3.07, -14.96 -0.01, -0.15 -0.13 M-29.99 -3.27 C-23.59 -3.12, -17.08 -1.25, -0.15 -0.13" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(516.8607525184518 247.5303434162671) rotate(0 -50.43818875922585 -25.245914196290585)"><path d="M-20.99 -21.72 C-16.44 -17.31, -10.08 -10.03, -0.15 -0.13 M-20.99 -21.72 C-16.4 -17.53, -11.84 -11.67, -0.15 -0.13" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(263.234375 162.04078587627578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-0.33 0.83 C-18.12 0.19, -89.12 -3.4, -106.9 -3.96 M1.69 0.22 C-16.15 -0.29, -89.11 -2.13, -107.29 -2.95" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 162.04078587627578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-28.96 9.79 C-19.34 9.08, -14.16 6.25, -0.33 0.83 M-28.96 9.79 C-19.46 7.68, -10.39 4.33, -0.33 0.83" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(263.234375 162.04078587627578) rotate(0 -53.98828125 -1.4827504557827638)"><path d="M-28.02 -10.71 C-18.7 -5.53, -13.78 -2.47, -0.33 0.83 M-28.02 -10.71 C-18.85 -5.99, -10.1 -2.5, -0.33 0.83" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(348.8994118942164 358.9072066781255) rotate(0 73.78268008818941 -25.839886283097997)"><path d="M1.07 -1 C25.88 -9.68, 124.09 -42.75, 148.49 -51.28 M0.18 1.09 C24.93 -8.04, 123.61 -44.48, 148.02 -53.19" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(348.8994118942164 358.9072066781255) rotate(0 73.78268008818941 -25.839886283097997)"><path d="M125.04 -33.91 C129.5 -37.83, 138.09 -44.8, 148.02 -53.19 M125.04 -33.91 C130.43 -38.64, 136.73 -44.27, 148.02 -53.19" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(348.8994118942164 358.9072066781255) rotate(0 73.78268008818941 -25.839886283097997)"><path d="M118.02 -53.19 C124.53 -51.93, 135.03 -53.65, 148.02 -53.19 M118.02 -53.19 C125.21 -53.02, 133.31 -53.69, 148.02 -53.19" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(139.58505249023438 258.3515625) rotate(0 96.40625 110)"><path d="M121.25 27.75 C139.88 48.82, 156.79 70.52, 168.56 83.25 M121.25 27.75 C138.6 48.16, 155.74 70.17, 168.56 83.25 M168.56 83.25 C193.14 112.92, 192.44 111.4, 168.56 138.75 M168.56 83.25 C191.82 111.18, 190.57 109.75, 168.56 138.75 M168.56 138.75 C154.81 153.61, 142.41 168.34, 121.25 192.25 M168.56 138.75 C154.25 153.56, 140.43 170.29, 121.25 192.25 M121.25 192.25 C97.33 219.83, 98.3 218.34, 72.75 192.25 M121.25 192.25 C96.68 218.5, 95.28 221.45, 72.75 192.25 M72.75 192.25 C52.89 172.25, 35.69 148.24, 24.25 138.75 M72.75 192.25 C60.84 177.71, 47.99 164.92, 24.25 138.75 M24.25 138.75 C-0.12 110.83, -1.45 111.78, 24.25 83.25 M24.25 138.75 C1.7 111.79, 1.21 111.95, 24.25 83.25 M24.25 83.25 C41.37 67.04, 55.27 48.39, 72.75 27.75 M24.25 83.25 C38.93 67.37, 53.14 50.41, 72.75 27.75 M72.75 27.75 C95.42 -1.87, 97.33 1.77, 121.25 27.75 M72.75 27.75 C94.87 -1.4, 96.37 1.86, 121.25 27.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(195.2382049560547 343.3515625) rotate(0 40.54997253417969 25)"><text x="40.54997253417969" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update </text><text x="40.54997253417969" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Source</text></g><g stroke-linecap="round"><g transform="translate(454.0889587402344 444.625) rotate(0 35.53515625 -45.1484375)"><path d="M-0.06 0.91 C5.54 -8.92, 21.68 -44.26, 33.5 -59.52 C45.33 -74.77, 64.8 -85.66, 70.91 -90.62" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(454.0889587402344 444.625) rotate(0 35.53515625 -45.1484375)"><path d="M57.27 -71.01 C62.84 -77.76, 66.08 -82.67, 70.91 -90.62" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(454.0889587402344 444.625) rotate(0 35.53515625 -45.1484375)"><path d="M47.86 -84.36 C56.1 -87.23, 62.08 -88.26, 70.91 -90.62" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(364.32191467285156 457.03515625) rotate(0 105.84991455078125 25)"><text x="105.84991455078125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Write updates to DB</text><text x="105.84991455078125" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">as they happen</text></g><g stroke-linecap="round"><g transform="translate(316.7764587402344 22.7734375) rotate(0 -56.60546875 55.095703125)"><path d="M-0.16 -0.32 C-14.36 5.92, -67 19.3, -85.81 37.91 C-104.62 56.52, -108.41 99.26, -113.02 111.34" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(316.7764587402344 22.7734375) rotate(0 -56.60546875 55.095703125)"><path d="M-116.24 81.52 C-115.86 87.31, -112.76 96.58, -113.02 111.34" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(316.7764587402344 22.7734375) rotate(0 -56.60546875 55.095703125)"><path d="M-96.31 86.42 C-100.87 90.98, -102.7 99.04, -113.02 111.34" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(334.4851837158203 10) rotate(0 137.59986877441406 12.5)"><text x="137.59986877441406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Poll repeatedly for updates</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Pulling with Simple Polling</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Remember with polling we're tolerating delay! We use the poll itself as the trigger, even though the actual update may have occurred some time prior.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The nice thing about this from a system design perspective is that we've <em>decoupled</em> the source of the update from the client receiving it. The line that receives the updates is interrupted (by the DB) from the line that produces them - data is not <em>flowing</em> from the producer to the consumer. The downside is that we've lost the real-time aspect of our updates.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-5">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Dead simple to implement.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">State is constrained to our DB.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">No special infrastructure.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Doesn't take much time to explain.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-5">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">High latency.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Excess DB load when updates are infrequent and polling is frequent.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-pull-based-polling">When to Use Pull-Based Polling</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Pull-based polling is great when you want your user experience to be somewhat more responsive to changes that happen on the backend, but responding quickly is not the main thing. Generally speaking, if you need real-time updates this is not the best approach, but again there are a lot of use-cases where real-time updates are actually not required!</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-5">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When you're using Pull-based Polling, you'll want to talk about how you're storing the updates. If you're using a database, you'll want to discuss how you're querying for the updates and how that might change given your load.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In many instances where this approach might be used, the number of clients can actually be quite large. If you have a million clients polling every 10 seconds, you've got 100k TPS of read volume! This is easy to forget about.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="pushing-via-consistent-hashes">Pushing via Consistent Hashes</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The remaining approaches involve <strong>pushing</strong> updates to the clients. In many of the client update mechanisms that we discussed above (long-polling, SSE, WebSockets) the client has a persistent connection to one server and that server is responsible for sending updates to the client.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">But this creates a problem! For our chat application, in order to send a message to <span class="MuiBox-root mui-1vu004u">User C</span>, we need to know which server they are connected to.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 842.6483486391603 402.60753982227664">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="842.6483486391603" height="402.60753982227664" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(13.830078125 10) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C32.82 1.12, 46.41 -0.73, 63.84 0 M21.28 0 C33.97 0.64, 44.99 0.74, 63.84 0 M63.84 0 C77.78 0.74, 84.04 7.72, 85.12 21.28 M63.84 0 C80.17 -0.33, 85.28 5.41, 85.12 21.28 M85.12 21.28 C85.25 31.2, 84.55 41.76, 85.12 65.24 M85.12 21.28 C84.52 34.02, 84.37 45.36, 85.12 65.24 M85.12 65.24 C86.66 79.71, 78.72 85.14, 63.84 86.52 M85.12 65.24 C83.55 78.38, 79.03 84.32, 63.84 86.52 M63.84 86.52 C50.39 84.4, 39.59 87.61, 21.28 86.52 M63.84 86.52 C52.81 85.36, 43.01 86.37, 21.28 86.52 M21.28 86.52 C8.43 85.08, 0.08 78.22, 0 65.24 M21.28 86.52 C9.15 87.54, 1.18 79.37, 0 65.24 M0 65.24 C1.87 51.3, 1.15 36.5, 0 21.28 M0 65.24 C0.59 47.81, 0.71 30.54, 0 21.28 M0 21.28 C1.88 6.18, 7.48 -0.56, 21.28 0 M0 21.28 C1.77 9.13, 7.24 -1.36, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(22.490646362304688 40.759765625) rotate(0 33.89997863769531 12.5)"><text x="33.89997863769531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User A</text></g><g stroke-linecap="round" transform="translate(12.87890625 141.111328125) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C35.83 -0.32, 51.33 0.91, 63.84 0 M21.28 0 C37.14 0.01, 52.71 -0.05, 63.84 0 M63.84 0 C79.89 -0.29, 85.26 5.63, 85.12 21.28 M63.84 0 C76.48 1.96, 84.92 6.81, 85.12 21.28 M85.12 21.28 C84.56 34.2, 86.08 44.87, 85.12 65.24 M85.12 21.28 C85.52 36.06, 85.09 49.86, 85.12 65.24 M85.12 65.24 C83.75 78.52, 78.9 84.61, 63.84 86.52 M85.12 65.24 C84.72 80.23, 75.82 84.87, 63.84 86.52 M63.84 86.52 C53.48 87.04, 43.7 85.08, 21.28 86.52 M63.84 86.52 C54.96 85.9, 44.78 86.02, 21.28 86.52 M21.28 86.52 C8.88 87.4, 1.03 79.38, 0 65.24 M21.28 86.52 C7.68 87.02, -0.94 81.69, 0 65.24 M0 65.24 C1.63 49.4, 0.13 37.64, 0 21.28 M0 65.24 C0.81 51.86, 0.06 39.11, 0 21.28 M0 21.28 C1.54 8.87, 7.22 -1.18, 21.28 0 M0 21.28 C0.5 8.53, 7.51 -0.52, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(20.82947540283203 171.87109375) rotate(0 34.60997772216797 12.5)"><text x="34.60997772216797" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User B</text></g><g stroke-linecap="round" transform="translate(10 267.14257812500006) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.46 -2.07, 46.34 -0.4, 63.84 0 M21.28 0 C36.56 -0.28, 50.05 -0.86, 63.84 0 M63.84 0 C76.69 1.7, 84.95 6.85, 85.12 21.28 M63.84 0 C77.66 -1.09, 85.12 6.69, 85.12 21.28 M85.12 21.28 C86.04 33.71, 83.89 51.07, 85.12 65.24 M85.12 21.28 C84.59 34.64, 85.71 47.96, 85.12 65.24 M85.12 65.24 C84.77 80.12, 76.11 85.08, 63.84 86.52 M85.12 65.24 C83.15 79.18, 79.76 85.11, 63.84 86.52 M63.84 86.52 C49.13 85.11, 37.94 87.48, 21.28 86.52 M63.84 86.52 C55.04 86.7, 44.96 86.24, 21.28 86.52 M21.28 86.52 C7.6 86.95, -0.82 81.39, 0 65.24 M21.28 86.52 C7.51 87.95, -0.15 81.61, 0 65.24 M0 65.24 C-0.21 56.72, -0.03 48.88, 0 21.28 M0 65.24 C0.69 54.94, -0.02 42.29, 0 21.28 M0 21.28 C0.43 8.34, 7.46 -0.45, 21.28 0 M0 21.28 C-0.49 9.27, 6.62 0.03, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(18.78057098388672 297.90234375000006) rotate(0 33.77997589111328 12.5)"><text x="33.77997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User C</text></g><g stroke-linecap="round" transform="translate(192.716796875 46.06640625) rotate(0 72.84765625 58.009765625)"><path d="M29 0 C47.63 -0.98, 65.4 1.97, 116.69 0 M29 0 C53.39 1.49, 79.03 0.52, 116.69 0 M116.69 0 C135.71 -0.95, 145.7 9.32, 145.7 29 M116.69 0 C136.52 1.34, 144.09 10.43, 145.7 29 M145.7 29 C145.55 42.19, 143.88 52.63, 145.7 87.01 M145.7 29 C145.77 44.12, 144.99 57.81, 145.7 87.01 M145.7 87.01 C143.99 106.14, 137.53 114.79, 116.69 116.02 M145.7 87.01 C145.93 104.19, 134 114.28, 116.69 116.02 M116.69 116.02 C93.5 116.69, 71.99 118.39, 29 116.02 M116.69 116.02 C86.77 116.22, 55.93 116.98, 29 116.02 M29 116.02 C10.03 117.26, -0.13 108.25, 0 87.01 M29 116.02 C7.54 116.48, 0.43 106.21, 0 87.01 M0 87.01 C-0.93 68.26, -0.58 50.27, 0 29 M0 87.01 C0.18 65.09, 0.15 41.69, 0 29 M0 29 C-0.43 11.56, 9.25 0.03, 29 0 M0 29 C-0.1 8.67, 7.61 -0.32, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(227.00448608398438 91.576171875) rotate(0 38.559967041015625 12.5)"><text x="38.559967041015625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 1</text></g><g stroke-linecap="round" transform="translate(189.080078125 200.408203125) rotate(0 72.84765625 58.009765625)"><path d="M29 0 C50.27 -0.68, 70.65 -2.16, 116.69 0 M29 0 C62.62 -0.37, 96.55 -0.07, 116.69 0 M116.69 0 C136.45 1.16, 144.3 10.33, 145.7 29 M116.69 0 C134.08 -1.71, 147.47 10, 145.7 29 M145.7 29 C144.39 49.28, 143.38 67.46, 145.7 87.01 M145.7 29 C144.28 48.32, 145.89 67.23, 145.7 87.01 M145.7 87.01 C145.9 104.47, 134.27 114.51, 116.69 116.02 M145.7 87.01 C144.5 106.92, 137.57 114.36, 116.69 116.02 M116.69 116.02 C90.9 117.83, 63.29 117.31, 29 116.02 M116.69 116.02 C88.66 117.5, 60.2 117.83, 29 116.02 M29 116.02 C7.82 116.42, 0.37 106.23, 0 87.01 M29 116.02 C10.36 116.09, 2.16 105.3, 0 87.01 M0 87.01 C1.94 68.61, -1.02 50.38, 0 29 M0 87.01 C-0.32 66.93, -0.31 44.97, 0 29 M0 29 C-0.08 8.8, 7.88 -0.28, 29 0 M0 29 C-1.9 9.07, 8.06 -0.96, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(218.95777130126953 245.91796875) rotate(0 42.96996307373047 12.5)"><text x="42.96996307373047" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 2</text></g><g stroke-linecap="round"><g transform="translate(102.216796875 55.50390625) rotate(0 38.2109375 12.244140625)"><path d="M-0.81 1.02 C11.9 5.22, 63.48 20.52, 76.32 24.34 M0.97 0.51 C13.5 4.98, 62.92 21.73, 75.32 25.8" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 55.50390625) rotate(0 38.2109375 12.244140625)"><path d="M29.15 -0.59 C21.65 -0.47, 10.5 -0.12, -0.81 1.02 M29.15 -0.59 C21.8 0.34, 13.32 0.5, -0.81 1.02" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 55.50390625) rotate(0 38.2109375 12.244140625)"><path d="M23.18 19.04 C17.65 13.18, 8.34 7.5, -0.81 1.02 M23.18 19.04 C17.34 15.03, 10.37 10.23, -0.81 1.02" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 55.50390625) rotate(0 38.2109375 12.244140625)"><path d="M45.33 26.58 C56.24 26.37, 63.5 25.99, 75.32 25.8 M45.33 26.58 C53.11 27.02, 59.78 26.57, 75.32 25.8" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 55.50390625) rotate(0 38.2109375 12.244140625)"><path d="M51.84 7.12 C60.61 12.84, 65.87 18.43, 75.32 25.8 M51.84 7.12 C57.98 12.46, 63 16.93, 75.32 25.8" stroke="#ffffff" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(107.474609375 52.671875) rotate(0 39.236328125 19.974609375)"><path d="M-0.1 -0.15 C13.08 6.24, 65.19 32.73, 78.28 39.38 M-1.62 -1.27 C11.46 5.8, 64.01 33.58, 77.24 40.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(107.474609375 52.671875) rotate(0 39.236328125 19.974609375)"><path d="M29.69 3.36 C22.48 2.2, 14.83 1.7, -0.1 -0.15 M29.69 3.36 C20.57 2.87, 12.01 0.81, -0.1 -0.15" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(107.474609375 52.671875) rotate(0 39.236328125 19.974609375)"><path d="M20.47 21.69 C15.25 16.27, 9.75 11.5, -0.1 -0.15 M20.47 21.69 C13.92 15.97, 7.96 8.73, -0.1 -0.15" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(107.474609375 52.671875) rotate(0 39.236328125 19.974609375)"><path d="M47.52 36.47 C54.23 37.15, 60.45 38.43, 77.24 40.62 M47.52 36.47 C55.23 37.8, 63.47 37.9, 77.24 40.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(107.474609375 52.671875) rotate(0 39.236328125 19.974609375)"><path d="M57.14 18.34 C61.76 23.23, 65.74 28.74, 77.24 40.62 M57.14 18.34 C62.17 24.85, 67.69 30.06, 77.24 40.62" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(104.650390625 186.0078125) rotate(0 39.408203125 20.79296875)"><path d="M-0.19 -0.57 C12.96 6.35, 65.61 34.23, 78.82 41.37 M-1.75 1.75 C11.26 8.87, 64.5 36.37, 77.87 42.8" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(104.650390625 186.0078125) rotate(0 39.408203125 20.79296875)"><path d="M29.52 3.56 C19.92 2.31, 11.86 1.53, -0.19 -0.57 M29.52 3.56 C18.06 1.43, 9.04 0.84, -0.19 -0.57" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(104.650390625 186.0078125) rotate(0 39.408203125 20.79296875)"><path d="M19.92 21.69 C13.14 15.17, 7.87 9.11, -0.19 -0.57 M19.92 21.69 C12.02 13.04, 6.44 5.95, -0.19 -0.57" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(104.650390625 186.0078125) rotate(0 39.408203125 20.79296875)"><path d="M48.07 39.33 C55.8 40.39, 65.08 41.82, 77.87 42.8 M48.07 39.33 C57.87 39.73, 70.16 41.86, 77.87 42.8" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(104.650390625 186.0078125) rotate(0 39.408203125 20.79296875)"><path d="M57.28 20.98 C62.3 27.38, 68.9 34.16, 77.87 42.8 M57.28 20.98 C63.65 27.99, 72.65 36.69, 77.87 42.8" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(101.630859375 316.78515625000006) rotate(0 38.04296875 -15.998046875)"><path d="M0 -0.21 C12.76 -5.33, 63.8 -26.07, 76.34 -31.3 M-1.46 -1.37 C11.18 -6.78, 62.33 -27.66, 75.53 -33.05" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(101.630859375 316.78515625000006) rotate(0 38.04296875 -15.998046875)"><path d="M22.26 -20.32 C15.49 -14.18, 10.68 -10.28, 0 -0.21 M22.26 -20.32 C15.45 -13.65, 7.61 -7.79, 0 -0.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(101.630859375 316.78515625000006) rotate(0 38.04296875 -15.998046875)"><path d="M29.98 -1.31 C21.1 -0.57, 14.1 -2.08, 0 -0.21 M29.98 -1.31 C20.76 -1.02, 10.35 -1.49, 0 -0.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(101.630859375 316.78515625000006) rotate(0 38.04296875 -15.998046875)"><path d="M53.32 -12.89 C59.37 -18.19, 67.2 -25.74, 75.53 -33.05 M53.32 -12.89 C61.65 -19.29, 68.62 -26.84, 75.53 -33.05" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(101.630859375 316.78515625000006) rotate(0 38.04296875 -15.998046875)"><path d="M45.55 -31.88 C53.72 -31.79, 63.76 -33.94, 75.53 -33.05 M45.55 -31.88 C56.31 -31.91, 65.87 -33.13, 75.53 -33.05" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(832.392578125 143.71484375) rotate(0 -220.859375 1.677734375)"><path d="M0.26 0.7 C-73.5 1.36, -368.72 3.46, -442.55 3.75 M-1.07 0.02 C-74.45 0.33, -367.06 1.29, -440.28 1.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(832.392578125 143.71484375) rotate(0 -220.859375 1.677734375)"><path d="M-412.14 -8.57 C-419.44 -6.78, -428.39 -3.96, -440.28 1.84 M-412.14 -8.57 C-418.06 -6.87, -425.44 -4.29, -440.28 1.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(832.392578125 143.71484375) rotate(0 -220.859375 1.677734375)"><path d="M-412.04 11.95 C-419.33 7.59, -428.31 4.25, -440.28 1.84 M-412.04 11.95 C-418.14 9.02, -425.54 6.98, -440.28 1.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(392.8968048095703 66.046875) rotate(0 179.69987487792966 25)"><text x="179.6998748779297" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">I Want to send message to User C,</text><text x="179.6998748779297" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">which server do I connect to?</text></g><g stroke-linecap="round"><g transform="translate(399.130859375 311.18750000000006) rotate(0 -123.8203125 40.53125)"><path d="M-1.01 -0.89 C-35.39 12.58, -166.03 77.5, -207.06 81.23 C-248.1 84.96, -240.33 31.4, -247.23 21.49" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(399.130859375 311.18750000000006) rotate(0 -123.8203125 40.53125)"><path d="M-231.14 46.81 C-236.42 42.38, -238.35 35.7, -247.23 21.49" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(399.130859375 311.18750000000006) rotate(0 -123.8203125 40.53125)"><path d="M-251.18 51.23 C-251.86 45.95, -249.17 38.25, -247.23 21.49" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(411.552734375 276.06640625000006) rotate(0 110.27989959716794 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Websocket Connections</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Push Problems</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Ideally, when an a message needs to be sent, I would:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Figure out which server <span class="MuiBox-root mui-1vu004u">User C</span> is connected to.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Send the message to that server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">That server will look up which (websocket, SSE, long-polling) request is associated with <span class="MuiBox-root mui-1vu004u">User C</span>.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The server will then write the message via the appropriate connection.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">There are two common ways to handle this situation, and the first is to use <strong>hashing</strong>. Let's build up our intuition for this in two steps.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="simple-hashing">Simple Hashing</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Our first approach might be to use a simple modulo operation to figure out which server is responsible for a given user. Then, we'll always have 1 server who "owns" the connections for that user.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">To do this, we'll have a central service that knows how many servers there are <span class="MuiBox-root mui-1vu004u">N</span> and can assign them each a number <span class="MuiBox-root mui-1vu004u">0</span> through <span class="MuiBox-root mui-1vu004u">N-1</span>. This is frequently Apache Zookeeper or Etcd which allows us to manage this metadata and allows the servers to keep in sync as it updates, though in practice there are many alternatives.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We'll make the server number <span class="MuiBox-root mui-1vu004u">n</span> responsible for user <span class="MuiBox-root mui-1vu004u">n % N</span>. When clients initially connect to our service, we can either:
a. Directly connect them to the appropriate server (e.g. by having them know the hash, <span class="MuiBox-root mui-1vu004u">N</span>, and the server addressess associated with each index).
b. Have them randomly connect to any of the servers and have that server redirect them to the appropriate server based on internal data.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 949.1195797698465 551.1215761098174">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="949.1195797698465" height="551.1215761098174" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(284.61964724673845 132.68820068813216) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.17 0.42, 51.14 -1.01, 63.84 0 M21.28 0 C30.76 0.69, 40.52 0.02, 63.84 0 M63.84 0 C78.99 -0.17, 83.74 6.34, 85.12 21.28 M63.84 0 C79.8 -1.84, 84.74 6.55, 85.12 21.28 M85.12 21.28 C83.13 33.07, 83.38 46.57, 85.12 65.24 M85.12 21.28 C85.09 33.45, 85.86 44.47, 85.12 65.24 M85.12 65.24 C86.52 78.52, 77.44 85.23, 63.84 86.52 M85.12 65.24 C84.31 77.17, 76.07 84.34, 63.84 86.52 M63.84 86.52 C51.77 85.86, 36.92 87.1, 21.28 86.52 M63.84 86.52 C50.97 86.2, 36.74 86.3, 21.28 86.52 M21.28 86.52 C7.18 86.22, 0.42 80.02, 0 65.24 M21.28 86.52 C7.08 86.23, -1.58 81.44, 0 65.24 M0 65.24 C0.71 52.48, -0.37 35.22, 0 21.28 M0 65.24 C1.22 56, 1.23 44.61, 0 21.28 M0 21.28 C1.38 7.24, 8.34 1.23, 21.28 0 M0 21.28 C-2.01 9.39, 4.84 -0.77, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(293.28021548404314 163.44796631313216) rotate(0 33.89997863769531 12.5)"><text x="33.89997863769531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User A</text></g><g stroke-linecap="round" transform="translate(283.66847537173845 263.79952881313216) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.57 0.25, 51.74 -0.99, 63.84 0 M21.28 0 C38.65 -0.21, 54.37 -0.51, 63.84 0 M63.84 0 C79.57 -1.6, 84.79 6.62, 85.12 21.28 M63.84 0 C77.94 -2, 84.46 5.24, 85.12 21.28 M85.12 21.28 C84.2 31.9, 86.23 42.14, 85.12 65.24 M85.12 21.28 C86.13 35.51, 85.14 50.01, 85.12 65.24 M85.12 65.24 C84.41 77.47, 76.32 84.62, 63.84 86.52 M85.12 65.24 C85.6 78.95, 79.87 88.35, 63.84 86.52 M63.84 86.52 C53.36 87.22, 42.32 87.09, 21.28 86.52 M63.84 86.52 C52.26 86.3, 40.81 86.74, 21.28 86.52 M21.28 86.52 C7.08 86.27, -1.37 81.18, 0 65.24 M21.28 86.52 C7.84 87.79, 0.07 80.52, 0 65.24 M0 65.24 C-1.36 46.75, -1.17 32.63, 0 21.28 M0 65.24 C0.27 48.21, 0.2 31.65, 0 21.28 M0 21.28 C-1.75 9.09, 5.13 -0.67, 21.28 0 M0 21.28 C0.56 5.11, 8.18 -1.38, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(291.6190445245705 294.55929443813216) rotate(0 34.60997772216797 12.5)"><text x="34.60997772216797" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User B</text></g><g stroke-linecap="round" transform="translate(280.78956912173845 389.8307788131322) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C36.25 -1.46, 47.96 1.2, 63.84 0 M21.28 0 C34.47 -0.64, 45.95 -0.08, 63.84 0 M63.84 0 C77.95 -1.74, 84.55 5.48, 85.12 21.28 M63.84 0 C76.62 -1.57, 84.26 6.38, 85.12 21.28 M85.12 21.28 C86.11 36.18, 84.49 49.63, 85.12 65.24 M85.12 21.28 C84.64 31.49, 84.14 42.71, 85.12 65.24 M85.12 65.24 C85.54 79.01, 79.63 88.11, 63.84 86.52 M85.12 65.24 C83.98 79.88, 78.31 86.72, 63.84 86.52 M63.84 86.52 C49.15 84.97, 35.19 86.71, 21.28 86.52 M63.84 86.52 C51.71 86.52, 38.9 87.52, 21.28 86.52 M21.28 86.52 C7.74 87.62, 0.06 80.38, 0 65.24 M21.28 86.52 C9.22 86.38, -0.92 77.83, 0 65.24 M0 65.24 C2.04 56.7, -0.48 45.69, 0 21.28 M0 65.24 C-1.15 52.74, -1.26 37.9, 0 21.28 M0 21.28 C0.49 5.37, 8.04 -1.2, 21.28 0 M0 21.28 C-0.63 5.4, 4.82 -0.57, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(289.57014010562517 420.5905444381322) rotate(0 33.77997589111328 12.5)"><text x="33.77997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User C</text></g><g stroke-linecap="round" transform="translate(537.0853405031036 204.33824354656508) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.73 -1.8, 66.03 1.12, 116.69 0 M29 0 C48.27 -0.66, 67.33 -0.6, 116.69 0 M116.69 0 C134.8 -1.36, 144.95 9.05, 145.7 29 M116.69 0 C136.18 1.62, 145.55 10.45, 145.7 29 M145.7 29 C144.52 49.93, 144.14 71.32, 145.7 87.01 M145.7 29 C145.41 40.52, 146 53.24, 145.7 87.01 M145.7 87.01 C144.7 106.74, 136.27 116.19, 116.69 116.02 M145.7 87.01 C146.44 106.09, 136.62 115.4, 116.69 116.02 M116.69 116.02 C97.36 116.48, 79.23 116.05, 29 116.02 M116.69 116.02 C91.81 117.34, 66.31 117.26, 29 116.02 M29 116.02 C11.52 115.89, -0.8 104.96, 0 87.01 M29 116.02 C8.24 114.65, 2.18 108.4, 0 87.01 M0 87.01 C0.36 65.29, 1.45 39.31, 0 29 M0 87.01 C0.81 62.95, 1.04 40.01, 0 29 M0 29 C-0.54 8.2, 7.69 -0.5, 29 0 M0 29 C2.15 8.44, 10.45 -0.08, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(571.3730297120879 249.84800917156508) rotate(0 38.55996704101564 12.5)"><text x="38.559967041015625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 1</text></g><g stroke-linecap="round" transform="translate(533.4486217531036 358.6800404215651) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.67 -1.01, 69.05 -0.75, 116.69 0 M29 0 C47.06 0.03, 65.97 0.4, 116.69 0 M116.69 0 C136.16 1.41, 145.57 10.35, 145.7 29 M116.69 0 C137.66 -1.08, 147.3 8.62, 145.7 29 M145.7 29 C143.36 43.01, 143.42 60.84, 145.7 87.01 M145.7 29 C145.66 45.39, 146.28 61.47, 145.7 87.01 M145.7 87.01 C146.35 106.13, 136.54 115.48, 116.69 116.02 M145.7 87.01 C143.79 105.96, 136.12 115.67, 116.69 116.02 M116.69 116.02 C88.28 114.64, 62.13 116.66, 29 116.02 M116.69 116.02 C86.48 116.37, 54.01 115.74, 29 116.02 M29 116.02 C8.43 114.83, 1.89 108.13, 0 87.01 M29 116.02 C11.88 115.17, 1.58 106.52, 0 87.01 M0 87.01 C1.64 64.02, -1.03 45.45, 0 29 M0 87.01 C-0.55 73.88, -1.26 61.96, 0 29 M0 29 C1.87 8.6, 10.35 -0.07, 29 0 M0 29 C2.12 7.7, 9.33 1.38, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(563.3263149293731 404.1898060465651) rotate(0 42.96996307373048 12.5)"><text x="42.96996307373047" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 2</text></g><g stroke-linecap="round"><g transform="translate(373.00636599673845 179.8850600088599) rotate(0 75.00042475318256 27.34474347812572)"><path d="M-0.05 -1.05 C24.93 7.96, 124.77 44.57, 149.66 53.72 M-1.53 1.02 C23.28 10.17, 122.98 45.8, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(373.00636599673845 179.8850600088599) rotate(0 75.00042475318256 27.34474347812572)"><path d="M29.95 -1.01 C19.71 -1.6, 11.34 -2.27, -0.05 -1.05 M29.95 -1.01 C23.06 -0.4, 15.98 -0.78, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(373.00636599673845 179.8850600088599) rotate(0 75.00042475318256 27.34474347812572)"><path d="M22.91 18.27 C14.71 12.21, 8.33 6.08, -0.05 -1.05 M22.91 18.27 C17.72 14.42, 12.27 9.58, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(373.00636599673845 179.8850600088599) rotate(0 75.00042475318256 27.34474347812572)"><path d="M118.53 55 C125.29 54.37, 133.93 53.65, 148.53 54.75 M118.53 55 C125.56 55.74, 132.38 55.32, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(373.00636599673845 179.8850600088599) rotate(0 75.00042475318256 27.34474347812572)"><path d="M125.39 35.66 C130.16 40.51, 136.85 45.27, 148.53 54.75 M125.39 35.66 C130.75 40.87, 135.99 44.93, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(378.26417849673845 175.16990377042055) rotate(0 76.02581537818256 38.09211170628048)"><path d="M-0.34 -0.97 C24.88 11.77, 125.99 62.57, 151.32 75.37 M1.68 1.14 C27.3 14.1, 128.82 63.84, 153.64 76.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(378.26417849673845 175.16990377042055) rotate(0 76.02581537818256 38.09211170628048)"><path d="M123.83 73.09 C131.02 72.95, 140.1 74.43, 153.64 76.48 M123.83 73.09 C131.79 74.13, 140.58 74.23, 153.64 76.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(378.26417849673845 175.16990377042055) rotate(0 76.02581537818256 38.09211170628048)"><path d="M132.98 54.72 C137.3 60, 143.67 66.92, 153.64 76.48 M132.98 54.72 C138.49 60.77, 144.82 65.81, 153.64 76.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(520.0710210957342 276.80660199798757) rotate(0 -67.89425003826018 -34.850408743860044)"><path d="M-0.16 -1.03 C-22.83 -12.67, -113.83 -58.58, -136.26 -69.88 M-1.7 1.05 C-24.56 -10.4, -115.24 -56.48, -137.45 -68.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(520.0710210957342 276.80660199798757) rotate(0 -67.89425003826018 -34.850408743860044)"><path d="M-107.71 -64.52 C-117.87 -66.45, -124.91 -65.03, -137.45 -68.43 M-107.71 -64.52 C-118.29 -65.7, -130.27 -68.4, -137.45 -68.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(520.0710210957342 276.80660199798757) rotate(0 -67.89425003826018 -34.850408743860044)"><path d="M-117.18 -46.31 C-124.65 -53.41, -128.99 -57.16, -137.45 -68.43 M-117.18 -46.31 C-124.08 -54.3, -132.52 -63.8, -137.45 -68.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(350.68655030871963 57.244609876340576) rotate(0 45.34307616731246 65.52451058438427)"><path d="M0.64 -0.4 C12.87 6.84, 58 22.55, 73.16 44.52 C88.33 66.48, 88.78 116.93, 91.64 131.41" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(350.68655030871963 57.244609876340576) rotate(0 45.34307616731246 65.52451058438427)"><path d="M78.26 104.56 C81.62 112.46, 84.26 121.28, 91.64 131.41" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(350.68655030871963 57.244609876340576) rotate(0 45.34307616731246 65.52451058438427)"><path d="M98.65 102.24 C96.26 110.91, 93.13 120.38, 91.64 131.41" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(227.42917945987114 10) rotate(0 172.869873046875 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1) I'm trying to connect for User A</text></g><g stroke-linecap="round"><g transform="translate(366.32285537250476 230.69275316580774) rotate(0 75.3192864258937 79.74294730763972)"><path d="M-1.04 0.85 C24.11 27.26, 125.88 132.45, 151.32 158.78 M0.61 0.25 C25.62 26.78, 125.61 133.35, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(366.32285537250476 230.69275316580774) rotate(0 75.3192864258937 79.74294730763972)"><path d="M25.91 14.02 C18.22 10.49, 6.55 6.49, -1.04 0.85 M25.91 14.02 C19.07 11.14, 13.12 7.02, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(366.32285537250476 230.69275316580774) rotate(0 75.3192864258937 79.74294730763972)"><path d="M11.14 28.27 C8.39 20.06, 1.69 11.27, -1.04 0.85 M11.14 28.27 C7.9 21.76, 5.56 14.16, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(366.32285537250476 230.69275316580774) rotate(0 75.3192864258937 79.74294730763972)"><path d="M123.94 146.45 C134.41 152.36, 140.83 157.34, 150.73 159.94 M123.94 146.45 C130.29 149.62, 137.5 152.04, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(366.32285537250476 230.69275316580774) rotate(0 75.3192864258937 79.74294730763972)"><path d="M138.88 132.38 C144.35 142.9, 145.75 152.61, 150.73 159.94 M138.88 132.38 C141.59 139.13, 145.14 144.99, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(467.4552962596302 272.83127020211) rotate(0 -135.69983882300508 45.85713140329071)"><path d="M-1.13 0.74 C-14.16 15.9, -31.91 75.3, -76.98 90.58 C-122.05 105.87, -239.12 92.16, -271.57 92.44" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(467.4552962596302 272.83127020211) rotate(0 -135.69983882300508 45.85713140329071)"><path d="M-7.51 30.05 C-3.63 17.67, -3.3 6.42, -1.13 0.74" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(467.4552962596302 272.83127020211) rotate(0 -135.69983882300508 45.85713140329071)"><path d="M-24.86 19.09 C-14.09 11.25, -6.83 4.38, -1.13 0.74" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(10 334.2192272011173) rotate(0 91.60992431640625 25)"><text x="91.60992431640625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2) You should talk</text><text x="91.60992431640625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to Server 2</text></g><g transform="translate(167.38275758156027 516.1215761098174) rotate(0 120.89991760253906 12.499999999999972)"><text x="120.89991760253906" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3) Let's exchange data!</text></g><g stroke-linecap="round"><g transform="translate(429.928164106546 533.9663988379791) rotate(0 23.64218159714966 -83.08443453384129)"><path d="M-0.77 0.07 C6.92 -8.29, 40.67 -21.79, 46.31 -49.51 C51.94 -77.24, 35.46 -146.82, 33.04 -166.31" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(429.928164106546 533.9663988379791) rotate(0 23.64218159714966 -83.08443453384129)"><path d="M48.01 -140.3 C43.3 -150.17, 37.67 -156.06, 33.04 -166.31" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(429.928164106546 533.9663988379791) rotate(0 23.64218159714966 -83.08443453384129)"><path d="M27.79 -136.77 C29.4 -147.61, 30.09 -154.61, 33.04 -166.31" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(773.078804726698 170.2500417271537) rotate(0 83.02038752157426 81.81011984149606)"><path d="M32 0 C69.21 -2.56, 110.41 -2.58, 134.04 0 M32 0 C66.28 0.56, 101.94 0.92, 134.04 0 M134.04 0 C155.96 -0.21, 164.49 8.91, 166.04 32 M134.04 0 C155.26 2.29, 167.4 8.59, 166.04 32 M166.04 32 C165.71 59.66, 167.5 85.24, 166.04 131.62 M166.04 32 C165.76 59.78, 164.76 87.83, 166.04 131.62 M166.04 131.62 C167.82 154.84, 153.87 163.25, 134.04 163.62 M166.04 131.62 C167.68 153.73, 155.51 162.17, 134.04 163.62 M134.04 163.62 C107.44 162.55, 78.79 164.24, 32 163.62 M134.04 163.62 C93.14 163.11, 53.07 163.88, 32 163.62 M32 163.62 C11.44 163.35, 0.28 153.83, 0 131.62 M32 163.62 C9.21 163.43, -0.29 153.12, 0 131.62 M0 131.62 C-0.48 99.91, 1.5 69.15, 0 32 M0 131.62 C-0.24 95.19, -1.81 58.42, 0 32 M0 32 C0.34 10.08, 9.62 0.54, 32 0 M0 32 C-0.45 8.7, 11.48 1.44, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(806.5392480954401 239.56016156864976) rotate(0 49.559944152832 12.5)"><text x="49.55994415283203" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Zookeeper</text></g><g stroke-linecap="round"><g transform="translate(687.3176467836324 260.55191198817715) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M-0.14 -0.98 C11.75 -2.42, 60.06 -6.77, 72.09 -7.64 M-1.68 1.12 C10.06 -0.26, 59.33 -4.91, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(687.3176467836324 260.55191198817715) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M26.95 -13.87 C15.62 -7.96, 6.39 -3.43, -0.14 -0.98 M26.95 -13.87 C17.37 -10.06, 6.44 -4.59, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(687.3176467836324 260.55191198817715) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M28.89 6.56 C16.7 5.08, 6.76 2.23, -0.14 -0.98 M28.89 6.56 C18.63 2.87, 6.99 0.85, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(687.3176467836324 260.55191198817715) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M44.62 6.79 C52.61 3.32, 62.89 -1.58, 71.55 -6.44 M44.62 6.79 C54.89 1.47, 63.76 -2.63, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(687.3176467836324 260.55191198817715) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M42.42 -13.62 C51.37 -9.71, 62.45 -7.24, 71.55 -6.44 M42.42 -13.62 C53.46 -11.43, 63.14 -8.06, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(689.9148635569392 392.7626134484076) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M1.18 -0.31 C12.75 -9.73, 58.3 -46.77, 69.67 -55.68 M0.34 -1.52 C11.71 -10.89, 57.29 -45.66, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(689.9148635569392 392.7626134484076) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M16.61 -26.04 C11.3 -17.83, 5.14 -9.97, 1.18 -0.31 M16.61 -26.04 C11.96 -16.7, 5.13 -6.01, 1.18 -0.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(689.9148635569392 392.7626134484076) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M29.54 -10.1 C19.95 -6.91, 9.62 -4.18, 1.18 -0.31 M29.54 -10.1 C19.95 -6.72, 8.28 -2, 1.18 -0.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(689.9148635569392 392.7626134484076) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M52.69 -29.28 C57.14 -37.87, 61.11 -46.49, 68.64 -54.68 M52.69 -29.28 C59.49 -39.1, 64.41 -47.56, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(689.9148635569392 392.7626134484076) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M40.09 -45.48 C48.72 -48.97, 56.75 -52.37, 68.64 -54.68 M40.09 -45.48 C51.71 -49.24, 61.35 -51.64, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Connecting to the Right Server</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When a client connects, the following happens:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client connects to a random server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The server looks up the client's hash in Zookeeper to figure out which server is responsible for them.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The server redirects the client to the appropriate server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client connects to the correct server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The server adds that client to a map of connections.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Now we're ready to send updates and messages!</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When we want to send messages to <span class="MuiBox-root mui-1vu004u">User C</span>, we can simply hash the user's id to figure out which server is responsible for them and send the message there.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 682.8991270131849 509.0913373667765">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="682.8991270131849" height="509.0913373667765" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(13.830078125 10) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.17 0.42, 51.14 -1.01, 63.84 0 M21.28 0 C30.76 0.69, 40.52 0.02, 63.84 0 M63.84 0 C78.99 -0.17, 83.74 6.34, 85.12 21.28 M63.84 0 C79.8 -1.84, 84.74 6.55, 85.12 21.28 M85.12 21.28 C83.13 33.07, 83.38 46.57, 85.12 65.24 M85.12 21.28 C85.09 33.45, 85.86 44.47, 85.12 65.24 M85.12 65.24 C86.52 78.52, 77.44 85.23, 63.84 86.52 M85.12 65.24 C84.31 77.17, 76.07 84.34, 63.84 86.52 M63.84 86.52 C51.77 85.86, 36.92 87.1, 21.28 86.52 M63.84 86.52 C50.97 86.2, 36.74 86.3, 21.28 86.52 M21.28 86.52 C7.18 86.22, 0.42 80.02, 0 65.24 M21.28 86.52 C7.08 86.23, -1.58 81.44, 0 65.24 M0 65.24 C0.71 52.48, -0.37 35.22, 0 21.28 M0 65.24 C1.22 56, 1.23 44.61, 0 21.28 M0 21.28 C1.38 7.24, 8.34 1.23, 21.28 0 M0 21.28 C-2.01 9.39, 4.84 -0.77, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(22.490646362304688 40.759765625) rotate(0 33.89997863769531 12.5)"><text x="33.89997863769531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User A</text></g><g stroke-linecap="round" transform="translate(12.87890625 141.111328125) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.57 0.25, 51.74 -0.99, 63.84 0 M21.28 0 C38.65 -0.21, 54.37 -0.51, 63.84 0 M63.84 0 C79.57 -1.6, 84.79 6.62, 85.12 21.28 M63.84 0 C77.94 -2, 84.46 5.24, 85.12 21.28 M85.12 21.28 C84.2 31.9, 86.23 42.14, 85.12 65.24 M85.12 21.28 C86.13 35.51, 85.14 50.01, 85.12 65.24 M85.12 65.24 C84.41 77.47, 76.32 84.62, 63.84 86.52 M85.12 65.24 C85.6 78.95, 79.87 88.35, 63.84 86.52 M63.84 86.52 C53.36 87.22, 42.32 87.09, 21.28 86.52 M63.84 86.52 C52.26 86.3, 40.81 86.74, 21.28 86.52 M21.28 86.52 C7.08 86.27, -1.37 81.18, 0 65.24 M21.28 86.52 C7.84 87.79, 0.07 80.52, 0 65.24 M0 65.24 C-1.36 46.75, -1.17 32.63, 0 21.28 M0 65.24 C0.27 48.21, 0.2 31.65, 0 21.28 M0 21.28 C-1.75 9.09, 5.13 -0.67, 21.28 0 M0 21.28 C0.56 5.11, 8.18 -1.38, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(20.82947540283203 171.87109375) rotate(0 34.60997772216797 12.5)"><text x="34.60997772216797" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User B</text></g><g stroke-linecap="round" transform="translate(10 267.14257812500006) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C36.25 -1.46, 47.96 1.2, 63.84 0 M21.28 0 C34.47 -0.64, 45.95 -0.08, 63.84 0 M63.84 0 C77.95 -1.74, 84.55 5.48, 85.12 21.28 M63.84 0 C76.62 -1.57, 84.26 6.38, 85.12 21.28 M85.12 21.28 C86.11 36.18, 84.49 49.63, 85.12 65.24 M85.12 21.28 C84.64 31.49, 84.14 42.71, 85.12 65.24 M85.12 65.24 C85.54 79.01, 79.63 88.11, 63.84 86.52 M85.12 65.24 C83.98 79.88, 78.31 86.72, 63.84 86.52 M63.84 86.52 C49.15 84.97, 35.19 86.71, 21.28 86.52 M63.84 86.52 C51.71 86.52, 38.9 87.52, 21.28 86.52 M21.28 86.52 C7.74 87.62, 0.06 80.38, 0 65.24 M21.28 86.52 C9.22 86.38, -0.92 77.83, 0 65.24 M0 65.24 C2.04 56.7, -0.48 45.69, 0 21.28 M0 65.24 C-1.15 52.74, -1.26 37.9, 0 21.28 M0 21.28 C0.49 5.37, 8.04 -1.2, 21.28 0 M0 21.28 C-0.63 5.4, 4.82 -0.57, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(18.78057098388672 297.90234375000006) rotate(0 33.77997589111328 12.5)"><text x="33.77997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User C</text></g><g stroke-linecap="round" transform="translate(266.29577138136506 81.65004285843293) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.73 -1.8, 66.03 1.12, 116.69 0 M29 0 C48.27 -0.66, 67.33 -0.6, 116.69 0 M116.69 0 C134.8 -1.36, 144.95 9.05, 145.7 29 M116.69 0 C136.18 1.62, 145.55 10.45, 145.7 29 M145.7 29 C144.52 49.93, 144.14 71.32, 145.7 87.01 M145.7 29 C145.41 40.52, 146 53.24, 145.7 87.01 M145.7 87.01 C144.7 106.74, 136.27 116.19, 116.69 116.02 M145.7 87.01 C146.44 106.09, 136.62 115.4, 116.69 116.02 M116.69 116.02 C97.36 116.48, 79.23 116.05, 29 116.02 M116.69 116.02 C91.81 117.34, 66.31 117.26, 29 116.02 M29 116.02 C11.52 115.89, -0.8 104.96, 0 87.01 M29 116.02 C8.24 114.65, 2.18 108.4, 0 87.01 M0 87.01 C0.36 65.29, 1.45 39.31, 0 29 M0 87.01 C0.81 62.95, 1.04 40.01, 0 29 M0 29 C-0.54 8.2, 7.69 -0.5, 29 0 M0 29 C2.15 8.44, 10.45 -0.08, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(300.58346059034943 127.15980848343293) rotate(0 38.55996704101564 12.5)"><text x="38.559967041015625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 1</text></g><g stroke-linecap="round" transform="translate(262.65905263136506 235.99183973343293) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.67 -1.01, 69.05 -0.75, 116.69 0 M29 0 C47.06 0.03, 65.97 0.4, 116.69 0 M116.69 0 C136.16 1.41, 145.57 10.35, 145.7 29 M116.69 0 C137.66 -1.08, 147.3 8.62, 145.7 29 M145.7 29 C143.36 43.01, 143.42 60.84, 145.7 87.01 M145.7 29 C145.66 45.39, 146.28 61.47, 145.7 87.01 M145.7 87.01 C146.35 106.13, 136.54 115.48, 116.69 116.02 M145.7 87.01 C143.79 105.96, 136.12 115.67, 116.69 116.02 M116.69 116.02 C88.28 114.64, 62.13 116.66, 29 116.02 M116.69 116.02 C86.48 116.37, 54.01 115.74, 29 116.02 M29 116.02 C8.43 114.83, 1.89 108.13, 0 87.01 M29 116.02 C11.88 115.17, 1.58 106.52, 0 87.01 M0 87.01 C1.64 64.02, -1.03 45.45, 0 29 M0 87.01 C-0.55 73.88, -1.26 61.96, 0 29 M0 29 C1.87 8.6, 10.35 -0.07, 29 0 M0 29 C2.12 7.7, 9.33 1.38, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(292.5367458076346 281.5016053584329) rotate(0 42.96996307373048 12.5)"><text x="42.96996307373047" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 2</text></g><g stroke-linecap="round"><g transform="translate(102.216796875 57.196859320727754) rotate(0 75.00042475318256 27.34474347812572)"><path d="M-0.05 -1.05 C24.93 7.96, 124.77 44.57, 149.66 53.72 M-1.53 1.02 C23.28 10.17, 122.98 45.8, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 57.196859320727754) rotate(0 75.00042475318256 27.34474347812572)"><path d="M29.95 -1.01 C19.71 -1.6, 11.34 -2.27, -0.05 -1.05 M29.95 -1.01 C23.06 -0.4, 15.98 -0.78, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 57.196859320727754) rotate(0 75.00042475318256 27.34474347812572)"><path d="M22.91 18.27 C14.71 12.21, 8.33 6.08, -0.05 -1.05 M22.91 18.27 C17.72 14.42, 12.27 9.58, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 57.196859320727754) rotate(0 75.00042475318256 27.34474347812572)"><path d="M118.53 55 C125.29 54.37, 133.93 53.65, 148.53 54.75 M118.53 55 C125.56 55.74, 132.38 55.32, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 57.196859320727754) rotate(0 75.00042475318256 27.34474347812572)"><path d="M125.39 35.66 C130.16 40.51, 136.85 45.27, 148.53 54.75 M125.39 35.66 C130.75 40.87, 135.99 44.93, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(95.53328625076631 108.00455247767559) rotate(0 75.3192864258937 79.74294730763972)"><path d="M-1.04 0.85 C24.11 27.26, 125.88 132.45, 151.32 158.78 M0.61 0.25 C25.62 26.78, 125.61 133.35, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(95.53328625076631 108.00455247767559) rotate(0 75.3192864258937 79.74294730763972)"><path d="M25.91 14.02 C18.22 10.49, 6.55 6.49, -1.04 0.85 M25.91 14.02 C19.07 11.14, 13.12 7.02, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(95.53328625076631 108.00455247767559) rotate(0 75.3192864258937 79.74294730763972)"><path d="M11.14 28.27 C8.39 20.06, 1.69 11.27, -1.04 0.85 M11.14 28.27 C7.9 21.76, 5.56 14.16, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(95.53328625076631 108.00455247767559) rotate(0 75.3192864258937 79.74294730763972)"><path d="M123.94 146.45 C134.41 152.36, 140.83 157.34, 150.73 159.94 M123.94 146.45 C130.29 149.62, 137.5 152.04, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(95.53328625076631 108.00455247767559) rotate(0 75.3192864258937 79.74294730763972)"><path d="M138.88 132.38 C144.35 142.9, 145.75 152.61, 150.73 159.94 M138.88 132.38 C141.59 139.13, 145.14 144.99, 150.73 159.94" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(502.2892356049595 47.561841039021544) rotate(0 83.02038752157426 81.81011984149606)"><path d="M32 0 C69.21 -2.56, 110.41 -2.58, 134.04 0 M32 0 C66.28 0.56, 101.94 0.92, 134.04 0 M134.04 0 C155.96 -0.21, 164.49 8.91, 166.04 32 M134.04 0 C155.26 2.29, 167.4 8.59, 166.04 32 M166.04 32 C165.71 59.66, 167.5 85.24, 166.04 131.62 M166.04 32 C165.76 59.78, 164.76 87.83, 166.04 131.62 M166.04 131.62 C167.82 154.84, 153.87 163.25, 134.04 163.62 M166.04 131.62 C167.68 153.73, 155.51 162.17, 134.04 163.62 M134.04 163.62 C107.44 162.55, 78.79 164.24, 32 163.62 M134.04 163.62 C93.14 163.11, 53.07 163.88, 32 163.62 M32 163.62 C11.44 163.35, 0.28 153.83, 0 131.62 M32 163.62 C9.21 163.43, -0.29 153.12, 0 131.62 M0 131.62 C-0.48 99.91, 1.5 69.15, 0 32 M0 131.62 C-0.24 95.19, -1.81 58.42, 0 32 M0 32 C0.34 10.08, 9.62 0.54, 32 0 M0 32 C-0.45 8.7, 11.48 1.44, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(535.7496789737017 116.8719608805176) rotate(0 49.559944152832 12.5)"><text x="49.55994415283203" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Zookeeper</text></g><g stroke-linecap="round"><g transform="translate(416.528077661894 137.863711300045) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M-0.14 -0.98 C11.75 -2.42, 60.06 -6.77, 72.09 -7.64 M-1.68 1.12 C10.06 -0.26, 59.33 -4.91, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 137.863711300045) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M26.95 -13.87 C15.62 -7.96, 6.39 -3.43, -0.14 -0.98 M26.95 -13.87 C17.37 -10.06, 6.44 -4.59, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 137.863711300045) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M28.89 6.56 C16.7 5.08, 6.76 2.23, -0.14 -0.98 M28.89 6.56 C18.63 2.87, 6.99 0.85, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 137.863711300045) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M44.62 6.79 C52.61 3.32, 62.89 -1.58, 71.55 -6.44 M44.62 6.79 C54.89 1.47, 63.76 -2.63, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 137.863711300045) rotate(0 35.66093472668621 -3.4960834627079294)"><path d="M42.42 -13.62 C51.37 -9.71, 62.45 -7.24, 71.55 -6.44 M42.42 -13.62 C53.46 -11.43, 63.14 -8.06, 71.55 -6.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(419.1252944352007 270.07441276027544) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M1.18 -0.31 C12.75 -9.73, 58.3 -46.77, 69.67 -55.68 M0.34 -1.52 C11.71 -10.89, 57.29 -45.66, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(419.1252944352007 270.07441276027544) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M16.61 -26.04 C11.3 -17.83, 5.14 -9.97, 1.18 -0.31 M16.61 -26.04 C11.96 -16.7, 5.13 -6.01, 1.18 -0.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(419.1252944352007 270.07441276027544) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M29.54 -10.1 C19.95 -6.91, 9.62 -4.18, 1.18 -0.31 M29.54 -10.1 C19.95 -6.72, 8.28 -2, 1.18 -0.31" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(419.1252944352007 270.07441276027544) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M52.69 -29.28 C57.14 -37.87, 61.11 -46.49, 68.64 -54.68 M52.69 -29.28 C59.49 -39.1, 64.41 -47.56, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(419.1252944352007 270.07441276027544) rotate(0 34.90783020313381 -27.334823131987037)"><path d="M40.09 -45.48 C48.72 -48.97, 56.75 -52.37, 68.64 -54.68 M40.09 -45.48 C51.71 -49.24, 61.35 -51.64, 68.64 -54.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(523.1803770131849 319.0249311167765) rotate(0 74.859375 60.775390625)"><path d="M30.39 0 C64.12 0.12, 98.47 -1.51, 119.33 0 M30.39 0 C56.12 -1.14, 82.98 -1.49, 119.33 0 M119.33 0 C139.68 1.76, 151.28 8.43, 149.72 30.39 M119.33 0 C140.17 2.16, 149.85 11.61, 149.72 30.39 M149.72 30.39 C147.47 44.3, 148.4 61.96, 149.72 91.16 M149.72 30.39 C149.94 45.73, 149.86 61.61, 149.72 91.16 M149.72 91.16 C150.59 109.42, 137.99 121.51, 119.33 121.55 M149.72 91.16 C150.27 109.85, 141.84 120.78, 119.33 121.55 M119.33 121.55 C93.96 120.39, 65.86 120.62, 30.39 121.55 M119.33 121.55 C88.52 121.3, 58.73 121.36, 30.39 121.55 M30.39 121.55 C8.55 123.17, 0.6 112.34, 0 91.16 M30.39 121.55 C9.11 123.78, 1.55 111.02, 0 91.16 M0 91.16 C-2.05 73.46, 0.27 57.12, 0 30.39 M0 91.16 C-1.21 75.93, 0.21 62.2, 0 30.39 M0 30.39 C-0.76 11.17, 8.85 0.2, 30.39 0 M0 30.39 C0.76 12.23, 12.3 -0.41, 30.39 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(557.4897794790052 354.8003217417765) rotate(0 40.54997253417969 25)"><text x="40.54997253417969" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update </text><text x="40.54997253417969" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round"><g transform="translate(590.3073629602857 304.1499311167765) rotate(0 -0.21896817904541876 -39.845703125)"><path d="M0.82 1.15 C0.68 -11.89, -1.53 -65.94, -1.57 -79.23 M-0.21 0.71 C0.07 -12.62, 0.45 -67.6, 0.54 -81.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(590.3073629602857 304.1499311167765) rotate(0 -0.21896817904541876 -39.845703125)"><path d="M-10.33 -26.7 C-5.99 -22.07, -4.5 -11.88, 0.82 1.15 M-10.33 -26.7 C-5.7 -14.96, -1.66 -5.87, 0.82 1.15" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(590.3073629602857 304.1499311167765) rotate(0 -0.21896817904541876 -39.845703125)"><path d="M10.18 -27.35 C9.66 -22.43, 6.29 -12.08, 0.82 1.15 M10.18 -27.35 C6.81 -15.2, 2.85 -5.85, 0.82 1.15" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(590.3073629602857 304.1499311167765) rotate(0 -0.21896817904541876 -39.845703125)"><path d="M10.6 -52.85 C10.36 -61.37, 6.83 -64.46, 0.54 -81.11 M10.6 -52.85 C7.04 -62.84, 2.8 -75.64, 0.54 -81.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(590.3073629602857 304.1499311167765) rotate(0 -0.21896817904541876 -39.845703125)"><path d="M-9.92 -53 C-5.3 -61.62, -3.97 -64.68, 0.54 -81.11 M-9.92 -53 C-5.48 -63.09, -1.71 -75.83, 0.54 -81.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(508.4733457631848 357.5913373667765) rotate(0 -44.99609375 -19.669921875)"><path d="M0.24 0.02 C-14.97 -6.63, -75.83 -33.66, -90.75 -40.31 M-1.1 -1.01 C-15.96 -7.5, -73.68 -32.98, -88.44 -39.29" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(508.4733457631848 357.5913373667765) rotate(0 -44.99609375 -19.669921875)"><path d="M-58.49 -37.45 C-68.63 -39.28, -80.49 -37.43, -88.44 -39.29 M-58.49 -37.45 C-66.33 -37.3, -73.68 -38.95, -88.44 -39.29" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(508.4733457631848 357.5913373667765) rotate(0 -44.99609375 -19.669921875)"><path d="M-66.68 -18.63 C-73.97 -26.88, -83.04 -31.43, -88.44 -39.29 M-66.68 -18.63 C-72.42 -23.24, -77.68 -29.7, -88.44 -39.29" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(143.4460020131848 379.7475873667765) rotate(0 158.5198974609375 25)"><text x="158.5198974609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1) I know user A is on Server 2,</text><text x="158.5198974609375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">I'll send the message there.</text></g><g stroke-linecap="round"><g transform="translate(461.31314356543874 425.8841301857921) rotate(0 15.308616723873172 -30.48029281901563)"><path d="M-0.34 -0.52 C4.03 -0.56, 20.38 11.1, 25.7 0.84 C31.01 -9.41, 30.81 -51.59, 31.54 -62.05" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(461.31314356543874 425.8841301857921) rotate(0 15.308616723873172 -30.48029281901563)"><path d="M40.79 -33.52 C37.3 -42.28, 36.44 -46.67, 31.54 -62.05" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(461.31314356543874 425.8841301857921) rotate(0 15.308616723873172 -30.48029281901563)"><path d="M20.28 -34.25 C22.07 -42.77, 26.48 -46.97, 31.54 -62.05" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(100.51677227685667 449.0913373667765) rotate(0 173.06985473632812 25)"><text x="173.06985473632812" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2) I know user A is connected on</text><text x="173.06985473632812" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">WebSocket connection 432, sending!</text></g><g stroke-linecap="round"><g transform="translate(98.7154056417111 439.8512263826113) rotate(0 27.525454435736847 -124.3252570079174)"><path d="M0.92 -0.95 C4.5 -23.74, 11.63 -95.64, 20.48 -136.93 C29.34 -178.21, 48.33 -230.24, 54.05 -248.67" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(98.7154056417111 439.8512263826113) rotate(0 27.525454435736847 -124.3252570079174)"><path d="M54.93 -218.68 C53.2 -224.42, 56.13 -233.42, 54.05 -248.67" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(98.7154056417111 439.8512263826113) rotate(0 27.525454435736847 -124.3252570079174)"><path d="M35.45 -225.13 C37.95 -229.61, 45.14 -237.21, 54.05 -248.67" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Sending Updates to the Right Server</span></div></div></div></div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Our Update Server stays connected to Zookeeper and knows the addresses of all servers and the modulo <span class="MuiBox-root mui-1vu004u">N</span>.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">When the Update Server needs to send a message to <span class="MuiBox-root mui-1vu004u">User C</span>, it can hash the user's id to figure out which server is responsible for them (Server 2) and sends the message there.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Server 2 receives the message, looks up which connection is associated with <span class="MuiBox-root mui-1vu004u">User C</span>, and sends the message to that connection.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">This approach works because we always know that a single server is responsible for a given user (or entity, or ID, or whatever). All inbound connections go to that server and, if we want to use the connection associated with that entity, we know to pass it to that server for forwarding to the end client.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="consistent-hashing">Consistent Hashing</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The hashing approach works great when <span class="MuiBox-root mui-1vu004u">N</span> is fixed. If we know that we'll always have 4 servers, we can use modulo 4 to figure out which server is responsible for a given user. But what happens when we want to scale our service?</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If N goes up from 4 to 5 or down from 4 to 3, almost all of our users need to be moved to a new server! This is a problem. First, we're going to need to disconnect those users from the server they're currently connected to, then have them reconnect to the new server. This disconnect/reconnect is expensive and, in the worst case, happens all at once. Secondly, we need to route update messages to the new, correct server. There may be a transitionary period where we aren't sure whether the updates need to go to Server 1 or Server 2. During that period, we'll likely need to write to both servers to make sure we don't lose any updates.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">All this to say that moving connections between servers is expensive and should be minimized if possible!</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Consistent Hashing is the solution. Consistent Hashing provides a way to map users to servers in a way that minimizes the number of re-mappings when we scale our service. The simplest way to think of this is that our hash function puts the servers onto a circle or ring.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 931.9914695225887 941.9131466712527">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="931.9914695225887" height="941.9131466712527" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(156.28168396164256 159.57470032999117) rotate(0 311.15629960823435 313.5150513542821)"><path d="M344.23 1.42 C365.93 -1.26, 389.58 9.75, 410.63 16.91 C431.67 24.08, 451.51 33.11, 470.52 44.42 C489.53 55.73, 508.44 69.39, 524.66 84.78 C540.88 100.17, 555.38 118.02, 567.82 136.76 C580.27 155.49, 590.87 176.28, 599.32 197.19 C607.77 218.1, 614.86 240.16, 618.53 262.22 C622.2 284.28, 622.49 306.98, 621.33 329.53 C620.18 352.09, 617.56 375.85, 611.61 397.55 C605.65 419.24, 595.98 440.02, 585.6 459.71 C575.22 479.39, 563.77 498.36, 549.33 515.68 C534.88 533, 516.82 550.01, 498.93 563.62 C481.04 577.24, 462.17 588.2, 441.99 597.38 C421.81 606.55, 399.7 613.85, 377.83 618.66 C355.97 623.48, 333.02 626.02, 310.81 626.27 C288.59 626.52, 266.15 624.77, 244.55 620.17 C222.96 615.57, 201.37 608.29, 181.26 598.66 C161.16 589.03, 141.87 575.93, 123.93 562.41 C106 548.89, 88.33 534.34, 73.65 517.53 C58.96 500.72, 46.17 481.4, 35.83 461.57 C25.49 441.74, 17.56 420.32, 11.58 398.53 C5.6 376.74, 1.33 353.54, -0.03 330.82 C-1.4 308.09, -0.27 284.38, 3.4 262.21 C7.06 240.03, 13.72 218.67, 21.98 197.79 C30.25 176.91, 40.44 155.7, 52.98 136.93 C65.51 118.17, 80.94 100.46, 97.19 85.19 C113.45 69.92, 131.31 56.65, 150.5 45.32 C169.69 33.98, 191.22 24.6, 212.33 17.2 C233.44 9.8, 254.2 3.23, 277.16 0.91 C300.13 -1.41, 337.5 1.93, 350.12 3.27 C362.73 4.62, 353.63 4.1, 352.85 8.99 M232.16 9.04 C251.5 -1.55, 277.33 0.58, 299.98 -0.29 C322.62 -1.17, 346.31 -0.39, 368.03 3.78 C389.75 7.94, 410.1 15.83, 430.3 24.7 C450.51 33.57, 471.04 44.13, 489.28 56.98 C507.51 69.84, 524.44 85.1, 539.73 101.83 C555.01 118.56, 569.82 137.79, 580.99 157.36 C592.15 176.93, 600.19 197.81, 606.71 219.26 C613.22 240.71, 617.77 263.63, 620.07 286.06 C622.36 308.49, 623.2 331.77, 620.49 353.86 C617.78 375.94, 611.24 397.6, 603.8 418.57 C596.37 439.55, 587.89 460.54, 575.89 479.71 C563.88 498.88, 547.55 517.36, 531.76 533.61 C515.98 549.86, 499.53 564.93, 481.18 577.19 C462.84 589.45, 442.7 599.41, 421.69 607.18 C400.67 614.95, 377.46 620.51, 355.11 623.81 C332.76 627.12, 309.76 628.64, 287.6 627 C265.43 625.37, 243.15 620.58, 222.12 614 C201.1 607.42, 180.69 598.13, 161.45 587.5 C142.2 576.87, 123.54 565.15, 106.65 550.23 C89.76 535.31, 73.38 516.16, 60.11 497.98 C46.84 479.81, 35.96 461.37, 27.02 441.18 C18.09 420.99, 11.15 399.19, 6.48 376.83 C1.8 354.47, -1.54 329.68, -1.03 307.03 C-0.52 284.38, 4.15 262.57, 9.55 240.94 C14.96 219.3, 21.83 197.7, 31.43 177.22 C41.02 156.73, 53.16 135.49, 67.1 118.02 C81.05 100.56, 97.93 86.36, 115.12 72.44 C132.3 58.52, 150.38 44.8, 170.22 34.5 C190.06 24.21, 223.21 13.63, 234.14 10.66 C245.07 7.7, 234.61 11.76, 235.81 16.69" stroke="#343a40" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(403.06963772891777 10) rotate(0 65.94913579124659 61.686331430918244)"><path d="M11.06 26.84 C11.06 26.84, 11.06 26.84, 11.06 26.84 M11.06 26.84 C11.06 26.84, 11.06 26.84, 11.06 26.84 M2.01 49.45 C14.88 33.13, 30.35 17.68, 40.06 5.67 M2.01 49.45 C10.4 40.83, 17.75 30.89, 40.06 5.67 M1.49 62.24 C17.1 43.8, 34.67 25.33, 53.31 2.62 M1.49 62.24 C19.93 40.16, 40.72 17.57, 53.31 2.62 M3.59 72.02 C29.78 44.8, 53.09 17.01, 65.26 1.08 M3.59 72.02 C24.7 49.03, 43.6 27.25, 65.26 1.08 M5.69 81.8 C29.42 53.97, 51.88 27.72, 74.57 2.55 M5.69 81.8 C27.23 57.26, 48.64 32.87, 74.57 2.55 M9.76 89.31 C31.34 65.64, 51.07 37.61, 83.89 4.03 M9.76 89.31 C27.35 68.43, 45.94 46.38, 83.89 4.03 M14.48 96.07 C34.26 74.77, 55.72 49.44, 92.55 6.26 M14.48 96.07 C39.54 65.32, 66.09 35.93, 92.55 6.26 M19.21 102.82 C48.45 71.07, 77.47 35.74, 99.9 9.99 M19.21 102.82 C37.6 83.5, 52.56 64.08, 99.9 9.99 M24.59 108.83 C46.73 79.66, 69.47 53.74, 105.94 15.24 M24.59 108.83 C45.63 83.7, 69.03 58.11, 105.94 15.24 M31.94 112.57 C51.21 88.5, 74.89 63.08, 112.64 19.74 M31.94 112.57 C63.45 77.38, 95.57 40.41, 112.64 19.74 M39.29 116.31 C70.63 81.76, 96.54 51.61, 118.67 24.99 M39.29 116.31 C57.2 95.53, 74.46 75.83, 118.67 24.99 M46.64 120.04 C66.2 96.29, 87.15 74.05, 122.74 32.5 M46.64 120.04 C69.64 93.62, 90.7 69.64, 122.74 32.5 M55.3 122.27 C84.21 91.31, 110.12 60.47, 126.16 40.77 M55.3 122.27 C82.23 91.95, 110.07 59.59, 126.16 40.77 M65.93 122.24 C87.87 94.02, 115.63 66.34, 129.57 49.03 M65.93 122.24 C90.78 94.3, 115.33 65.21, 129.57 49.03 M77.22 121.45 C95.9 99.75, 112.63 82.58, 130.36 60.32 M77.22 121.45 C92.11 105.32, 105.24 89.28, 130.36 60.32 M91.78 116.89 C99.51 107.25, 107.83 97.68, 128.52 74.62 M91.78 116.89 C102.39 104.91, 113.48 92.22, 128.52 74.62" stroke="#ffc9c9" stroke-width="1" fill="none"></path><path d="M65.34 0.59 C74.94 -0.44, 85.89 2.27, 94.9 6.33 C103.91 10.39, 113.43 17.22, 119.38 24.96 C125.32 32.69, 129.27 43.13, 130.57 52.75 C131.86 62.36, 130.46 73.63, 127.16 82.67 C123.86 91.7, 118.27 100.6, 110.77 106.94 C103.26 113.27, 91.99 118.12, 82.14 120.66 C72.3 123.21, 61.65 124.31, 51.68 122.21 C41.72 120.11, 30.06 114.44, 22.36 108.04 C14.66 101.64, 9.27 92.52, 5.49 83.82 C1.7 75.12, -1.3 65.34, -0.37 55.85 C0.56 46.35, 5.34 35.06, 11.06 26.84 C16.79 18.62, 24.08 11.09, 33.96 6.52 C43.85 1.95, 63.23 0.09, 70.37 -0.58 C77.5 -1.25, 76.65 1.26, 76.76 2.49 M95.02 4.94 C104.68 8.11, 113.59 16.89, 119.8 24.49 C126.02 32.09, 130.79 41.34, 132.28 50.55 C133.77 59.77, 132.35 70.56, 128.76 79.76 C125.17 88.97, 118.04 99.09, 110.73 105.81 C103.42 112.52, 94.7 117.27, 84.91 120.06 C75.12 122.85, 62.24 124.26, 51.98 122.54 C41.71 120.82, 30.98 115.61, 23.3 109.77 C15.63 103.93, 9.61 96.26, 5.93 87.48 C2.26 78.7, 0.8 66.66, 1.23 57.08 C1.66 47.5, 3.06 38.29, 8.49 29.99 C13.93 21.69, 24.87 12.32, 33.84 7.27 C42.82 2.23, 52.59 0.12, 62.35 -0.26 C72.1 -0.64, 87.33 3.58, 92.38 4.99 C97.43 6.4, 93.07 7.29, 92.65 8.19" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(455.6016958067502 49.0675081695951) rotate(0 13.28399658203125 22.5)"><text x="13.28399658203125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n1</text></g><g stroke-linecap="round" transform="translate(706.8619428046843 153.02774329991735) rotate(0 65.94913579124659 61.686331430918244)"><path d="M24.02 12.93 C24.02 12.93, 24.02 12.93, 24.02 12.93 M24.02 12.93 C24.02 12.93, 24.02 12.93, 24.02 12.93 M3.16 49.12 C11.12 38.09, 23.25 27.25, 39.9 6.86 M3.16 49.12 C15.47 34.32, 28.35 20.55, 39.9 6.86 M0.67 64.18 C17.96 47.64, 32.56 26.13, 55.12 1.54 M0.67 64.18 C19.51 42.2, 36.36 22.47, 55.12 1.54 M2.77 73.96 C23.08 48.87, 44.38 29.44, 65.75 1.51 M2.77 73.96 C21.28 53.16, 39.58 31.64, 65.75 1.51 M5.53 82.98 C27.15 58.52, 46 34.01, 76.38 1.47 M5.53 82.98 C26.65 59.64, 47.71 35.31, 76.38 1.47 M8.28 92 C36.5 60.67, 66.1 25.64, 86.36 2.19 M8.28 92 C34.4 62.05, 60.01 31.8, 86.36 2.19 M13.67 98.01 C43.05 65.55, 72.11 29.87, 93.05 6.69 M13.67 98.01 C37.09 71.09, 57.69 45.98, 93.05 6.69 M19.7 103.25 C48.67 67.19, 80.99 35.93, 100.4 10.42 M19.7 103.25 C45.82 74.7, 72.16 44.42, 100.4 10.42 M25.74 108.5 C44.86 88.64, 63.47 64.21, 107.09 14.92 M25.74 108.5 C51.58 78.41, 78.3 46.09, 107.09 14.92 M32.44 113 C59.01 83.25, 81.78 54.35, 113.13 20.17 M32.44 113 C62.58 77.77, 91.44 45.33, 113.13 20.17 M39.79 116.74 C54.59 97.41, 73.08 80.61, 117.86 26.93 M39.79 116.74 C55.56 98.43, 73.23 78.5, 117.86 26.93 M48.45 118.97 C70.41 92.53, 94.41 69.1, 122.58 33.68 M48.45 118.97 C66.7 97.98, 82.92 79.14, 122.58 33.68 M56.45 121.95 C77.01 101.28, 93.03 78.1, 126.65 41.2 M56.45 121.95 C82.13 93.25, 106.75 62.84, 126.65 41.2 M66.43 122.67 C84.85 102.46, 99.26 82.56, 129.41 50.22 M66.43 122.67 C88.92 96.84, 110.19 73.11, 129.41 50.22 M79.03 120.37 C88.63 107.99, 101.71 97.98, 130.85 60.75 M79.03 120.37 C95.44 100.81, 112.67 80.29, 130.85 60.75 M90.97 118.83 C103.23 103.28, 116.5 90.11, 131.64 72.04 M90.97 118.83 C104.54 103.37, 117.22 89.65, 131.64 72.04" stroke="#a5d8ff" stroke-width="1" fill="none"></path><path d="M84.78 1.71 C94.37 3.42, 104.28 10.27, 111.48 17.12 C118.68 23.97, 124.66 33.68, 127.96 42.82 C131.26 51.97, 132.99 62.7, 131.27 72.01 C129.55 81.31, 123.85 90.96, 117.65 98.65 C111.45 106.34, 103.36 114.11, 94.06 118.15 C84.77 122.19, 72.06 123.53, 61.9 122.86 C51.75 122.19, 41.94 118.83, 33.13 114.14 C24.32 109.45, 14.55 102.84, 9.04 94.71 C3.54 86.58, 0.75 75.15, 0.09 65.34 C-0.56 55.53, 1.09 44.62, 5.12 35.84 C9.15 27.06, 16.17 18.39, 24.24 12.67 C32.32 6.95, 42.27 2.74, 53.57 1.51 C64.86 0.29, 84.63 4.26, 92.02 5.31 C99.41 6.37, 98.51 6.83, 97.91 7.84 M49.65 1.49 C58.52 -2.02, 70.42 -1.74, 79.97 0.4 C89.52 2.54, 99.12 8.16, 106.96 14.33 C114.8 20.5, 123.13 28.53, 127.02 37.42 C130.91 46.31, 131.5 58.03, 130.32 67.67 C129.14 77.31, 125.2 87.08, 119.94 95.24 C114.67 103.4, 107.22 111.96, 98.72 116.63 C90.21 121.29, 79.43 122.99, 68.91 123.21 C58.38 123.44, 44.69 122.35, 35.56 117.97 C26.42 113.59, 19.97 104.84, 14.1 96.94 C8.22 89.04, 2.29 79.92, 0.31 70.55 C-1.66 61.18, -1.06 49.48, 2.27 40.72 C5.59 31.97, 12.78 24.61, 20.27 18.04 C27.76 11.47, 42.43 3.83, 47.18 1.31 C51.94 -1.21, 48.12 2, 48.78 2.93" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(751.4560049718722 192.09525146951245) rotate(0 21.221992492675724 22.5)"><text x="21.22199249267578" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n2</text></g><g stroke-linecap="round" transform="translate(790.0931979400955 409.5419956826745) rotate(0 65.94913579124659 61.686331430918244)"><path d="M13.3 24.81 C13.3 24.81, 13.3 24.81, 13.3 24.81 M13.3 24.81 C13.3 24.81, 13.3 24.81, 13.3 24.81 M3.6 48.18 C16.44 34.49, 26.64 20.11, 40.33 5.91 M3.6 48.18 C11.55 39.47, 19.57 30.17, 40.33 5.91 M1.76 62.48 C23.02 40.67, 43.25 17.44, 53.59 2.86 M1.76 62.48 C14.12 48.71, 26.03 35.08, 53.59 2.86 M3.21 73.01 C15.97 57.62, 30.77 42.27, 66.84 -0.19 M3.21 73.01 C26 45.76, 49.74 19.77, 66.84 -0.19 M4.65 83.54 C26.31 58.19, 48.75 34.97, 75.51 2.04 M4.65 83.54 C32.72 50.97, 58.73 19.24, 75.51 2.04 M9.38 90.3 C36.3 59.78, 60.95 29.66, 84.17 4.26 M9.38 90.3 C32.01 66.46, 52.18 42.21, 84.17 4.26 M14.1 97.06 C38.88 67.04, 66.09 40.25, 92.83 6.49 M14.1 97.06 C31.82 78.1, 47.29 59.39, 92.83 6.49 M18.83 103.82 C37.38 80.04, 55.61 60.41, 100.18 10.23 M18.83 103.82 C47.29 68.89, 77.83 35.01, 100.18 10.23 M24.87 109.07 C57.6 74, 89.66 35.57, 106.87 14.73 M24.87 109.07 C57.92 72.6, 90.12 35.46, 106.87 14.73 M32.21 112.8 C54.6 89.98, 73.66 66.78, 112.91 19.98 M32.21 112.8 C47.87 92.91, 65.53 73.84, 112.91 19.98 M39.56 116.54 C59.54 92.36, 81.41 64.8, 118.95 25.22 M39.56 116.54 C65.6 86.33, 92.66 55.63, 118.95 25.22 M47.57 119.53 C66.8 94.6, 90.42 71.75, 123.02 32.74 M47.57 119.53 C67.45 96.66, 87.13 74.38, 123.02 32.74 M56.89 121 C83.92 93.1, 107.32 64.5, 126.43 41 M56.89 121 C79.36 96.38, 102.12 70.22, 126.43 41 M67.52 120.97 C85.56 100.43, 101.55 83.03, 129.19 50.03 M67.52 120.97 C80.27 105.26, 95.19 89.05, 129.19 50.03 M77.49 121.69 C93.22 103.62, 108.73 83.89, 130.63 60.56 M77.49 121.69 C95.78 100.8, 113.83 80.62, 130.63 60.56 M92.06 117.13 C101.11 107.98, 108.62 98.37, 129.45 74.11 M92.06 117.13 C100.6 106.97, 110.89 95.15, 129.45 74.11" stroke="#ffec99" stroke-width="1" fill="none"></path><path d="M35.4 6.6 C43.8 1.74, 57.05 -0.34, 67.31 -0.3 C77.56 -0.27, 87.93 2.13, 96.94 6.82 C105.95 11.51, 115.69 19.85, 121.35 27.84 C127.02 35.83, 129.81 45.42, 130.94 54.76 C132.06 64.09, 131.89 74.77, 128.1 83.84 C124.3 92.91, 116.08 102.93, 108.18 109.16 C100.28 115.39, 90.61 119.36, 80.7 121.23 C70.79 123.1, 58.7 122.83, 48.72 120.37 C38.75 117.91, 28.32 112.68, 20.86 106.47 C13.4 100.26, 7.25 91.87, 3.97 83.1 C0.68 74.32, -0.4 63.5, 1.13 53.82 C2.65 44.14, 6.69 33.04, 13.12 25.03 C19.55 17.01, 34.52 8.98, 39.72 5.72 C44.92 2.47, 43.77 4.56, 44.32 5.51 M48.24 1.92 C57.4 -1.18, 71.25 -1.34, 81.19 0.91 C91.14 3.16, 100.41 9.04, 107.89 15.42 C115.36 21.81, 122.02 30.18, 126.03 39.22 C130.04 48.27, 132.67 60.2, 131.94 69.67 C131.21 79.15, 127.69 88.22, 121.65 96.08 C115.62 103.95, 104.7 112.53, 95.75 116.87 C86.79 121.22, 77.98 122.23, 67.93 122.13 C57.89 122.03, 45.01 120.54, 35.47 116.26 C25.93 111.99, 16.59 104.01, 10.68 96.48 C4.78 88.95, 1.32 80.57, 0.02 71.06 C-1.27 61.56, -0.72 48.73, 2.91 39.46 C6.54 30.19, 13.88 21.9, 21.82 15.43 C29.76 8.96, 46.09 2.63, 50.57 0.63 C55.04 -1.36, 48.75 2.27, 48.67 3.45" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(835.24525876451 448.60950385226954) rotate(0 20.66399383544922 22.5)"><text x="20.66399383544922" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n3</text></g><g stroke-linecap="round" transform="translate(682.8481449081621 692.0096219459065) rotate(0 65.94913579124659 61.686331430918244)"><path d="M10.19 28.74 C10.19 28.74, 10.19 28.74, 10.19 28.74 M10.19 28.74 C10.19 28.74, 10.19 28.74, 10.19 28.74 M3.11 49.08 C13.57 36.59, 26.28 21.95, 39.19 7.57 M3.11 49.08 C17.25 33.74, 28.88 19.05, 39.19 7.57 M2.59 61.87 C20.25 38.1, 42.31 17.51, 53.76 3.01 M2.59 61.87 C17.85 43.77, 36.02 24.17, 53.76 3.01 M4.03 72.4 C26.18 48.5, 46.58 23.06, 67.01 -0.05 M4.03 72.4 C19.43 53.25, 35.01 35.85, 67.01 -0.05 M5.48 82.94 C23.49 64.33, 39.16 45.95, 75.67 2.18 M5.48 82.94 C23.98 63.37, 40.25 43.94, 75.67 2.18 M9.55 90.45 C29.05 66.41, 48.23 47.19, 84.34 4.41 M9.55 90.45 C34.53 62.53, 57.73 33.78, 84.34 4.41 M14.27 97.21 C30.21 73.74, 49.34 55.86, 93 6.64 M14.27 97.21 C30.78 78.28, 49.7 58.36, 93 6.64 M19 103.96 C37.43 86.06, 52.38 63.33, 100.35 10.38 M19 103.96 C37.75 83.33, 54.18 63.52, 100.35 10.38 M24.38 109.97 C55.18 75.93, 81.24 43.26, 106.39 15.63 M24.38 109.97 C53.2 75.51, 82.29 43.21, 106.39 15.63 M32.38 112.95 C57.37 80.83, 87.98 48.78, 113.08 20.12 M32.38 112.95 C52.09 90.56, 73.3 65.93, 113.08 20.12 M39.73 116.69 C71.43 83.26, 100.48 47.51, 119.12 25.37 M39.73 116.69 C63.53 89.33, 89.15 59.75, 119.12 25.37 M47.74 119.68 C69.18 91.92, 94.5 66.27, 122.53 33.64 M47.74 119.68 C74.6 88.39, 100.06 59.84, 122.53 33.64 M57.06 121.15 C82.72 92.05, 105.15 62.83, 126.6 41.15 M57.06 121.15 C84.12 88.82, 111.2 58.57, 126.6 41.15 M67.69 121.12 C80.47 103.95, 97.42 85.83, 130.67 48.66 M67.69 121.12 C87.49 99.11, 108.65 75.38, 130.67 48.66 M78.32 121.08 C95.99 100.49, 111.63 82.12, 131.46 59.95 M78.32 121.08 C90.7 106.36, 104.35 91.1, 131.46 59.95 M94.2 115.01 C105.22 101.5, 119.88 86.13, 128.97 75.01 M94.2 115.01 C107.22 100.81, 120.98 85.21, 128.97 75.01" stroke="#ffc9c9" stroke-width="1" fill="none"></path><path d="M64.24 -0.68 C73.96 -1.63, 87 2.65, 96.12 6.98 C105.24 11.31, 112.96 17.72, 118.96 25.32 C124.95 32.92, 130.72 42.92, 132.11 52.57 C133.5 62.22, 130.88 74.22, 127.28 83.21 C123.67 92.21, 117.97 100.37, 110.49 106.56 C103.01 112.74, 92.36 117.91, 82.4 120.33 C72.43 122.75, 60.57 122.96, 50.69 121.07 C40.82 119.18, 30.71 114.99, 23.13 108.99 C15.55 102.99, 8.88 94.16, 5.23 85.08 C1.58 76, 0.34 63.94, 1.22 54.49 C2.1 45.04, 5.07 36.06, 10.48 28.4 C15.9 20.74, 24.27 13.14, 33.72 8.55 C43.18 3.97, 61.39 2.09, 67.23 0.89 C73.07 -0.31, 68.93 0.63, 68.78 1.37 M64.06 0.32 C73.51 -0.55, 85.35 2.3, 94.73 6.8 C104.1 11.31, 114.06 19.56, 120.33 27.36 C126.61 35.15, 131.39 44.14, 132.4 53.57 C133.41 62.99, 129.88 75.12, 126.38 83.9 C122.89 92.68, 118.86 100.05, 111.44 106.25 C104.03 112.45, 92.23 118.66, 81.88 121.11 C71.54 123.56, 59.33 122.88, 49.37 120.95 C39.41 119.02, 29.79 115.85, 22.12 109.55 C14.45 103.25, 6.96 92.35, 3.36 83.14 C-0.25 73.93, -1 63.86, 0.51 54.3 C2.01 44.74, 6.87 33.57, 12.38 25.79 C17.9 18.01, 24.95 11.97, 33.59 7.63 C42.24 3.3, 59.17 0.87, 64.27 -0.23 C69.38 -1.33, 63.99 -0.13, 64.24 1.05" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(728.7382046949789 731.0771301155015) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n4</text></g><g stroke-linecap="round" transform="translate(415.7195096681853 808.5404838094162) rotate(0 65.94913579124659 61.686331430918244)"><path d="M16.9 19.99 C16.9 19.99, 16.9 19.99, 16.9 19.99 M16.9 19.99 C16.9 19.99, 16.9 19.99, 16.9 19.99 M3.25 47.88 C17.81 32.29, 31.27 19.49, 40.65 4.86 M3.25 47.88 C15.44 35.08, 26.82 21.24, 40.65 4.86 M2.73 60.67 C13.86 48.36, 24.93 33.25, 48.66 7.85 M2.73 60.67 C19.79 41.49, 37.08 21.78, 48.66 7.85 M2.21 73.47 C20.91 51.78, 42.02 27.88, 59.94 7.06 M2.21 73.47 C14.1 59.91, 26.97 46.02, 59.94 7.06 M6.28 80.98 C27.84 52.25, 50.87 28.69, 76.48 0.23 M6.28 80.98 C26.85 56.66, 47.42 33.23, 76.48 0.23 M10.35 88.5 C26.16 70.05, 41.36 54, 83.83 3.97 M10.35 88.5 C35.79 60.15, 62.4 29.51, 83.83 3.97 M14.42 96.01 C29.51 76.86, 45.49 56.71, 91.83 6.95 M14.42 96.01 C37.5 67.39, 63.11 39.49, 91.83 6.95 M17.83 104.28 C47.87 68.66, 80.29 34.59, 99.18 10.69 M17.83 104.28 C40.21 79.88, 60.65 55.89, 99.18 10.69 M24.52 108.77 C47.94 83.07, 70.43 57.69, 106.53 14.43 M24.52 108.77 C46.8 83.23, 68.69 57.48, 106.53 14.43 M31.87 112.51 C51.18 89.94, 71.52 64.3, 111.91 20.43 M31.87 112.51 C58.97 81.38, 84.7 51.72, 111.91 20.43 M38.57 117 C66.86 86.02, 94.36 52.39, 117.95 25.68 M38.57 117 C67.51 83.92, 97.97 48.73, 117.95 25.68 M45.92 120.74 C65.32 98.22, 85.34 77.89, 123.33 31.69 M45.92 120.74 C63.89 99.87, 81.57 80.33, 123.33 31.69 M54.58 122.97 C79.9 96.51, 102.65 70.38, 129.37 36.93 M54.58 122.97 C72.87 101.14, 92.56 78.74, 129.37 36.93 M63.9 124.45 C82.78 104.16, 100.46 81.62, 131.47 46.71 M63.9 124.45 C89.74 94.13, 115.26 63.89, 131.47 46.71 M74.53 124.41 C87.71 108.72, 102.45 90.91, 133.57 56.49 M74.53 124.41 C94.81 101.17, 114.78 78.34, 133.57 56.49 M89.75 119.09 C105.87 103, 118.49 84.92, 136.33 65.51 M89.75 119.09 C108.1 99.09, 124.11 77.55, 136.33 65.51" stroke="#b2f2bb" stroke-width="1" fill="none"></path><path d="M43.06 3.21 C51.92 -0.89, 65.81 -1.51, 75.9 0 C85.99 1.5, 95.47 6.66, 103.62 12.23 C111.77 17.8, 120.18 25.16, 124.82 33.42 C129.45 41.68, 131.69 52.28, 131.41 61.8 C131.14 71.32, 128 81.94, 123.18 90.55 C118.35 99.16, 110.8 107.98, 102.48 113.48 C94.15 118.97, 83.28 122.77, 73.26 123.54 C63.24 124.31, 52.01 121.6, 42.35 118.12 C32.69 114.63, 22.16 109.58, 15.29 102.62 C8.41 95.66, 3.26 85.67, 1.11 76.35 C-1.05 67.04, -0.25 56.14, 2.37 46.75 C5 37.36, 9.54 27.53, 16.86 20.03 C24.18 12.53, 40.67 4.59, 46.29 1.76 C51.91 -1.07, 50.24 2.05, 50.59 3.03 M73.36 1.51 C83.52 1.54, 95.47 5.01, 103.65 10.27 C111.83 15.52, 117.51 24.85, 122.44 33.06 C127.37 41.27, 132.89 50.16, 133.21 59.52 C133.53 68.88, 129.44 80.59, 124.38 89.2 C119.32 97.8, 111.2 105.34, 102.86 111.16 C94.52 116.98, 84.42 122.87, 74.34 124.13 C64.26 125.4, 51.85 122.31, 42.35 118.75 C32.85 115.19, 23.87 109.9, 17.34 102.78 C10.82 95.66, 6.01 85.15, 3.2 76.04 C0.4 66.93, -1.44 57.27, 0.5 48.13 C2.44 39, 8.18 28.57, 14.85 21.24 C21.52 13.91, 30.77 7.53, 40.51 4.15 C50.25 0.78, 68.09 1.33, 73.3 0.98 C78.5 0.64, 72.06 1.03, 71.72 2.08" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(462.0055731781466 847.6079919790112) rotate(0 19.529991149902344 22.5)"><text x="19.529991149902344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n5</text></g><g stroke-linecap="round" transform="translate(91.55455208701642 165.26909648799938) rotate(0 65.94913579124659 61.686331430918244)"><path d="M23.89 14.14 C23.89 14.14, 23.89 14.14, 23.89 14.14 M23.89 14.14 C23.89 14.14, 23.89 14.14, 23.89 14.14 M10.25 42.03 C18.53 30.87, 27.85 23.56, 41.08 6.56 M10.25 42.03 C19.3 31.47, 30.05 19.5, 41.08 6.56 M7.76 57.09 C24.23 42.13, 37.63 23.58, 53.68 4.26 M7.76 57.09 C24.3 38.18, 40.18 18.67, 53.68 4.26 M5.26 72.15 C24.31 47.64, 46.75 22.89, 64.31 4.23 M5.26 72.15 C26.79 47.63, 48.39 22.33, 64.31 4.23 M8.68 80.42 C22.68 63.3, 37.27 47.66, 74.94 4.19 M8.68 80.42 C25.21 60.45, 43.98 41.27, 74.94 4.19 M11.44 89.44 C31.76 64.6, 50.22 42.47, 86.23 3.4 M11.44 89.44 C36.89 58.61, 65.44 27.4, 86.23 3.4 M14.19 98.46 C39.26 73.49, 62.96 42.44, 92.92 7.9 M14.19 98.46 C39.07 69.99, 61.48 42.04, 92.92 7.9 M19.57 104.47 C42.57 75.74, 67.4 50.8, 100.27 11.64 M19.57 104.47 C47.02 71.47, 74.98 41.01, 100.27 11.64 M25.61 109.72 C46.4 83.67, 70.87 59.3, 107.62 15.38 M25.61 109.72 C48.42 84.09, 71.6 55.4, 107.62 15.38 M31.65 114.96 C62.07 83.16, 88.56 50.29, 114.97 19.12 M31.65 114.96 C49.93 94.39, 66.86 74.64, 114.97 19.12 M37.69 120.21 C68.53 88.55, 95 53.18, 119.7 25.87 M37.69 120.21 C65.98 87.46, 95.77 53.04, 119.7 25.87 M46.35 122.44 C65.13 97.95, 88.87 74.73, 123.76 33.39 M46.35 122.44 C66.68 97.13, 87.38 74.83, 123.76 33.39 M55.01 124.67 C73.13 101.39, 94.9 77.72, 127.83 40.9 M55.01 124.67 C76.83 100.14, 98.3 74.28, 127.83 40.9 M64.99 125.39 C88.75 102.45, 109.25 76.01, 129.28 51.43 M64.99 125.39 C85.77 100.71, 107.36 76.47, 129.28 51.43 M78.24 122.34 C95.61 103.25, 111.97 85.35, 130.07 62.72 M78.24 122.34 C91.54 107.95, 104.19 92.4, 130.07 62.72 M92.15 118.53 C107.73 103.91, 120.6 88.59, 132.17 72.49 M92.15 118.53 C106.77 102.64, 121.88 85.59, 132.17 72.49" stroke="#b2f2bb" stroke-width="1" fill="none"></path><path d="M51.3 2.07 C60.43 -0.73, 73.64 -0.6, 83.53 1.68 C93.42 3.96, 103.28 9.24, 110.63 15.75 C117.98 22.26, 124.23 31.48, 127.65 40.74 C131.08 50, 132.52 61.66, 131.19 71.32 C129.85 80.98, 125.53 91.2, 119.62 98.69 C113.72 106.18, 105.11 112.02, 95.75 116.27 C86.4 120.52, 73.94 124.17, 63.49 124.19 C53.05 124.22, 41.86 121.09, 33.07 116.41 C24.28 111.73, 16.32 104.28, 10.77 96.11 C5.22 87.94, 0.85 77.2, -0.23 67.39 C-1.3 57.59, 0.35 46.11, 4.33 37.28 C8.31 28.46, 15.14 20.65, 23.66 14.41 C32.17 8.17, 49.34 2.16, 55.43 -0.15 C61.51 -2.45, 59.92 -0.61, 60.17 0.6 M89.53 5.47 C98.92 7.89, 111.04 13.67, 117.78 20.79 C124.52 27.91, 128.23 38.78, 129.96 48.19 C131.69 57.61, 130.9 67.79, 128.17 77.28 C125.44 86.77, 120.53 98.18, 113.59 105.13 C106.65 112.09, 96.08 116.15, 86.54 118.99 C77 121.84, 66.1 123.67, 56.36 122.2 C46.61 120.74, 36.56 115.69, 28.1 110.19 C19.63 104.69, 10.44 97.59, 5.58 89.2 C0.72 80.8, -1.34 69.44, -1.06 59.81 C-0.78 50.17, 2.03 39.58, 7.26 31.38 C12.5 23.19, 21.75 15.74, 30.33 10.64 C38.9 5.54, 48.75 1.65, 58.69 0.79 C68.64 -0.08, 84.59 4.49, 89.99 5.46 C95.4 6.44, 91.44 5.87, 91.12 6.62" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(135.1946118738332 204.33660465759448) rotate(0 22.175994873046875 22.5)"><text x="22.175994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n8</text></g><g stroke-linecap="round" transform="translate(10 428.60383584728424) rotate(0 65.94913579124659 61.686331430918244)"><path d="M27.22 10.41 C27.22 10.41, 27.22 10.41, 27.22 10.41 M27.22 10.41 C27.22 10.41, 27.22 10.41, 27.22 10.41 M3.08 50.38 C13.19 40.68, 21.09 26.35, 42.44 5.1 M3.08 50.38 C17.79 33.76, 31.15 17.65, 42.44 5.1 M0.59 65.44 C24.51 39.99, 47.39 13.79, 57.67 -0.22 M0.59 65.44 C19.41 44.89, 37.1 22.87, 57.67 -0.22 M3.35 74.46 C22.05 54.58, 40.14 35.2, 66.99 1.25 M3.35 74.46 C23.46 49.53, 46.41 25.19, 66.99 1.25 M5.45 84.24 C22.31 63.04, 40.76 41.26, 76.96 1.97 M5.45 84.24 C23.69 62.41, 43.43 40.48, 76.96 1.97 M8.86 92.5 C26.15 76.05, 38.95 54.63, 86.93 2.69 M8.86 92.5 C27.21 70.38, 45.43 49.68, 86.93 2.69 M14.24 98.51 C45.64 62.84, 78.38 28.55, 94.28 6.43 M14.24 98.51 C35.62 74.94, 57.42 50.85, 94.28 6.43 M20.28 103.76 C41.1 79.28, 62.52 55.96, 100.98 10.93 M20.28 103.76 C39.16 82.04, 58.28 58.6, 100.98 10.93 M25.66 109.76 C46.56 85.67, 66.56 58.68, 107.67 15.42 M25.66 109.76 C58.94 72.58, 90.15 37.07, 107.67 15.42 M31.7 115.01 C60.59 79.28, 92.99 46.58, 114.36 19.91 M31.7 115.01 C55.18 88.45, 77.33 62.96, 114.36 19.91 M39.71 117.99 C72.48 83.87, 101.48 45.65, 119.09 26.67 M39.71 117.99 C70.68 82.79, 102.6 45.51, 119.09 26.67 M48.37 120.22 C70.39 94.74, 94.65 66.65, 123.16 34.19 M48.37 120.22 C63.63 102.87, 78.92 83.85, 123.16 34.19 M56.37 123.21 C75.19 102.27, 92.56 79.41, 127.23 41.7 M56.37 123.21 C82.1 94.43, 106.22 67.47, 127.23 41.7 M67 123.17 C92.32 92.93, 117.58 64.16, 129.99 50.72 M67 123.17 C83.75 104.31, 99.44 85.75, 129.99 50.72 M78.95 121.63 C92.69 105.84, 107.1 88.09, 130.78 62.01 M78.95 121.63 C99.64 97.93, 119.12 76.27, 130.78 62.01 M90.89 120.08 C106.48 101.24, 118.82 85.52, 130.91 74.05 M90.89 120.08 C106.3 102.33, 122.1 83.06, 130.91 74.05" stroke="#ffec99" stroke-width="1" fill="none"></path><path d="M87.62 2.6 C97 4.76, 106.8 11.84, 113.81 19.1 C120.82 26.36, 126.85 36.7, 129.68 46.14 C132.51 55.58, 132.91 66.63, 130.8 75.74 C128.7 84.85, 123.84 93.47, 117.05 100.81 C110.25 108.14, 99.75 115.89, 90.03 119.76 C80.32 123.63, 68.82 124.98, 58.77 124.03 C48.72 123.07, 38.26 119.45, 29.75 114.03 C21.23 108.61, 12.74 100.16, 7.68 91.5 C2.61 82.84, -0.52 71.62, -0.65 62.07 C-0.77 52.52, 2.34 42.74, 6.93 34.19 C11.53 25.64, 18.59 16.51, 26.92 10.77 C35.24 5.02, 46.32 0.73, 56.9 -0.29 C67.48 -1.3, 84.39 3.46, 90.39 4.69 C96.39 5.93, 93.32 6.37, 92.9 7.12 M84.13 2.17 C93.27 3.94, 103.14 9.69, 110.46 16.61 C117.77 23.53, 124.81 34.67, 128.04 43.71 C131.28 52.76, 131.43 61.77, 129.86 70.89 C128.29 80.01, 124.41 90.89, 118.61 98.44 C112.8 106, 104.49 112.02, 95.03 116.21 C85.56 120.41, 72.41 123.86, 61.85 123.62 C51.29 123.38, 40.48 119.64, 31.66 114.75 C22.85 109.85, 14.12 102.21, 8.94 94.25 C3.76 86.3, 1.34 76.45, 0.58 67.04 C-0.19 57.63, 0.51 46.53, 4.33 37.79 C8.15 29.05, 15.25 20.56, 23.47 14.6 C31.69 8.65, 43.56 4.14, 53.67 2.07 C63.79 -0.01, 78.9 1.92, 84.16 2.15 C89.42 2.38, 85.69 2.34, 85.21 3.46" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(57.72605832197303 467.6713440168793) rotate(0 18.089996337890625 22.5)"><text x="18.089996337890625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n7</text></g><g stroke-linecap="round" transform="translate(110.7300670345594 675.8180700505936) rotate(0 65.94913579124659 61.686331430918244)"><path d="M12.13 27.77 C12.13 27.77, 12.13 27.77, 12.13 27.77 M12.13 27.77 C12.13 27.77, 12.13 27.77, 12.13 27.77 M1.77 51.89 C18.72 34.95, 32.98 17.57, 40.48 7.36 M1.77 51.89 C15.38 37.43, 27.02 24, 40.48 7.36 M2.56 63.17 C20.29 42.48, 36.62 23.28, 53.73 4.31 M2.56 63.17 C18.49 44.93, 34.31 26.98, 53.73 4.31 M4 73.71 C22.64 53.58, 39.31 29.06, 67.64 0.5 M4 73.71 C19.03 55.83, 35.01 36.8, 67.64 0.5 M5.45 84.24 C23.34 65.03, 42.92 41.86, 76.3 2.73 M5.45 84.24 C28.1 56.31, 52.22 29.72, 76.3 2.73 M10.17 90.99 C37.44 61.4, 64.54 28.27, 85.62 4.2 M10.17 90.99 C27.43 72.93, 41.3 54.78, 85.62 4.2 M14.9 97.75 C36.67 69.04, 59.02 43.55, 94.94 5.68 M14.9 97.75 C35.59 73.04, 58.64 47.86, 94.94 5.68 M19.62 104.51 C39.22 80.05, 63.26 54.23, 101.63 10.17 M19.62 104.51 C51.65 68.74, 84.28 31.18, 101.63 10.17 M26.32 109 C58.39 73.65, 85.01 42.69, 107.67 15.42 M26.32 109 C44.65 87.74, 62.34 67.54, 107.67 15.42 M33.67 112.74 C54.09 87.97, 75.91 64.71, 113.05 21.42 M33.67 112.74 C57.62 85.2, 79.63 60.14, 113.05 21.42 M41.02 116.48 C72.68 82.42, 101.32 48.44, 119.09 26.67 M41.02 116.48 C70.68 83.01, 101.3 47.44, 119.09 26.67 M48.37 120.22 C74.24 87.44, 105.97 55.19, 122.5 34.94 M48.37 120.22 C77.36 87.6, 106.03 53.77, 122.5 34.94 M57.69 121.7 C81.41 94.39, 103.04 71.58, 125.92 43.21 M57.69 121.7 C76.53 100.89, 93.6 80.32, 125.92 43.21 M68.32 121.66 C81.64 105.62, 95.66 89.5, 129.33 51.47 M68.32 121.66 C86.04 101.63, 104.07 80.95, 129.33 51.47 M79.6 120.87 C100.31 98, 118.94 78.55, 130.77 62.01 M79.6 120.87 C93.51 105.52, 107.07 90.49, 130.77 62.01 M95.48 114.8 C104.36 106.71, 111.07 98.53, 129.6 75.56 M95.48 114.8 C108.3 101.33, 119.36 86.8, 129.6 75.56" stroke="#a5d8ff" stroke-width="1" fill="none"></path><path d="M34.93 7.68 C43.22 2.81, 55.66 0.77, 66.01 0.5 C76.37 0.22, 88.16 1.58, 97.07 6.02 C105.97 10.46, 113.81 19.01, 119.43 27.14 C125.06 35.27, 129.4 45.31, 130.82 54.8 C132.24 64.28, 131.49 75.24, 127.94 84.05 C124.39 92.85, 117.25 101.54, 109.52 107.64 C101.78 113.73, 91.33 118.27, 81.51 120.62 C71.69 122.98, 60.5 123.98, 50.59 121.75 C40.68 119.53, 29.72 113.72, 22.06 107.27 C14.41 100.83, 8.27 91.78, 4.66 83.06 C1.05 74.34, -0.83 64.2, 0.42 54.97 C1.68 45.74, 5.96 36.05, 12.2 27.7 C18.43 19.35, 32.86 8.4, 37.85 4.88 C42.84 1.36, 41.78 5.54, 42.12 6.59 M58.15 1.7 C67.72 -0.23, 79.22 0.13, 88.84 3.31 C98.46 6.48, 108.81 13.61, 115.87 20.77 C122.92 27.92, 129.06 36.81, 131.19 46.24 C133.32 55.68, 131.53 67.95, 128.63 77.38 C125.73 86.82, 120.61 95.84, 113.77 102.84 C106.92 109.84, 96.9 115.96, 87.56 119.4 C78.21 122.84, 67.81 124.61, 57.69 123.48 C47.58 122.35, 35.44 118.07, 26.87 112.59 C18.29 107.12, 10.63 99.08, 6.26 90.63 C1.89 82.18, 0.45 71.66, 0.66 61.91 C0.86 52.15, 2.58 40.69, 7.49 32.09 C12.39 23.5, 21.79 15.54, 30.09 10.33 C38.39 5.12, 52.47 2.1, 57.27 0.82 C62.06 -0.45, 58.44 1.66, 58.89 2.67" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(156.62012682137618 714.8855782201887) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n6</text></g><g transform="translate(451.2393270006214 179.11383723393556) rotate(0 12.383995056152344 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">0</text></g><g transform="translate(660.6137707030459 270.12392908977654) rotate(0 17.693992614746094 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">12</text></g><g transform="translate(719.4120521798416 450.86683396769877) rotate(0 23.939987182617188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">25</text></g><g transform="translate(648.0456025140113 634.5581785281811) rotate(0 21.941993713378906 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">37</text></g><g transform="translate(459.9990928320585 725.9669133614898) rotate(0 23.50798797607422 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">50</text></g><g transform="translate(249.19631253988882 639.1833212591373) rotate(0 24.33599090576172 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">62</text></g><g transform="translate(174.69670166921605 459.3226795347855) rotate(0 20.80799102783203 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">75</text></g><g transform="translate(236.2729106541592 272.3974247486185) rotate(0 23.453994750976562 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">87</text></g><g transform="translate(572.0179897051421 206.47610458562644) rotate(0 11.519996643066406 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">6</text></g><g transform="translate(706.4945522051421 351.71438583562644) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">18</text></g><g transform="translate(694.6368022661773 535.0386045856264) rotate(0 17.13599395751953 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">31</text></g><g transform="translate(562.3909908037749 684.5112608356264) rotate(0 23.777992248535156 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">43</text></g><g transform="translate(348.6122737627593 695.2534483356264) rotate(0 22.64398956298828 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">56</text></g><g transform="translate(200.39080769830616 548.1792295856264) rotate(0 25.289993286132812 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">68</text></g><g transform="translate(195.39080769830616 363.95266708562644) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">81</text></g><g transform="translate(337.05477101617726 204.14797958562644) rotate(0 23.219993591308594 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">93</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Consistent Hash Ring</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">By mapping our servers onto a ring, we can add or remove servers while minimizing the number of re-mappings. When we add a new server, we simply move the server's position clockwise around the ring. When we remove a server, we move the server's position counter-clockwise. This maximizes the number of entities that are mapped to the same server when we're changing the number of servers!</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When we remove a server, we're only needed to relocate the entities that are on the "edge" of the ring segment associated with that server.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1933.6724247487214 1132.7810387922777">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="1933.6724247487214" height="1132.7810387922777" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(156.28168396164256 350.44259245101637) rotate(0 311.15629960823435 313.5150513542821)"><path d="M344.23 1.42 C365.93 -1.26, 389.58 9.75, 410.63 16.91 C431.67 24.08, 451.51 33.11, 470.52 44.42 C489.53 55.73, 508.44 69.39, 524.66 84.78 C540.88 100.17, 555.38 118.02, 567.82 136.76 C580.27 155.49, 590.87 176.28, 599.32 197.19 C607.77 218.1, 614.86 240.16, 618.53 262.22 C622.2 284.28, 622.49 306.98, 621.33 329.53 C620.18 352.09, 617.56 375.85, 611.61 397.55 C605.65 419.24, 595.98 440.02, 585.6 459.71 C575.22 479.39, 563.77 498.36, 549.33 515.68 C534.88 533, 516.82 550.01, 498.93 563.62 C481.04 577.24, 462.17 588.2, 441.99 597.38 C421.81 606.55, 399.7 613.85, 377.83 618.66 C355.97 623.48, 333.02 626.02, 310.81 626.27 C288.59 626.52, 266.15 624.77, 244.55 620.17 C222.96 615.57, 201.37 608.29, 181.26 598.66 C161.16 589.03, 141.87 575.93, 123.93 562.41 C106 548.89, 88.33 534.34, 73.65 517.53 C58.96 500.72, 46.17 481.4, 35.83 461.57 C25.49 441.74, 17.56 420.32, 11.58 398.53 C5.6 376.74, 1.33 353.54, -0.03 330.82 C-1.4 308.09, -0.27 284.38, 3.4 262.21 C7.06 240.03, 13.72 218.67, 21.98 197.79 C30.25 176.91, 40.44 155.7, 52.98 136.93 C65.51 118.17, 80.94 100.46, 97.19 85.19 C113.45 69.92, 131.31 56.65, 150.5 45.32 C169.69 33.98, 191.22 24.6, 212.33 17.2 C233.44 9.8, 254.2 3.23, 277.16 0.91 C300.13 -1.41, 337.5 1.93, 350.12 3.27 C362.73 4.62, 353.63 4.1, 352.85 8.99 M232.16 9.04 C251.5 -1.55, 277.33 0.58, 299.98 -0.29 C322.62 -1.17, 346.31 -0.39, 368.03 3.78 C389.75 7.94, 410.1 15.83, 430.3 24.7 C450.51 33.57, 471.04 44.13, 489.28 56.98 C507.51 69.84, 524.44 85.1, 539.73 101.83 C555.01 118.56, 569.82 137.79, 580.99 157.36 C592.15 176.93, 600.19 197.81, 606.71 219.26 C613.22 240.71, 617.77 263.63, 620.07 286.06 C622.36 308.49, 623.2 331.77, 620.49 353.86 C617.78 375.94, 611.24 397.6, 603.8 418.57 C596.37 439.55, 587.89 460.54, 575.89 479.71 C563.88 498.88, 547.55 517.36, 531.76 533.61 C515.98 549.86, 499.53 564.93, 481.18 577.19 C462.84 589.45, 442.7 599.41, 421.69 607.18 C400.67 614.95, 377.46 620.51, 355.11 623.81 C332.76 627.12, 309.76 628.64, 287.6 627 C265.43 625.37, 243.15 620.58, 222.12 614 C201.1 607.42, 180.69 598.13, 161.45 587.5 C142.2 576.87, 123.54 565.15, 106.65 550.23 C89.76 535.31, 73.38 516.16, 60.11 497.98 C46.84 479.81, 35.96 461.37, 27.02 441.18 C18.09 420.99, 11.15 399.19, 6.48 376.83 C1.8 354.47, -1.54 329.68, -1.03 307.03 C-0.52 284.38, 4.15 262.57, 9.55 240.94 C14.96 219.3, 21.83 197.7, 31.43 177.22 C41.02 156.73, 53.16 135.49, 67.1 118.02 C81.05 100.56, 97.93 86.36, 115.12 72.44 C132.3 58.52, 150.38 44.8, 170.22 34.5 C190.06 24.21, 223.21 13.63, 234.14 10.66 C245.07 7.7, 234.61 11.76, 235.81 16.69" stroke="#343a40" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(402.2603738953154 200.8678921210252) rotate(0 65.94913579124659 61.686331430918244)"><path d="M11.06 26.84 C11.06 26.84, 11.06 26.84, 11.06 26.84 M11.06 26.84 C11.06 26.84, 11.06 26.84, 11.06 26.84 M2.01 49.45 C14.88 33.13, 30.35 17.68, 40.06 5.67 M2.01 49.45 C10.4 40.83, 17.75 30.89, 40.06 5.67 M1.49 62.24 C17.1 43.8, 34.67 25.33, 53.31 2.62 M1.49 62.24 C19.93 40.16, 40.72 17.57, 53.31 2.62 M3.59 72.02 C29.78 44.8, 53.09 17.01, 65.26 1.08 M3.59 72.02 C24.7 49.03, 43.6 27.25, 65.26 1.08 M5.69 81.8 C29.42 53.97, 51.88 27.72, 74.57 2.55 M5.69 81.8 C27.23 57.26, 48.64 32.87, 74.57 2.55 M9.76 89.31 C31.34 65.64, 51.07 37.61, 83.89 4.03 M9.76 89.31 C27.35 68.43, 45.94 46.38, 83.89 4.03 M14.48 96.07 C34.26 74.77, 55.72 49.44, 92.55 6.26 M14.48 96.07 C39.54 65.32, 66.09 35.93, 92.55 6.26 M19.21 102.82 C48.45 71.07, 77.47 35.74, 99.9 9.99 M19.21 102.82 C37.6 83.5, 52.56 64.08, 99.9 9.99 M24.59 108.83 C46.73 79.66, 69.47 53.74, 105.94 15.24 M24.59 108.83 C45.63 83.7, 69.03 58.11, 105.94 15.24 M31.94 112.57 C51.21 88.5, 74.89 63.08, 112.64 19.74 M31.94 112.57 C63.45 77.38, 95.57 40.41, 112.64 19.74 M39.29 116.31 C70.63 81.76, 96.54 51.61, 118.67 24.99 M39.29 116.31 C57.2 95.53, 74.46 75.83, 118.67 24.99 M46.64 120.04 C66.2 96.29, 87.15 74.05, 122.74 32.5 M46.64 120.04 C69.64 93.62, 90.7 69.64, 122.74 32.5 M55.3 122.27 C84.21 91.31, 110.12 60.47, 126.16 40.77 M55.3 122.27 C82.23 91.95, 110.07 59.59, 126.16 40.77 M65.93 122.24 C87.87 94.02, 115.63 66.34, 129.57 49.03 M65.93 122.24 C90.78 94.3, 115.33 65.21, 129.57 49.03 M77.22 121.45 C95.9 99.75, 112.63 82.58, 130.36 60.32 M77.22 121.45 C92.11 105.32, 105.24 89.28, 130.36 60.32 M91.78 116.89 C99.51 107.25, 107.83 97.68, 128.52 74.62 M91.78 116.89 C102.39 104.91, 113.48 92.22, 128.52 74.62" stroke="#e03131" stroke-width="1" fill="none"></path><path d="M65.34 0.59 C74.94 -0.44, 85.89 2.27, 94.9 6.33 C103.91 10.39, 113.43 17.22, 119.38 24.96 C125.32 32.69, 129.27 43.13, 130.57 52.75 C131.86 62.36, 130.46 73.63, 127.16 82.67 C123.86 91.7, 118.27 100.6, 110.77 106.94 C103.26 113.27, 91.99 118.12, 82.14 120.66 C72.3 123.21, 61.65 124.31, 51.68 122.21 C41.72 120.11, 30.06 114.44, 22.36 108.04 C14.66 101.64, 9.27 92.52, 5.49 83.82 C1.7 75.12, -1.3 65.34, -0.37 55.85 C0.56 46.35, 5.34 35.06, 11.06 26.84 C16.79 18.62, 24.08 11.09, 33.96 6.52 C43.85 1.95, 63.23 0.09, 70.37 -0.58 C77.5 -1.25, 76.65 1.26, 76.76 2.49 M95.02 4.94 C104.68 8.11, 113.59 16.89, 119.8 24.49 C126.02 32.09, 130.79 41.34, 132.28 50.55 C133.77 59.77, 132.35 70.56, 128.76 79.76 C125.17 88.97, 118.04 99.09, 110.73 105.81 C103.42 112.52, 94.7 117.27, 84.91 120.06 C75.12 122.85, 62.24 124.26, 51.98 122.54 C41.71 120.82, 30.98 115.61, 23.3 109.77 C15.63 103.93, 9.61 96.26, 5.93 87.48 C2.26 78.7, 0.8 66.66, 1.23 57.08 C1.66 47.5, 3.06 38.29, 8.49 29.99 C13.93 21.69, 24.87 12.32, 33.84 7.27 C42.82 2.23, 52.59 0.12, 62.35 -0.26 C72.1 -0.64, 87.33 3.58, 92.38 4.99 C97.43 6.4, 93.07 7.29, 92.65 8.19" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(454.7924319731478 239.9354002906203) rotate(0 13.28399658203125 22.5)"><text x="13.28399658203125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n1</text></g><g stroke-linecap="round" transform="translate(706.8619428046843 343.89563542094254) rotate(0 65.94913579124659 61.686331430918244)"><path d="M24.02 12.93 C24.02 12.93, 24.02 12.93, 24.02 12.93 M24.02 12.93 C24.02 12.93, 24.02 12.93, 24.02 12.93 M3.16 49.12 C11.12 38.09, 23.25 27.25, 39.9 6.86 M3.16 49.12 C15.47 34.32, 28.35 20.55, 39.9 6.86 M0.67 64.18 C17.96 47.64, 32.56 26.13, 55.12 1.54 M0.67 64.18 C19.51 42.2, 36.36 22.47, 55.12 1.54 M2.77 73.96 C23.08 48.87, 44.38 29.44, 65.75 1.51 M2.77 73.96 C21.28 53.16, 39.58 31.64, 65.75 1.51 M5.53 82.98 C27.15 58.52, 46 34.01, 76.38 1.47 M5.53 82.98 C26.65 59.64, 47.71 35.31, 76.38 1.47 M8.28 92 C36.5 60.67, 66.1 25.64, 86.36 2.19 M8.28 92 C34.4 62.05, 60.01 31.8, 86.36 2.19 M13.67 98.01 C43.05 65.55, 72.11 29.87, 93.05 6.69 M13.67 98.01 C37.09 71.09, 57.69 45.98, 93.05 6.69 M19.7 103.25 C48.67 67.19, 80.99 35.93, 100.4 10.42 M19.7 103.25 C45.82 74.7, 72.16 44.42, 100.4 10.42 M25.74 108.5 C44.86 88.64, 63.47 64.21, 107.09 14.92 M25.74 108.5 C51.58 78.41, 78.3 46.09, 107.09 14.92 M32.44 113 C59.01 83.25, 81.78 54.35, 113.13 20.17 M32.44 113 C62.58 77.77, 91.44 45.33, 113.13 20.17 M39.79 116.74 C54.59 97.41, 73.08 80.61, 117.86 26.93 M39.79 116.74 C55.56 98.43, 73.23 78.5, 117.86 26.93 M48.45 118.97 C70.41 92.53, 94.41 69.1, 122.58 33.68 M48.45 118.97 C66.7 97.98, 82.92 79.14, 122.58 33.68 M56.45 121.95 C77.01 101.28, 93.03 78.1, 126.65 41.2 M56.45 121.95 C82.13 93.25, 106.75 62.84, 126.65 41.2 M66.43 122.67 C84.85 102.46, 99.26 82.56, 129.41 50.22 M66.43 122.67 C88.92 96.84, 110.19 73.11, 129.41 50.22 M79.03 120.37 C88.63 107.99, 101.71 97.98, 130.85 60.75 M79.03 120.37 C95.44 100.81, 112.67 80.29, 130.85 60.75 M90.97 118.83 C103.23 103.28, 116.5 90.11, 131.64 72.04 M90.97 118.83 C104.54 103.37, 117.22 89.65, 131.64 72.04" stroke="#1971c2" stroke-width="1" fill="none"></path><path d="M84.78 1.71 C94.37 3.42, 104.28 10.27, 111.48 17.12 C118.68 23.97, 124.66 33.68, 127.96 42.82 C131.26 51.97, 132.99 62.7, 131.27 72.01 C129.55 81.31, 123.85 90.96, 117.65 98.65 C111.45 106.34, 103.36 114.11, 94.06 118.15 C84.77 122.19, 72.06 123.53, 61.9 122.86 C51.75 122.19, 41.94 118.83, 33.13 114.14 C24.32 109.45, 14.55 102.84, 9.04 94.71 C3.54 86.58, 0.75 75.15, 0.09 65.34 C-0.56 55.53, 1.09 44.62, 5.12 35.84 C9.15 27.06, 16.17 18.39, 24.24 12.67 C32.32 6.95, 42.27 2.74, 53.57 1.51 C64.86 0.29, 84.63 4.26, 92.02 5.31 C99.41 6.37, 98.51 6.83, 97.91 7.84 M49.65 1.49 C58.52 -2.02, 70.42 -1.74, 79.97 0.4 C89.52 2.54, 99.12 8.16, 106.96 14.33 C114.8 20.5, 123.13 28.53, 127.02 37.42 C130.91 46.31, 131.5 58.03, 130.32 67.67 C129.14 77.31, 125.2 87.08, 119.94 95.24 C114.67 103.4, 107.22 111.96, 98.72 116.63 C90.21 121.29, 79.43 122.99, 68.91 123.21 C58.38 123.44, 44.69 122.35, 35.56 117.97 C26.42 113.59, 19.97 104.84, 14.1 96.94 C8.22 89.04, 2.29 79.92, 0.31 70.55 C-1.66 61.18, -1.06 49.48, 2.27 40.72 C5.59 31.97, 12.78 24.61, 20.27 18.04 C27.76 11.47, 42.43 3.83, 47.18 1.31 C51.94 -1.21, 48.12 2, 48.78 2.93" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(751.4560049718722 382.96314359053764) rotate(0 21.221992492675724 22.5)"><text x="21.22199249267578" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n2</text></g><g stroke-linecap="round" transform="translate(790.0931979400955 600.4098878036997) rotate(0 65.94913579124659 61.686331430918244)"><path d="M13.3 24.81 C13.3 24.81, 13.3 24.81, 13.3 24.81 M13.3 24.81 C13.3 24.81, 13.3 24.81, 13.3 24.81 M3.6 48.18 C16.44 34.49, 26.64 20.11, 40.33 5.91 M3.6 48.18 C11.55 39.47, 19.57 30.17, 40.33 5.91 M1.76 62.48 C23.02 40.67, 43.25 17.44, 53.59 2.86 M1.76 62.48 C14.12 48.71, 26.03 35.08, 53.59 2.86 M3.21 73.01 C15.97 57.62, 30.77 42.27, 66.84 -0.19 M3.21 73.01 C26 45.76, 49.74 19.77, 66.84 -0.19 M4.65 83.54 C26.31 58.19, 48.75 34.97, 75.51 2.04 M4.65 83.54 C32.72 50.97, 58.73 19.24, 75.51 2.04 M9.38 90.3 C36.3 59.78, 60.95 29.66, 84.17 4.26 M9.38 90.3 C32.01 66.46, 52.18 42.21, 84.17 4.26 M14.1 97.06 C38.88 67.04, 66.09 40.25, 92.83 6.49 M14.1 97.06 C31.82 78.1, 47.29 59.39, 92.83 6.49 M18.83 103.82 C37.38 80.04, 55.61 60.41, 100.18 10.23 M18.83 103.82 C47.29 68.89, 77.83 35.01, 100.18 10.23 M24.87 109.07 C57.6 74, 89.66 35.57, 106.87 14.73 M24.87 109.07 C57.92 72.6, 90.12 35.46, 106.87 14.73 M32.21 112.8 C54.6 89.98, 73.66 66.78, 112.91 19.98 M32.21 112.8 C47.87 92.91, 65.53 73.84, 112.91 19.98 M39.56 116.54 C59.54 92.36, 81.41 64.8, 118.95 25.22 M39.56 116.54 C65.6 86.33, 92.66 55.63, 118.95 25.22 M47.57 119.53 C66.8 94.6, 90.42 71.75, 123.02 32.74 M47.57 119.53 C67.45 96.66, 87.13 74.38, 123.02 32.74 M56.89 121 C83.92 93.1, 107.32 64.5, 126.43 41 M56.89 121 C79.36 96.38, 102.12 70.22, 126.43 41 M67.52 120.97 C85.56 100.43, 101.55 83.03, 129.19 50.03 M67.52 120.97 C80.27 105.26, 95.19 89.05, 129.19 50.03 M77.49 121.69 C93.22 103.62, 108.73 83.89, 130.63 60.56 M77.49 121.69 C95.78 100.8, 113.83 80.62, 130.63 60.56 M92.06 117.13 C101.11 107.98, 108.62 98.37, 129.45 74.11 M92.06 117.13 C100.6 106.97, 110.89 95.15, 129.45 74.11" stroke="#f08c00" stroke-width="1" fill="none"></path><path d="M35.4 6.6 C43.8 1.74, 57.05 -0.34, 67.31 -0.3 C77.56 -0.27, 87.93 2.13, 96.94 6.82 C105.95 11.51, 115.69 19.85, 121.35 27.84 C127.02 35.83, 129.81 45.42, 130.94 54.76 C132.06 64.09, 131.89 74.77, 128.1 83.84 C124.3 92.91, 116.08 102.93, 108.18 109.16 C100.28 115.39, 90.61 119.36, 80.7 121.23 C70.79 123.1, 58.7 122.83, 48.72 120.37 C38.75 117.91, 28.32 112.68, 20.86 106.47 C13.4 100.26, 7.25 91.87, 3.97 83.1 C0.68 74.32, -0.4 63.5, 1.13 53.82 C2.65 44.14, 6.69 33.04, 13.12 25.03 C19.55 17.01, 34.52 8.98, 39.72 5.72 C44.92 2.47, 43.77 4.56, 44.32 5.51 M48.24 1.92 C57.4 -1.18, 71.25 -1.34, 81.19 0.91 C91.14 3.16, 100.41 9.04, 107.89 15.42 C115.36 21.81, 122.02 30.18, 126.03 39.22 C130.04 48.27, 132.67 60.2, 131.94 69.67 C131.21 79.15, 127.69 88.22, 121.65 96.08 C115.62 103.95, 104.7 112.53, 95.75 116.87 C86.79 121.22, 77.98 122.23, 67.93 122.13 C57.89 122.03, 45.01 120.54, 35.47 116.26 C25.93 111.99, 16.59 104.01, 10.68 96.48 C4.78 88.95, 1.32 80.57, 0.02 71.06 C-1.27 61.56, -0.72 48.73, 2.91 39.46 C6.54 30.19, 13.88 21.9, 21.82 15.43 C29.76 8.96, 46.09 2.63, 50.57 0.63 C55.04 -1.36, 48.75 2.27, 48.67 3.45" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(835.24525876451 639.4773959732947) rotate(0 20.66399383544922 22.5)"><text x="20.66399383544922" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n3</text></g><g stroke-linecap="round" transform="translate(682.8481449081621 882.8775140669317) rotate(0 65.94913579124659 61.686331430918244)"><path d="M10.19 28.74 C10.19 28.74, 10.19 28.74, 10.19 28.74 M10.19 28.74 C10.19 28.74, 10.19 28.74, 10.19 28.74 M3.11 49.08 C13.57 36.59, 26.28 21.95, 39.19 7.57 M3.11 49.08 C17.25 33.74, 28.88 19.05, 39.19 7.57 M2.59 61.87 C20.25 38.1, 42.31 17.51, 53.76 3.01 M2.59 61.87 C17.85 43.77, 36.02 24.17, 53.76 3.01 M4.03 72.4 C26.18 48.5, 46.58 23.06, 67.01 -0.05 M4.03 72.4 C19.43 53.25, 35.01 35.85, 67.01 -0.05 M5.48 82.94 C23.49 64.33, 39.16 45.95, 75.67 2.18 M5.48 82.94 C23.98 63.37, 40.25 43.94, 75.67 2.18 M9.55 90.45 C29.05 66.41, 48.23 47.19, 84.34 4.41 M9.55 90.45 C34.53 62.53, 57.73 33.78, 84.34 4.41 M14.27 97.21 C30.21 73.74, 49.34 55.86, 93 6.64 M14.27 97.21 C30.78 78.28, 49.7 58.36, 93 6.64 M19 103.96 C37.43 86.06, 52.38 63.33, 100.35 10.38 M19 103.96 C37.75 83.33, 54.18 63.52, 100.35 10.38 M24.38 109.97 C55.18 75.93, 81.24 43.26, 106.39 15.63 M24.38 109.97 C53.2 75.51, 82.29 43.21, 106.39 15.63 M32.38 112.95 C57.37 80.83, 87.98 48.78, 113.08 20.12 M32.38 112.95 C52.09 90.56, 73.3 65.93, 113.08 20.12 M39.73 116.69 C71.43 83.26, 100.48 47.51, 119.12 25.37 M39.73 116.69 C63.53 89.33, 89.15 59.75, 119.12 25.37 M47.74 119.68 C69.18 91.92, 94.5 66.27, 122.53 33.64 M47.74 119.68 C74.6 88.39, 100.06 59.84, 122.53 33.64 M57.06 121.15 C82.72 92.05, 105.15 62.83, 126.6 41.15 M57.06 121.15 C84.12 88.82, 111.2 58.57, 126.6 41.15 M67.69 121.12 C80.47 103.95, 97.42 85.83, 130.67 48.66 M67.69 121.12 C87.49 99.11, 108.65 75.38, 130.67 48.66 M78.32 121.08 C95.99 100.49, 111.63 82.12, 131.46 59.95 M78.32 121.08 C90.7 106.36, 104.35 91.1, 131.46 59.95 M94.2 115.01 C105.22 101.5, 119.88 86.13, 128.97 75.01 M94.2 115.01 C107.22 100.81, 120.98 85.21, 128.97 75.01" stroke="#e03131" stroke-width="1" fill="none"></path><path d="M64.24 -0.68 C73.96 -1.63, 87 2.65, 96.12 6.98 C105.24 11.31, 112.96 17.72, 118.96 25.32 C124.95 32.92, 130.72 42.92, 132.11 52.57 C133.5 62.22, 130.88 74.22, 127.28 83.21 C123.67 92.21, 117.97 100.37, 110.49 106.56 C103.01 112.74, 92.36 117.91, 82.4 120.33 C72.43 122.75, 60.57 122.96, 50.69 121.07 C40.82 119.18, 30.71 114.99, 23.13 108.99 C15.55 102.99, 8.88 94.16, 5.23 85.08 C1.58 76, 0.34 63.94, 1.22 54.49 C2.1 45.04, 5.07 36.06, 10.48 28.4 C15.9 20.74, 24.27 13.14, 33.72 8.55 C43.18 3.97, 61.39 2.09, 67.23 0.89 C73.07 -0.31, 68.93 0.63, 68.78 1.37 M64.06 0.32 C73.51 -0.55, 85.35 2.3, 94.73 6.8 C104.1 11.31, 114.06 19.56, 120.33 27.36 C126.61 35.15, 131.39 44.14, 132.4 53.57 C133.41 62.99, 129.88 75.12, 126.38 83.9 C122.89 92.68, 118.86 100.05, 111.44 106.25 C104.03 112.45, 92.23 118.66, 81.88 121.11 C71.54 123.56, 59.33 122.88, 49.37 120.95 C39.41 119.02, 29.79 115.85, 22.12 109.55 C14.45 103.25, 6.96 92.35, 3.36 83.14 C-0.25 73.93, -1 63.86, 0.51 54.3 C2.01 44.74, 6.87 33.57, 12.38 25.79 C17.9 18.01, 24.95 11.97, 33.59 7.63 C42.24 3.3, 59.17 0.87, 64.27 -0.23 C69.38 -1.33, 63.99 -0.13, 64.24 1.05" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(728.7382046949789 921.9450222365267) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n4</text></g><g stroke-linecap="round" transform="translate(415.7195096681853 999.4083759304414) rotate(0 65.94913579124659 61.686331430918244)"><path d="M16.9 19.99 C16.9 19.99, 16.9 19.99, 16.9 19.99 M16.9 19.99 C16.9 19.99, 16.9 19.99, 16.9 19.99 M3.25 47.88 C17.81 32.29, 31.27 19.49, 40.65 4.86 M3.25 47.88 C15.44 35.08, 26.82 21.24, 40.65 4.86 M2.73 60.67 C13.86 48.36, 24.93 33.25, 48.66 7.85 M2.73 60.67 C19.79 41.49, 37.08 21.78, 48.66 7.85 M2.21 73.47 C20.91 51.78, 42.02 27.88, 59.94 7.06 M2.21 73.47 C14.1 59.91, 26.97 46.02, 59.94 7.06 M6.28 80.98 C27.84 52.25, 50.87 28.69, 76.48 0.23 M6.28 80.98 C26.85 56.66, 47.42 33.23, 76.48 0.23 M10.35 88.5 C26.16 70.05, 41.36 54, 83.83 3.97 M10.35 88.5 C35.79 60.15, 62.4 29.51, 83.83 3.97 M14.42 96.01 C29.51 76.86, 45.49 56.71, 91.83 6.95 M14.42 96.01 C37.5 67.39, 63.11 39.49, 91.83 6.95 M17.83 104.28 C47.87 68.66, 80.29 34.59, 99.18 10.69 M17.83 104.28 C40.21 79.88, 60.65 55.89, 99.18 10.69 M24.52 108.77 C47.94 83.07, 70.43 57.69, 106.53 14.43 M24.52 108.77 C46.8 83.23, 68.69 57.48, 106.53 14.43 M31.87 112.51 C51.18 89.94, 71.52 64.3, 111.91 20.43 M31.87 112.51 C58.97 81.38, 84.7 51.72, 111.91 20.43 M38.57 117 C66.86 86.02, 94.36 52.39, 117.95 25.68 M38.57 117 C67.51 83.92, 97.97 48.73, 117.95 25.68 M45.92 120.74 C65.32 98.22, 85.34 77.89, 123.33 31.69 M45.92 120.74 C63.89 99.87, 81.57 80.33, 123.33 31.69 M54.58 122.97 C79.9 96.51, 102.65 70.38, 129.37 36.93 M54.58 122.97 C72.87 101.14, 92.56 78.74, 129.37 36.93 M63.9 124.45 C82.78 104.16, 100.46 81.62, 131.47 46.71 M63.9 124.45 C89.74 94.13, 115.26 63.89, 131.47 46.71 M74.53 124.41 C87.71 108.72, 102.45 90.91, 133.57 56.49 M74.53 124.41 C94.81 101.17, 114.78 78.34, 133.57 56.49 M89.75 119.09 C105.87 103, 118.49 84.92, 136.33 65.51 M89.75 119.09 C108.1 99.09, 124.11 77.55, 136.33 65.51" stroke="#2f9e44" stroke-width="1" fill="none"></path><path d="M43.06 3.21 C51.92 -0.89, 65.81 -1.51, 75.9 0 C85.99 1.5, 95.47 6.66, 103.62 12.23 C111.77 17.8, 120.18 25.16, 124.82 33.42 C129.45 41.68, 131.69 52.28, 131.41 61.8 C131.14 71.32, 128 81.94, 123.18 90.55 C118.35 99.16, 110.8 107.98, 102.48 113.48 C94.15 118.97, 83.28 122.77, 73.26 123.54 C63.24 124.31, 52.01 121.6, 42.35 118.12 C32.69 114.63, 22.16 109.58, 15.29 102.62 C8.41 95.66, 3.26 85.67, 1.11 76.35 C-1.05 67.04, -0.25 56.14, 2.37 46.75 C5 37.36, 9.54 27.53, 16.86 20.03 C24.18 12.53, 40.67 4.59, 46.29 1.76 C51.91 -1.07, 50.24 2.05, 50.59 3.03 M73.36 1.51 C83.52 1.54, 95.47 5.01, 103.65 10.27 C111.83 15.52, 117.51 24.85, 122.44 33.06 C127.37 41.27, 132.89 50.16, 133.21 59.52 C133.53 68.88, 129.44 80.59, 124.38 89.2 C119.32 97.8, 111.2 105.34, 102.86 111.16 C94.52 116.98, 84.42 122.87, 74.34 124.13 C64.26 125.4, 51.85 122.31, 42.35 118.75 C32.85 115.19, 23.87 109.9, 17.34 102.78 C10.82 95.66, 6.01 85.15, 3.2 76.04 C0.4 66.93, -1.44 57.27, 0.5 48.13 C2.44 39, 8.18 28.57, 14.85 21.24 C21.52 13.91, 30.77 7.53, 40.51 4.15 C50.25 0.78, 68.09 1.33, 73.3 0.98 C78.5 0.64, 72.06 1.03, 71.72 2.08" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(462.0055731781466 1038.4758841000364) rotate(0 19.529991149902344 22.5)"><text x="19.529991149902344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n5</text></g><g stroke-linecap="round" transform="translate(91.55455208701642 356.13698860902457) rotate(0 65.94913579124659 61.686331430918244)"><path d="M23.89 14.14 C23.89 14.14, 23.89 14.14, 23.89 14.14 M23.89 14.14 C23.89 14.14, 23.89 14.14, 23.89 14.14 M10.25 42.03 C18.53 30.87, 27.85 23.56, 41.08 6.56 M10.25 42.03 C19.3 31.47, 30.05 19.5, 41.08 6.56 M7.76 57.09 C24.23 42.13, 37.63 23.58, 53.68 4.26 M7.76 57.09 C24.3 38.18, 40.18 18.67, 53.68 4.26 M5.26 72.15 C24.31 47.64, 46.75 22.89, 64.31 4.23 M5.26 72.15 C26.79 47.63, 48.39 22.33, 64.31 4.23 M8.68 80.42 C22.68 63.3, 37.27 47.66, 74.94 4.19 M8.68 80.42 C25.21 60.45, 43.98 41.27, 74.94 4.19 M11.44 89.44 C31.76 64.6, 50.22 42.47, 86.23 3.4 M11.44 89.44 C36.89 58.61, 65.44 27.4, 86.23 3.4 M14.19 98.46 C39.26 73.49, 62.96 42.44, 92.92 7.9 M14.19 98.46 C39.07 69.99, 61.48 42.04, 92.92 7.9 M19.57 104.47 C42.57 75.74, 67.4 50.8, 100.27 11.64 M19.57 104.47 C47.02 71.47, 74.98 41.01, 100.27 11.64 M25.61 109.72 C46.4 83.67, 70.87 59.3, 107.62 15.38 M25.61 109.72 C48.42 84.09, 71.6 55.4, 107.62 15.38 M31.65 114.96 C62.07 83.16, 88.56 50.29, 114.97 19.12 M31.65 114.96 C49.93 94.39, 66.86 74.64, 114.97 19.12 M37.69 120.21 C68.53 88.55, 95 53.18, 119.7 25.87 M37.69 120.21 C65.98 87.46, 95.77 53.04, 119.7 25.87 M46.35 122.44 C65.13 97.95, 88.87 74.73, 123.76 33.39 M46.35 122.44 C66.68 97.13, 87.38 74.83, 123.76 33.39 M55.01 124.67 C73.13 101.39, 94.9 77.72, 127.83 40.9 M55.01 124.67 C76.83 100.14, 98.3 74.28, 127.83 40.9 M64.99 125.39 C88.75 102.45, 109.25 76.01, 129.28 51.43 M64.99 125.39 C85.77 100.71, 107.36 76.47, 129.28 51.43 M78.24 122.34 C95.61 103.25, 111.97 85.35, 130.07 62.72 M78.24 122.34 C91.54 107.95, 104.19 92.4, 130.07 62.72 M92.15 118.53 C107.73 103.91, 120.6 88.59, 132.17 72.49 M92.15 118.53 C106.77 102.64, 121.88 85.59, 132.17 72.49" stroke="#2f9e44" stroke-width="1" fill="none"></path><path d="M51.3 2.07 C60.43 -0.73, 73.64 -0.6, 83.53 1.68 C93.42 3.96, 103.28 9.24, 110.63 15.75 C117.98 22.26, 124.23 31.48, 127.65 40.74 C131.08 50, 132.52 61.66, 131.19 71.32 C129.85 80.98, 125.53 91.2, 119.62 98.69 C113.72 106.18, 105.11 112.02, 95.75 116.27 C86.4 120.52, 73.94 124.17, 63.49 124.19 C53.05 124.22, 41.86 121.09, 33.07 116.41 C24.28 111.73, 16.32 104.28, 10.77 96.11 C5.22 87.94, 0.85 77.2, -0.23 67.39 C-1.3 57.59, 0.35 46.11, 4.33 37.28 C8.31 28.46, 15.14 20.65, 23.66 14.41 C32.17 8.17, 49.34 2.16, 55.43 -0.15 C61.51 -2.45, 59.92 -0.61, 60.17 0.6 M89.53 5.47 C98.92 7.89, 111.04 13.67, 117.78 20.79 C124.52 27.91, 128.23 38.78, 129.96 48.19 C131.69 57.61, 130.9 67.79, 128.17 77.28 C125.44 86.77, 120.53 98.18, 113.59 105.13 C106.65 112.09, 96.08 116.15, 86.54 118.99 C77 121.84, 66.1 123.67, 56.36 122.2 C46.61 120.74, 36.56 115.69, 28.1 110.19 C19.63 104.69, 10.44 97.59, 5.58 89.2 C0.72 80.8, -1.34 69.44, -1.06 59.81 C-0.78 50.17, 2.03 39.58, 7.26 31.38 C12.5 23.19, 21.75 15.74, 30.33 10.64 C38.9 5.54, 48.75 1.65, 58.69 0.79 C68.64 -0.08, 84.59 4.49, 89.99 5.46 C95.4 6.44, 91.44 5.87, 91.12 6.62" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(135.1946118738332 395.20449677861967) rotate(0 22.175994873046875 22.5)"><text x="22.175994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n8</text></g><g stroke-linecap="round" transform="translate(10 619.4717279683094) rotate(0 65.94913579124659 61.686331430918244)"><path d="M27.22 10.41 C27.22 10.41, 27.22 10.41, 27.22 10.41 M27.22 10.41 C27.22 10.41, 27.22 10.41, 27.22 10.41 M3.08 50.38 C13.19 40.68, 21.09 26.35, 42.44 5.1 M3.08 50.38 C17.79 33.76, 31.15 17.65, 42.44 5.1 M0.59 65.44 C24.51 39.99, 47.39 13.79, 57.67 -0.22 M0.59 65.44 C19.41 44.89, 37.1 22.87, 57.67 -0.22 M3.35 74.46 C22.05 54.58, 40.14 35.2, 66.99 1.25 M3.35 74.46 C23.46 49.53, 46.41 25.19, 66.99 1.25 M5.45 84.24 C22.31 63.04, 40.76 41.26, 76.96 1.97 M5.45 84.24 C23.69 62.41, 43.43 40.48, 76.96 1.97 M8.86 92.5 C26.15 76.05, 38.95 54.63, 86.93 2.69 M8.86 92.5 C27.21 70.38, 45.43 49.68, 86.93 2.69 M14.24 98.51 C45.64 62.84, 78.38 28.55, 94.28 6.43 M14.24 98.51 C35.62 74.94, 57.42 50.85, 94.28 6.43 M20.28 103.76 C41.1 79.28, 62.52 55.96, 100.98 10.93 M20.28 103.76 C39.16 82.04, 58.28 58.6, 100.98 10.93 M25.66 109.76 C46.56 85.67, 66.56 58.68, 107.67 15.42 M25.66 109.76 C58.94 72.58, 90.15 37.07, 107.67 15.42 M31.7 115.01 C60.59 79.28, 92.99 46.58, 114.36 19.91 M31.7 115.01 C55.18 88.45, 77.33 62.96, 114.36 19.91 M39.71 117.99 C72.48 83.87, 101.48 45.65, 119.09 26.67 M39.71 117.99 C70.68 82.79, 102.6 45.51, 119.09 26.67 M48.37 120.22 C70.39 94.74, 94.65 66.65, 123.16 34.19 M48.37 120.22 C63.63 102.87, 78.92 83.85, 123.16 34.19 M56.37 123.21 C75.19 102.27, 92.56 79.41, 127.23 41.7 M56.37 123.21 C82.1 94.43, 106.22 67.47, 127.23 41.7 M67 123.17 C92.32 92.93, 117.58 64.16, 129.99 50.72 M67 123.17 C83.75 104.31, 99.44 85.75, 129.99 50.72 M78.95 121.63 C92.69 105.84, 107.1 88.09, 130.78 62.01 M78.95 121.63 C99.64 97.93, 119.12 76.27, 130.78 62.01 M90.89 120.08 C106.48 101.24, 118.82 85.52, 130.91 74.05 M90.89 120.08 C106.3 102.33, 122.1 83.06, 130.91 74.05" stroke="#f08c00" stroke-width="1" fill="none"></path><path d="M87.62 2.6 C97 4.76, 106.8 11.84, 113.81 19.1 C120.82 26.36, 126.85 36.7, 129.68 46.14 C132.51 55.58, 132.91 66.63, 130.8 75.74 C128.7 84.85, 123.84 93.47, 117.05 100.81 C110.25 108.14, 99.75 115.89, 90.03 119.76 C80.32 123.63, 68.82 124.98, 58.77 124.03 C48.72 123.07, 38.26 119.45, 29.75 114.03 C21.23 108.61, 12.74 100.16, 7.68 91.5 C2.61 82.84, -0.52 71.62, -0.65 62.07 C-0.77 52.52, 2.34 42.74, 6.93 34.19 C11.53 25.64, 18.59 16.51, 26.92 10.77 C35.24 5.02, 46.32 0.73, 56.9 -0.29 C67.48 -1.3, 84.39 3.46, 90.39 4.69 C96.39 5.93, 93.32 6.37, 92.9 7.12 M84.13 2.17 C93.27 3.94, 103.14 9.69, 110.46 16.61 C117.77 23.53, 124.81 34.67, 128.04 43.71 C131.28 52.76, 131.43 61.77, 129.86 70.89 C128.29 80.01, 124.41 90.89, 118.61 98.44 C112.8 106, 104.49 112.02, 95.03 116.21 C85.56 120.41, 72.41 123.86, 61.85 123.62 C51.29 123.38, 40.48 119.64, 31.66 114.75 C22.85 109.85, 14.12 102.21, 8.94 94.25 C3.76 86.3, 1.34 76.45, 0.58 67.04 C-0.19 57.63, 0.51 46.53, 4.33 37.79 C8.15 29.05, 15.25 20.56, 23.47 14.6 C31.69 8.65, 43.56 4.14, 53.67 2.07 C63.79 -0.01, 78.9 1.92, 84.16 2.15 C89.42 2.38, 85.69 2.34, 85.21 3.46" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(57.72605832197303 658.5392361379045) rotate(0 18.089996337890625 22.5)"><text x="18.089996337890625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n7</text></g><g stroke-linecap="round" transform="translate(110.7300670345594 866.6859621716188) rotate(0 65.94913579124659 61.686331430918244)"><path d="M12.13 27.77 C12.13 27.77, 12.13 27.77, 12.13 27.77 M12.13 27.77 C12.13 27.77, 12.13 27.77, 12.13 27.77 M1.77 51.89 C18.72 34.95, 32.98 17.57, 40.48 7.36 M1.77 51.89 C15.38 37.43, 27.02 24, 40.48 7.36 M2.56 63.17 C20.29 42.48, 36.62 23.28, 53.73 4.31 M2.56 63.17 C18.49 44.93, 34.31 26.98, 53.73 4.31 M4 73.71 C22.64 53.58, 39.31 29.06, 67.64 0.5 M4 73.71 C19.03 55.83, 35.01 36.8, 67.64 0.5 M5.45 84.24 C23.34 65.03, 42.92 41.86, 76.3 2.73 M5.45 84.24 C28.1 56.31, 52.22 29.72, 76.3 2.73 M10.17 90.99 C37.44 61.4, 64.54 28.27, 85.62 4.2 M10.17 90.99 C27.43 72.93, 41.3 54.78, 85.62 4.2 M14.9 97.75 C36.67 69.04, 59.02 43.55, 94.94 5.68 M14.9 97.75 C35.59 73.04, 58.64 47.86, 94.94 5.68 M19.62 104.51 C39.22 80.05, 63.26 54.23, 101.63 10.17 M19.62 104.51 C51.65 68.74, 84.28 31.18, 101.63 10.17 M26.32 109 C58.39 73.65, 85.01 42.69, 107.67 15.42 M26.32 109 C44.65 87.74, 62.34 67.54, 107.67 15.42 M33.67 112.74 C54.09 87.97, 75.91 64.71, 113.05 21.42 M33.67 112.74 C57.62 85.2, 79.63 60.14, 113.05 21.42 M41.02 116.48 C72.68 82.42, 101.32 48.44, 119.09 26.67 M41.02 116.48 C70.68 83.01, 101.3 47.44, 119.09 26.67 M48.37 120.22 C74.24 87.44, 105.97 55.19, 122.5 34.94 M48.37 120.22 C77.36 87.6, 106.03 53.77, 122.5 34.94 M57.69 121.7 C81.41 94.39, 103.04 71.58, 125.92 43.21 M57.69 121.7 C76.53 100.89, 93.6 80.32, 125.92 43.21 M68.32 121.66 C81.64 105.62, 95.66 89.5, 129.33 51.47 M68.32 121.66 C86.04 101.63, 104.07 80.95, 129.33 51.47 M79.6 120.87 C100.31 98, 118.94 78.55, 130.77 62.01 M79.6 120.87 C93.51 105.52, 107.07 90.49, 130.77 62.01 M95.48 114.8 C104.36 106.71, 111.07 98.53, 129.6 75.56 M95.48 114.8 C108.3 101.33, 119.36 86.8, 129.6 75.56" stroke="#1971c2" stroke-width="1" fill="none"></path><path d="M34.93 7.68 C43.22 2.81, 55.66 0.77, 66.01 0.5 C76.37 0.22, 88.16 1.58, 97.07 6.02 C105.97 10.46, 113.81 19.01, 119.43 27.14 C125.06 35.27, 129.4 45.31, 130.82 54.8 C132.24 64.28, 131.49 75.24, 127.94 84.05 C124.39 92.85, 117.25 101.54, 109.52 107.64 C101.78 113.73, 91.33 118.27, 81.51 120.62 C71.69 122.98, 60.5 123.98, 50.59 121.75 C40.68 119.53, 29.72 113.72, 22.06 107.27 C14.41 100.83, 8.27 91.78, 4.66 83.06 C1.05 74.34, -0.83 64.2, 0.42 54.97 C1.68 45.74, 5.96 36.05, 12.2 27.7 C18.43 19.35, 32.86 8.4, 37.85 4.88 C42.84 1.36, 41.78 5.54, 42.12 6.59 M58.15 1.7 C67.72 -0.23, 79.22 0.13, 88.84 3.31 C98.46 6.48, 108.81 13.61, 115.87 20.77 C122.92 27.92, 129.06 36.81, 131.19 46.24 C133.32 55.68, 131.53 67.95, 128.63 77.38 C125.73 86.82, 120.61 95.84, 113.77 102.84 C106.92 109.84, 96.9 115.96, 87.56 119.4 C78.21 122.84, 67.81 124.61, 57.69 123.48 C47.58 122.35, 35.44 118.07, 26.87 112.59 C18.29 107.12, 10.63 99.08, 6.26 90.63 C1.89 82.18, 0.45 71.66, 0.66 61.91 C0.86 52.15, 2.58 40.69, 7.49 32.09 C12.39 23.5, 21.79 15.54, 30.09 10.33 C38.39 5.12, 52.47 2.1, 57.27 0.82 C62.06 -0.45, 58.44 1.66, 58.89 2.67" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(156.62012682137618 905.7534703412139) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n6</text></g><g transform="translate(451.2393270006214 369.98172935496075) rotate(0 12.383995056152344 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">0</text></g><g transform="translate(660.6137707030459 460.99182121080173) rotate(0 17.693992614746094 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">12</text></g><g transform="translate(719.4120521798416 641.734726088724) rotate(0 23.939987182617188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">25</text></g><g transform="translate(648.0456025140113 825.4260706492063) rotate(0 21.941993713378906 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">37</text></g><g transform="translate(459.9990928320585 916.834805482515) rotate(0 23.50798797607422 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">50</text></g><g transform="translate(249.19631253988882 830.0512133801625) rotate(0 24.33599090576172 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">62</text></g><g transform="translate(174.69670166921605 650.1905716558107) rotate(0 20.80799102783203 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">75</text></g><g transform="translate(236.2729106541592 463.2653168696437) rotate(0 23.453994750976562 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">87</text></g><g transform="translate(572.0179897051421 397.34399670665164) rotate(0 11.519996643066406 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">6</text></g><g transform="translate(706.4945522051421 542.5822779566516) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">18</text></g><g transform="translate(694.6368022661773 725.9064967066516) rotate(0 17.13599395751953 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">31</text></g><g transform="translate(562.3909908037749 876.1807095156483) rotate(0 23.777992248535156 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">43</text></g><g transform="translate(348.6122737627593 886.1213404566516) rotate(0 22.64398956298828 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">56</text></g><g transform="translate(200.39080769830616 739.0471217066516) rotate(0 25.289993286132812 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">68</text></g><g transform="translate(195.39080769830616 554.8205592066516) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">81</text></g><g transform="translate(337.05477101617726 395.01587170665164) rotate(0 23.219993591308594 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">93</text></g><g stroke-linecap="round"><g transform="translate(677.2108991484318 263.54217026668414) rotate(0 302.57218647202393 -87.8783450546135)"><path d="M-0.38 1 C46.14 -28.24, 179.46 -174.01, 280.23 -176.18 C381 -178.35, 550.1 -39.4, 604.25 -12.04" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(677.2108991484318 263.54217026668414) rotate(0 302.57218647202393 -87.8783450546135)"><path d="M574.98 -18.6 C588.2 -14.05, 597.41 -14.8, 604.25 -12.04" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(677.2108991484318 263.54217026668414) rotate(0 302.57218647202393 -87.8783450546135)"><path d="M586.05 -35.88 C594.79 -24.52, 599.62 -18.43, 604.25 -12.04" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(805.6834595514624 10) rotate(0 161.49594116210938 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Removing Server 8</text></g><g stroke-linecap="round" transform="translate(1164.930015431361 329.16163460067537) rotate(0 311.15629960823435 313.5150513542821)"><path d="M164.71 36.06 C181.18 21.34, 205.95 17.35, 227.35 11.36 C248.75 5.37, 270.89 1.31, 293.11 0.13 C315.33 -1.04, 338.52 0.57, 360.65 4.31 C382.79 8.06, 405.28 14.54, 425.93 22.59 C446.58 30.65, 466.33 40.34, 484.56 52.63 C502.79 64.92, 519.99 80.08, 535.3 96.33 C550.62 112.57, 564.79 130.78, 576.43 150.08 C588.07 169.38, 597.89 190.66, 605.14 212.14 C612.38 233.61, 617.45 256.54, 619.91 278.91 C622.37 301.27, 622.01 324.11, 619.87 346.33 C617.74 368.55, 614.09 391, 607.09 412.21 C600.09 433.43, 589.56 454.13, 577.88 473.64 C566.2 493.15, 552.16 512.76, 537.01 529.29 C521.85 545.82, 505.11 560.17, 486.96 572.82 C468.81 585.47, 448.96 596.99, 428.11 605.19 C407.27 613.39, 384.09 618.57, 361.91 621.99 C339.72 625.41, 317.25 626.88, 294.99 625.72 C272.73 624.56, 249.95 620.82, 228.37 615.03 C206.8 609.24, 185.33 601.45, 165.54 590.99 C145.75 580.52, 126.63 566.87, 109.62 552.24 C92.61 537.62, 76.93 521.05, 63.49 503.21 C50.04 485.37, 38.38 465.31, 28.96 445.19 C19.54 425.06, 11.67 404.09, 6.96 382.48 C2.26 360.86, 0.55 338.1, 0.73 315.48 C0.91 292.86, 3.41 268.99, 8.03 246.77 C12.65 224.55, 19.18 202.49, 28.47 182.17 C37.75 161.84, 50.31 142.47, 63.73 124.81 C77.14 107.15, 89.96 92.03, 108.95 76.23 C127.94 60.42, 163.9 37.73, 177.69 30 C191.48 22.27, 189.45 24.89, 191.69 29.86 M399.65 12.33 C421.64 13.37, 444.07 27.72, 463.4 38.62 C482.74 49.52, 499.06 62.89, 515.67 77.72 C532.29 92.56, 549.75 109.15, 563.08 127.63 C576.41 146.12, 586.88 167.93, 595.67 188.63 C604.47 209.33, 611.67 230.07, 615.86 251.83 C620.04 273.58, 621.22 296.8, 620.78 319.18 C620.34 341.56, 618.37 364.38, 613.23 386.09 C608.09 407.8, 599.58 429.1, 589.95 449.46 C580.32 469.82, 569.23 490.4, 555.46 508.26 C541.7 526.11, 524.43 542.42, 507.35 556.58 C490.27 570.73, 472.75 583.02, 452.99 593.19 C433.23 603.36, 410.47 611.88, 388.79 617.59 C367.11 623.3, 345.3 626.94, 322.91 627.45 C300.51 627.97, 276.56 624.95, 254.41 620.66 C232.25 616.36, 210.36 610.37, 189.97 601.69 C169.58 593.02, 150.29 581.32, 132.06 568.59 C113.84 555.86, 95.59 541.98, 80.63 525.3 C65.67 508.63, 53.38 487.91, 42.29 468.54 C31.19 449.17, 20.84 430.41, 14.05 409.1 C7.26 387.79, 3.42 363.34, 1.56 340.68 C-0.31 318.02, 0.17 295.37, 2.86 273.15 C5.56 250.92, 10.46 228.31, 17.72 207.33 C24.98 186.35, 34.35 166.32, 46.42 147.27 C58.49 128.23, 74.4 109.26, 90.14 93.04 C105.87 76.83, 122.08 61.9, 140.84 49.99 C159.61 38.08, 181.68 29.29, 202.72 21.56 C223.77 13.84, 245.24 7, 267.1 3.64 C288.97 0.28, 311.99 0.06, 333.92 1.39 C355.85 2.72, 387.98 8.62, 398.69 11.64 C409.41 14.66, 399.55 14.12, 398.2 19.51" stroke="#343a40" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1410.9087053650337 179.5869342706842) rotate(0 65.94913579124659 61.686331430918244)"><path d="M23.36 13.68 C23.36 13.68, 23.36 13.68, 23.36 13.68 M23.36 13.68 C23.36 13.68, 23.36 13.68, 23.36 13.68 M9.71 41.57 C15.56 34.05, 25.08 25.78, 39.89 6.85 M9.71 41.57 C19.38 30.28, 27.51 19.54, 39.89 6.85 M6.56 57.38 C17.16 45.23, 30.46 29.3, 53.14 3.8 M6.56 57.38 C18.39 42.83, 31.32 27.58, 53.14 3.8 M4.73 71.69 C22.38 52.23, 36.63 33.48, 63.77 3.76 M4.73 71.69 C26.7 45.79, 49.14 19.14, 63.77 3.76 M8.14 79.95 C20.79 65.39, 34.69 48.9, 74.41 3.73 M8.14 79.95 C30.42 54.82, 52.53 28.74, 74.41 3.73 M10.9 88.98 C38.23 55.93, 68.39 24.91, 85.69 2.94 M10.9 88.98 C33.14 63.54, 55.11 36.8, 85.69 2.94 M13.66 98 C42.8 62.53, 74.54 30.77, 93.04 6.68 M13.66 98 C40.89 67.6, 67.51 36.73, 93.04 6.68 M19.7 103.25 C44.08 74.35, 69.17 45.98, 99.73 11.17 M19.7 103.25 C47.57 70.29, 78.84 34.91, 99.73 11.17 M25.73 108.5 C43.72 90.55, 61.17 70.47, 107.08 14.91 M25.73 108.5 C44.11 87.01, 61.85 68.71, 107.08 14.91 M31.77 113.74 C61.54 79.99, 90.81 45.08, 113.78 19.41 M31.77 113.74 C62.27 80.74, 92.3 45.62, 113.78 19.41 M37.81 118.99 C56.28 96.41, 76.39 77.01, 118.5 26.16 M37.81 118.99 C55.66 99.23, 72.97 78.47, 118.5 26.16 M46.47 121.22 C66.91 99.4, 88.22 75.18, 123.23 32.92 M46.47 121.22 C66.87 99.14, 87.13 74.9, 123.23 32.92 M55.13 123.45 C79.63 93.81, 106.86 63.68, 127.95 39.68 M55.13 123.45 C73.78 102.2, 94.04 79.55, 127.95 39.68 M65.11 124.17 C84.47 101.03, 104.34 76.41, 133.34 45.68 M65.11 124.17 C87.23 99.42, 107.23 74.44, 133.34 45.68 M77.7 121.87 C89.34 107.67, 102.69 94.91, 134.13 56.97 M77.7 121.87 C100.85 96.69, 122 71.23, 134.13 56.97 M90.96 118.82 C105.21 101.83, 122.1 81.74, 131.63 72.03 M90.96 118.82 C106.38 100.1, 121.37 83.05, 131.63 72.03" stroke="#e03131" stroke-width="1" fill="none"></path><path d="M84.29 1.93 C93.84 3.61, 103.77 9.78, 111.15 16.47 C118.54 23.15, 125.15 32.82, 128.58 42.05 C132.02 51.27, 133.4 62.57, 131.76 71.83 C130.11 81.09, 125.03 90.15, 118.69 97.58 C112.35 105.02, 102.98 112.27, 93.71 116.43 C84.44 120.58, 73.19 122.71, 63.05 122.49 C52.92 122.28, 41.74 119.64, 32.9 115.14 C24.07 110.63, 15.6 103.47, 10.04 95.47 C4.47 87.48, 0.23 76.81, -0.48 67.17 C-1.18 57.53, 1.82 46.53, 5.79 37.61 C9.76 28.7, 15.76 19.55, 23.37 13.67 C30.97 7.78, 40.88 4.02, 51.43 2.33 C61.98 0.63, 80.38 2.89, 86.69 3.48 C93.01 4.08, 89.82 5.11, 89.32 5.89 M50.72 0.12 C60.22 -2.77, 73.69 -1.78, 83.52 0.83 C93.34 3.43, 102.46 9.06, 109.68 15.77 C116.91 22.48, 123.55 32.05, 126.88 41.1 C130.22 50.15, 130.86 60.37, 129.69 70.07 C128.51 79.77, 125.42 91.19, 119.83 99.27 C114.24 107.36, 105.57 114.55, 96.16 118.6 C86.76 122.66, 73.98 123.89, 63.38 123.6 C52.77 123.31, 41.3 121.58, 32.54 116.87 C23.78 112.17, 15.96 103.45, 10.81 95.35 C5.67 87.25, 2.8 77.99, 1.68 68.28 C0.56 58.57, 0.58 45.92, 4.08 37.1 C7.57 28.29, 14.44 21.2, 22.66 15.39 C30.88 9.58, 48.49 4.35, 53.4 2.26 C58.31 0.17, 52.19 2.14, 52.11 2.88" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1463.4407634428662 218.6544424402793) rotate(0 13.28399658203125 22.5)"><text x="13.28399658203125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n1</text></g><g stroke-linecap="round" transform="translate(1753.7537708680698 352.5420248646784) rotate(0 65.94913579124659 61.686331430918244)"><path d="M5.96 36.98 C5.96 36.98, 5.96 36.98, 5.96 36.98 M5.96 36.98 C5.96 36.98, 5.96 36.98, 5.96 36.98 M2.16 53.55 C11.43 43.36, 21.76 32.8, 31.68 19.59 M2.16 53.55 C9.71 44.96, 17.38 35.31, 31.68 19.59 M0.32 67.86 C18.6 47.98, 38.67 23.38, 56.74 2.95 M0.32 67.86 C18.47 46.29, 37.28 26.68, 56.74 2.95 M3.74 76.12 C22.23 59.28, 37.78 38.79, 66.72 3.67 M3.74 76.12 C21.26 55.05, 41.26 33.13, 66.72 3.67 M7.15 84.39 C32.69 57.92, 55.14 29.31, 76.69 4.39 M7.15 84.39 C27.07 61.53, 45.98 38.64, 76.69 4.39 M9.91 93.41 C30.84 69.69, 52.56 44.8, 87.32 4.36 M9.91 93.41 C39.69 60.46, 68.24 27.2, 87.32 4.36 M15.95 98.66 C37.33 74.73, 55.71 50.85, 94.67 8.1 M15.95 98.66 C38.39 72.1, 61.58 46.1, 94.67 8.1 M21.33 104.67 C45.58 80.24, 66.29 50.34, 102.02 11.84 M21.33 104.67 C49.75 70.76, 79.88 36.52, 102.02 11.84 M27.36 109.91 C53.41 75.95, 84.55 45.01, 108.72 16.33 M27.36 109.91 C44.29 88.81, 60.35 70.13, 108.72 16.33 M33.4 115.16 C57.58 89.26, 77.47 63.99, 116.07 20.07 M33.4 115.16 C64.31 77.82, 96.67 41.18, 116.07 20.07 M42.06 117.39 C60.5 94.98, 80.81 71.37, 120.14 27.58 M42.06 117.39 C69.77 85.54, 97.63 53.56, 120.14 27.58 M50.07 120.38 C75.46 87.48, 102.67 57.38, 124.86 34.34 M50.07 120.38 C79.18 88.82, 105.89 54.83, 124.86 34.34 M58.73 122.61 C81.79 96.88, 104.13 68.2, 128.27 42.61 M58.73 122.61 C84.94 92.4, 110.41 61.07, 128.27 42.61 M65.43 127.1 C84.32 106.67, 102.56 87.02, 129.06 53.89 M65.43 127.1 C84.68 105.76, 105.97 82.44, 129.06 53.89 M78.02 124.8 C95.17 104.63, 110.8 89.12, 129.85 65.18 M78.02 124.8 C98.44 102.23, 117.62 79.38, 129.85 65.18 M93.9 118.73 C108.26 104.5, 121.51 89.61, 132.61 74.2 M93.9 118.73 C103.04 109.13, 110.21 98.18, 132.61 74.2" stroke="#1971c2" stroke-width="1" fill="none"></path><path d="M54.21 1.39 C63.7 -0.97, 76.43 0.86, 86.1 3.5 C95.77 6.14, 105.25 10.74, 112.21 17.23 C119.18 23.73, 124.92 33.36, 127.89 42.46 C130.87 51.57, 131.82 62.37, 130.07 71.86 C128.32 81.36, 123.63 91.7, 117.4 99.44 C111.16 107.17, 102 114.32, 92.65 118.3 C83.31 122.27, 71.34 123.98, 61.34 123.29 C51.33 122.6, 41.34 119.2, 32.64 114.18 C23.93 109.15, 14.65 101.08, 9.1 93.13 C3.55 85.18, -0.17 75.86, -0.68 66.49 C-1.19 57.12, 1.6 45.64, 6.04 36.89 C10.48 28.15, 17.21 20.25, 25.95 14.03 C34.69 7.81, 52.13 1.88, 58.47 -0.4 C64.81 -2.68, 63.87 -0.66, 64 0.34 M37.44 4.5 C45.67 0.11, 58.33 -0.88, 68.52 -0.28 C78.7 0.31, 89.47 2.87, 98.57 8.05 C107.66 13.24, 117.34 22.27, 123.08 30.84 C128.83 39.4, 132.66 50.02, 133.05 59.42 C133.44 68.82, 130.02 78.52, 125.44 87.23 C120.86 95.93, 113.46 105.77, 105.57 111.65 C97.67 117.52, 87.71 120.82, 78.07 122.47 C68.44 124.11, 57.71 124.56, 47.77 121.53 C37.83 118.5, 26.06 111.02, 18.43 104.28 C10.8 97.54, 4.66 89.91, 1.99 81.11 C-0.67 72.31, 0.48 61, 2.45 51.47 C4.42 41.94, 7.83 31.75, 13.81 23.95 C19.8 16.15, 33.9 7.71, 38.37 4.69 C42.84 1.66, 40.36 4.87, 40.65 5.81" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1798.3478330352577 391.6095330342735) rotate(0 21.22199249267578 22.5)"><text x="21.22199249267578" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n2</text></g><g stroke-linecap="round" transform="translate(1791.7741531662282 746.2843016025834) rotate(0 65.94913579124659 61.686331430918244)"><path d="M18.54 17.44 C18.54 17.44, 18.54 17.44, 18.54 17.44 M18.54 17.44 C18.54 17.44, 18.54 17.44, 18.54 17.44 M4.24 46.09 C14.95 30.91, 26.66 18.06, 39.67 5.33 M4.24 46.09 C16.54 33.35, 26.83 19.19, 39.67 5.33 M3.06 59.64 C22.31 37.46, 40.07 15.83, 52.92 2.28 M3.06 59.64 C13.33 46.5, 24.05 35.27, 52.92 2.28 M1.88 73.19 C26.43 45.23, 49.34 14.06, 64.21 1.49 M1.88 73.19 C20.32 52.45, 37.89 32.21, 64.21 1.49 M5.3 81.46 C33.51 50.37, 60.23 18.23, 75.5 0.7 M5.3 81.46 C21.83 62.9, 39.34 43.48, 75.5 0.7 M8.71 89.72 C35.84 58.89, 60.14 31.3, 84.16 2.93 M8.71 89.72 C29.72 65.4, 52.88 40.06, 84.16 2.93 M12.12 97.99 C40.92 65.76, 69.43 32.76, 91.51 6.67 M12.12 97.99 C32.36 74.23, 53.14 50.83, 91.51 6.67 M17.51 103.99 C51.16 69.76, 80.23 29.75, 99.51 9.66 M17.51 103.99 C44.88 74.29, 70.72 42.7, 99.51 9.66 M24.2 108.49 C42.4 85.75, 66.64 62.07, 106.86 13.39 M24.2 108.49 C41.79 88.35, 58.64 68.86, 106.86 13.39 M30.89 112.98 C56.11 87.21, 77.67 59.1, 112.25 19.4 M30.89 112.98 C51.12 89.85, 72.85 65.4, 112.25 19.4 M37.59 117.48 C68 83.26, 96.86 50.31, 116.97 26.16 M37.59 117.48 C65.91 86.45, 92.93 53.46, 116.97 26.16 M46.91 118.95 C64.49 100.64, 77.93 84.29, 122.35 32.16 M46.91 118.95 C75.15 87.62, 102.73 56.75, 122.35 32.16 M56.22 120.43 C84.05 91.69, 109.52 61.62, 126.42 39.67 M56.22 120.43 C82.57 90.47, 107.75 61.58, 126.42 39.67 M65.54 121.9 C84.59 97.95, 103.1 75.92, 128.52 49.45 M65.54 121.9 C90.1 93.69, 115.79 64.84, 128.52 49.45 M76.17 121.87 C88.81 107.16, 100.46 96.21, 130.62 59.22 M76.17 121.87 C93.06 103.1, 108.63 84.07, 130.62 59.22 M90.74 117.3 C101.12 102.87, 114.53 89.91, 129.45 72.78 M90.74 117.3 C104.2 103.85, 115.78 89.37, 129.45 72.78 M118.43 97.65 C120.02 97.01, 120.08 95.23, 123.02 92.36 M118.43 97.65 C119.4 96.34, 121.01 95.28, 123.02 92.36" stroke="#f08c00" stroke-width="1" fill="none"></path><path d="M77.52 0.24 C86.97 0.73, 97.65 6.46, 105.61 12.34 C113.58 18.21, 121.04 26.69, 125.31 35.5 C129.58 44.31, 131.81 55.42, 131.25 65.17 C130.69 74.92, 127.26 85.76, 121.94 93.98 C116.63 102.2, 107.9 109.67, 99.35 114.49 C90.81 119.31, 80.83 122.43, 70.67 122.91 C60.52 123.39, 48.01 121.09, 38.44 117.39 C28.87 113.7, 19.42 108.08, 13.24 100.73 C7.06 93.37, 2.94 82.69, 1.36 73.27 C-0.23 63.84, 0.86 53.52, 3.74 44.2 C6.61 34.88, 11.59 24.41, 18.62 17.36 C25.64 10.31, 35.08 4.53, 45.88 1.89 C56.68 -0.76, 76.29 0.91, 83.44 1.5 C90.59 2.08, 89.14 4.42, 88.78 5.39 M43.96 2.24 C53.23 -1.21, 67.09 -0.03, 77.63 1.95 C88.16 3.92, 99.25 8.43, 107.15 14.08 C115.05 19.73, 121.11 27.18, 125.04 35.82 C128.97 44.47, 131.08 56.43, 130.75 65.95 C130.42 75.48, 127.82 84.79, 123.07 92.95 C118.32 101.12, 111.12 110.09, 102.27 114.95 C93.42 119.82, 80.55 121.42, 69.96 122.15 C59.37 122.88, 47.73 122.81, 38.74 119.34 C29.74 115.86, 22.27 108.85, 15.99 101.29 C9.71 93.72, 3.35 83.6, 1.06 73.95 C-1.24 64.31, -0.91 52.75, 2.23 43.42 C5.37 34.08, 12.95 24.79, 19.92 17.93 C26.88 11.08, 39.58 4.73, 44.01 2.29 C48.44 -0.16, 45.97 1.95, 46.5 3.27" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1836.9262139906427 785.3518097721784) rotate(0 20.66399383544922 22.5)"><text x="20.66399383544922" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n3</text></g><g stroke-linecap="round" transform="translate(1573.5674676354986 973.2055997822683) rotate(0 65.94913579124659 61.686331430918244)"><path d="M14.61 21.97 C14.61 21.97, 14.61 21.97, 14.61 21.97 M14.61 21.97 C14.61 21.97, 14.61 21.97, 14.61 21.97 M1.62 49.11 C10.96 38.07, 18.26 30.26, 40.98 3.83 M1.62 49.11 C16.68 33.51, 29.22 17.61, 40.98 3.83 M1.75 61.15 C13.93 46.29, 30.19 29.21, 52.93 2.28 M1.75 61.15 C16.11 45.94, 28.51 30.59, 52.93 2.28 M2.54 72.44 C23.77 49.72, 43.83 26.4, 64.21 1.49 M2.54 72.44 C20.63 51.73, 37.66 32.63, 64.21 1.49 M5.3 81.46 C31.15 50.26, 57.37 19.43, 74.84 1.46 M5.3 81.46 C27.46 56.36, 49.24 31.31, 74.84 1.46 M9.37 88.97 C28.35 67.79, 46.82 43.95, 82.85 4.44 M9.37 88.97 C35.29 57.6, 61.66 28.33, 82.85 4.44 M13.44 96.48 C38.72 67.48, 65.1 36.11, 90.85 7.43 M13.44 96.48 C38.4 68.09, 60.48 41.8, 90.85 7.43 M18.16 103.24 C49.88 66.89, 81.38 34.18, 98.86 10.41 M18.16 103.24 C47.62 69.67, 78.72 33.49, 98.86 10.41 M24.86 107.74 C51.18 73.38, 81.69 40.21, 105.55 14.91 M24.86 107.74 C49.47 78.85, 73.91 52.97, 105.55 14.91 M31.55 112.23 C56.94 81.88, 83.52 50.74, 111.59 20.15 M31.55 112.23 C56.21 83.74, 80.68 56.43, 111.59 20.15 M38.25 116.72 C58.83 93.39, 78.78 71.77, 116.97 26.16 M38.25 116.72 C68.18 81.19, 99.56 46.67, 116.97 26.16 M44.94 121.22 C68.17 94.13, 86.76 71.52, 123.01 31.41 M44.94 121.22 C62.69 100.39, 79.34 81.5, 123.01 31.41 M54.91 121.94 C78.79 93.46, 100.02 68.49, 125.77 40.43 M54.91 121.94 C72.8 102.1, 90.75 82.09, 125.77 40.43 M64.89 122.66 C81.07 108.85, 93.41 91, 129.18 48.7 M64.89 122.66 C88.2 94.62, 114.12 66.23, 129.18 48.7 M74.86 123.38 C88.84 107.63, 101.99 90.88, 131.94 57.72 M74.86 123.38 C94.97 101.61, 114.32 77.74, 131.94 57.72 M89.43 118.81 C101.77 103.19, 111.49 92.95, 130.1 72.02 M89.43 118.81 C101.81 104.33, 114.94 89.64, 130.1 72.02" stroke="#e03131" stroke-width="1" fill="none"></path><path d="M40.58 3.6 C49.3 -0.53, 61.86 -1.07, 72.07 0.1 C82.29 1.27, 93.39 5.32, 101.88 10.64 C110.36 15.95, 117.87 23.72, 122.99 31.97 C128.11 40.22, 132.36 50.66, 132.6 60.12 C132.85 69.58, 129.3 79.95, 124.47 88.72 C119.65 97.49, 111.84 106.98, 103.67 112.73 C95.5 118.48, 85.31 121.89, 75.46 123.2 C65.61 124.52, 54.32 124.03, 44.54 120.63 C34.76 117.22, 23.9 110.09, 16.78 102.77 C9.66 95.45, 4.44 85.97, 1.81 76.72 C-0.81 67.46, -1.17 56.41, 1.01 47.24 C3.19 38.06, 7.34 29.26, 14.89 21.66 C22.43 14.05, 39.94 4.97, 46.27 1.6 C52.6 -1.77, 52.44 0.47, 52.87 1.44 M49.31 3.81 C58.16 0.33, 69.32 -0.38, 78.93 1.59 C88.53 3.55, 98.92 9.53, 106.93 15.6 C114.94 21.67, 122.65 29.27, 127 38.01 C131.35 46.74, 134.13 58.69, 133.05 68.01 C131.97 77.34, 126.45 85.91, 120.53 93.97 C114.61 102.02, 106.03 111.32, 97.53 116.36 C89.02 121.4, 79.6 124.02, 69.52 124.21 C59.45 124.4, 46.58 121.94, 37.07 117.52 C27.56 113.09, 18.31 105.5, 12.47 97.64 C6.64 89.79, 3.77 79.84, 2.04 70.4 C0.32 60.95, -1.09 50.05, 2.11 40.98 C5.31 31.9, 13.65 22.17, 21.25 15.94 C28.85 9.71, 43.25 5.7, 47.71 3.6 C52.16 1.5, 47.88 2.62, 47.99 3.33" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1619.4575274223155 1012.2731079518634) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n4</text></g><g stroke-linecap="round" transform="translate(1158.7597436749945 914.2341115985405) rotate(0 65.94913579124659 61.686331430918244)"><path d="M13.64 22.45 C13.64 22.45, 13.64 22.45, 13.64 22.45 M13.64 22.45 C13.64 22.45, 13.64 22.45, 13.64 22.45 M0.65 49.59 C10.73 37.31, 18.07 30.58, 38.7 5.82 M0.65 49.59 C12.76 35.09, 25.05 20.55, 38.7 5.82 M1.44 60.88 C16.93 40.95, 36.03 24.7, 51.3 3.52 M1.44 60.88 C17.9 41.22, 32.84 23.37, 51.3 3.52 M1.57 72.92 C21.86 49.18, 43.4 27.56, 63.9 1.22 M1.57 72.92 C15.65 56.29, 29.52 40.44, 63.9 1.22 M3.67 82.69 C25.04 60.39, 45.1 36.84, 73.87 1.94 M3.67 82.69 C26.56 55.13, 51.13 28.27, 73.87 1.94 M8.4 89.45 C36.89 60.51, 63.59 28.59, 82.53 4.17 M8.4 89.45 C23.25 72.22, 38.05 54.4, 82.53 4.17 M13.12 96.21 C40.99 64.17, 69.73 34.8, 91.19 6.4 M13.12 96.21 C34.88 71.82, 53.32 49.46, 91.19 6.4 M17.85 102.97 C36.47 82.78, 50.93 60.92, 99.86 8.63 M17.85 102.97 C46.83 71.59, 75.54 36.71, 99.86 8.63 M24.54 107.46 C46.52 80.53, 69.86 56.73, 105.89 13.88 M24.54 107.46 C42.4 86.53, 59.24 65.31, 105.89 13.88 M31.24 111.95 C54.9 87.37, 76.23 60.56, 111.93 19.13 M31.24 111.95 C49.72 90, 69 67.74, 111.93 19.13 M38.59 115.69 C62.16 90.04, 81.57 62.71, 117.31 25.13 M38.59 115.69 C60.27 89.92, 82.7 66.2, 117.31 25.13 M45.94 119.43 C61.98 101.38, 79.52 82.1, 122.69 31.13 M45.94 119.43 C64.33 99.05, 81.85 78.57, 122.69 31.13 M55.25 120.91 C68.75 103.06, 84.56 87.93, 125.45 40.15 M55.25 120.91 C76.19 95.02, 98.43 70.57, 125.45 40.15 M65.23 121.63 C91.3 94.51, 116.02 63.45, 128.21 49.18 M65.23 121.63 C88.58 94.05, 114.02 65.59, 128.21 49.18 M75.2 122.35 C96 97.57, 116.49 77.11, 130.97 58.2 M75.2 122.35 C96.59 97.68, 118.81 73.23, 130.97 58.2 M89.11 118.54 C98.57 108.84, 106.27 97.34, 129.13 72.5 M89.11 118.54 C103.79 101.81, 116.68 86.65, 129.13 72.5 M104.33 113.22 C109.49 108.86, 116.04 103.15, 126.64 87.56 M104.33 113.22 C111.87 103.56, 119.8 95.16, 126.64 87.56" stroke="#2f9e44" stroke-width="1" fill="none"></path><path d="M38.36 5.86 C46.77 1.34, 58.73 -0.31, 69.13 0.13 C79.52 0.58, 91.93 3.68, 100.72 8.51 C109.52 13.35, 116.85 20.77, 121.89 29.16 C126.93 37.56, 130.21 49.17, 130.96 58.88 C131.71 68.58, 130.31 78.69, 126.39 87.38 C122.47 96.08, 115.63 105.34, 107.43 111.05 C99.24 116.75, 87.47 120.18, 77.22 121.62 C66.98 123.06, 55.72 122.54, 45.97 119.69 C36.23 116.83, 26.06 111.08, 18.76 104.48 C11.45 97.87, 5.27 89.19, 2.16 80.06 C-0.95 70.93, -1.75 59.24, 0.12 49.69 C1.99 40.14, 6.61 30.45, 13.36 22.77 C20.11 15.1, 35.71 6.52, 40.64 3.64 C45.57 0.76, 42.34 4.23, 42.92 5.48 M96.28 8.87 C105.42 12.37, 114.81 19.57, 120.91 27.42 C127.02 35.28, 132.01 46.69, 132.92 55.99 C133.83 65.3, 130.54 74.36, 126.39 83.27 C122.24 92.17, 115.38 102.87, 108.03 109.43 C100.67 116, 92.08 120.6, 82.26 122.64 C72.45 124.68, 59.32 124.34, 49.13 121.66 C38.93 118.98, 28.41 113.16, 21.09 106.56 C13.78 99.95, 8.9 91.02, 5.24 82.04 C1.59 73.06, -2.1 62.18, -0.84 52.67 C0.43 43.17, 6.73 32.46, 12.82 25.01 C18.92 17.56, 26.81 12.18, 35.74 7.98 C44.67 3.78, 56.38 -0.02, 66.41 -0.17 C76.43 -0.31, 90.91 5.77, 95.89 7.1 C100.86 8.44, 96.72 7.08, 96.26 7.86" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1205.0458071849557 953.3016197681354) rotate(0 19.529991149902344 22.5)"><text x="19.529991149902344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n5</text></g><g stroke-linecap="round" transform="translate(1062.911209530466 319.1180639188366) rotate(0 65.94913579124659 61.686331430918244)"><path d="M26.57 12.5 C26.57 12.5, 26.57 12.5, 26.57 12.5 M26.57 12.5 C26.57 12.5, 26.57 12.5, 26.57 12.5 M12.27 41.14 C19.03 32.03, 25.6 24.59, 42.45 6.42 M12.27 41.14 C22.46 29.94, 34.45 17.29, 42.45 6.42 M0.59 66.77 C16.79 43.81, 36.6 25.48, 55.7 3.37 M0.59 66.77 C14.37 51.03, 29.38 33.72, 55.7 3.37 M4.01 75.03 C26.44 48.71, 50.52 19.56, 65.68 4.09 M4.01 75.03 C18.58 58.96, 32.43 43.31, 65.68 4.09 M6.76 84.06 C27.43 61.09, 49.07 36.1, 75.65 4.81 M6.76 84.06 C25.96 63.38, 43.53 41.33, 75.65 4.81 M9.52 93.08 C38.71 59.6, 66.8 27.21, 86.94 4.02 M9.52 93.08 C30.91 68.97, 53.55 43.12, 86.94 4.02 M15.56 98.33 C30.28 76.72, 48.57 57.67, 94.29 7.76 M15.56 98.33 C43.32 64.75, 70.48 33.95, 94.29 7.76 M20.94 104.33 C50.62 73.96, 73.95 41.24, 100.98 12.25 M20.94 104.33 C43.45 78.29, 67.41 50.1, 100.98 12.25 M26.98 109.58 C53.49 77.2, 78.81 47.38, 108.33 15.99 M26.98 109.58 C48.7 85.12, 69.07 61.64, 108.33 15.99 M33.02 114.83 C61.07 82.96, 88.17 51.82, 115.02 20.49 M33.02 114.83 C59.98 82.1, 86.44 50.64, 115.02 20.49 M41.02 117.81 C59.62 96.2, 81.8 70.02, 119.75 27.25 M41.02 117.81 C57.79 99.26, 74.1 80.07, 119.75 27.25 M49.68 120.04 C69.66 97.66, 88.88 73.6, 123.82 34.76 M49.68 120.04 C69.33 97.35, 90.26 74.12, 123.82 34.76 M57.69 123.02 C83.2 91.99, 111.55 65.66, 128.54 41.52 M57.69 123.02 C80.49 97.74, 101.35 72.03, 128.54 41.52 M65.04 126.76 C89.81 101.09, 112.46 73.19, 133.93 47.52 M65.04 126.76 C81.35 107.09, 100.01 87.04, 133.93 47.52 M77.64 124.47 C96.08 104.39, 115.34 80.38, 134.71 58.81 M77.64 124.47 C89.02 110.65, 99.92 97.85, 134.71 58.81 M92.86 119.15 C101.1 107.5, 112.27 93.47, 132.22 73.87 M92.86 119.15 C102.4 110.02, 111.03 99.82, 132.22 73.87" stroke="#f08c00" stroke-width="1" fill="none"></path><path d="M53.7 1.91 C63.21 -0.39, 76.28 0.48, 86.27 3.36 C96.27 6.24, 106.65 12.6, 113.66 19.21 C120.68 25.82, 125.59 34.16, 128.36 43.01 C131.14 51.86, 132.21 62.95, 130.31 72.31 C128.41 81.67, 123.4 91.57, 116.97 99.19 C110.55 106.82, 101.15 114.22, 91.75 118.07 C82.35 121.92, 70.72 123.08, 60.57 122.29 C50.41 121.5, 39.4 118.34, 30.81 113.33 C22.22 108.33, 14.22 100.23, 9.01 92.25 C3.8 84.28, -0.07 74.7, -0.46 65.46 C-0.84 56.23, 2.21 45.67, 6.72 36.83 C11.24 27.99, 16.99 18.68, 26.63 12.43 C36.26 6.17, 56.46 1.06, 64.53 -0.7 C72.59 -2.46, 75.01 0.55, 75.02 1.85 M85.22 4.03 C95.14 6.28, 107.16 12.7, 114.44 19.4 C121.72 26.1, 126.29 35.35, 128.91 44.23 C131.54 53.12, 131.91 63.47, 130.21 72.68 C128.51 81.89, 125.24 92.02, 118.69 99.47 C112.15 106.93, 100.42 113.63, 90.96 117.43 C81.5 121.22, 71.94 122.58, 61.93 122.25 C51.92 121.92, 39.77 120.32, 30.91 115.42 C22.05 110.53, 14.13 101.37, 8.75 92.87 C3.37 84.37, -0.87 74.05, -1.39 64.42 C-1.91 54.79, 1.27 43.91, 5.63 35.11 C9.99 26.3, 16.55 17.27, 24.77 11.61 C33 5.95, 44.86 2.55, 54.99 1.16 C65.12 -0.23, 80.19 2.77, 85.56 3.26 C90.93 3.74, 87.4 3.08, 87.2 4.08" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1110.6372678524392 358.1855720884316) rotate(0 18.089996337890625 22.5)"><text x="18.089996337890625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n7</text></g><g stroke-linecap="round" transform="translate(1014.212636508996 653.6017684829064) rotate(0 65.94913579124659 61.686331430918244)"><path d="M12.95 25.83 C12.95 25.83, 12.95 25.83, 12.95 25.83 M12.95 25.83 C12.95 25.83, 12.95 25.83, 12.95 25.83 M3.9 48.44 C15.44 35.85, 23.78 23.89, 41.29 5.42 M3.9 48.44 C17.92 32.03, 32.16 14.81, 41.29 5.42 M2.72 61.99 C12.28 50.99, 23.12 38.02, 53.89 3.12 M2.72 61.99 C20.12 42.54, 37.18 22.27, 53.89 3.12 M3.51 73.28 C26.29 45.36, 51.97 19.48, 66.49 0.82 M3.51 73.28 C22.26 51.97, 40.68 29.32, 66.49 0.82 M4.3 84.56 C30.47 52.55, 59.25 24.19, 75.81 2.3 M4.3 84.56 C28.91 57.16, 52.85 29.37, 75.81 2.3 M9.02 91.32 C31.78 64.29, 55.26 37.77, 83.81 5.28 M9.02 91.32 C35.01 60.58, 64.34 27.43, 83.81 5.28 M14.4 97.32 C31.71 80.15, 48.47 60.85, 92.48 7.51 M14.4 97.32 C32.05 76.67, 49.09 59.18, 92.48 7.51 M19.13 104.08 C48.66 70.6, 77.7 35.95, 100.48 10.5 M19.13 104.08 C49.38 71.35, 79.18 36.5, 100.48 10.5 M25.82 108.57 C44.29 85.99, 64.41 66.59, 106.52 15.75 M25.82 108.57 C43.67 88.81, 60.99 68.06, 106.52 15.75 M33.17 112.31 C54.45 89.51, 76.63 64.3, 113.21 20.24 M33.17 112.31 C54.46 89.26, 75.58 64.03, 113.21 20.24 M40.52 116.05 C67.16 83.95, 96.57 51.32, 119.25 25.49 M40.52 116.05 C60.72 93.02, 82.56 68.54, 119.25 25.49 M47.87 119.79 C69.16 94.45, 90.99 67.58, 122.66 33.75 M47.87 119.79 C72.06 92.65, 94.12 65.3, 122.66 33.75 M57.19 121.27 C71.33 103.9, 87.33 88.1, 126.08 42.02 M57.19 121.27 C85.35 90.35, 111.39 59.27, 126.08 42.02 M67.82 121.23 C89.9 95.1, 114.63 65.98, 129.49 50.29 M67.82 121.23 C91.09 93.25, 113.96 67.13, 129.49 50.29 M78.45 121.2 C94.86 102.26, 115.56 79.88, 130.28 61.58 M78.45 121.2 C92.57 105.33, 108.1 87.45, 130.28 61.58 M94.33 115.13 C104.14 101.11, 117.01 90.7, 128.45 75.88 M94.33 115.13 C107.87 100.51, 119.91 84.59, 128.45 75.88" stroke="#1971c2" stroke-width="1" fill="none"></path><path d="M97.73 8.09 C106.6 11.37, 114.23 18.64, 119.78 26.25 C125.34 33.85, 129.86 44.27, 131.04 53.74 C132.22 63.2, 130.6 74, 126.85 83.06 C123.1 92.12, 116.26 101.8, 108.51 108.08 C100.77 114.36, 90.27 118.65, 80.37 120.73 C70.47 122.81, 58.91 122.92, 49.12 120.56 C39.33 118.21, 29.22 112.76, 21.63 106.61 C14.05 100.46, 6.98 92.31, 3.59 83.66 C0.19 75.01, -0.29 64.33, 1.26 54.7 C2.81 45.07, 7.15 33.97, 12.91 25.88 C18.68 17.79, 26.78 10.45, 35.85 6.16 C44.92 1.87, 56.8 -0.37, 67.32 0.14 C77.85 0.65, 93.44 7.6, 99.02 9.21 C104.6 10.82, 101.48 9.18, 100.8 9.8 M88.22 3.97 C97.37 5.94, 107.05 12.46, 114.18 19.34 C121.31 26.22, 128.57 36.03, 131 45.28 C133.43 54.52, 131.18 65.51, 128.78 74.79 C126.38 84.06, 123.09 93.35, 116.61 100.94 C110.13 108.52, 99.59 116.66, 89.92 120.32 C80.24 123.97, 68.91 124.14, 58.56 122.85 C48.22 121.57, 36.32 118.02, 27.82 112.62 C19.32 107.23, 12.36 99.01, 7.55 90.49 C2.73 81.96, -1.01 70.88, -1.04 61.48 C-1.07 52.08, 2.68 42.39, 7.36 34.1 C12.03 25.8, 18.51 17.31, 27.02 11.71 C35.53 6.11, 48.15 1.75, 58.41 0.49 C68.66 -0.78, 83.5 3.3, 88.57 4.13 C93.64 4.96, 89.32 4.78, 88.83 5.47" stroke="#343a40" stroke-width="2" fill="none"></path></g><g transform="translate(1060.1026962958128 692.6692766525015) rotate(0 19.925994873046875 22.5)"><text x="19.925994873046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#343a40" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">n6</text></g><g transform="translate(1459.8876584703398 348.70077150461975) rotate(0 12.383995056152344 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">0</text></g><g transform="translate(1669.2621021727646 439.71086336046073) rotate(0 17.693992614746094 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">12</text></g><g transform="translate(1728.0603836495602 620.453768238383) rotate(0 23.939987182617188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">25</text></g><g transform="translate(1656.69393398373 804.1451127988653) rotate(0 21.941993713378906 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">37</text></g><g transform="translate(1468.647424301777 895.553847632174) rotate(0 23.50798797607422 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">50</text></g><g transform="translate(1257.8446440096072 808.7702555298215) rotate(0 24.33599090576172 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">62</text></g><g transform="translate(1183.3450331389345 628.9096138054697) rotate(0 20.80799102783203 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">75</text></g><g transform="translate(1244.9212421238776 441.9843590193027) rotate(0 23.453994750976562 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">87</text></g><g transform="translate(1580.6663211748605 376.06303885631064) rotate(0 11.519996643066406 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">6</text></g><g transform="translate(1715.1428836748605 521.3013201063106) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">18</text></g><g transform="translate(1703.2851337358957 704.6255388563106) rotate(0 17.13599395751953 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">31</text></g><g transform="translate(1571.0393222734933 854.8997516653073) rotate(0 23.777992248535156 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">43</text></g><g transform="translate(1357.2606052324777 864.8403826063106) rotate(0 22.64398956298828 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">56</text></g><g transform="translate(1209.0391391680246 717.7661638563106) rotate(0 25.289993286132812 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">68</text></g><g transform="translate(1204.0391391680246 533.5396013563106) rotate(0 18.647994995117188 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">81</text></g><g transform="translate(1345.7031024858957 373.73491385631064) rotate(0 23.219993591308594 22.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">93</text></g></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Consistent Hash Ring</span></div></div></div></div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-6">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Predictable server assignment</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Minimal connection disruption during scaling</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">No central coordination needed for routing</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Works well with stateful connections</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Easy to add/remove servers</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-6">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Complex to implement correctly</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Requires coordination service (like Zookeeper)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Can lead to uneven distribution if hash function isn't well-designed</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">All servers need to maintain routing information</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Connection state is lost if a server fails</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-consistent-hashing">When to Use Consistent Hashing</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Consistent hashing is ideal when you need to maintain persistent connections (WebSocket/SSE) and your system needs to scale dynamically. Connection state is expensive to transfer and you can tolerate some connection loss during server failures. You also need a coordination service available.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The consistent hashing approach also works particularly well if we need to maintain a lot of state associated with a given connection. As an example, for <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="/learn/system-design/problem-breakdowns/google-docs" target="_blank" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">the Google Docs design</a>, our connections are associated with a specific document, and we need to retain a lot of state about that document in order to provide the collaborative editing functionality.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Consistent hashing isn't great for situations where we don't need to maintain a lot of state associated with a given connection. If we're just passing small messages to a large number of clients, we're probably better off using the next approach: Pub/Sub.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-6">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If you introduce a consistent hashing approach in an interview, you'll want to be able to discuss not only how the updates are routed (e.g. a cooordination service like Zookeeper or etcd). Interviewers are usually interested to understand how the system scales: what happens when we need to increase or decrease the number of nodes. For those instances, you'll want to be able to share your knowledge about consistent hashing but also talk about the orchestration logic necessary to make it work. In practice, this usually means:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Signaling the beginning of a scaling event. Recording both the old and new server assignments.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Slowly disconnecting clients from the old server and having them reconnect to their newly assigned server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Signaling the end of the scaling event and updating the coordination service with the new server assignments.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">In the interim, having messages which are sent to both the old and new server until they're fully transitioned.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The mechanics of discovering the initial server assignments is also interesting. Having clients know about the internal structure of your system can be problematic, but there are performance tradeoffs associated with redirecting clients to the correct server or requiring them to do a round-trip to a central server to look up the correct one. Especially during scaling events, any central registration service may become a bottleneck so it's important to discuss the tradeoffs with your interviewer.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="pushing-via-pubsub">Pushing via Pub/Sub</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Another approach to triggering updates is to use a <strong>pub/sub</strong> model. In this model, we have a single service that is responsible for collecting updates from the source and then broadcasting them to all interested clients. Popular options here include Kafka and Redis.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The pub/sub service becomes the biggest source of <em>state</em> for our realtime updates. Our persistent connections are now made to lightweight servers which simply subscribe to the relevant topics and forward the updates to the appropriate clients. I'll refer to these servers as <em>endpoint</em> servers.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When clients connect, we don't need them to connect to a specific endpoint server (like we did with consistent hashing) and instead can connect to any of them. Once connected, the endpoint server will register the client with the pub/sub server so that any updates can be sent to them.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 689.9328093562017 501.78394993338827">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="689.9328093562017" height="501.78394993338827" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(13.830078125 108.33323756661179) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.17 0.42, 51.14 -1.01, 63.84 0 M21.28 0 C30.76 0.69, 40.52 0.02, 63.84 0 M63.84 0 C78.99 -0.17, 83.74 6.34, 85.12 21.28 M63.84 0 C79.8 -1.84, 84.74 6.55, 85.12 21.28 M85.12 21.28 C83.13 33.07, 83.38 46.57, 85.12 65.24 M85.12 21.28 C85.09 33.45, 85.86 44.47, 85.12 65.24 M85.12 65.24 C86.52 78.52, 77.44 85.23, 63.84 86.52 M85.12 65.24 C84.31 77.17, 76.07 84.34, 63.84 86.52 M63.84 86.52 C51.77 85.86, 36.92 87.1, 21.28 86.52 M63.84 86.52 C50.97 86.2, 36.74 86.3, 21.28 86.52 M21.28 86.52 C7.18 86.22, 0.42 80.02, 0 65.24 M21.28 86.52 C7.08 86.23, -1.58 81.44, 0 65.24 M0 65.24 C0.71 52.48, -0.37 35.22, 0 21.28 M0 65.24 C1.22 56, 1.23 44.61, 0 21.28 M0 21.28 C1.38 7.24, 8.34 1.23, 21.28 0 M0 21.28 C-2.01 9.39, 4.84 -0.77, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(22.490646362304688 139.09300319161179) rotate(0 33.89997863769531 12.5)"><text x="33.89997863769531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User A</text></g><g stroke-linecap="round" transform="translate(12.87890625 239.44456569161179) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.57 0.25, 51.74 -0.99, 63.84 0 M21.28 0 C38.65 -0.21, 54.37 -0.51, 63.84 0 M63.84 0 C79.57 -1.6, 84.79 6.62, 85.12 21.28 M63.84 0 C77.94 -2, 84.46 5.24, 85.12 21.28 M85.12 21.28 C84.2 31.9, 86.23 42.14, 85.12 65.24 M85.12 21.28 C86.13 35.51, 85.14 50.01, 85.12 65.24 M85.12 65.24 C84.41 77.47, 76.32 84.62, 63.84 86.52 M85.12 65.24 C85.6 78.95, 79.87 88.35, 63.84 86.52 M63.84 86.52 C53.36 87.22, 42.32 87.09, 21.28 86.52 M63.84 86.52 C52.26 86.3, 40.81 86.74, 21.28 86.52 M21.28 86.52 C7.08 86.27, -1.37 81.18, 0 65.24 M21.28 86.52 C7.84 87.79, 0.07 80.52, 0 65.24 M0 65.24 C-1.36 46.75, -1.17 32.63, 0 21.28 M0 65.24 C0.27 48.21, 0.2 31.65, 0 21.28 M0 21.28 C-1.75 9.09, 5.13 -0.67, 21.28 0 M0 21.28 C0.56 5.11, 8.18 -1.38, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(20.82947540283203 270.2043313166118) rotate(0 34.60997772216797 12.5)"><text x="34.60997772216797" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User B</text></g><g stroke-linecap="round" transform="translate(10 365.47581569161184) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C36.25 -1.46, 47.96 1.2, 63.84 0 M21.28 0 C34.47 -0.64, 45.95 -0.08, 63.84 0 M63.84 0 C77.95 -1.74, 84.55 5.48, 85.12 21.28 M63.84 0 C76.62 -1.57, 84.26 6.38, 85.12 21.28 M85.12 21.28 C86.11 36.18, 84.49 49.63, 85.12 65.24 M85.12 21.28 C84.64 31.49, 84.14 42.71, 85.12 65.24 M85.12 65.24 C85.54 79.01, 79.63 88.11, 63.84 86.52 M85.12 65.24 C83.98 79.88, 78.31 86.72, 63.84 86.52 M63.84 86.52 C49.15 84.97, 35.19 86.71, 21.28 86.52 M63.84 86.52 C51.71 86.52, 38.9 87.52, 21.28 86.52 M21.28 86.52 C7.74 87.62, 0.06 80.38, 0 65.24 M21.28 86.52 C9.22 86.38, -0.92 77.83, 0 65.24 M0 65.24 C2.04 56.7, -0.48 45.69, 0 21.28 M0 65.24 C-1.15 52.74, -1.26 37.9, 0 21.28 M0 21.28 C0.49 5.37, 8.04 -1.2, 21.28 0 M0 21.28 C-0.63 5.4, 4.82 -0.57, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(18.78057098388672 396.23558131661184) rotate(0 33.77997589111328 12.5)"><text x="33.77997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User C</text></g><g stroke-linecap="round" transform="translate(266.29577138136506 179.9832804250447) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.73 -1.8, 66.03 1.12, 116.69 0 M29 0 C48.27 -0.66, 67.33 -0.6, 116.69 0 M116.69 0 C134.8 -1.36, 144.95 9.05, 145.7 29 M116.69 0 C136.18 1.62, 145.55 10.45, 145.7 29 M145.7 29 C144.52 49.93, 144.14 71.32, 145.7 87.01 M145.7 29 C145.41 40.52, 146 53.24, 145.7 87.01 M145.7 87.01 C144.7 106.74, 136.27 116.19, 116.69 116.02 M145.7 87.01 C146.44 106.09, 136.62 115.4, 116.69 116.02 M116.69 116.02 C97.36 116.48, 79.23 116.05, 29 116.02 M116.69 116.02 C91.81 117.34, 66.31 117.26, 29 116.02 M29 116.02 C11.52 115.89, -0.8 104.96, 0 87.01 M29 116.02 C8.24 114.65, 2.18 108.4, 0 87.01 M0 87.01 C0.36 65.29, 1.45 39.31, 0 29 M0 87.01 C0.81 62.95, 1.04 40.01, 0 29 M0 29 C-0.54 8.2, 7.69 -0.5, 29 0 M0 29 C2.15 8.44, 10.45 -0.08, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(299.063463947283 212.9930460500447) rotate(0 40.079963684082045 25)"><text x="40.07996368408203" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Endpoint</text><text x="40.07996368408203" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 1</text></g><g stroke-linecap="round" transform="translate(262.65905263136506 334.3250773000447) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.67 -1.01, 69.05 -0.75, 116.69 0 M29 0 C47.06 0.03, 65.97 0.4, 116.69 0 M116.69 0 C136.16 1.41, 145.57 10.35, 145.7 29 M116.69 0 C137.66 -1.08, 147.3 8.62, 145.7 29 M145.7 29 C143.36 43.01, 143.42 60.84, 145.7 87.01 M145.7 29 C145.66 45.39, 146.28 61.47, 145.7 87.01 M145.7 87.01 C146.35 106.13, 136.54 115.48, 116.69 116.02 M145.7 87.01 C143.79 105.96, 136.12 115.67, 116.69 116.02 M116.69 116.02 C88.28 114.64, 62.13 116.66, 29 116.02 M116.69 116.02 C86.48 116.37, 54.01 115.74, 29 116.02 M29 116.02 C8.43 114.83, 1.89 108.13, 0 87.01 M29 116.02 C11.88 115.17, 1.58 106.52, 0 87.01 M0 87.01 C1.64 64.02, -1.03 45.45, 0 29 M0 87.01 C-0.55 73.88, -1.26 61.96, 0 29 M0 29 C1.87 8.6, 10.35 -0.07, 29 0 M0 29 C2.12 7.7, 9.33 1.38, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(292.5367458076346 367.3348429250447) rotate(0 42.96996307373048 25)"><text x="42.96996307373047" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Endpoint</text><text x="42.96996307373047" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 2</text></g><g stroke-linecap="round"><g transform="translate(102.216796875 155.53009688733954) rotate(0 75.00042475318256 27.34474347812572)"><path d="M-0.05 -1.05 C24.93 7.96, 124.77 44.57, 149.66 53.72 M-1.53 1.02 C23.28 10.17, 122.98 45.8, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 155.53009688733954) rotate(0 75.00042475318256 27.34474347812572)"><path d="M29.95 -1.01 C19.71 -1.6, 11.34 -2.27, -0.05 -1.05 M29.95 -1.01 C23.06 -0.4, 15.98 -0.78, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 155.53009688733954) rotate(0 75.00042475318256 27.34474347812572)"><path d="M22.91 18.27 C14.71 12.21, 8.33 6.08, -0.05 -1.05 M22.91 18.27 C17.72 14.42, 12.27 9.58, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 155.53009688733954) rotate(0 75.00042475318256 27.34474347812572)"><path d="M118.53 55 C125.29 54.37, 133.93 53.65, 148.53 54.75 M118.53 55 C125.56 55.74, 132.38 55.32, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 155.53009688733954) rotate(0 75.00042475318256 27.34474347812572)"><path d="M125.39 35.66 C130.16 40.51, 136.85 45.27, 148.53 54.75 M125.39 35.66 C130.75 40.87, 135.99 44.93, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(109.29109875076631 191.42763379428737) rotate(0 68.2763176758937 23.506619182639724)"><path d="M-1.04 0.85 C21.76 8.52, 114.14 38.72, 137.23 46.31 M0.61 0.25 C23.27 8.04, 113.88 39.63, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 191.42763379428737) rotate(0 68.2763176758937 23.506619182639724)"><path d="M28.94 -0.09 C20.26 1.11, 7.57 1.85, -1.04 0.85 M28.94 -0.09 C21.38 0.51, 14.68 -0.15, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 191.42763379428737) rotate(0 68.2763176758937 23.506619182639724)"><path d="M22.53 19.41 C15.96 14.09, 5.43 8.27, -1.04 0.85 M22.53 19.41 C16.51 15.18, 11.38 9.74, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 191.42763379428737) rotate(0 68.2763176758937 23.506619182639724)"><path d="M106.65 47.93 C118.16 49.17, 125.67 49.45, 136.64 47.47 M106.65 47.93 C113.77 47.66, 121.77 46.65, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 191.42763379428737) rotate(0 68.2763176758937 23.506619182639724)"><path d="M113.37 28.54 C122.67 36.25, 127.91 43.06, 136.64 47.47 M113.37 28.54 C118.87 33.08, 125.22 36.82, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(501.2775168549595 104.85210985563333) rotate(0 83.02038752157426 81.81011984149606)"><path d="M32 0 C69.21 -2.56, 110.41 -2.58, 134.04 0 M32 0 C66.28 0.56, 101.94 0.92, 134.04 0 M134.04 0 C155.96 -0.21, 164.49 8.91, 166.04 32 M134.04 0 C155.26 2.29, 167.4 8.59, 166.04 32 M166.04 32 C165.71 59.66, 167.5 85.24, 166.04 131.62 M166.04 32 C165.76 59.78, 164.76 87.83, 166.04 131.62 M166.04 131.62 C167.82 154.84, 153.87 163.25, 134.04 163.62 M166.04 131.62 C167.68 153.73, 155.51 162.17, 134.04 163.62 M134.04 163.62 C107.44 162.55, 78.79 164.24, 32 163.62 M134.04 163.62 C93.14 163.11, 53.07 163.88, 32 163.62 M32 163.62 C11.44 163.35, 0.28 153.83, 0 131.62 M32 163.62 C9.21 163.43, -0.29 153.12, 0 131.62 M0 131.62 C-0.48 99.91, 1.5 69.15, 0 32 M0 131.62 C-0.24 95.19, -1.81 58.42, 0 32 M0 32 C0.34 10.08, 9.62 0.54, 32 0 M0 32 C-0.45 8.7, 11.48 1.44, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(545.0879434390338 161.6622296971294) rotate(0 39.20996093749997 25)"><text x="39.2099609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Pub/Sub</text><text x="39.2099609375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">(Redis)</text></g><g stroke-linecap="round"><g transform="translate(416.528077661894 223.7635890076138) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M-0.14 -0.98 C11.58 -4.5, 59.22 -17.18, 71.08 -20.13 M-1.68 1.12 C9.89 -2.34, 58.49 -15.31, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 223.7635890076138) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M24.36 -18.29 C14.01 -10.78, 5.71 -4.65, -0.14 -0.98 M24.36 -18.29 C15.72 -12.83, 5.74 -5.74, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 223.7635890076138) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M29.75 1.52 C17.29 1.86, 7.04 0.83, -0.14 -0.98 M29.75 1.52 C19.17 -0.33, 7.21 -0.51, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 223.7635890076138) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M46.18 -1.41 C53.2 -6.43, 62.56 -12.89, 70.54 -18.93 M46.18 -1.41 C55.51 -8.32, 63.44 -14, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 223.7635890076138) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M40.62 -21.17 C49.81 -19.04, 61.18 -18.36, 70.54 -18.93 M40.62 -21.17 C51.96 -20.79, 61.92 -19.22, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(509.3756895131848 370.23316868338827) rotate(0 74.859375 60.775390625)"><path d="M30.39 0 C64.12 0.12, 98.47 -1.51, 119.33 0 M30.39 0 C56.12 -1.14, 82.98 -1.49, 119.33 0 M119.33 0 C139.68 1.76, 151.28 8.43, 149.72 30.39 M119.33 0 C140.17 2.16, 149.85 11.61, 149.72 30.39 M149.72 30.39 C147.47 44.3, 148.4 61.96, 149.72 91.16 M149.72 30.39 C149.94 45.73, 149.86 61.61, 149.72 91.16 M149.72 91.16 C150.59 109.42, 137.99 121.51, 119.33 121.55 M149.72 91.16 C150.27 109.85, 141.84 120.78, 119.33 121.55 M119.33 121.55 C93.96 120.39, 65.86 120.62, 30.39 121.55 M119.33 121.55 C88.52 121.3, 58.73 121.36, 30.39 121.55 M30.39 121.55 C8.55 123.17, 0.6 112.34, 0 91.16 M30.39 121.55 C9.11 123.78, 1.55 111.02, 0 91.16 M0 91.16 C-2.05 73.46, 0.27 57.12, 0 30.39 M0 91.16 C-1.21 75.93, 0.21 62.2, 0 30.39 M0 30.39 C-0.76 11.17, 8.85 0.2, 30.39 0 M0 30.39 C0.76 12.23, 12.3 -0.41, 30.39 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(543.6850919790052 406.00855930838827) rotate(0 40.54997253417969 25)"><text x="40.54997253417969" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update </text><text x="40.54997253417969" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round"><g transform="translate(581.4616099022137 349.23828125000006) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M0.56 0.77 C-0.13 -10.78, -3.92 -57.85, -4.9 -69.54 M-0.6 0.12 C-1.42 -11.23, -5.01 -56.82, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(581.4616099022137 349.23828125000006) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M6.53 -40.94 C4.85 -47.88, -0.1 -55.14, -5.99 -68.21 M6.53 -40.94 C3.86 -49.29, -0.1 -55.26, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(581.4616099022137 349.23828125000006) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M-13.92 -39.27 C-10.67 -46.71, -10.68 -54.38, -5.99 -68.21 M-13.92 -39.27 C-10.85 -48.23, -9.07 -54.68, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(220.73081350659237 28.005083523783725) rotate(0 -35.94140625 80.15175511310815)"><path d="M0.15 0.46 C-11.52 6.3, -58.21 8.95, -70.18 35.56 C-82.16 62.17, -71.62 139.47, -71.71 160.11" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(220.73081350659237 28.005083523783725) rotate(0 -35.94140625 80.15175511310815)"><path d="M-83.67 132.6 C-79.4 140.79, -77.08 148.46, -71.71 160.11" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(220.73081350659237 28.005083523783725) rotate(0 -35.94140625 80.15175511310815)"><path d="M-63.19 131.34 C-64.71 139.92, -68.2 147.94, -71.71 160.11" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(236.63315725659237 10) rotate(0 221.6498260498047 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. Create connection to (any) endpoint server</text></g><g transform="translate(219.75817251538143 56.1015625) rotate(0 188.69981384277344 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. Register subscription to that topic</text></g><g stroke-linecap="round"><g transform="translate(401.54331350659237 92.48828125) rotate(0 26.810546875 48.65234375)"><path d="M0.78 -0.56 C7.79 6.36, 33.28 25.93, 41.92 42.13 C50.57 58.33, 50.79 87.32, 52.64 96.65" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(401.54331350659237 92.48828125) rotate(0 26.810546875 48.65234375)"><path d="M40.12 71.72 C42.91 79.1, 46.32 84.3, 52.64 96.65" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(401.54331350659237 92.48828125) rotate(0 26.810546875 48.65234375)"><path d="M59.08 69.5 C56.44 77.64, 54.41 83.48, 52.64 96.65" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Pub/Sub</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">On the connection side, the following happens:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The client establishes a connection with an endpoint server.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The endpoint server registers the client with the Pub/Sub service, often by creating a topic, subscribing to it, and keeping a mapping from topics to the connections associated with them.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><span class="block"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 787.2079207913821 590.41796875">
  <!-- svg-source:excalidraw -->
  <!-- payload-type:application/vnd.excalidraw+json --><!-- payload-version:2 -->
  <defs>
    <style class="style-fonts">
      
      
      
    </style>
    
  </defs>
  <rect x="0" y="0" width="787.2079207913821" height="590.41796875" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(13.830078125 121.31235634991765) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.17 0.42, 51.14 -1.01, 63.84 0 M21.28 0 C30.76 0.69, 40.52 0.02, 63.84 0 M63.84 0 C78.99 -0.17, 83.74 6.34, 85.12 21.28 M63.84 0 C79.8 -1.84, 84.74 6.55, 85.12 21.28 M85.12 21.28 C83.13 33.07, 83.38 46.57, 85.12 65.24 M85.12 21.28 C85.09 33.45, 85.86 44.47, 85.12 65.24 M85.12 65.24 C86.52 78.52, 77.44 85.23, 63.84 86.52 M85.12 65.24 C84.31 77.17, 76.07 84.34, 63.84 86.52 M63.84 86.52 C51.77 85.86, 36.92 87.1, 21.28 86.52 M63.84 86.52 C50.97 86.2, 36.74 86.3, 21.28 86.52 M21.28 86.52 C7.18 86.22, 0.42 80.02, 0 65.24 M21.28 86.52 C7.08 86.23, -1.58 81.44, 0 65.24 M0 65.24 C0.71 52.48, -0.37 35.22, 0 21.28 M0 65.24 C1.22 56, 1.23 44.61, 0 21.28 M0 21.28 C1.38 7.24, 8.34 1.23, 21.28 0 M0 21.28 C-2.01 9.39, 4.84 -0.77, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(22.490646362304688 152.07212197491765) rotate(0 33.89997863769531 12.5)"><text x="33.89997863769531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User A</text></g><g stroke-linecap="round" transform="translate(12.87890625 252.42368447491765) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C34.57 0.25, 51.74 -0.99, 63.84 0 M21.28 0 C38.65 -0.21, 54.37 -0.51, 63.84 0 M63.84 0 C79.57 -1.6, 84.79 6.62, 85.12 21.28 M63.84 0 C77.94 -2, 84.46 5.24, 85.12 21.28 M85.12 21.28 C84.2 31.9, 86.23 42.14, 85.12 65.24 M85.12 21.28 C86.13 35.51, 85.14 50.01, 85.12 65.24 M85.12 65.24 C84.41 77.47, 76.32 84.62, 63.84 86.52 M85.12 65.24 C85.6 78.95, 79.87 88.35, 63.84 86.52 M63.84 86.52 C53.36 87.22, 42.32 87.09, 21.28 86.52 M63.84 86.52 C52.26 86.3, 40.81 86.74, 21.28 86.52 M21.28 86.52 C7.08 86.27, -1.37 81.18, 0 65.24 M21.28 86.52 C7.84 87.79, 0.07 80.52, 0 65.24 M0 65.24 C-1.36 46.75, -1.17 32.63, 0 21.28 M0 65.24 C0.27 48.21, 0.2 31.65, 0 21.28 M0 21.28 C-1.75 9.09, 5.13 -0.67, 21.28 0 M0 21.28 C0.56 5.11, 8.18 -1.38, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(20.82947540283203 283.18345009991765) rotate(0 34.60997772216797 12.5)"><text x="34.60997772216797" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User B</text></g><g stroke-linecap="round" transform="translate(10 378.4549344749177) rotate(0 42.560546875 43.259765625)"><path d="M21.28 0 C36.25 -1.46, 47.96 1.2, 63.84 0 M21.28 0 C34.47 -0.64, 45.95 -0.08, 63.84 0 M63.84 0 C77.95 -1.74, 84.55 5.48, 85.12 21.28 M63.84 0 C76.62 -1.57, 84.26 6.38, 85.12 21.28 M85.12 21.28 C86.11 36.18, 84.49 49.63, 85.12 65.24 M85.12 21.28 C84.64 31.49, 84.14 42.71, 85.12 65.24 M85.12 65.24 C85.54 79.01, 79.63 88.11, 63.84 86.52 M85.12 65.24 C83.98 79.88, 78.31 86.72, 63.84 86.52 M63.84 86.52 C49.15 84.97, 35.19 86.71, 21.28 86.52 M63.84 86.52 C51.71 86.52, 38.9 87.52, 21.28 86.52 M21.28 86.52 C7.74 87.62, 0.06 80.38, 0 65.24 M21.28 86.52 C9.22 86.38, -0.92 77.83, 0 65.24 M0 65.24 C2.04 56.7, -0.48 45.69, 0 21.28 M0 65.24 C-1.15 52.74, -1.26 37.9, 0 21.28 M0 21.28 C0.49 5.37, 8.04 -1.2, 21.28 0 M0 21.28 C-0.63 5.4, 4.82 -0.57, 21.28 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(18.78057098388672 409.2147000999177) rotate(0 33.77997589111328 12.5)"><text x="33.77997589111328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">User C</text></g><g stroke-linecap="round" transform="translate(266.29577138136506 192.96239920835058) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.73 -1.8, 66.03 1.12, 116.69 0 M29 0 C48.27 -0.66, 67.33 -0.6, 116.69 0 M116.69 0 C134.8 -1.36, 144.95 9.05, 145.7 29 M116.69 0 C136.18 1.62, 145.55 10.45, 145.7 29 M145.7 29 C144.52 49.93, 144.14 71.32, 145.7 87.01 M145.7 29 C145.41 40.52, 146 53.24, 145.7 87.01 M145.7 87.01 C144.7 106.74, 136.27 116.19, 116.69 116.02 M145.7 87.01 C146.44 106.09, 136.62 115.4, 116.69 116.02 M116.69 116.02 C97.36 116.48, 79.23 116.05, 29 116.02 M116.69 116.02 C91.81 117.34, 66.31 117.26, 29 116.02 M29 116.02 C11.52 115.89, -0.8 104.96, 0 87.01 M29 116.02 C8.24 114.65, 2.18 108.4, 0 87.01 M0 87.01 C0.36 65.29, 1.45 39.31, 0 29 M0 87.01 C0.81 62.95, 1.04 40.01, 0 29 M0 29 C-0.54 8.2, 7.69 -0.5, 29 0 M0 29 C2.15 8.44, 10.45 -0.08, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(299.063463947283 225.97216483335058) rotate(0 40.079963684082045 25)"><text x="40.07996368408203" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Endpoint</text><text x="40.07996368408203" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 1</text></g><g stroke-linecap="round" transform="translate(262.65905263136506 347.3041960833506) rotate(0 72.84765625000001 58.009765625)"><path d="M29 0 C47.67 -1.01, 69.05 -0.75, 116.69 0 M29 0 C47.06 0.03, 65.97 0.4, 116.69 0 M116.69 0 C136.16 1.41, 145.57 10.35, 145.7 29 M116.69 0 C137.66 -1.08, 147.3 8.62, 145.7 29 M145.7 29 C143.36 43.01, 143.42 60.84, 145.7 87.01 M145.7 29 C145.66 45.39, 146.28 61.47, 145.7 87.01 M145.7 87.01 C146.35 106.13, 136.54 115.48, 116.69 116.02 M145.7 87.01 C143.79 105.96, 136.12 115.67, 116.69 116.02 M116.69 116.02 C88.28 114.64, 62.13 116.66, 29 116.02 M116.69 116.02 C86.48 116.37, 54.01 115.74, 29 116.02 M29 116.02 C8.43 114.83, 1.89 108.13, 0 87.01 M29 116.02 C11.88 115.17, 1.58 106.52, 0 87.01 M0 87.01 C1.64 64.02, -1.03 45.45, 0 29 M0 87.01 C-0.55 73.88, -1.26 61.96, 0 29 M0 29 C1.87 8.6, 10.35 -0.07, 29 0 M0 29 C2.12 7.7, 9.33 1.38, 29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(292.5367458076346 380.3139617083506) rotate(0 42.96996307373048 25)"><text x="42.96996307373047" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Endpoint</text><text x="42.96996307373047" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server 2</text></g><g stroke-linecap="round"><g transform="translate(102.216796875 168.5092156706454) rotate(0 75.00042475318256 27.34474347812572)"><path d="M-0.05 -1.05 C24.93 7.96, 124.77 44.57, 149.66 53.72 M-1.53 1.02 C23.28 10.17, 122.98 45.8, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 168.5092156706454) rotate(0 75.00042475318256 27.34474347812572)"><path d="M29.95 -1.01 C19.71 -1.6, 11.34 -2.27, -0.05 -1.05 M29.95 -1.01 C23.06 -0.4, 15.98 -0.78, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 168.5092156706454) rotate(0 75.00042475318256 27.34474347812572)"><path d="M22.91 18.27 C14.71 12.21, 8.33 6.08, -0.05 -1.05 M22.91 18.27 C17.72 14.42, 12.27 9.58, -0.05 -1.05" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 168.5092156706454) rotate(0 75.00042475318256 27.34474347812572)"><path d="M118.53 55 C125.29 54.37, 133.93 53.65, 148.53 54.75 M118.53 55 C125.56 55.74, 132.38 55.32, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g><g transform="translate(102.216796875 168.5092156706454) rotate(0 75.00042475318256 27.34474347812572)"><path d="M125.39 35.66 C130.16 40.51, 136.85 45.27, 148.53 54.75 M125.39 35.66 C130.75 40.87, 135.99 44.93, 148.53 54.75" stroke="#ffffff" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(109.29109875076631 204.40675257759324) rotate(0 68.2763176758937 23.506619182639724)"><path d="M-1.04 0.85 C21.76 8.52, 114.14 38.72, 137.23 46.31 M0.61 0.25 C23.27 8.04, 113.88 39.63, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 204.40675257759324) rotate(0 68.2763176758937 23.506619182639724)"><path d="M28.94 -0.09 C20.26 1.11, 7.57 1.85, -1.04 0.85 M28.94 -0.09 C21.38 0.51, 14.68 -0.15, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 204.40675257759324) rotate(0 68.2763176758937 23.506619182639724)"><path d="M22.53 19.41 C15.96 14.09, 5.43 8.27, -1.04 0.85 M22.53 19.41 C16.51 15.18, 11.38 9.74, -1.04 0.85" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 204.40675257759324) rotate(0 68.2763176758937 23.506619182639724)"><path d="M106.65 47.93 C118.16 49.17, 125.67 49.45, 136.64 47.47 M106.65 47.93 C113.77 47.66, 121.77 46.65, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(109.29109875076631 204.40675257759324) rotate(0 68.2763176758937 23.506619182639724)"><path d="M113.37 28.54 C122.67 36.25, 127.91 43.06, 136.64 47.47 M113.37 28.54 C118.87 33.08, 125.22 36.82, 136.64 47.47" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(501.2775168549595 117.8312286389392) rotate(0 83.02038752157426 81.81011984149606)"><path d="M32 0 C69.21 -2.56, 110.41 -2.58, 134.04 0 M32 0 C66.28 0.56, 101.94 0.92, 134.04 0 M134.04 0 C155.96 -0.21, 164.49 8.91, 166.04 32 M134.04 0 C155.26 2.29, 167.4 8.59, 166.04 32 M166.04 32 C165.71 59.66, 167.5 85.24, 166.04 131.62 M166.04 32 C165.76 59.78, 164.76 87.83, 166.04 131.62 M166.04 131.62 C167.82 154.84, 153.87 163.25, 134.04 163.62 M166.04 131.62 C167.68 153.73, 155.51 162.17, 134.04 163.62 M134.04 163.62 C107.44 162.55, 78.79 164.24, 32 163.62 M134.04 163.62 C93.14 163.11, 53.07 163.88, 32 163.62 M32 163.62 C11.44 163.35, 0.28 153.83, 0 131.62 M32 163.62 C9.21 163.43, -0.29 153.12, 0 131.62 M0 131.62 C-0.48 99.91, 1.5 69.15, 0 32 M0 131.62 C-0.24 95.19, -1.81 58.42, 0 32 M0 32 C0.34 10.08, 9.62 0.54, 32 0 M0 32 C-0.45 8.7, 11.48 1.44, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(545.0879434390338 174.64134848043525) rotate(0 39.20996093749997 25)"><text x="39.2099609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Pub/Sub</text><text x="39.2099609375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">(Redis)</text></g><g stroke-linecap="round"><g transform="translate(416.528077661894 236.74270779091967) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M-0.14 -0.98 C11.58 -4.5, 59.22 -17.18, 71.08 -20.13 M-1.68 1.12 C9.89 -2.34, 58.49 -15.31, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 236.74270779091967) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M24.36 -18.29 C14.01 -10.78, 5.71 -4.65, -0.14 -0.98 M24.36 -18.29 C15.72 -12.83, 5.74 -5.74, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 236.74270779091967) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M29.75 1.52 C17.29 1.86, 7.04 0.83, -0.14 -0.98 M29.75 1.52 C19.17 -0.33, 7.21 -0.51, -0.14 -0.98" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 236.74270779091967) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M46.18 -1.41 C53.2 -6.43, 62.56 -12.89, 70.54 -18.93 M46.18 -1.41 C55.51 -8.32, 63.44 -14, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(416.528077661894 236.74270779091967) rotate(0 35.15507535168621 -9.741174993732272)"><path d="M40.62 -21.17 C49.81 -19.04, 61.18 -18.36, 70.54 -18.93 M40.62 -21.17 C51.96 -20.79, 61.92 -19.22, 70.54 -18.93" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(509.3756895131848 383.21228746669414) rotate(0 74.859375 60.775390625)"><path d="M30.39 0 C64.12 0.12, 98.47 -1.51, 119.33 0 M30.39 0 C56.12 -1.14, 82.98 -1.49, 119.33 0 M119.33 0 C139.68 1.76, 151.28 8.43, 149.72 30.39 M119.33 0 C140.17 2.16, 149.85 11.61, 149.72 30.39 M149.72 30.39 C147.47 44.3, 148.4 61.96, 149.72 91.16 M149.72 30.39 C149.94 45.73, 149.86 61.61, 149.72 91.16 M149.72 91.16 C150.59 109.42, 137.99 121.51, 119.33 121.55 M149.72 91.16 C150.27 109.85, 141.84 120.78, 119.33 121.55 M119.33 121.55 C93.96 120.39, 65.86 120.62, 30.39 121.55 M119.33 121.55 C88.52 121.3, 58.73 121.36, 30.39 121.55 M30.39 121.55 C8.55 123.17, 0.6 112.34, 0 91.16 M30.39 121.55 C9.11 123.78, 1.55 111.02, 0 91.16 M0 91.16 C-2.05 73.46, 0.27 57.12, 0 30.39 M0 91.16 C-1.21 75.93, 0.21 62.2, 0 30.39 M0 30.39 C-0.76 11.17, 8.85 0.2, 30.39 0 M0 30.39 C0.76 12.23, 12.3 -0.41, 30.39 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(543.6850919790052 418.98767809169414) rotate(0 40.54997253417969 25)"><text x="40.54997253417969" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Update </text><text x="40.54997253417969" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Server</text></g><g stroke-linecap="round"><g transform="translate(581.4616099022137 362.2174000333059) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M0.56 0.77 C-0.13 -10.78, -3.92 -57.85, -4.9 -69.54 M-0.6 0.12 C-1.42 -11.23, -5.01 -56.82, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(581.4616099022137 362.2174000333059) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M6.53 -40.94 C4.85 -47.88, -0.1 -55.14, -5.99 -68.21 M6.53 -40.94 C3.86 -49.29, -0.1 -55.26, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(581.4616099022137 362.2174000333059) rotate(0 -2.3249900846509206 -34.572265625)"><path d="M-13.92 -39.27 C-10.67 -46.71, -10.68 -54.38, -5.99 -68.21 M-13.92 -39.27 C-10.85 -48.23, -9.07 -54.68, -5.99 -68.21" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(415.1226546781009 526.93359375) rotate(0 64.796875 -103.48242187500003)"><path d="M-0.56 0.23 C7.5 -20.35, 26.76 -89.43, 48.6 -123.79 C70.44 -158.15, 116.93 -191.99, 130.48 -205.93" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(415.1226546781009 526.93359375) rotate(0 64.796875 -103.48242187500003)"><path d="M116.25 -179.51 C121.3 -189.86, 127.24 -195.04, 130.48 -205.93" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(415.1226546781009 526.93359375) rotate(0 64.796875 -103.48242187500003)"><path d="M102.6 -194.84 C112.02 -200.17, 122.36 -200.4, 130.48 -205.93" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(356.8882796781009 555.41796875) rotate(0 210.15982055664062 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. Publish a message to the relevant topic</text></g><g stroke-linecap="round"><g transform="translate(463.4312484281009 45.375) rotate(0 -19.626953125 79.716796875)"><path d="M-0.83 -1.2 C-7.54 12.3, -38.9 54.8, -40.22 81.72 C-41.54 108.64, -13.96 147.58, -8.74 160.33" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(463.4312484281009 45.375) rotate(0 -19.626953125 79.716796875)"><path d="M-31.07 140.29 C-26.14 144.94, -15.42 152.81, -8.74 160.33" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(463.4312484281009 45.375) rotate(0 -19.626953125 79.716796875)"><path d="M-12.96 130.63 C-13.49 138.1, -8.28 148.9, -8.74 160.33" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(223.0210921781009 10) rotate(0 212.26979064941406 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. Subscribed servers receive the message.</text></g><g transform="translate(72.9390609281009 69.8203125) rotate(0 147.9898681640625 25)"><text x="147.9898681640625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3. Message is passed through</text><text x="147.9898681640625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">existing connection</text></g><g stroke-linecap="round"><g transform="translate(219.2007796781009 125.57421875) rotate(0 -18.28125 45.98828125)"><path d="M-0.35 -0.69 C-6.61 14.69, -30.62 77.2, -36.64 92.73" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(219.2007796781009 125.57421875) rotate(0 -18.28125 45.98828125)"><path d="M-36.06 62.74 C-37.32 73.98, -35.12 85.67, -36.64 92.73" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(219.2007796781009 125.57421875) rotate(0 -18.28125 45.98828125)"><path d="M-16.92 70.13 C-25.46 78.51, -30.52 87.4, -36.64 92.73" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask></svg></span></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Pub/Sub Message Sending</span></div></div></div></div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">On the update broadcasting side, the following happens:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Updates are pushed to the Pub/Sub service to the relevant topic.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The Pub/Sub service broadcasts the update to all clients subscribed to that topic.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The endpoint server receives the update, looks up which client is subscribed to that topic, and forwards the update to that client over the existing connection.</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For our chat application, we'll create a topic for each user. When the client connects to our endpoint, it will subscribe to the topic associated with the connected user. When we need to send messages, we publish them to that user's topic and the Pub/Sub service will broadcast them to all of the subscribed servers - then these servers will forward them to the appropriate clients over the existing connections.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="advantages-7">Advantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Managing load on endpoint servers is easy, we can use a simple load balancer with "least connections" strategy.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">We can broadcast updates to a large number of clients efficiently.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">We minimize the proliferation of state through our system.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="disadvantages-7">Disadvantages</h5><ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">We don't know whether subscribers are connected to the endpoint server, or when they disconnect.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">The Pub/Sub service becomes a single point of failure and bottleneck.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">We introduce an additional layer of indirection which can add to latency.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">There exist many-to-many connections between Pub/Sub service hosts and the endpoint servers.</div></li>
</ul><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="when-to-use-pubsub">When to Use Pub/Sub</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Pub/Sub is a great choice when you need to broadcast updates to a large number of clients. It's easy to set up and requires little overhead on the part of the endpoint servers. The latency impact is minimal (&lt;10ms). If you don't need to respond to connect/disconnect events or maintain a lot of state associated with a given client, this is a great approach.</div><h5 class="MuiTypography-root MuiTypography-h6 mui-13de2kc" id="things-to-discuss-in-your-interview-7">Things to Discuss in Your Interview</h5><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">If you're using a pub/sub model, you'll probably need to talk about the single point of failure and bottleneck of the pub/sub service. Redis cluster is a popular way to scale pub/sub service which involves sharding the subscriptions by their key across multiple hosts. This scales up the number of subscriptions you can support and the throughput.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Introducing a cluster for the Pub/Sub component means you'll manage the many-to-many connections between the pub/sub service and the endpoint servers (each endpoint server will be connected to all hosts in the cluster). In some cases this can be managed by carefully choosing topics to partition the service, but in many cases the number of nodes in the cluster is small.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For inbound connections to the endpoint servers, you'll probably want to use a load balancer with a "least connections" strategy. This will help ensure that you're distributing the load across the servers in the cluster. Since the connection itself (and the messages sent across it) are effectively the only resource being consumed, load balancing based on connections is a great way to manage the load.</div><h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="overview-of-server-side-pushpull">Overview of Server-Side Push/Pull</h3><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">As with the client connections, on the server-side we have multiple options for how we can propagate updates to the endpoint servers (and eventually to the clients). If you can use a polling model, it's still the easiest approach! If polling isn't possible, a Pub/Sub model is a great first choice which minimizes the amount of state we need to manage in the system, avoids detailed questions about scaling orchestration, and provides a simple way to broadcast updates to a large number of clients. Pub/Sub will work generally across applications, but consistent hashing is a more specialized approach that you should reserve for specific situations.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">You might choose a consistent hashing approach if (a) you are creating deep infra components, or (b) you need to maintain a lot of state associated with a given client. If your connections require a substantial amount of resources to maintain, by coupling the end-user connections to the single server which hosts them.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">In short:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Prefer polling if possible!</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">If you do need real-time updates, consider Pub/Sub. It applies to most use-cases and is easy to implement.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Finally, if your application requires a lot of state/resources for each connection, consistent hashing will provide a more optimal use of resources.</div></li>
</ol><h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="wrapping-up">Wrapping Up</h2><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">When it comes to real-time updates in System Design interviews, you have a lot of different options! You can break down the problem into two hops:</div><ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">How do clients connect and receive updates from my system?</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">How do I trigger updates from the source and get them to the clients?</div></li>
</ol><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">The easiest solution is polling. If you can get away with it, use it! Only consider the other options if you have a specific need that requires a more complex solution. Exhaust other interesting aspects of the system first to avoid running out of time discussing peripheral details.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For getting updates to the clients, your options include long-polling, SSE, WebSockets, and WebRTC. The right choice depends on your system's needs. SSE and WebSockets are the most general solution and apply to most use-cases, if you're forced to choose - go with them. Knowing about the pros and cons of each will give you the flexibility to make the best design decision for your system and, more importantly, to help communicate the tradeoffs to your interviewer.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">For triggering updates from the source, you can either use Pub/Sub or consistent hashing. Generally speaking, prefer Pub/Sub for ease of implementation, flexibility, and the limited number of moving parts and edge cases that your interviewer might need you to discuss. If you end up with an application where each connection requires a lot of resources and state: consider whether you would be better served with consistent hashing.</div><div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">Overall real-time update applications bring a lot of interesting complexity to system design: low latency, scaling, networking issues, and the need to manage multiple services and state. By learning about the options available to you, you'll be able to make the best design decision for your system and communicate your reasoning to your interviewer. Good luck!</div></div>
<section data-footnotes="true" class="footnotes"><h2 class="MuiTypography-root MuiTypography-h3 sr-only mui-1rzqq5q" id="footnote-label">Footnotes</h2>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei" id="user-content-fn-dns"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">DNS technically can run over TCP or UDP, but we'll exclude that for simplicity in this illustration. <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover data-footnote-backref mui-pvpazu" data-footnote-backref="" aria-label="Back to reference 1" href="#user-content-fnref-dns" target="_self" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">↩</a></div>
</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei" id="user-content-fn-sse"><div class="MuiBox-root mui-0">
<div class="MuiTypography-root MuiTypography-body1 mui-1p1f0ag">We use SSE extensively for Hello Interview and the amount of time we've spent dealing with networking edge cases is mind boggling. <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover data-footnote-backref mui-pvpazu" data-footnote-backref="" aria-label="Back to reference 2" href="#user-content-fnref-sse" target="_self" rel="noopener noreferrer" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">↩</a></div>
</div></li>
</ol>
</section>
</body>
</html>