<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Cap Theorem</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<body>
    <div id="markdown" class="mui-46nw7a"><div><div class="flex flex-col gap-2 md:gap-4"><div class="flex flex-col"><h6 class="MuiTypography-root MuiTypography-h6 mui-zfm63x">Deep Dives</h6><h1 class="MuiTypography-root MuiTypography-h2 mui-161snwm">CAP Theorem</h1><p class="MuiTypography-root MuiTypography-body2 mui-45a2r">Master the fundamental tradeoffs between consistency and availability in distributed systems.</p></div></div><hr class="MuiDivider-root MuiDivider-fullWidth mui-1rvhejo"></div>
<div class="mb-4"><iframe class="w-full aspect-video" src="https://www.youtube.com/embed/VdrEq0cODu4" title="CAP Theorem in System Design Interviews" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="intro">Intro</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">CAP theorem is routinely a point of confusion for candidates, but it is foundational to how you approach your design in an interview.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">We'll explain what it is, how it works, and the practical tradeoffs you need to make when considering CAP theorem during the non-functional requirements phase of a system design interview.</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="what-is-cap-theorem">What is CAP Theorem?</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">At its core, CAP theorem states that in a distributed system, you can only have two out of three of the following properties:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Consistency</strong>: All nodes see the same data at the same time. When a write is made to one node, all subsequent reads from any node will return that updated value.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Availability</strong>: Every request to a non-failing node receives a response, without the guarantee that it contains the most recent version of the data.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Partition Tolerance</strong>: The system continues to operate despite arbitrary message loss or failure of part of the system (i.e., network partitions between nodes).</div></li>
</ul>
<div class="my-6"><div class="MuiBox-root mui-1cdyrx9"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Note that consistency in the context of the CAP theorem is quite different from the consistency guaranteed by ACID databases. Confusing, I know.</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Here's the key insight that makes CAP theorem much simpler to reason about in interviews: In any distributed system, partition tolerance is a must. Network failures will happen, and your system needs to handle them.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">This means that in practice, CAP theorem really boils down to a single choice: Do you prioritize consistency or availability when a network partition occurs?</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Let's explore what this means through a practical example.</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="understanding-cap-theorem-through-an-example">Understanding CAP Theorem Through an Example</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Imagine you're running a website with two servers - one in the USA and one in Europe. When a user updates their public profile (let's say their display name), here's what happens:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">User A connects to their closest server (USA) and updates their name</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">This update is replicated to the server in Europe</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">When User B in Europe views User A's profile, they see the updated name</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><object data="/_next/static/f407988d6c0741776326ae3d242165e6.svg" type="image/svg+xml"></object></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Basic Replication</span></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Everything works smoothly until we encounter a network partition - the connection between our USA and Europe servers goes down. Now we have a critical decision to make:</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">When User B tries to view User A's profile, should we:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Option A: Return an error because we can't guarantee the data is up-to-date (choosing consistency)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Option B: Show potentially stale data (choosing availability)</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><div class="MuiBox-root mui-10khgmf" style="cursor: pointer;"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-column mui-1tdxmx0"><div class="MuiGrid-root MuiGrid-item mui-tolxbf"><div class="relative w-full"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall mui-wksd04" tabindex="0" type="button" aria-label="zoom-in"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-10dohqv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"></path></svg><span class="MuiTouchRipple-root mui-w0pj6f"></span></button><span class="w-full h-full"><object data="/_next/static/0e9f223ad73955c1f17f7e417d8c091d.svg" type="image/svg+xml"></object></span></div></div><div class="MuiGrid-root MuiGrid-item mui-1wxaqej"><span class="MuiTypography-root MuiTypography-caption mui-17cupi8">Network Partition</span></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">This is where CAP theorem becomes practical - we must choose between consistency and availability.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">In the case, the answer is rather clear: we would rather show a user in Europe the old name of User A, rather than show an error. Seeing a stale name is better than seeing no name at all.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Let's look at some other real-world examples of this choice:</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="when-to-choose-consistency">When to Choose Consistency</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Some systems absolutely require consistency, even at the cost of availability:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Ticket Booking Systems</strong>: Imagine if User A booked seat 6A on a flight, but due to a network partition, User B sees the seat as available and books it too. You'd have two people showing up for the same seat!</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>E-commerce Inventory</strong>: If Amazon has one toothbrush left and the system shows it as available to multiple users during a network partition, they could oversell their inventory.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Financial Systems</strong>: Stock trading platforms need to show accurate, up-to-date order books. Showing stale data could lead to trades at incorrect prices.</div></li>
</ol>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="when-to-choose-availability">When to Choose Availability</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">The majority of systems can tolerate some inconsistency and should prioritize availability. In these cases, eventual consistency is fine. Meaning, the system will eventually become consistent, but it may take a few seconds or minutes.</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Social Media</strong>: If User A updates their profile picture, it's perfectly fine if User B sees the old picture for a few minutes.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Content Platforms (like Netflix)</strong>: If someone updates a movie description, showing the old description temporarily to some users isn't catastrophic.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Review Sites (like Yelp)</strong>: If a restaurant updates their hours, showing slightly outdated information briefly is better than showing no information at all.</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">The key question to ask yourself is: "Would it be catastrophic if users briefly saw inconsistent data?" If the answer is yes, choose consistency. If not, choose availability.</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="cap-theorem-in-system-design-interviews">CAP Theorem in System Design Interviews</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Understanding CAP theorem matters because it should be one of the first things you discuss in a system design interview as it will have a meaningful impact on how you design your system.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">In a system design interview, you typically begin by:</div>
<ol style="list-style: outside decimal;">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Aligning on functional requirements (features)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Defining non-functional requirements (system qualities)</div></li>
</ol>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">When discussing non-functional requirements, CAP theorem should be your starting point. You need to ask the all important question: "Does this system need to prioritize consistency or availability?"</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">If you prioritize consistency, your design might include:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Distributed Transactions</strong>: Ensuring multiple data stores (like cache and database) remain in sync through two-phase commit protocols. This adds complexity but guarantees consistency across all nodes. This means users will likely experience higher latency as the system ensures data is consistent across all nodes.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Single-Node Solutions</strong>: Using a single database instance to avoid propagation issues entirely. While this limits scalability, it eliminates consistency challenges by having a single source of truth.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Technology Choices</strong>:
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Traditional RDBMSs (<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/postgresql" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">PostgreSQL</a>, MySQL)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0">Google Spanner</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/dynamodb" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">DynamoDB</a> (in strong consistency mode)</div></li>
</ul>
</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">On the other hand, if you prioritize availability, your design can include:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Multiple Replicas</strong>: Scaling to additional read replicas with asynchronous replication, allowing reads to be served from any replica even if it's slightly behind. This improves read performance and availability at the cost of potential staleness.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Change Data Capture (CDC)</strong>: Using CDC to track changes in the primary database and propagate them asynchronously to replicas, caches, and other systems. This allows the primary system to remain available while updates flow through the system eventually.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Technology Choices</strong>:
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/cassandra" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Cassandra</a></div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/dynamodb" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">DynamoDB</a> (in multiple availability zone configuration)</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/deep-dives/redis" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Redis</a> clusters</div></li>
</ul>
</div></li>
</ul>
<div class="my-6"><div class="MuiBox-root mui-zfu8o1"><div class="MuiBox-root mui-zvu67g"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Most modern distributed databases offer configuration options for both consistency and availability. The key is understanding which to choose for your use case.</div></div></div></div></div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="advanced-cap-theorem-considerations">Advanced CAP Theorem Considerations</h2>
<div class="my-6"><div class="MuiBox-root mui-1cdyrx9"><div class="MuiBox-root mui-3t6lyr"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="w-6 h-6 heroicon-sw-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="MuiBox-root mui-79elbk"><div style="overflow: hidden; max-height: 300px;"><div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">If you're a junior or mid-level candidate, the previous sections are sufficient for most interviews. The following section covers more advanced concepts that might be relevant for senior and staff-level discussions.</div></div></div></div></div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">As systems grow in complexity, the choice between consistency and availability isn't always binary. Modern distributed systems often require nuanced approaches that vary by feature and use case. Let's explore these advanced considerations.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Real-world systems frequently need both availability and consistency - just for different features. Let's look at two examples:</div>
<h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="example-1-ticketmaster">Example 1: Ticketmaster</h4>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/ticketmaster" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Ticketmaster</a> needs different consistency models for different features within the same system:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Booking a seat at an event</strong>: Requires strong consistency to prevent double-booking as we discussed in the previous section.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Viewing event details</strong>: Can prioritize availability (showing slightly outdated event descriptions is acceptable)</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">In an interview, you might say: "For this ticketing system, I'll prioritize consistency for booking transactions but optimize for availability when users are browsing and viewing events."</div>
<h4 class="MuiTypography-root MuiTypography-h5 mui-1jefea8" id="example-2-tinder">Example 2: Tinder</h4>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">Similarly, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-pvpazu" href="https://www.hellointerview.com/learn/system-design/problem-breakdowns/tinder" target="_blank" rel="noopener noreferrer" linkcomponent="next/link" style="color: rgb(99, 115, 129); cursor: pointer; font-weight: 600; text-decoration: underline;">Tinder</a> has mixed requirements:</div>
<ul class="MuiList-root MuiList-padding mui-sedpvs">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Matching</strong>: Needs consistency. If both users swipe right at about the same time, they should both see the match immediately.</div></li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ioa8ei"><div class="MuiBox-root mui-0"><strong>Viewing a users profile</strong>: Can prioritize availability. Seeing a slightly outdated profile picture is acceptable if a user just updated their image.</div></li>
</ul>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">In an interview, you might say: "For this dating app, I'll prioritize consistency for matching but optimize for availability when users are viewing profiles."</div>
<h3 class="MuiTypography-root MuiTypography-h4 mui-hkpafq" id="different-levels-of-consistency">Different Levels of Consistency</h3>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">When discussing consistency in CAP theorem, people usually mean strong consistency - where all reads reflect the most recent write. However, understanding the spectrum of consistency models can help you make more nuanced design decisions:</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><strong>Strong Consistency</strong>: All reads reflect the most recent write. This is the most expensive consistency model in terms of performance, but is necessary for systems that require absolute accuracy like bank account balances. This is what we have been discussing so far.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><strong>Causal Consistency</strong>: Related events appear in the same order to all users. This ensures logical ordering of dependent actions, such as ensuring comments on a post must appear after the post itself.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><strong>Read-your-own-writes Consistency</strong>: Users always see their own updates immediately, though other users might see older versions. This is commonly used in social media platforms where users expect to see their own profile updates right away.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c"><strong>Eventual Consistency</strong>: The system will become consistent over time but may temporarily have inconsistencies. This is the most relaxed form of consistency and is often used in systems like DNS where temporary inconsistencies are acceptable. This is the default behavior of most distributed databases and what we are implicitly choosing when we prioritize availability.</div>
<h2 class="MuiTypography-root MuiTypography-h3 mui-1rzqq5q" id="conclusion">Conclusion</h2>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">CAP theorem is important. It sets the stage for how you approach your design in an interview and should not be overlooked.</div>
<div class="MuiTypography-root MuiTypography-body1 mui-1qj780c">But it doesn't need to be complicated. Just ask yourself: "Does every read need to read the most recent write?" If the answer is yes, you need to prioritize consistency. If the answer is no, you can prioritize availability.</div></div>
</body>
</html>